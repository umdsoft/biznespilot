import{b as x,C as c,z as t,B as u,D as b,H as s,A as i,F as l,d as N,a as U,r as f,v as M,x as B,y as k,G as j,I,J as _,L as S,E as A,R as H,K as T}from"./chunk-KPSVwAyv.js";import{r as w}from"./chunk-BVrjkT6E.js";import{_ as E}from"./chunk-Cl7LUcIW.js";import{u as z}from"./app-Bx12lrZQ.js";import{v as R,c as q}from"./chunk-DMP3tXW5.js";import{_ as G}from"./chunk-DYNXFE35.js";import{a as J}from"./chunk-BgShz32H.js";import"./chunk-BvkwlYlD.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const K={class:"flex items-start gap-4"},O={class:"flex-1 min-w-0"},P={class:"flex items-center gap-2 mb-1"},Q={key:0,class:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium"},W={class:"font-semibold text-gray-900"},X={class:"text-sm text-gray-600 mt-1 line-clamp-2"},Y={key:0,class:"mt-2"},Z={class:"text-sm text-gray-500 ml-2"},tt={key:1,class:"mt-3"},et={class:"text-sm font-medium text-indigo-600 hover:text-indigo-800"},st={__name:"InsightCard",props:{insight:{type:Object,required:!0},clickable:{type:Boolean,default:!0}},emits:["click"],setup(o){const{t:e}=z(),h=o,C=x(()=>{const n=h.insight.type;return{growth:"bg-green-100",decline:"bg-red-100",opportunity:"bg-yellow-100",info:"bg-blue-100"}[n]||"bg-gray-100"}),a=x(()=>{const n=h.insight.type;return{growth:"text-green-600",decline:"text-red-600",opportunity:"text-yellow-600",info:"text-blue-600"}[n]||"text-gray-600"}),m=x(()=>{const n=h.insight.type;return{growth:"bg-green-100 text-green-700",decline:"bg-red-100 text-red-700",opportunity:"bg-yellow-100 text-yellow-700",info:"bg-blue-100 text-blue-700"}[n]||"bg-gray-100 text-gray-700"}),y=x(()=>{const n=h.insight.type;return{growth:e("dashboard.insight.type_growth"),decline:e("dashboard.insight.type_decline"),opportunity:e("dashboard.insight.type_opportunity"),info:e("dashboard.insight.type_info")}[n]||n}),p=x(()=>{const n=h.insight.metric_change;return n>0?"text-green-600":n<0?"text-red-600":"text-gray-600"});return(n,r)=>(l(),c("div",{class:u(["bg-white rounded-lg border p-5 hover:shadow-md transition-shadow",{"cursor-pointer":o.clickable}]),onClick:r[0]||(r[0]=$=>o.clickable&&n.$emit("click",o.insight))},[t("div",K,[t("div",{class:u([C.value,"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0"])},[o.insight.type==="growth"?(l(),c("svg",{key:0,class:u(["w-6 h-6",a.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[1]||(r[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])],2)):o.insight.type==="decline"?(l(),c("svg",{key:1,class:u(["w-6 h-6",a.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[2]||(r[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)])],2)):o.insight.type==="opportunity"?(l(),c("svg",{key:2,class:u(["w-6 h-6",a.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[3]||(r[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},null,-1)])],2)):(l(),c("svg",{key:3,class:u(["w-6 h-6",a.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...r[4]||(r[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])],2))],2),t("div",O,[t("div",P,[t("span",{class:u([m.value,"px-2 py-0.5 rounded-full text-xs font-medium"])},s(y.value),3),o.insight.priority==="high"?(l(),c("span",Q,s(i(e)("dashboard.insight.important")),1)):b("",!0)]),t("h3",W,s(o.insight.title),1),t("p",X,s(o.insight.description),1),o.insight.metric_value?(l(),c("div",Y,[t("span",{class:u(["text-lg font-bold",p.value])},s(o.insight.metric_change>0?"+":"")+s(o.insight.metric_change)+"% ",3),t("span",Z,s(o.insight.metric_label),1)])):b("",!0),o.insight.action_text?(l(),c("div",tt,[t("button",et,s(o.insight.action_text)+" â†’ ",1)])):b("",!0)])])],2))}},it={class:"flex items-center justify-between"},ot={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},nt=["disabled"],rt={class:"py-6"},at={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},lt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},dt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},ct={class:"text-sm text-gray-500 dark:text-gray-400"},gt={class:"text-2xl font-bold text-gray-900 dark:text-white"},ut={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-blue-200 dark:border-blue-800"},ht={class:"text-sm text-blue-600 dark:text-blue-400"},mt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},yt={class:"text-sm text-gray-500 dark:text-gray-400 capitalize"},pt={class:"text-2xl font-bold text-gray-900 dark:text-white"},xt={class:"flex flex-wrap gap-4 mb-6"},bt={value:"all"},vt={value:"trend"},ft={value:"anomaly"},kt={value:"recommendation"},_t={value:"opportunity"},wt={value:"warning"},Ct={value:"celebration"},$t={value:"all"},Vt={value:"revenue"},Bt={value:"leads"},Mt={value:"marketing"},jt={value:"advertising"},It={value:"sales"},St={class:"inline-flex items-center text-sm text-gray-700 dark:text-gray-300"},At={class:"space-y-4"},zt={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Ft={class:"text-gray-500 dark:text-gray-400"},Dt={key:0,class:"mt-6"},Lt={class:"p-6"},Nt={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},Ut={class:"mb-4"},Ht={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Tt=["placeholder"],Et={class:"flex justify-end space-x-3"},ge=N({__name:"Index",props:{insights:{},stats:{},filters:{}},setup(o){const{t:e}=z(),h=o,C=x(()=>({trend:e("insights.filter.trend"),anomaly:e("insights.filter.anomaly"),recommendation:e("insights.filter.recommendation"),opportunity:e("insights.filter.opportunity"),warning:e("insights.filter.warning"),celebration:e("insights.filter.celebration")})),a=U({...h.filters}),m=f(!1),y=f(!1),p=f(null),n=f("");function r(){w.get("/business/insights",{type:a.type!=="all"?a.type:void 0,category:a.category!=="all"?a.category:void 0,active_only:a.active_only},{preserveState:!0,preserveScroll:!0})}async function $(){m.value=!0,w.post("/business/insights/regenerate",{},{preserveScroll:!0,onFinish:()=>{m.value=!1}})}function F(v){p.value=v,n.value="",y.value=!0}async function D(){p.value&&w.post(`/business/insights/${p.value}/acted`,{action_taken:n.value},{preserveScroll:!0,onSuccess:()=>{y.value=!1,p.value=null}})}async function L(v){confirm(e("insights.dismiss.confirm"))&&w.post(`/business/insights/${v}/dismiss`,{},{preserveScroll:!0})}return(v,g)=>(l(),M(E,{title:i(e)("insights.title")},{header:B(()=>[t("div",it,[t("h2",ot,s(i(e)("insights.title")),1),t("button",{onClick:$,disabled:m.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:opacity-50"},[k(i(q),{class:u(["w-4 h-4 mr-2",m.value?"animate-spin":""])},null,8,["class"]),A(" "+s(m.value?i(e)("insights.regenerating"):i(e)("insights.regenerate")),1)],8,nt)])]),default:B(()=>[t("div",rt,[t("div",at,[t("div",lt,[t("div",dt,[t("p",ct,s(i(e)("insights.stats.total")),1),t("p",gt,s(o.stats.total),1)]),t("div",ut,[t("p",ht,s(i(e)("insights.stats.active")),1),t("p",mt,s(o.stats.active),1)]),(l(!0),c(j,null,I(o.stats.by_type,(d,V)=>(l(),c("div",{key:V,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},[t("p",yt,s(C.value[V]||V),1),t("p",pt,s(d),1)]))),128))]),t("div",xt,[_(t("select",{"onUpdate:modelValue":g[0]||(g[0]=d=>a.type=d),onChange:r,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[t("option",bt,s(i(e)("insights.filter.all_types")),1),t("option",vt,s(i(e)("insights.filter.trend")),1),t("option",ft,s(i(e)("insights.filter.anomaly")),1),t("option",kt,s(i(e)("insights.filter.recommendation")),1),t("option",_t,s(i(e)("insights.filter.opportunity")),1),t("option",wt,s(i(e)("insights.filter.warning")),1),t("option",Ct,s(i(e)("insights.filter.celebration")),1)],544),[[S,a.type]]),_(t("select",{"onUpdate:modelValue":g[1]||(g[1]=d=>a.category=d),onChange:r,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[t("option",$t,s(i(e)("insights.filter.all_categories")),1),t("option",Vt,s(i(e)("insights.filter.revenue")),1),t("option",Bt,s(i(e)("insights.filter.leads")),1),t("option",Mt,s(i(e)("insights.filter.marketing")),1),t("option",jt,s(i(e)("insights.filter.advertising")),1),t("option",It,s(i(e)("insights.filter.sales")),1)],544),[[S,a.category]]),t("label",St,[_(t("input",{"onUpdate:modelValue":g[2]||(g[2]=d=>a.active_only=d),type:"checkbox",onChange:r,class:"rounded border-gray-300 dark:border-gray-600 text-blue-600 mr-2"},null,544),[[H,a.active_only]]),A(" "+s(i(e)("insights.filter.active_only")),1)])]),t("div",At,[(l(!0),c(j,null,I(o.insights.data,d=>(l(),M(st,{key:d.id,insight:d,onAct:F,onDismiss:L},null,8,["insight"]))),128)),o.insights.data.length===0?(l(),c("div",zt,[k(i(J),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),t("p",Ft,s(i(e)("insights.empty")),1),t("button",{onClick:$,class:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium"},s(i(e)("insights.empty.regenerate")),1)])):b("",!0)]),o.insights.last_page>1?(l(),c("div",Dt,[k(G,{links:o.insights.links},null,8,["links"])])):b("",!0)])]),k(R,{show:y.value,onClose:g[5]||(g[5]=d=>y.value=!1)},{default:B(()=>[t("div",Lt,[t("h3",Nt,s(i(e)("insights.action.title")),1),t("div",Ut,[t("label",Ht,s(i(e)("insights.action.label")),1),_(t("textarea",{"onUpdate:modelValue":g[3]||(g[3]=d=>n.value=d),rows:"3",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",placeholder:i(e)("insights.action.placeholder")},null,8,Tt),[[T,n.value]])]),t("div",Et,[t("button",{onClick:g[4]||(g[4]=d=>y.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},s(i(e)("common.cancel")),1),t("button",{onClick:D,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg"},s(i(e)("insights.action.save")),1)])])]),_:1},8,["show"])]),_:1},8,["title"]))}});export{ge as default};
