import{r as e,C as t,y as a,L as r,x as s,B as l,z as o,A as d,I as n,F as i,G as g,D as c}from"./chunk-CpmtkKLp.js";import{l as u,a as b,r as x}from"./chunk-BhZp3z4u.js";import{u as m}from"./app-C-ZlocOh.js";const y={class:"max-w-2xl mx-auto"},p={class:"mb-8"},f={class:"text-3xl font-bold text-gray-900 dark:text-white"},k={class:"mt-2 text-gray-500 dark:text-gray-400"},v={class:"space-y-6"},h={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},w={class:"p-6"},_={class:"flex items-start gap-4"},j={class:"flex-1"},C={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},B={class:"text-gray-600 dark:text-gray-400 mb-4"},z={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-2 text-sm"},T={class:"text-gray-700 dark:text-gray-300"},M={class:"text-gray-700 dark:text-gray-300"},S={class:"text-gray-700 dark:text-gray-300"},A={class:"text-gray-700 dark:text-gray-300"},V={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},G={class:"p-6"},H={class:"flex items-start gap-4"},I={class:"flex-1"},U={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},q={class:"text-gray-600 dark:text-gray-400 mb-4"},D={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},F={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},L={key:0,class:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-800 overflow-hidden"},N={class:"p-6"},O={class:"flex items-center gap-4"},E={class:"text-sm text-green-600 dark:text-green-400 font-medium mb-1"},J={class:"text-xl font-bold text-gray-900 dark:text-white"},K={class:"text-gray-600 dark:text-gray-400"},P={class:"flex justify-end gap-4"},Q=["disabled"],R={key:0,class:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24"},W={__name:"TelegramBotCreate",props:{panelType:{type:String,default:"business",validator:e=>["business","marketing"].includes(e)}},setup(W){const{t:X}=m(),Y=W,Z=e(""),$=e(null),ee=e(!1),te=e(""),ae=(e,t=null)=>{const a="business"===Y.panelType?"business.":"marketing.";return t?route(a+e,t):route(a+e)},re=async()=>{if(Z.value){ee.value=!0,te.value="",$.value=null;try{const e=(await b.post(ae("telegram-funnels.store"),{bot_token:Z.value})).data;e.success?($.value=e.bot,setTimeout(()=>{x.visit(ae("telegram-funnels.show",e.bot.id))},1e3)):te.value=e.message||"Bot tokenini tekshirishda xatolik"}catch(e){e.response?.data?.message?te.value=e.response.data.message:419===e.response?.status?te.value="Sessiya tugagan. Sahifani yangilang.":te.value="Server bilan bog'lanishda xatolik"}finally{ee.value=!1}}};return(e,b)=>(c(),t("div",y,[a("div",p,[r(d(u),{href:ae("telegram-funnels.index"),class:"inline-flex items-center text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-4"},{default:s(()=>[b[1]||(b[1]=a("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),l(" "+o(d(X)("common.back")),1)]),_:1},8,["href"]),a("h1",f,o(d(X)("telegram.bot_create.title")),1),a("p",k,o(d(X)("telegram.bot_create.description")),1)]),a("div",v,[a("div",h,[a("div",w,[a("div",_,[b[2]||(b[2]=a("div",{class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0"},[a("span",{class:"text-blue-600 dark:text-blue-400 font-bold"},"1")],-1)),a("div",j,[a("h3",C,o(d(X)("telegram.bot_create.step1_title")),1),a("p",B,o(d(X)("telegram.bot_create.step1_description")),1),a("div",z,[a("p",T,o(d(X)("telegram.bot_create.step1_instruction1")),1),a("p",M,o(d(X)("telegram.bot_create.step1_instruction2")),1),a("p",S,o(d(X)("telegram.bot_create.step1_instruction3")),1),a("p",A,o(d(X)("telegram.bot_create.step1_instruction4")),1)])])])])]),a("div",V,[a("div",G,[a("div",H,[b[3]||(b[3]=a("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0"},[a("span",{class:"text-green-600 dark:text-green-400 font-bold"},"2")],-1)),a("div",I,[a("h3",U,o(d(X)("telegram.bot_create.step2_title")),1),a("p",q,o(d(X)("telegram.bot_create.step2_description")),1),a("div",null,[a("label",D,o(d(X)("telegram.bot_create.bot_token")),1),i(a("input",{"onUpdate:modelValue":b[0]||(b[0]=e=>Z.value=e),type:"text",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:text-white transition-all font-mono text-sm",placeholder:"123456789:ABCdefGHIjklMNOpqrsTUVwxyz"},null,512),[[g,Z.value]]),te.value?(c(),t("p",F,o(te.value),1)):n("",!0)])])])])]),$.value?(c(),t("div",L,[a("div",N,[a("div",O,[b[4]||(b[4]=a("div",{class:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg shadow-green-500/30"},[a("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",null,[a("p",E,o(d(X)("telegram.bot_create.bot_found")),1),a("h3",J,o($.value.first_name),1),a("p",K,"@"+o($.value.username),1)])])])])):n("",!0),a("div",P,[r(d(u),{href:ae("telegram-funnels.index"),class:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},{default:s(()=>[l(o(d(X)("common.cancel")),1)]),_:1},8,["href"]),a("button",{onClick:re,disabled:!Z.value||ee.value,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl transition-all shadow-lg shadow-blue-500/30 disabled:shadow-none flex items-center gap-2"},[ee.value?(c(),t("svg",R,[...b[5]||(b[5]=[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):n("",!0),l(" "+o(ee.value?d(X)("telegram.bot_create.verifying"):d(X)("telegram.bot_create.add_bot")),1)],8,Q)])])]))}};export{W as _};
