import{D as d,z as t,E as l,r as h,v as V,x as O,y as x,A as s,C as v,H as r,I as f,J as S,B as y,F as w,G as C,L as T,W as j}from"./chunk-BcTZxe-J.js";import{h as P,l as U}from"./chunk-BYRtWSr0.js";import{_ as z}from"./chunk-TXgJ1MaD.js";import{u as I}from"./app-BC9IivQF.js";import{r as _}from"./chunk-Brk9BpGk.js";import{r as M}from"./chunk-I93QdGKi.js";import{r as W}from"./chunk-lFe4J5iC.js";import{r as B}from"./chunk-CQoMtUf7.js";import{r as F}from"./chunk-3cjAeKxf.js";import"./chunk-AyRJdOJv.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";function $(c,n){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const G={class:"py-12"},Z={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},J={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},q={class:"mt-2 text-gray-600 dark:text-gray-400"},K={class:"flex gap-2"},X={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},Q={class:"flex flex-wrap items-end gap-4"},Y={class:"flex-1 min-w-[200px]"},tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},et={class:"flex-1 min-w-[200px]"},rt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},at={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md mb-8"},st={class:"border-b border-gray-200 dark:border-gray-700"},ot={class:"flex -mb-px"},lt={class:"flex items-center justify-center gap-2"},dt={class:"flex items-center justify-center gap-2"},nt={class:"flex items-center justify-center gap-2"},it={class:"p-6"},xt={key:0},ct={class:"overflow-x-auto"},gt={class:"w-full"},yt={class:"py-4 px-4"},pt={class:"flex items-center gap-2"},bt={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},mt={class:"font-medium text-gray-900 dark:text-gray-100"},ut={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},ht={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},ft={class:"py-4 px-4 text-right"},_t={class:"font-semibold text-purple-600 dark:text-purple-400"},kt={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},vt={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},wt={class:"py-4 px-4 text-center"},Ct={key:1,class:"text-center py-12"},Tt={class:"mt-4 text-gray-500 dark:text-gray-400"},jt={class:"p-6"},Rt={key:0},Lt={class:"overflow-x-auto"},Et={class:"w-full"},Ot={class:"py-4 px-4"},St={class:"flex items-center gap-2"},Bt={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},Ft={class:"font-medium text-gray-900 dark:text-gray-100"},$t={class:"py-4 px-4 text-center"},At={class:"inline-block px-3 py-1 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300 rounded-full text-sm font-bold"},Dt={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},Nt={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},Vt={class:"py-4 px-4 text-right"},Pt={class:"font-semibold text-purple-600 dark:text-purple-400"},Ut={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},zt={class:"py-4 px-4 text-right"},It={key:1,class:"text-center py-12"},Mt={class:"mt-4 text-gray-500 dark:text-gray-400"},Wt={class:"p-6"},Gt={key:0},Zt={class:"overflow-x-auto"},Ht={class:"w-full"},Jt={class:"py-4 px-4"},qt={class:"flex items-center gap-2"},Kt={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},Xt={class:"font-medium text-gray-900 dark:text-gray-100"},Qt={class:"py-4 px-4 text-center"},Yt={class:"inline-block px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs font-medium"},te={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},ee={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},re={class:"py-4 px-4 text-right"},ae={class:"font-semibold text-purple-600 dark:text-purple-400"},se={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},oe={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},le={class:"py-4 px-4 text-right"},de={class:"py-4 px-4 text-right"},ne={class:"font-semibold text-orange-600 dark:text-orange-400"},ie={key:1,class:"text-center py-12"},xe={class:"mt-4 text-gray-500 dark:text-gray-400"},Ne={__name:"Performance",props:{dream_buyer_performance:{type:Array,default:()=>[]},offer_performance:{type:Array,default:()=>[]},source_analysis:{type:Array,default:()=>[]},filters:Object},setup(c){const{t:n}=I(),R=c,p=h(R.filters?.date_from||""),b=h(R.filters?.date_to||""),g=h("dream-buyers"),m=o=>new Intl.NumberFormat("uz-UZ").format(o)+" so'm",u=o=>o?.toFixed(1)||"0",k=o=>o>=30?{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",label:"Excellent"}:o>=20?{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-300",label:"Good"}:o>=10?{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-300",label:"Average"}:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",label:"Poor"},L=o=>o>=200?{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",label:"Excellent"}:o>=100?{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-300",label:"Good"}:o>=0?{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-300",label:"Break Even"}:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",label:"Loss"},A=()=>{window.location.href=route("business.analytics.performance",{date_from:p.value,date_to:b.value})},D=()=>{p.value="",b.value="",window.location.href=route("business.analytics.performance")};h(!1);const E=h(!1),N=async()=>{E.value=!0;try{const o=await fetch(route("business.analytics.export.excel"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({report_type:"performance",date_from:p.value,date_to:b.value})});if(o.ok){const a=await o.blob(),e=window.URL.createObjectURL(a),i=document.createElement("a");i.href=e,i.download="performance_report.xlsx",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(e),document.body.removeChild(i)}else alert(n("common.error"))}catch(o){console.error("Export error:",o),alert(n("common.error"))}finally{E.value=!1}};return(o,a)=>(l(),V(z,{title:s(n)("analytics.performance_reports")},{default:O(()=>[x(s(P),{title:s(n)("analytics.performance_reports")},null,8,["title"]),t("div",G,[t("div",Z,[t("div",H,[t("div",null,[t("h1",J,[x(s(_),{class:"w-10 h-10 text-yellow-600 dark:text-yellow-400"}),v(" "+r(s(n)("analytics.performance_reports")),1)]),t("p",q,r(s(n)("analytics.performance_desc")),1)]),t("div",K,[x(s(U),{href:o.route("business.analytics.index"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:O(()=>[x(s(M),{class:"w-4 h-4"}),a[5]||(a[5]=v(" Dashboard ",-1))]),_:1},8,["href"]),t("button",{onClick:N,class:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors gap-2"},[x(s(W),{class:"w-4 h-4"}),a[6]||(a[6]=v(" Excel ",-1))])])]),t("div",X,[t("div",Q,[t("div",Y,[t("label",tt,r(s(n)("reports.filter.start_date")),1),f(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>p.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"},null,512),[[S,p.value]])]),t("div",et,[t("label",rt,r(s(n)("reports.filter.end_date")),1),f(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"},null,512),[[S,b.value]])]),t("button",{onClick:A,class:"px-6 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors"},r(s(n)("common.filter")),1),t("button",{onClick:D,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},r(s(n)("reports.filter.reset")),1)])]),t("div",at,[t("div",st,[t("nav",ot,[t("button",{onClick:a[2]||(a[2]=e=>g.value="dream-buyers"),class:y([g.value==="dream-buyers"?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",lt,[x(s(B),{class:"w-5 h-5"}),t("span",null,r(s(n)("dashboard.ideal_customers")),1)])],2),t("button",{onClick:a[3]||(a[3]=e=>g.value="offers"),class:y([g.value==="offers"?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",dt,[x(s(F),{class:"w-5 h-5"}),a[7]||(a[7]=t("span",null,"Offers",-1))])],2),t("button",{onClick:a[4]||(a[4]=e=>g.value="sources"),class:y([g.value==="sources"?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",nt,[x(s($),{class:"w-5 h-5"}),a[8]||(a[8]=t("span",null,"Lead Sources",-1))])],2)])]),f(t("div",it,[c.dream_buyer_performance&&c.dream_buyer_performance.length>0?(l(),d("div",xt,[t("div",ct,[t("table",gt,[a[9]||(a[9]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Ideal Mijoz"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Avg Deal Size"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Performance")])],-1)),t("tbody",null,[(l(!0),d(w,null,C(c.dream_buyer_performance,(e,i)=>(l(),d("tr",{key:e.dream_buyer_id,class:y([i%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",yt,[t("div",pt,[i===0?(l(),d("div",bt,[x(s(_),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):T("",!0),t("span",mt,r(e.dream_buyer_name),1)])]),t("td",ut,r(e.total_leads),1),t("td",ht,r(e.won_leads),1),t("td",ft,[t("span",_t,r(u(e.conversion_rate))+"%",1)]),t("td",kt,r(m(e.total_revenue)),1),t("td",vt,r(m(e.avg_deal_size)),1),t("td",wt,[t("span",{class:y([k(e.conversion_rate).bg,k(e.conversion_rate).text,"inline-block px-3 py-1 rounded-full text-xs font-semibold"])},r(k(e.conversion_rate).label),3)])],2))),128))])])])])):(l(),d("div",Ct,[x(s(B),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",Tt,r(s(n)("reports.no_data")),1)]))],512),[[j,g.value==="dream-buyers"]]),f(t("div",jt,[c.offer_performance&&c.offer_performance.length>0?(l(),d("div",Rt,[t("div",Lt,[t("table",Et,[a[10]||(a[10]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Offer"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Value Score"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROI")])],-1)),t("tbody",null,[(l(!0),d(w,null,C(c.offer_performance,(e,i)=>(l(),d("tr",{key:e.offer_id,class:y([i%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",Ot,[t("div",St,[i===0?(l(),d("div",Bt,[x(s(_),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):T("",!0),t("span",Ft,r(e.offer_name),1)])]),t("td",$t,[t("span",At,r(e.value_score||"N/A"),1)]),t("td",Dt,r(e.total_leads),1),t("td",Nt,r(e.won_leads),1),t("td",Vt,[t("span",Pt,r(u(e.conversion_rate))+"%",1)]),t("td",Ut,r(m(e.total_revenue)),1),t("td",zt,[t("span",{class:y([L(e.roi).text,"font-semibold"])},r(u(e.roi))+"% ",3)])],2))),128))])])])])):(l(),d("div",It,[x(s(F),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",Mt,r(s(n)("reports.no_data")),1)]))],512),[[j,g.value==="offers"]]),f(t("div",Wt,[c.source_analysis&&c.source_analysis.length>0?(l(),d("div",Gt,[t("div",Zt,[t("table",Ht,[a[11]||(a[11]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Source"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Type"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Cost per Lead"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROI"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROAS")])],-1)),t("tbody",null,[(l(!0),d(w,null,C(c.source_analysis,(e,i)=>(l(),d("tr",{key:e.source_id,class:y([i%2===0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",Jt,[t("div",qt,[i===0?(l(),d("div",Kt,[x(s(_),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):T("",!0),t("span",Xt,r(e.source_name),1)])]),t("td",Qt,[t("span",Yt,r(e.channel_type),1)]),t("td",te,r(e.total_leads),1),t("td",ee,r(e.won_leads),1),t("td",re,[t("span",ae,r(u(e.conversion_rate))+"%",1)]),t("td",se,r(m(e.total_revenue)),1),t("td",oe,r(m(e.cost_per_lead)),1),t("td",le,[t("span",{class:y([L(e.roi).text,"font-semibold"])},r(u(e.roi))+"% ",3)]),t("td",de,[t("span",ne,r(e.roas?.toFixed(2)||"0.00")+"x",1)])],2))),128))])])])])):(l(),d("div",ie,[x(s($),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",xe,r(s(n)("reports.no_data")),1)]))],512),[[j,g.value==="sources"]])])])])]),_:1},8,["title"]))}};export{Ne as default};
