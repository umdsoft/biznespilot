import{r as e,o as t,v as s,x as a,z as l,D as o,L as r,y as i,H as n,A as c,E as u,C as d,F as m,G as h,B as p,Q as x,I as y,O as g,J as v,p as b}from"./chunk-7Urb0kxg.js";import{l as k,a as f}from"./chunk-DKkye6wf.js";import{_ as w}from"./chunk-BB8-4400.js";import{_ as j}from"./chunk-H0hMJnms.js";import{u as _}from"./app-DFslr8vl.js";import{_ as C}from"./chunk-BCo6x5W8.js";import"./chunk-Dm-LAqtr.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";import"./chunk-Di7Oc7TS.js";const M={class:"flex flex-col h-[calc(100vh-12rem)]"},K={class:"mb-4 flex items-center justify-between"},A={class:"text-2xl font-bold text-gray-900"},q={class:"text-sm text-gray-600 mt-1"},z={key:0,class:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},B={class:"flex items-start"},I={class:"text-sm font-medium text-yellow-800"},T={class:"mt-1 text-sm text-yellow-700"},G={key:0,class:"text-center py-12"},H={class:"text-lg font-semibold text-gray-900 mb-2"},L={class:"text-gray-600 max-w-md mx-auto"},O={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto"},P=["onClick"],S={class:"whitespace-pre-line text-sm"},V={key:0,class:"ml-2"},D={key:1,class:"flex justify-start"},E={class:"border-t border-gray-200 p-4"},F={class:"flex-1"},J=["onKeydown","disabled","placeholder"],Q={class:"text-xs text-gray-500 mt-1"},R=["disabled"],U=C({__name:"Index",props:{messages:Array,hasApiKey:Boolean},setup(C){const{t:U}=_(),W=C,N=e([...W.messages]),X=e(""),Y=e(!1),Z=e(null),$=["Ideal Mijoz qanday yaratish kerak?","Ijtimoiy tarmoqlarda marketing strategiyasi","Raqobatchilardan qanday ajralib turish mumkin?","Konversiyani oshirish usullari"],ee=()=>{b(()=>{Z.value&&(Z.value.scrollTop=Z.value.scrollHeight)})},te=async()=>{if(!X.value.trim()||!W.hasApiKey||Y.value)return;const e=X.value.trim();X.value="",Y.value=!0;try{const t=await f.post(route("business.chatbot.send"),{message:e});t.data.success&&(N.value.push(t.data.userMessage),ee(),setTimeout(()=>{N.value.push(t.data.assistantMessage),ee()},300))}catch(t){alert(t.response?.data?.error||U("common.error"))}finally{Y.value=!1}},se=async()=>{if(confirm(U("chatbot.confirm_clear")))try{await f.delete(route("business.chatbot.clear")),N.value=[]}catch(e){alert(U("common.error"))}};return t(()=>{ee()}),(e,t)=>(u(),s(w,{title:c(U)("chatbot.ai_chatbot")},{default:a(()=>[l("div",M,[l("div",K,[l("div",null,[l("h1",A,n(c(U)("chatbot.ai_marketing_advisor")),1),l("p",q,n(c(U)("chatbot.business_marketing_help")),1)]),N.value.length>0?(u(),o("button",{key:0,onClick:se,class:"px-4 py-2 text-sm text-red-600 hover:text-red-700 font-medium"},n(c(U)("chatbot.clear_history")),1)):r("",!0)]),C.hasApiKey?r("",!0):(u(),o("div",z,[l("div",B,[t[2]||(t[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),l("div",null,[l("h3",I,n(c(U)("chatbot.api_key_required")),1),l("p",T,n(c(U)("chatbot.api_key_message")),1),i(c(k),{href:e.route("business.settings.index"),class:"mt-3 inline-flex items-center text-sm font-medium text-yellow-800 hover:text-yellow-900"},{default:a(()=>[d(n(c(U)("chatbot.go_to_settings"))+" ",1),t[1]||(t[1]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["href"])])])])),i(j,{class:"flex-1 flex flex-col overflow-hidden"},{default:a(()=>[l("div",{ref_key:"messagesContainer",ref:Z,class:"flex-1 overflow-y-auto p-4 space-y-4"},[0===N.value.length&&C.hasApiKey?(u(),o("div",G,[t[3]||(t[3]=l("div",{class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])],-1)),l("h3",H,n(c(U)("chatbot.greeting")),1),l("p",L,n(c(U)("chatbot.welcome_message")),1),l("div",O,[(u(),o(m,null,h($,e=>l("button",{key:e,onClick:t=>(e=>{X.value=e,te()})(e),class:"px-4 py-3 text-left text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},n(e),9,P)),64))])])):r("",!0),(u(!0),o(m,null,h(N.value,e=>{return u(),o("div",{key:e.id,class:p(["flex","user"===e.role?"justify-end":"justify-start"])},[l("div",{class:p(["max-w-[70%] rounded-lg px-4 py-3","user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"])},[l("div",S,n(e.message),1),l("div",{class:p(["text-xs mt-1 flex items-center justify-between","user"===e.role?"text-blue-100":"text-gray-500"])},[l("span",null,n(e.created_at),1),e.ai_model&&"assistant"===e.role?(u(),o("span",V,n((t=e.ai_model,t.includes("gpt-4")?"GPT-4":t.includes("gpt-3.5")?"GPT-3.5":t.includes("claude-3-opus")?"Claude 3 Opus":t.includes("claude-3-sonnet")?"Claude 3 Sonnet":t)),1)):r("",!0)],2)],2)],2);var t}),128)),Y.value?(u(),o("div",D,[...t[4]||(t[4]=[l("div",{class:"bg-gray-100 rounded-lg px-4 py-3"},[l("div",{class:"flex space-x-2"},[l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})])],-1)])])):r("",!0)],512),l("div",E,[l("form",{onSubmit:x(te,["prevent"]),class:"flex items-end space-x-3"},[l("div",F,[y(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),onKeydown:g(x(te,["exact","prevent"]),["enter"]),rows:"1",disabled:!C.hasApiKey||Y.value,class:"input resize-none",placeholder:c(U)("chatbot.type_question"),style:{"min-height":"44px","max-height":"120px"}},null,40,J),[[v,X.value]]),l("p",Q,n(c(U)("chatbot.enter_to_send")),1)]),l("button",{type:"submit",disabled:!X.value.trim()||!C.hasApiKey||Y.value,class:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0"},[...t[5]||(t[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,R)],32)])]),_:1})])]),_:1},8,["title"]))}},[["__scopeId","data-v-c9d3109a"]]);export{U as default};
