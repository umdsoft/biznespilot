import{r as e,v as t,x as a,y as s,z as r,A as l,C as n,H as d,I as o,J as i,D as g,E as c,F as x,G as u,L as p,S as y,B as f}from"./chunk-7Urb0kxg.js";import{h as m,l as b}from"./chunk-DKkye6wf.js";import{_ as k}from"./chunk-BB8-4400.js";import{u as v}from"./app-DFslr8vl.js";import{r as h}from"./chunk-D76qurXK.js";import{r as _}from"./chunk-BugzYCIx.js";import{r as w}from"./chunk-DUcDuGHI.js";import{r as j}from"./chunk-afst19KZ.js";import{r as C}from"./chunk-CafOT6C0.js";import"./chunk-Dm-LAqtr.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-D4tA7yBb.js";import"./chunk-Di7Oc7TS.js";const D={class:"py-12"},L={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},F={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},R={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},O={class:"mt-2 text-gray-600 dark:text-gray-400"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},q={class:"flex flex-wrap items-end gap-4"},z={class:"flex-1 min-w-[200px]"},A={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},B={class:"flex-1 min-w-[200px]"},G={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},S={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},T={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},U={class:"flex items-center gap-3 mb-2"},V={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},E={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},H={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},I={class:"flex items-center gap-3 mb-2"},J={class:"w-10 h-10 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},M={class:"text-2xl font-bold text-green-600 dark:text-green-400"},P={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},K={class:"flex items-center gap-3 mb-2"},N={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/50 rounded-lg flex items-center justify-center"},Q={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},X={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Y={class:"flex items-center gap-3 mb-2"},Z={class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/50 rounded-lg flex items-center justify-center"},$={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},ee={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 mb-8"},te={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},ae={class:"space-y-4"},se={class:"flex items-center gap-4"},re={class:"w-32 text-right"},le={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},ne={class:"flex-1"},de={class:"relative h-16 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden"},oe={class:"text-white font-bold"},ie={class:"text-white text-sm font-medium"},ge={class:"w-48"},ce={class:"text-sm"},xe={class:"text-gray-600 dark:text-gray-400"},ue={class:"font-semibold text-gray-900 dark:text-gray-100"},pe={key:0,class:"text-red-600 dark:text-red-400"},ye={class:"font-semibold"},fe={key:0,class:"flex justify-center my-2"},me={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},be={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"flex items-center gap-2 mb-3"},he={class:"font-bold text-gray-900 dark:text-gray-100"},_e={class:"space-y-2 text-sm"},we={class:"flex justify-between"},je={class:"font-semibold text-gray-900 dark:text-gray-100"},Ce={class:"flex justify-between"},De={class:"font-semibold text-gray-900 dark:text-gray-100"},Le={class:"flex justify-between"},Fe={class:"font-semibold text-green-600 dark:text-green-400"},Re={key:0,class:"flex justify-between"},Oe={class:"font-semibold text-red-600 dark:text-red-400"},We={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},qe={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ae={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},Be={class:"space-y-3"},Ge={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},Se={class:"font-bold text-gray-900 dark:text-gray-100"},Te={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},Ue={class:"font-bold text-green-600 dark:text-green-400"},Ve={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},Ee={class:"font-bold text-purple-600 dark:text-purple-400"},He={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},Ie={class:"space-y-3"},Je={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},Me={class:"font-bold text-gray-900 dark:text-gray-100"},Pe={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},Ke={class:"font-bold text-green-600 dark:text-green-400"},Ne={class:"flex justify-between items-center p-3 bg-orange-50 dark:bg-orange-900/30 rounded-lg"},Qe={class:"font-bold text-orange-600 dark:text-orange-400"},Xe={__name:"Funnel",props:{funnel_data:{type:Object,default:()=>({funnel_stages:[],summary:{total_leads:0,won_leads:0,lost_leads:0,active_leads:0,overall_conversion_rate:0,win_rate:0}})},conversion_rates:{type:Object,default:()=>({})},filters:Object},setup(Xe){const{t:Ye}=v(),Ze=Xe,$e=e(Ze.filters?.date_from||""),et=e(Ze.filters?.date_to||""),tt=e=>e?.toFixed(1)||"0",at=e=>({new:"bg-blue-500",contacted:"bg-indigo-500",qualified:"bg-purple-500",proposal:"bg-pink-500",negotiation:"bg-orange-500",won:"bg-green-500",lost:"bg-red-500"}[e]||"bg-gray-500"),st=()=>{window.location.href=route("business.analytics.funnel",{date_from:$e.value,date_to:et.value})},rt=()=>{$e.value="",et.value="",window.location.href=route("business.analytics.funnel")};return(e,v)=>(c(),t(k,{title:l(Ye)("analytics.conversion_funnel")},{default:a(()=>[s(l(m),{title:l(Ye)("analytics.conversion_funnel")},null,8,["title"]),r("div",D,[r("div",L,[r("div",F,[r("div",null,[r("h1",R,[s(l(h),{class:"w-10 h-10 text-purple-600 dark:text-purple-400"}),n(" "+d(l(Ye)("analytics.conversion_funnel")),1)]),r("p",O,d(l(Ye)("analytics.funnel_analysis_desc")),1)]),s(l(b),{href:e.route("business.analytics.index"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:a(()=>[s(l(_),{class:"w-4 h-4"}),v[2]||(v[2]=n(" Dashboard ",-1))]),_:1},8,["href"])]),r("div",W,[r("div",q,[r("div",z,[r("label",A,d(l(Ye)("reports.filter.start_date")),1),o(r("input",{"onUpdate:modelValue":v[0]||(v[0]=e=>$e.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,$e.value]])]),r("div",B,[r("label",G,d(l(Ye)("reports.filter.end_date")),1),o(r("input",{"onUpdate:modelValue":v[1]||(v[1]=e=>et.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,et.value]])]),r("button",{onClick:st,class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors"},d(l(Ye)("common.filter")),1),r("button",{onClick:rt,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},d(l(Ye)("reports.filter.reset")),1)])]),r("div",S,[r("div",T,[r("div",U,[r("div",V,[s(l(h),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),r("div",null,[v[3]||(v[3]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Leads",-1)),r("p",E,d(Xe.funnel_data.summary.total_leads||0),1)])])]),r("div",H,[r("div",I,[r("div",J,[s(l(w),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),r("div",null,[v[4]||(v[4]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Won Deals",-1)),r("p",M,d(Xe.funnel_data.summary.won_leads||0),1)])])]),r("div",P,[r("div",K,[r("div",N,[s(l(_),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),r("div",null,[v[5]||(v[5]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Conversion Rate",-1)),r("p",Q,d(tt(Xe.funnel_data.summary.overall_conversion_rate))+"%",1)])])]),r("div",X,[r("div",Y,[r("div",Z,[s(l(j),{class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),r("div",null,[v[6]||(v[6]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Win Rate",-1)),r("p",$,d(tt(Xe.funnel_data.summary.win_rate))+"%",1)])])])]),r("div",ee,[r("h3",te,d(l(Ye)("analytics.funnel_visualization")),1),r("div",ae,[(c(!0),g(x,null,u(Xe.funnel_data.funnel_stages.filter(e=>!["lost"].includes(e.stage)),(e,t)=>{return c(),g("div",{key:e.stage,class:"relative"},[r("div",se,[r("div",re,[r("p",le,d(e.label),1)]),r("div",ne,[r("div",de,[r("div",{class:f([at(e.stage),"h-full transition-all duration-500 flex items-center justify-between px-4"]),style:y({width:(a=e.percentage,Math.max(a,10)+"%")})},[r("span",oe,d(e.count),1),r("span",ie,d(tt(e.percentage))+"%",1)],6)])]),r("div",ge,[r("div",ce,[r("p",xe,[v[7]||(v[7]=n(" CR: ",-1)),r("span",ue,d(tt(e.conversion_rate))+"%",1)]),e.dropoff_rate>0?(c(),g("p",pe,[v[8]||(v[8]=n(" Dropoff: ",-1)),r("span",ye,d(tt(e.dropoff_rate))+"%",1)])):p("",!0)])])]),t<Xe.funnel_data.funnel_stages.filter(e=>!["lost","won"].includes(e.stage)).length-1?(c(),g("div",fe,[s(l(C),{class:"w-6 h-6 text-gray-400 dark:text-gray-500"})])):p("",!0)]);var a}),128))])]),r("div",me,[r("h3",be,d(l(Ye)("analytics.stage_analysis")),1),r("div",ke,[(c(!0),g(x,null,u(Xe.funnel_data.funnel_stages.filter(e=>!["lost"].includes(e.stage)),e=>(c(),g("div",{key:e.stage,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow"},[r("div",ve,[r("div",{class:f([at(e.stage),"w-3 h-3 rounded-full"])},null,2),r("p",he,d(e.label),1)]),r("div",_e,[r("div",we,[v[9]||(v[9]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Leads:",-1)),r("span",je,d(e.count),1)]),r("div",Ce,[v[10]||(v[10]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Percentage:",-1)),r("span",De,d(tt(e.percentage))+"%",1)]),r("div",Le,[v[11]||(v[11]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Conversion:",-1)),r("span",Fe,d(tt(e.conversion_rate))+"%",1)]),e.dropoff_rate>0?(c(),g("div",Re,[v[12]||(v[12]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Dropoff:",-1)),r("span",Oe,d(tt(e.dropoff_rate))+"%",1)])):p("",!0)])]))),128))])]),r("div",We,[r("h3",qe,d(l(Ye)("analytics.conversion_insights")),1),r("div",ze,[r("div",null,[r("h4",Ae,d(l(Ye)("analytics.overall_performance")),1),r("div",Be,[r("div",Ge,[v[13]||(v[13]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Total Leads",-1)),r("span",Se,d(Xe.conversion_rates.overall.total_leads),1)]),r("div",Te,[v[14]||(v[14]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Won Deals",-1)),r("span",Ue,d(Xe.conversion_rates.overall.won_leads),1)]),r("div",Ve,[v[15]||(v[15]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Conversion Rate",-1)),r("span",Ee,d(tt(Xe.conversion_rates.overall.conversion_rate))+"%",1)])])]),r("div",null,[r("h4",He,d(l(Ye)("analytics.time_to_close")),1),r("div",Ie,[r("div",Je,[v[16]||(v[16]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Average Days",-1)),r("span",Me,d(Xe.conversion_rates.avg_time_to_close.avg_days)+" kun",1)]),r("div",Pe,[v[17]||(v[17]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Fastest Close",-1)),r("span",Ke,d(Xe.conversion_rates.avg_time_to_close.fastest_close)+" kun",1)]),r("div",Ne,[v[18]||(v[18]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Slowest Close",-1)),r("span",Qe,d(Xe.conversion_rates.avg_time_to_close.slowest_close)+" kun",1)])])])])])])])]),_:1},8,["title"]))}};export{Xe as default};
