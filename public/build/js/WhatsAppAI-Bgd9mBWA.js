import{r as b,o as q,v as S,x as z,y as c,z as e,A as s,E as y,H as l,C as m,D as x,J as i,R as f,F as _,K as p,G as $,I as j}from"./chunk-KPSVwAyv.js";import{b as A,h as B}from"./chunk-BVrjkT6E.js";import{_ as I}from"./chunk-C_LZBpOn.js";import{u as N}from"./app-Bx12lrZQ.js";import{r as X}from"./chunk-Cw_2vanC.js";import{r as O}from"./chunk-B0ddnyT4.js";import{r as E}from"./chunk-Dfha1x8d.js";import{a as D}from"./chunk-Ch0Q6XPl.js";import{f as F}from"./chunk-DMP3tXW5.js";import{r as K}from"./chunk-Tj_a7zxz.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const J={class:"py-12"},M={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},P={class:"mb-8"},R={class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},W={class:"mt-2 text-gray-600"},G={class:"bg-white rounded-xl shadow-md p-6 mb-6"},H={class:"flex items-center gap-3 mb-6"},L={class:"text-xl font-bold text-gray-900"},Q={class:"space-y-6"},Y={class:"flex items-center justify-between p-4 bg-purple-50 rounded-lg"},Z={class:"font-semibold text-gray-900"},ee={class:"text-sm text-gray-600"},te={class:"relative inline-flex items-center cursor-pointer"},se={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},ae={class:"font-semibold text-gray-900"},re={class:"text-sm text-gray-600"},oe={class:"relative inline-flex items-center cursor-pointer"},le={key:0},ie={class:"block text-sm font-medium text-gray-700 mb-2"},ne={class:"block text-sm font-medium text-gray-700 mb-2"},de={class:"flex justify-between text-xs text-gray-500 mt-1"},ue={class:"border-t pt-6"},pe={class:"font-semibold text-gray-900 mb-4"},ce={class:"space-y-3"},_e={class:"flex items-center"},ge={class:"ml-2 text-sm text-gray-700"},me={class:"flex items-center"},fe={class:"ml-2 text-sm text-gray-700"},be={class:"flex items-center"},he={class:"ml-2 text-sm text-gray-700"},xe={class:"border-t pt-6"},ve={class:"flex items-center justify-between mb-4"},ye={class:"font-semibold text-gray-900"},we={class:"relative inline-flex items-center cursor-pointer"},ke={key:0,class:"grid grid-cols-2 gap-4"},Ve={class:"block text-sm font-medium text-gray-700 mb-2"},Ce={class:"block text-sm font-medium text-gray-700 mb-2"},Te={key:1,class:"mt-4"},Ue={class:"block text-sm font-medium text-gray-700 mb-2"},qe={class:"block text-sm font-medium text-gray-700 mb-2"},Se={class:"mt-6 flex items-center gap-4"},ze=["disabled"],$e={key:0,class:"flex items-center gap-2 text-green-600"},je={class:"font-medium"},Ae={class:"bg-white rounded-xl shadow-md p-6"},Be={class:"flex items-center gap-3 mb-6"},Ie={class:"text-xl font-bold text-gray-900"},Ne={class:"space-y-3 mb-6"},Xe={class:"flex-1"},Oe={class:"text-sm font-medium text-gray-700"},Ee={class:"text-purple-600"},De={class:"text-sm text-gray-600 mt-1"},Fe=["onClick"],Ke={class:"border-t pt-6"},Je={class:"font-semibold text-gray-900 mb-4"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Pe={class:"block text-sm font-medium text-gray-700 mb-2"},Re=["placeholder"],We={class:"block text-sm font-medium text-gray-700 mb-2"},Ge=["placeholder"],He={class:"flex gap-4"},Le=["disabled"],kt={__name:"WhatsAppAI",setup(Qe){const{t:r}=N(),w=A(),v=w.props.currentBusiness||w.props.auth?.currentBusiness,o=b({is_active:!0,ai_enabled:!0,auto_greet:!0,greeting_message:"Assalomu alaykum! Bizga xush kelibsiz. Sizga qanday yordam bera olamiz?",fallback_message:"Kechirasiz, savol tushunilmadi. Iltimos, boshqacha so'rang.",outside_hours_message:"Ish vaqti tugadi. Ish kunlari 9:00-18:00 da ishlmaymiz.",business_hours_enabled:!1,business_hours_start:"09:00",business_hours_end:"18:00",lead_auto_create:!0,ai_creativity_level:7,use_dream_buyer_context:!0,use_offer_context:!0}),d=b(!1),h=b(!1),g=b([{id:1,trigger:"salom",response:"Assalomu alaykum! Sizga qanday yordam bera olamiz?"},{id:2,trigger:"narx",response:"Takliflarimiz haqida ma'lumot olish uchun telefon raqamingizni qoldiring."},{id:3,trigger:"xarid",response:"Xarid uchun operator bilan bog'lanamiz. Bir daqiqa kuting."}]),u=b({trigger:"",response:""}),k=async()=>{d.value=!0;try{const t=await(await fetch(`/api/whatsapp/${v.id}/ai-config`)).json();t.success&&(o.value={...o.value,...t.config},t.templates&&(g.value=t.templates))}catch(n){console.error("Error loading config:",n)}finally{d.value=!1}},V=async()=>{d.value=!0,h.value=!1;try{const t=await(await fetch(`/api/whatsapp/${v.id}/ai-config`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(o.value)})).json();t.success?(h.value=!0,setTimeout(()=>h.value=!1,3e3)):alert("Xatolik: "+t.message)}catch(n){alert("Xatolik: "+n.message)}finally{d.value=!1}},C=()=>{u.value.trigger&&u.value.response&&(g.value.push({id:Date.now(),...u.value}),u.value={trigger:"",response:""})},T=n=>{g.value=g.value.filter(t=>t.id!==n)},U=async()=>{d.value=!0;try{const t=await(await fetch(`/api/whatsapp/${v.id}/ai-templates`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({templates:g.value})})).json();t.success?alert("Templatelar saqlandi!"):alert("Xatolik: "+t.message)}catch(n){alert("Xatolik: "+n.message)}finally{d.value=!1}};return q(()=>{k()}),(n,t)=>(_(),S(I,{title:"WhatsApp AI Settings"},{default:z(()=>[c(s(B),{title:"WhatsApp AI Configuration"}),e("div",J,[e("div",M,[e("div",P,[e("h1",R,[c(s(X),{class:"w-10 h-10 text-purple-600"}),y(" "+l(s(r)("whatsapp_ai.title")),1)]),e("p",W,l(s(r)("whatsapp_ai.subtitle")),1)]),e("div",G,[e("div",H,[c(s(O),{class:"w-6 h-6 text-gray-700"}),e("h2",L,l(s(r)("whatsapp_ai.main_settings")),1)]),e("div",Q,[e("div",Y,[e("div",null,[e("h3",Z,l(s(r)("whatsapp_ai.enable_ai")),1),e("p",ee,l(s(r)("whatsapp_ai.enable_ai_desc")),1)]),e("label",te,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>o.value.ai_enabled=a),class:"sr-only peer"},null,512),[[f,o.value.ai_enabled]]),t[14]||(t[14]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),e("div",se,[e("div",null,[e("h3",ae,l(s(r)("whatsapp_ai.auto_greet")),1),e("p",re,l(s(r)("whatsapp_ai.auto_greet_desc")),1)]),e("label",oe,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=a=>o.value.auto_greet=a),class:"sr-only peer"},null,512),[[f,o.value.auto_greet]]),t[15]||(t[15]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),o.value.auto_greet?(_(),m("div",le,[e("label",ie,l(s(r)("whatsapp_ai.greeting_message")),1),i(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.greeting_message=a),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[p,o.value.greeting_message]])])):x("",!0),e("div",null,[e("label",ne,l(s(r)("whatsapp_ai.creativity_level"))+": "+l(o.value.ai_creativity_level)+"/10 ",1),i(e("input",{type:"range","onUpdate:modelValue":t[3]||(t[3]=a=>o.value.ai_creativity_level=a),min:"1",max:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"},null,512),[[p,o.value.ai_creativity_level]]),e("div",de,[e("span",null,l(s(r)("whatsapp_ai.exact_answers")),1),e("span",null,l(s(r)("whatsapp_ai.creative_answers")),1)])]),e("div",ue,[e("h3",pe,l(s(r)("whatsapp_ai.context_settings")),1),e("div",ce,[e("div",_e,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=a=>o.value.use_dream_buyer_context=a),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,o.value.use_dream_buyer_context]]),e("label",ge,l(s(r)("whatsapp_ai.use_dream_buyer")),1)]),e("div",me,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>o.value.use_offer_context=a),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,o.value.use_offer_context]]),e("label",fe,l(s(r)("whatsapp_ai.use_offers")),1)]),e("div",be,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=a=>o.value.lead_auto_create=a),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,o.value.lead_auto_create]]),e("label",he,l(s(r)("whatsapp_ai.auto_create_lead")),1)])])]),e("div",xe,[e("div",ve,[e("h3",ye,l(s(r)("whatsapp_ai.business_hours")),1),e("label",we,[i(e("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=a=>o.value.business_hours_enabled=a),class:"sr-only peer"},null,512),[[f,o.value.business_hours_enabled]]),t[16]||(t[16]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),o.value.business_hours_enabled?(_(),m("div",ke,[e("div",null,[e("label",Ve,l(s(r)("whatsapp_ai.hours_start")),1),i(e("input",{type:"time","onUpdate:modelValue":t[8]||(t[8]=a=>o.value.business_hours_start=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[p,o.value.business_hours_start]])]),e("div",null,[e("label",Ce,l(s(r)("whatsapp_ai.hours_end")),1),i(e("input",{type:"time","onUpdate:modelValue":t[9]||(t[9]=a=>o.value.business_hours_end=a),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[p,o.value.business_hours_end]])])])):x("",!0),o.value.business_hours_enabled?(_(),m("div",Te,[e("label",Ue,l(s(r)("whatsapp_ai.outside_hours_message")),1),i(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=a=>o.value.outside_hours_message=a),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[p,o.value.outside_hours_message]])])):x("",!0)]),e("div",null,[e("label",qe,l(s(r)("whatsapp_ai.fallback_message")),1),i(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=a=>o.value.fallback_message=a),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[p,o.value.fallback_message]])])]),e("div",Se,[e("button",{onClick:V,disabled:d.value,class:"px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-semibold rounded-lg transition-colors"},l(d.value?s(r)("common.loading"):s(r)("whatsapp_ai.save_settings")),9,ze),h.value?(_(),m("div",$e,[c(s(E),{class:"w-5 h-5"}),e("span",je,l(s(r)("whatsapp_ai.saved")),1)])):x("",!0)])]),e("div",Ae,[e("div",Be,[c(s(D),{class:"w-6 h-6 text-gray-700"}),e("h2",Ie,l(s(r)("whatsapp_ai.quick_reply_templates")),1)]),e("div",Ne,[(_(!0),m($,null,j(g.value,a=>(_(),m("div",{key:a.id,class:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg"},[e("div",Xe,[e("div",Oe,[t[17]||(t[17]=y(" Trigger: ",-1)),e("span",Ee,l(a.trigger),1)]),e("div",De,l(a.response),1)]),e("button",{onClick:Ye=>T(a.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[c(s(F),{class:"w-5 h-5"})],8,Fe)]))),128))]),e("div",Ke,[e("h3",Je,l(s(r)("whatsapp_ai.add_template")),1),e("div",Me,[e("div",null,[e("label",Pe,l(s(r)("whatsapp_ai.trigger_keyword")),1),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>u.value.trigger=a),type:"text",placeholder:s(r)("whatsapp_ai.trigger_placeholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,8,Re),[[p,u.value.trigger]])]),e("div",null,[e("label",We,l(s(r)("whatsapp_ai.response_text")),1),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>u.value.response=a),type:"text",placeholder:s(r)("whatsapp_ai.response_placeholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,8,Ge),[[p,u.value.response]])])]),e("div",He,[e("button",{onClick:C,class:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors gap-2"},[c(s(K),{class:"w-5 h-5"}),y(" "+l(s(r)("whatsapp_ai.add_template_btn")),1)]),e("button",{onClick:U,disabled:d.value,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-semibold rounded-lg transition-colors"},l(s(r)("whatsapp_ai.save_all")),9,Le)])])])])])]),_:1}))}};export{kt as default};
