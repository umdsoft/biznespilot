import{_ as A}from"./chunk-DmWz40qF.js";import{u as h}from"./app-906_W7J6.js";import{C as d,F as o,z as a,D as f,B as k,v as P,M as N,H as n,S as F,A as s,G as v,I as w,y,x as z}from"./chunk-KPSVwAyv.js";import{a as S}from"./chunk-DN454CZt.js";import{r as T}from"./chunk-qku2UxUN.js";import{r as V}from"./chunk-CmNfLjGq.js";import{r as B}from"./chunk-CYw1XsNK.js";import{r as D}from"./chunk-Dfha1x8d.js";import{a as O}from"./chunk-S7b6IQvx.js";import{h as K}from"./chunk-BVrjkT6E.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";import"./chunk-BgOPVSvg.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const q={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow"},L={class:"flex items-center justify-between mb-4"},U={class:"text-3xl font-bold text-gray-900 dark:text-white"},Z={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},H={key:0,class:"text-xs text-gray-400 mt-1"},R={key:1,class:"mt-3"},E={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},G={class:"text-xs text-gray-400 mt-1"},_={__name:"KPICard",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0},target:{type:[String,Number],default:null},badge:{type:String,default:null},badgeType:{type:String,default:"neutral"},icon:{type:[Object,Function],default:null},iconBgColor:{type:String,default:"blue"},suffix:{type:String,default:""},showProgress:{type:Boolean,default:!0},subtitle:{type:String,default:null}},setup(t){const{t:e}=h(),i=t,u={green:"from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30",blue:"from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30",purple:"from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30",orange:"from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30",red:"from-red-100 to-rose-100 dark:from-red-900/30 dark:to-rose-900/30",indigo:"from-indigo-100 to-violet-100 dark:from-indigo-900/30 dark:to-violet-900/30",emerald:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30"},m={green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400",orange:"text-orange-600 dark:text-orange-400",red:"text-red-600 dark:text-red-400",indigo:"text-indigo-600 dark:text-indigo-400",emerald:"text-emerald-600 dark:text-emerald-400"},r={success:"text-green-600 dark:text-green-400",warning:"text-yellow-600 dark:text-yellow-400",danger:"text-red-600 dark:text-red-400",neutral:"text-gray-500 dark:text-gray-400"},g=()=>i.target?Math.min(100,Math.round(Number(i.value)/Number(i.target)*100)):0,c=()=>{const x=g();return x>=100?"bg-green-500":x>=70?"bg-yellow-500":"bg-red-500"};return(x,b)=>(o(),d("div",q,[a("div",L,[t.icon?(o(),d("div",{key:0,class:k(["w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center",u[t.iconBgColor]||u.blue])},[(o(),P(N(t.icon),{class:k(["w-6 h-6",m[t.iconBgColor]||m.blue])},null,8,["class"]))],2)):f("",!0),t.badge?(o(),d("span",{key:1,class:k(["text-sm font-medium",r[t.badgeType]||r.neutral])},n(t.badge),3)):f("",!0)]),a("p",U,n(t.value)+n(t.suffix),1),a("p",Z,n(t.title),1),t.subtitle?(o(),d("p",H,n(t.subtitle),1)):f("",!0),t.showProgress&&t.target?(o(),d("div",R,[a("div",E,[a("div",{class:k(["h-2 rounded-full transition-all",c()]),style:F({width:g()+"%"})},null,6)]),a("p",G,n(s(e)("kpi.target"))+": "+n(t.target)+n(t.suffix),1)])):f("",!0)]))}},J={class:"space-y-3"},W={key:0,class:"text-center py-6 text-gray-500"},Y={class:"flex items-center gap-3"},Q={class:"font-medium text-gray-900"},X={key:0,class:"text-xs text-gray-500"},tt={class:"text-right"},et={class:"text-lg font-bold text-gray-900"},rt={key:0,class:"text-xs text-gray-500"},I={__name:"KPIStatsList",props:{stats:{type:Array,default:()=>[]}},setup(t){const{t:e}=h(),i=(u,m)=>m==="currency"?new Intl.NumberFormat("uz-UZ").format(u||0)+" so'm":m==="percent"?(u||0)+"%":new Intl.NumberFormat("uz-UZ").format(u||0);return(u,m)=>(o(),d("div",J,[t.stats.length===0?(o(),d("div",W,n(s(e)("kpi.no_statistics")),1)):f("",!0),(o(!0),d(v,null,w(t.stats,(r,g)=>(o(),d("div",{key:r.id||g,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[a("div",Y,[a("div",{class:k([r.iconBg||"bg-indigo-100","w-10 h-10 rounded-lg flex items-center justify-center"])},[(o(),d("svg",{class:k([r.iconColor||"text-indigo-600","w-5 h-5"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...m[0]||(m[0]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])],2))],2),a("div",null,[a("p",Q,n(r.label),1),r.description?(o(),d("p",X,n(r.description),1)):f("",!0)])]),a("div",tt,[a("p",et,n(i(r.value,r.format)),1),r.target?(o(),d("p",rt,n(s(e)("kpi.target"))+": "+n(i(r.target,r.format)),1)):f("",!0)])]))),128))]))}},at={class:"overflow-x-auto"},st={class:"min-w-full divide-y divide-gray-200"},ot={class:"bg-gray-50"},nt={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},it={class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},lt={class:"bg-white divide-y divide-gray-200"},dt={class:"px-4 py-3 whitespace-nowrap"},ct={class:"font-medium text-gray-900"},gt={class:"px-4 py-3 text-right whitespace-nowrap"},ut={class:"font-semibold text-gray-900"},mt={key:0,class:"text-center py-8 text-gray-500"},yt={__name:"KPIWeeklyTable",props:{data:{type:Array,default:()=>[]},weekDays:{type:Array,default:()=>["Dush","Sesh","Chor","Pay","Jum","Shan","Yak"]}},setup(t){const{t:e}=h(),i=(r,g)=>g==="currency"?r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(r||0):g==="percent"?(r||0)+"%":r||0,u=r=>!r||!Array.isArray(r)?0:r.reduce((g,c)=>g+(c||0),0),m=(r,g)=>{if(!g)return"text-gray-900";const c=r/g*100;return c>=100?"text-green-600 font-medium":c>=70?"text-yellow-600":"text-red-600"};return(r,g)=>(o(),d("div",at,[a("table",st,[a("thead",ot,[a("tr",null,[a("th",nt,n(s(e)("kpi.indicator")),1),(o(!0),d(v,null,w(t.weekDays,c=>(o(),d("th",{key:c,class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},n(c),1))),128)),a("th",it,n(s(e)("kpi.total")),1)])]),a("tbody",lt,[(o(!0),d(v,null,w(t.data,(c,x)=>(o(),d("tr",{key:c.id||x,class:"hover:bg-gray-50"},[a("td",dt,[a("span",ct,n(c.label),1)]),(o(!0),d(v,null,w(c.values,(b,$)=>(o(),d("td",{key:$,class:"px-3 py-3 text-center whitespace-nowrap"},[a("span",{class:k(m(b,c.target))},n(i(b,c.format)),3)]))),128)),a("td",gt,[a("span",ut,n(i(u(c.values),c.format)),1)])]))),128))])]),t.data.length===0?(o(),d("div",mt,n(s(e)("kpi.no_data")),1)):f("",!0)]))}},pt={class:"space-y-6"},ft={class:"text-2xl font-bold text-gray-900 dark:text-white"},xt={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},kt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},bt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ht={__name:"OperatorKPI",props:{stats:{type:Object,default:()=>({})},dailyStats:{type:Array,default:()=>[]},weeklyStats:{type:Array,default:()=>[]},targets:{type:Object,default:()=>({})},panelType:{type:String,default:"operator",validator:t=>["operator","business"].includes(t)}},setup(t){const{t:e}=h(),i=t,u=l=>l?l<60?`${l} ${e("kpi.minutes")}`:`${Math.floor(l/60)} ${e("kpi.hours")} ${l%60} ${e("kpi.minutes")}`:`0 ${e("kpi.minutes")}`,m=(l,p)=>p?Math.min(100,Math.round(l/p*100)):0,r=()=>[{icon:D,iconColor:"text-green-600",label:e("kpi.answered"),key:"answered_calls"},{icon:O,iconColor:"text-red-600",label:e("kpi.not_answered"),key:"missed_calls"},{icon:B,iconColor:"text-yellow-600",label:e("kpi.callback"),key:"callback_scheduled"},{icon:S,iconColor:"text-blue-600",label:e("kpi.avg_duration"),key:"avg_call_duration",format:"time",highlight:!0}],g=()=>[{dotColor:"bg-blue-500",label:e("kpi.new"),key:"leads_new"},{dotColor:"bg-yellow-500",label:e("kpi.contacted"),key:"leads_contacted"},{dotColor:"bg-green-500",label:e("kpi.qualified"),key:"leads_qualified"},{dotColor:"bg-red-500",label:e("kpi.lost"),key:"leads_lost"}],c=()=>r().map(l=>({...l,value:l.format==="time"?u(i.stats?.[l.key]):i.stats?.[l.key]||0})),x=()=>g().map(l=>({...l,value:i.stats?.[l.key]||0})),b=()=>{const l=i.stats?.conversion_rate||0,p=i.targets?.conversion_rate||0,C=(l-p).toFixed(1);return l>=p?`+${C}%`:`${C}%`},$=()=>(i.stats?.conversion_rate||0)>=(i.targets?.conversion_rate||0)?"success":"danger",M=()=>{const l=i.stats?.avg_response_time||0,p=i.targets?.max_response_time||60;return l<=p?e("kpi.good"):e("kpi.slow")},j=()=>(i.stats?.avg_response_time||0)<=(i.targets?.max_response_time||60)?"success":"danger";return(l,p)=>(o(),d("div",pt,[a("div",null,[a("h1",ft,n(s(e)("kpi.my_kpi_indicators")),1),a("p",xt,n(s(e)("kpi.your_performance")),1)]),a("div",kt,[y(_,{title:s(e)("kpi.todays_calls"),value:t.stats?.calls_today||0,target:t.targets?.daily_calls,badge:`${m(t.stats?.calls_today,t.targets?.daily_calls)}%`,"badge-type":"neutral",icon:s(S),"icon-bg-color":"green"},null,8,["title","value","target","badge","icon"]),y(_,{title:s(e)("kpi.contacted_leads"),value:t.stats?.leads_contacted||0,target:t.targets?.daily_leads,badge:`${m(t.stats?.leads_contacted,t.targets?.daily_leads)}%`,"badge-type":"neutral",icon:s(T),"icon-bg-color":"blue"},null,8,["title","value","target","badge","icon"]),y(_,{title:s(e)("kpi.conversion_rate"),value:t.stats?.conversion_rate||0,suffix:"%",target:t.targets?.conversion_rate,badge:b(),"badge-type":$(),icon:s(V),"icon-bg-color":"purple"},null,8,["title","value","target","badge","badge-type","icon"]),y(_,{title:s(e)("kpi.avg_response_time"),value:u(t.stats?.avg_response_time),badge:M(),"badge-type":j(),icon:s(B),"icon-bg-color":"orange","show-progress":!1,subtitle:`${s(e)("kpi.target")}: ${u(t.targets?.max_response_time)} ${s(e)("kpi.within")}`},null,8,["title","value","badge","badge-type","icon","subtitle"])]),a("div",bt,[y(I,{title:s(e)("kpi.call_statistics"),items:c()},null,8,["title","items"]),y(I,{title:s(e)("kpi.lead_statistics"),items:x()},null,8,["title","items"])]),y(yt,{data:t.weeklyStats,"conversion-target":t.targets?.conversion_rate||0},null,8,["data","conversion-target"])]))}},Gt={__name:"Index",props:{stats:Object,dailyStats:Array,weeklyStats:Array,targets:Object},setup(t){const{t:e}=h();return(i,u)=>(o(),P(A,{title:s(e)("nav.kpi")},{default:z(()=>[y(s(K),{title:s(e)("nav.kpi")},null,8,["title"]),y(ht,{stats:t.stats,"daily-stats":t.dailyStats,"weekly-stats":t.weeklyStats,targets:t.targets,"panel-type":"operator"},null,8,["stats","daily-stats","weekly-stats","targets"])]),_:1},8,["title"]))}};export{Gt as default};
