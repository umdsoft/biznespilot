import{r as g,w as v,D as r,y as i,A as n,x as _,z as e,I as y,J as C,E as d,F as p,G as w,H as l,K as T,L as x,B as V}from"./chunk-BcTZxe-J.js";import{h as $,l as j,r as k}from"./chunk-BYRtWSr0.js";import{_ as L}from"./chunk-BKCRKpwX.js";import{u as N}from"./app-CncQRLgv.js";import{r as P}from"./chunk-BHX0ueEB.js";import{r as Y}from"./chunk-B4yz7jSC.js";import{r as q}from"./chunk-DVnlbxPa.js";import{r as D}from"./chunk-CoBrxO6j.js";import"./chunk-BnC_-OK6.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-C1xeNfMu.js";const E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},F={class:"flex items-center justify-between mb-8"},H={class:"flex items-center gap-4"},K={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6 mb-6"},O={class:"flex flex-col sm:flex-row gap-4"},Q={class:"flex-1"},X={class:"relative"},I={class:"sm:w-48"},U=["value"],A={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl overflow-hidden"},G={class:"overflow-x-auto"},J={class:"w-full"},R={class:"divide-y divide-slate-700/50"},W={key:0},Z={class:"px-6 py-4"},ee={class:"text-white font-medium"},te={class:"text-slate-400 text-sm"},se={class:"px-6 py-4"},le=["title"],ae={key:0,class:"text-red-400 text-xs mt-1"},oe={class:"px-6 py-4"},re={class:"px-6 py-4"},ie={class:"text-slate-300 text-sm"},de={class:"px-6 py-4"},ne={class:"text-slate-300 text-sm"},ce={class:"px-6 py-4"},ue={class:"text-slate-400 text-sm"},pe={key:0,class:"px-6 py-4 border-t border-slate-700/50 flex items-center justify-between"},xe={class:"text-sm text-slate-400"},me={class:"flex items-center gap-2"},be=["disabled"],he={class:"text-slate-300 px-3"},fe=["disabled"],Oe={__name:"History",props:{messages:Object,filters:{type:Object,default:()=>({status:null,search:""})}},setup(a){const m=a;N();const u=g(m.filters.search||""),c=g(m.filters.status||"all"),S=[{value:"all",label:"Barchasi"},{value:"pending",label:"Kutilmoqda"},{value:"sent",label:"Yuborildi"},{value:"delivered",label:"Yetkazildi"},{value:"failed",label:"Xatolik"}],M=o=>({pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",sent:"bg-blue-500/20 text-blue-400 border-blue-500/30",delivered:"bg-green-500/20 text-green-400 border-green-500/30",failed:"bg-red-500/20 text-red-400 border-red-500/30"})[o]||"bg-slate-500/20 text-slate-400 border-slate-500/30",z=o=>({pending:"Kutilmoqda",sent:"Yuborildi",delivered:"Yetkazildi",failed:"Xatolik"})[o]||o,B=o=>({eskiz:"Eskiz",playmobile:"PlayMobile"})[o]||o,b=()=>{k.get(route("business.sms.history"),{status:c.value==="all"?null:c.value,search:u.value||null},{preserveState:!0,replace:!0})};let h=null;v(u,()=>{clearTimeout(h),h=setTimeout(b,500)}),v(c,()=>{b()});const f=o=>{o&&k.get(o,{},{preserveState:!0})};return(o,s)=>(d(),r(p,null,[i(n($),{title:"SMS Tarixi"}),i(L,null,{default:_(()=>[e("div",E,[e("div",F,[e("div",H,[i(n(j),{href:o.route("business.settings.sms"),class:"p-2 bg-slate-700 rounded-xl hover:bg-slate-600 transition-colors"},{default:_(()=>[i(n(P),{class:"w-5 h-5 text-white"})]),_:1},8,["href"]),s[4]||(s[4]=e("div",null,[e("h1",{class:"text-2xl font-bold text-white"},"SMS Tarixi"),e("p",{class:"text-slate-400 text-sm"},"Barcha yuborilgan SMS xabarlar")],-1))])]),e("div",K,[e("div",O,[e("div",Q,[e("div",X,[i(n(Y),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.value=t),type:"text",placeholder:"Qidirish (telefon, xabar, ism)...",class:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:border-teal-500 focus:ring-1 focus:ring-teal-500"},null,512),[[C,u.value]])])]),e("div",I,[y(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>c.value=t),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-teal-500 focus:ring-1 focus:ring-teal-500"},[(d(),r(p,null,w(S,t=>e("option",{key:t.value,value:t.value},l(t.label),9,U)),64))],512),[[T,c.value]])])])]),e("div",A,[e("div",G,[e("table",J,[s[6]||(s[6]=e("thead",{class:"bg-slate-700/30"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Qabul qiluvchi "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Xabar "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Provayder "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Qismlar "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Sana ")])],-1)),e("tbody",R,[a.messages.data.length===0?(d(),r("tr",W,[...s[5]||(s[5]=[e("td",{colspan:"6",class:"px-6 py-12 text-center"},[e("svg",{class:"w-12 h-12 text-slate-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})]),e("p",{class:"text-slate-400"},"SMS xabarlar topilmadi")],-1)])])):x("",!0),(d(!0),r(p,null,w(a.messages.data,t=>(d(),r("tr",{key:t.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",Z,[e("div",null,[e("p",ee,l(t.lead?.name||"Noma'lum"),1),e("p",te,l(t.phone),1)])]),e("td",se,[e("p",{class:"text-slate-300 text-sm max-w-xs truncate",title:t.message},l(t.message),9,le),t.error_message?(d(),r("p",ae,l(t.error_message),1)):x("",!0)]),e("td",oe,[e("span",{class:V(["px-2.5 py-1 rounded-lg text-xs font-medium border",M(t.status)])},l(z(t.status)),3)]),e("td",re,[e("span",ie,l(B(t.provider)),1)]),e("td",de,[e("span",ne,l(t.parts_count),1)]),e("td",ce,[e("span",ue,l(t.created_at),1)])]))),128))])])]),a.messages.last_page>1?(d(),r("div",pe,[e("p",xe,l(a.messages.from)+"-"+l(a.messages.to)+" / "+l(a.messages.total)+" ta xabar ",1),e("div",me,[e("button",{onClick:s[2]||(s[2]=t=>f(a.messages.prev_page_url)),disabled:!a.messages.prev_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[i(n(q),{class:"w-5 h-5 text-white"})],8,be),e("span",he,l(a.messages.current_page)+" / "+l(a.messages.last_page),1),e("button",{onClick:s[3]||(s[3]=t=>f(a.messages.next_page_url)),disabled:!a.messages.next_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[i(n(D),{class:"w-5 h-5 text-white"})],8,fe)])])):x("",!0)])])]),_:1})],64))}};export{Oe as default};
