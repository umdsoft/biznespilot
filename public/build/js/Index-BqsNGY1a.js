import{h as z,r as k}from"./chunk-BVrjkT6E.js";import{_ as B}from"./chunk-D0p8mG4-.js";import{u as D}from"./app-DMGwzSHW.js";import{r as b}from"./chunk-CYw1XsNK.js";import{r as f}from"./chunk-Dfha1x8d.js";import{a as _}from"./chunk-C_PbB7ed.js";import{r as $}from"./chunk-D59q4lxq.js";import{r as p,b as w,v as O,x as U,y as n,z as t,A as o,C as d,D as h,H as a,B as m,F as r,G as q,I as F}from"./chunk-KPSVwAyv.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const V={class:"space-y-6"},E={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},N={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},H={class:"text-sm text-gray-500 dark:text-gray-400"},L={class:"flex items-center gap-3"},Y={key:0,class:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={class:"flex items-center gap-3 mb-4"},M={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},T={class:"text-xl font-bold"},Z={key:0,class:"space-y-3"},J={class:"flex items-center justify-between"},P={class:"text-lg font-bold"},Q={class:"flex items-center justify-between"},R={class:"text-lg font-bold"},W={key:0,class:"flex items-center justify-between"},X={class:"text-lg font-bold"},tt={key:1,class:"text-center py-4"},et={class:"flex flex-col justify-center gap-3"},st=["disabled"],at={key:0},rt={key:1},dt=["disabled"],ot={key:0},lt={key:1},nt={key:2,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white/20 rounded-xl"},it={key:3,class:"text-center"},ct={class:m(["inline-flex px-4 py-1 rounded-full text-sm font-medium bg-white/20"])},gt={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},yt={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},xt={class:"flex items-center gap-3"},ut={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},pt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ht={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},mt={class:"flex items-center gap-3"},kt={class:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center"},bt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ft={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},vt={class:"flex items-center gap-3"},_t={class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},wt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Ct={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},jt={class:"flex items-center gap-3"},It={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},At={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},St={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},zt={key:0,class:"overflow-x-auto"},Bt={class:"w-full"},Dt={class:"divide-y divide-gray-200 dark:divide-gray-700"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},qt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ft={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},Et={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},le={__name:"Index",props:{records:{type:Array,default:()=>[]},summary:{type:Object,default:null},todayAttendance:{type:Object,default:null},teamMembers:{type:Array,default:()=>[]},selectedUserId:{type:String,default:null},selectedDate:{type:String,default:null},view:{type:String,default:"daily"}},setup(s){const{t:c}=D(),x=s,g=p(!1),y=p(!1);p(!1),p(null);const C=w(()=>x.todayAttendance?.is_checked_in),j=w(()=>x.todayAttendance?.is_checked_out),I=async()=>{if(!g.value){g.value=!0;try{await k.post(route("hr.attendance.check-in"),{location:"Office"},{preserveScroll:!0,onSuccess:()=>{},onError:()=>{alert("Check-in xatolik yuz berdi")},onFinish:()=>{g.value=!1}})}catch{g.value=!1}}},A=async()=>{if(!y.value){y.value=!0;try{await k.post(route("hr.attendance.check-out"),{},{preserveScroll:!0,onSuccess:()=>{},onError:()=>{alert("Check-out xatolik yuz berdi")},onFinish:()=>{y.value=!1}})}catch{y.value=!1}}},v=i=>{k.get(route("hr.attendance.index"),{view:i,user_id:x.selectedUserId,date:x.selectedDate},{preserveState:!0,preserveScroll:!0})},S=i=>({present:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",absent:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",late:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",half_day:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",wfh:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",leave:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"})[i]||"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",u=i=>i||"--:--";return(i,e)=>(r(),O(B,{title:o(c)("hr.attendance")},{default:U(()=>[n(o(z),{title:o(c)("hr.attendance")},null,8,["title"]),t("div",V,[t("div",E,[t("div",null,[t("h1",N,a(o(c)("hr.attendance_tracking")),1),t("p",H,a(o(c)("hr.attendance_subtitle")),1)]),t("div",L,[t("button",{onClick:e[0]||(e[0]=l=>v("daily")),class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",s.view==="daily"?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},a(o(c)("hr.daily")),3),t("button",{onClick:e[1]||(e[1]=l=>v("monthly")),class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",s.view==="monthly"?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},a(o(c)("hr.monthly")),3)])]),s.selectedUserId===i.$page.props.auth.user.id||!s.selectedUserId?(r(),d("div",Y,[t("div",G,[t("div",null,[t("div",K,[t("div",M,[n(o(b),{class:"w-6 h-6"})]),t("div",null,[e[2]||(e[2]=t("p",{class:"text-sm opacity-90"},"Bugun",-1)),t("p",T,a(new Date().toLocaleDateString("uz-UZ",{day:"numeric",month:"long"})),1)])]),s.todayAttendance?(r(),d("div",Z,[t("div",J,[e[3]||(e[3]=t("span",{class:"text-sm opacity-90"},"Check-in:",-1)),t("span",P,a(u(s.todayAttendance.check_in)),1)]),t("div",Q,[e[4]||(e[4]=t("span",{class:"text-sm opacity-90"},"Check-out:",-1)),t("span",R,a(u(s.todayAttendance.check_out)),1)]),s.todayAttendance.work_hours?(r(),d("div",W,[e[5]||(e[5]=t("span",{class:"text-sm opacity-90"},"Ish soatlari:",-1)),t("span",X,a(s.todayAttendance.work_hours)+" soat",1)])):h("",!0)])):(r(),d("div",tt,[...e[6]||(e[6]=[t("p",{class:"text-sm opacity-90"},"Bugun hali check-in qilmagansiz",-1)])]))]),t("div",et,[C.value?j.value?(r(),d("div",nt,[n(o(f),{class:"w-6 h-6"}),e[7]||(e[7]=t("span",{class:"font-semibold"},"Bugun ishni tamomladingiz",-1))])):(r(),d("button",{key:1,onClick:A,disabled:y.value,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white text-purple-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[n(o(_),{class:"w-6 h-6"}),y.value?(r(),d("span",ot,"Check-out qilyapman...")):(r(),d("span",lt,"Check-out"))],8,dt)):(r(),d("button",{key:0,onClick:I,disabled:g.value,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white text-purple-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[n(o(f),{class:"w-6 h-6"}),g.value?(r(),d("span",at,"Check-in qilyapman...")):(r(),d("span",rt,"Check-in"))],8,st)),s.todayAttendance?(r(),d("div",it,[t("span",ct,a(s.todayAttendance.status_label),1)])):h("",!0)])])])):h("",!0),s.summary?(r(),d("div",gt,[t("div",yt,[t("div",xt,[t("div",ut,[n(o(f),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[t("p",pt,a(s.summary.present_days),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Ishda",-1))])])]),t("div",ht,[t("div",mt,[t("div",kt,[n(o(b),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),t("div",null,[t("p",bt,a(s.summary.late_days),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Kechikkan",-1))])])]),t("div",ft,[t("div",vt,[t("div",_t,[n(o(_),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t("div",null,[t("p",wt,a(s.summary.absent_days),1),e[10]||(e[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Yo'q",-1))])])]),t("div",Ct,[t("div",jt,[t("div",It,[n(o($),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",null,[t("p",At,a(s.summary.attendance_percentage)+"%",1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Davomat",-1))])])])])):h("",!0),t("div",St,[e[14]||(e[14]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Davomat Yozuvlari")],-1)),s.records.length>0?(r(),d("div",zt,[t("table",Bt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 dark:bg-gray-900/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Sana"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Check-in"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Check-out"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Ish soati"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Holat"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Izoh")])],-1)),t("tbody",Dt,[(r(!0),d(q,null,F(s.records,l=>(r(),d("tr",{key:l.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[t("td",$t,a(l.date_formatted),1),t("td",Ot,a(u(l.check_in)),1),t("td",Ut,a(u(l.check_out)),1),t("td",qt,a(l.work_hours||0)+" soat ",1),t("td",Ft,[t("span",{class:m(["px-2 py-1 text-xs font-medium rounded-full",S(l.status)])},a(l.status_label),3)]),t("td",Vt,a(l.notes||"-"),1)]))),128))])])])):(r(),d("div",Et,[n(o(b),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),e[13]||(e[13]=t("p",null,"Davomat yozuvlari topilmadi",-1))]))])])]),_:1},8,["title"]))}};export{le as default};
