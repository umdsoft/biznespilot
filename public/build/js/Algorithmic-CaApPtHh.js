import{r as e,a as t,v as r,x as a,y as s,C as l,I as i,B as o,z as d,D as n,J as g,K as c,Q as u,E as y,F as x,G as m,H as b}from"./chunk-CpmtkKLp.js";import{r as k,a as p}from"./chunk-BhZp3z4u.js";import{_ as h}from"./chunk-DbFbpSR2.js";import"./chunk-D7SyfRoT.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const v={class:"space-y-6"},f={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},w={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},j={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},_={class:"col-span-2 md:col-span-1 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white"},S={class:"text-4xl font-bold"},C={class:"mt-1 text-xs text-blue-200"},H={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},B={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},A={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},q={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},M={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},z={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},D={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},U={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},V={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},I={class:"flex justify-between text-sm mb-1"},K={class:"text-gray-600 dark:text-gray-400"},J={class:"font-medium text-gray-900 dark:text-gray-100"},L={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},O={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},T={key:0,class:"p-8 text-center"},Z={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},F=["onClick"],R={class:"flex items-center justify-between"},E={class:"flex items-center space-x-4"},G={class:"font-medium text-gray-900 dark:text-gray-100"},N={class:"text-sm text-gray-500 dark:text-gray-400"},P={class:"flex items-center space-x-4"},Q={class:"text-right"},$={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},X={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},ee={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},te={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},re={class:"font-medium text-gray-900 dark:text-gray-100"},ae={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"flex items-center space-x-3"},le=["onClick"],ie=["onClick"],oe={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},de={class:"flex min-h-full items-center justify-center p-4"},ne={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6"},ge={class:"space-y-4"},ce=["value"],ue={class:"mt-6 flex justify-end space-x-3"},ye=["disabled"],xe={key:0},me={key:1},be={__name:"Algorithmic",props:{reports:Array,schedules:Array,templates:Array,realtimeSummary:Object},setup(be){const ke=e(!1),pe=e(!1),he=e(!1),ve=t({start_date:new Date(Date.now()-6048e5).toISOString().split("T")[0],end_date:(new Date).toISOString().split("T")[0],template_id:null}),fe=()=>{k.reload({only:["realtimeSummary"]})},we=async()=>{he.value=!0;try{(await p.post(route("business.reports.generate"),ve)).data.success&&(ke.value=!1,k.reload({only:["reports"]}))}catch(e){alert(e.response?.data?.message||"Hisobot yaratishda xatolik")}finally{he.value=!1}};return(e,t)=>(n(),r(h,{title:"Algoritmik Hisobotlar"},{default:a(()=>{return[s("div",v,[s("div",f,[t[9]||(t[9]=s("div",null,[s("h2",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Algoritmik Hisobotlar"),s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Real vaqtda biznes ko'rsatkichlari va tahlillar ")],-1)),s("button",{onClick:t[0]||(t[0]=e=>ke.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"},[...t[8]||(t[8]=[s("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),o(" Yangi hisobot ",-1)])])]),s("div",w,[s("div",{class:"flex items-center justify-between mb-6"},[t[11]||(t[11]=s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Real vaqt holati",-1)),s("button",{onClick:fe,class:"text-blue-600 hover:text-blue-700 text-sm font-medium"},[...t[10]||(t[10]=[s("svg",{class:"w-4 h-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),o(" Yangilash ",-1)])])]),s("div",j,[s("div",_,[s("div",S,d(be.realtimeSummary?.health_score||0),1),t[12]||(t[12]=s("div",{class:"text-blue-100 text-sm"},"Salomatlik balli",-1)),s("div",C,d(be.realtimeSummary?.health_label||"Hisoblanmoqda..."),1)]),s("div",H,[s("div",B,d(be.realtimeSummary?.key_metrics?.total_sales||0),1),t[13]||(t[13]=s("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Sotuvlar (7 kun)",-1))]),s("div",A,[s("div",q,d((e=be.realtimeSummary?.key_metrics?.total_revenue||0,e?new Intl.NumberFormat("uz-UZ").format(e)+" UZS":"0 UZS")),1),t[14]||(t[14]=s("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Daromad",-1))]),s("div",M,[s("div",z,d(be.realtimeSummary?.key_metrics?.total_leads||0),1),t[15]||(t[15]=s("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Lidlar",-1))]),s("div",D,[s("div",U,d(be.realtimeSummary?.key_metrics?.conversion_rate||0)+"% ",1),t[16]||(t[16]=s("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Konversiya",-1))])]),be.realtimeSummary?.kpi_progress?.has_plan?(n(),l("div",V,[t[17]||(t[17]=s("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"KPI bajarilishi",-1)),s("div",Y,[(n(),l(g,null,c(["sales","revenue","leads"],(e,t)=>{return s("div",{key:t,class:"relative"},[s("div",I,[s("span",K,d("sales"===t?"Sotuvlar":"revenue"===t?"Daromad":"Lidlar"),1),s("span",J,d(be.realtimeSummary?.kpi_progress?.[e]?.progress||0)+"% ",1)]),s("div",L,[s("div",{class:y(["h-full transition-all duration-500",(r=be.realtimeSummary?.kpi_progress?.[e]?.status,{"bg-green-500":"excellent"===r||"on_track"===r,"bg-yellow-500":"warning"===r,"bg-red-500":"critical"===r,"bg-gray-400":!r})]),style:u({width:Math.min(100,be.realtimeSummary?.kpi_progress?.[e]?.progress||0)+"%"})},null,6)])]);var r}),64))])])):i("",!0)]),s("div",O,[t[21]||(t[21]=s("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"So'nggi hisobotlar")],-1)),0===be.reports.length?(n(),l("div",T,[t[18]||(t[18]=s("svg",{class:"w-12 h-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[19]||(t[19]=s("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Hali hisobotlar yo'q",-1)),s("button",{onClick:t[1]||(t[1]=e=>ke.value=!0),class:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Birinchi hisobotni yarating ")])):(n(),l("div",Z,[(n(!0),l(g,null,c(be.reports,e=>{return n(),l("div",{key:e.id,class:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:t=>{return r=e.id,void k.visit(route("business.reports.show",r));var r}},[s("div",R,[s("div",E,[s("div",{class:y(["w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg",(a=e.health_score,a?a>=80?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":a>=60?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":a>=40?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-500")])},d(e.health_score||"-"),3),s("div",null,[s("h4",G,d(e.title),1),s("p",N,d(e.period),1)])]),s("div",P,[s("div",Q,[s("span",{class:y(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",(r=e.status,{"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"completed"===r||"delivered"===r,"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"generating"===r,"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"pending"===r,"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":"failed"===r})])},d(e.status_label),3),s("p",$,d(e.created_at),1)]),t[20]||(t[20]=s("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])],8,F);var r,a}),128))]))]),s("div",W,[s("div",X,[t[22]||(t[22]=s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Jadvallar",-1)),s("button",{onClick:t[2]||(t[2]=e=>pe.value=!0),class:"text-blue-600 hover:text-blue-700 text-sm font-medium"}," + Yangi jadval ")]),0===be.schedules.length?(n(),l("div",ee," Avtomatik hisobot jadvallari yo'q ")):(n(),l("div",te,[(n(!0),l(g,null,c(be.schedules,e=>(n(),l("div",{key:e.id,class:"px-6 py-4 flex items-center justify-between"},[s("div",null,[s("h4",re,d(e.name),1),s("p",ae,d(e.frequency_label)+" | Keyingi: "+d(e.next_scheduled_at||"Belgilanmagan"),1)]),s("div",se,[s("button",{onClick:t=>(async e=>{try{await p.post(route("business.reports.schedules.toggle",e)),k.reload({only:["schedules"]})}catch(t){}})(e.id),class:y([e.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"])},[s("span",{class:y([e.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,le),s("button",{onClick:t=>(async e=>{if(confirm("Jadvalni o'chirishni xohlaysizmi?"))try{await p.delete(route("business.reports.schedules.delete",e)),k.reload({only:["schedules"]})}catch(t){}})(e.id),class:"text-red-500 hover:text-red-700"},[...t[23]||(t[23]=[s("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ie)])]))),128))]))])]),ke.value?(n(),l("div",oe,[s("div",de,[s("div",{class:"fixed inset-0 bg-black/50",onClick:t[3]||(t[3]=e=>ke.value=!1)}),s("div",ne,[t[28]||(t[28]=s("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Yangi hisobot yaratish",-1)),s("div",ge,[s("div",null,[t[24]||(t[24]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Boshlanish sanasi",-1)),x(s("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>ve.start_date=e),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,512),[[m,ve.start_date]])]),s("div",null,[t[25]||(t[25]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tugash sanasi",-1)),x(s("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>ve.end_date=e),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,512),[[m,ve.end_date]])]),s("div",null,[t[27]||(t[27]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Shablon (ixtiyoriy)",-1)),x(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>ve.template_id=e),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},[t[26]||(t[26]=s("option",{value:null},"Standart",-1)),(n(!0),l(g,null,c(be.templates,e=>(n(),l("option",{key:e.id,value:e.id},d(e.name),9,ce))),128))],512),[[b,ve.template_id]])])]),s("div",ue,[s("button",{onClick:t[7]||(t[7]=e=>ke.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Bekor qilish "),s("button",{onClick:we,disabled:he.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50"},[he.value?(n(),l("span",xe,"Yaratilmoqda...")):(n(),l("span",me,"Yaratish"))],8,ye)])])])])):i("",!0)];var e}),_:1}))}};export{be as default};
