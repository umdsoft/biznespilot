import{r as e,v as t,x as a,L as s,y as r,A as l,B as n,z as d,F as o,G as i,C as g,D as c,J as x,K as u,I as p,Q as y,E as f}from"./chunk-CpmtkKLp.js";import{h as m,l as b}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-DbFbpSR2.js";import{u as v}from"./app-C-ZlocOh.js";import{r as h}from"./chunk-DvlohF_U.js";import{r as _}from"./chunk-dqIIyBTR.js";import{r as w}from"./chunk-eMHYSAeQ.js";import{r as j}from"./chunk-Bsc1JRL5.js";import{r as C}from"./chunk-xNqDy1xl.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const D={class:"py-12"},F={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},L={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},R={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},O={class:"mt-2 text-gray-600 dark:text-gray-400"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},z={class:"flex flex-wrap items-end gap-4"},A={class:"flex-1 min-w-[200px]"},T={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},U={class:"flex-1 min-w-[200px]"},V={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},q={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},B={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},E={class:"flex items-center gap-3 mb-2"},G={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},I={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},J={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},K={class:"flex items-center gap-3 mb-2"},M={class:"w-10 h-10 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},P={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Q={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},S={class:"flex items-center gap-3 mb-2"},$={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/50 rounded-lg flex items-center justify-center"},H={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},N={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},X={class:"flex items-center gap-3 mb-2"},Y={class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/50 rounded-lg flex items-center justify-center"},Z={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},ee={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 mb-8"},te={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},ae={class:"space-y-4"},se={class:"flex items-center gap-4"},re={class:"w-32 text-right"},le={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},ne={class:"flex-1"},de={class:"relative h-16 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden"},oe={class:"text-white font-bold"},ie={class:"text-white text-sm font-medium"},ge={class:"w-48"},ce={class:"text-sm"},xe={class:"text-gray-600 dark:text-gray-400"},ue={class:"font-semibold text-gray-900 dark:text-gray-100"},pe={key:0,class:"text-red-600 dark:text-red-400"},ye={class:"font-semibold"},fe={key:0,class:"flex justify-center my-2"},me={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},be={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ve={class:"flex items-center gap-2 mb-3"},he={class:"font-bold text-gray-900 dark:text-gray-100"},_e={class:"space-y-2 text-sm"},we={class:"flex justify-between"},je={class:"font-semibold text-gray-900 dark:text-gray-100"},Ce={class:"flex justify-between"},De={class:"font-semibold text-gray-900 dark:text-gray-100"},Fe={class:"flex justify-between"},Le={class:"font-semibold text-green-600 dark:text-green-400"},Re={key:0,class:"flex justify-between"},Oe={class:"font-semibold text-red-600 dark:text-red-400"},We={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ze={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},Ae={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},Ue={class:"space-y-3"},Ve={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},qe={class:"font-bold text-gray-900 dark:text-gray-100"},Be={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},Ee={class:"font-bold text-green-600 dark:text-green-400"},Ge={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},Ie={class:"font-bold text-purple-600 dark:text-purple-400"},Je={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},Ke={class:"space-y-3"},Me={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},Pe={class:"font-bold text-gray-900 dark:text-gray-100"},Qe={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},Se={class:"font-bold text-green-600 dark:text-green-400"},$e={class:"flex justify-between items-center p-3 bg-orange-50 dark:bg-orange-900/30 rounded-lg"},He={class:"font-bold text-orange-600 dark:text-orange-400"},Ne={__name:"Funnel",props:{funnel_data:{type:Object,default:()=>({funnel_stages:[],summary:{total_leads:0,won_leads:0,lost_leads:0,active_leads:0,overall_conversion_rate:0,win_rate:0}})},conversion_rates:{type:Object,default:()=>({})},filters:Object},setup(Ne){const{t:Xe}=v(),Ye=Ne,Ze=e(Ye.filters?.date_from||""),et=e(Ye.filters?.date_to||""),tt=e=>e?.toFixed(1)||"0",at=e=>({new:"bg-blue-500",contacted:"bg-indigo-500",qualified:"bg-purple-500",proposal:"bg-pink-500",negotiation:"bg-orange-500",won:"bg-green-500",lost:"bg-red-500"}[e]||"bg-gray-500"),st=()=>{window.location.href=route("business.analytics.funnel",{date_from:Ze.value,date_to:et.value})},rt=()=>{Ze.value="",et.value="",window.location.href=route("business.analytics.funnel")};return(e,v)=>(c(),t(k,{title:l(Xe)("analytics.conversion_funnel")},{default:a(()=>[s(l(m),{title:l(Xe)("analytics.conversion_funnel")},null,8,["title"]),r("div",D,[r("div",F,[r("div",L,[r("div",null,[r("h1",R,[s(l(h),{class:"w-10 h-10 text-purple-600 dark:text-purple-400"}),n(" "+d(l(Xe)("analytics.conversion_funnel")),1)]),r("p",O,d(l(Xe)("analytics.funnel_analysis_desc")),1)]),s(l(b),{href:e.route("business.analytics.index"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:a(()=>[s(l(_),{class:"w-4 h-4"}),v[2]||(v[2]=n(" Dashboard ",-1))]),_:1},8,["href"])]),r("div",W,[r("div",z,[r("div",A,[r("label",T,d(l(Xe)("reports.filter.start_date")),1),o(r("input",{"onUpdate:modelValue":v[0]||(v[0]=e=>Ze.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,Ze.value]])]),r("div",U,[r("label",V,d(l(Xe)("reports.filter.end_date")),1),o(r("input",{"onUpdate:modelValue":v[1]||(v[1]=e=>et.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,et.value]])]),r("button",{onClick:st,class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors"},d(l(Xe)("common.filter")),1),r("button",{onClick:rt,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},d(l(Xe)("reports.filter.reset")),1)])]),r("div",q,[r("div",B,[r("div",E,[r("div",G,[s(l(h),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),r("div",null,[v[3]||(v[3]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Leads",-1)),r("p",I,d(Ne.funnel_data.summary.total_leads||0),1)])])]),r("div",J,[r("div",K,[r("div",M,[s(l(w),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),r("div",null,[v[4]||(v[4]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Won Deals",-1)),r("p",P,d(Ne.funnel_data.summary.won_leads||0),1)])])]),r("div",Q,[r("div",S,[r("div",$,[s(l(_),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),r("div",null,[v[5]||(v[5]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Conversion Rate",-1)),r("p",H,d(tt(Ne.funnel_data.summary.overall_conversion_rate))+"%",1)])])]),r("div",N,[r("div",X,[r("div",Y,[s(l(j),{class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),r("div",null,[v[6]||(v[6]=r("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Win Rate",-1)),r("p",Z,d(tt(Ne.funnel_data.summary.win_rate))+"%",1)])])])]),r("div",ee,[r("h3",te,d(l(Xe)("analytics.funnel_visualization")),1),r("div",ae,[(c(!0),g(x,null,u(Ne.funnel_data.funnel_stages.filter(e=>!["lost"].includes(e.stage)),(e,t)=>{return c(),g("div",{key:e.stage,class:"relative"},[r("div",se,[r("div",re,[r("p",le,d(e.label),1)]),r("div",ne,[r("div",de,[r("div",{class:f([at(e.stage),"h-full transition-all duration-500 flex items-center justify-between px-4"]),style:y({width:(a=e.percentage,Math.max(a,10)+"%")})},[r("span",oe,d(e.count),1),r("span",ie,d(tt(e.percentage))+"%",1)],6)])]),r("div",ge,[r("div",ce,[r("p",xe,[v[7]||(v[7]=n(" CR: ",-1)),r("span",ue,d(tt(e.conversion_rate))+"%",1)]),e.dropoff_rate>0?(c(),g("p",pe,[v[8]||(v[8]=n(" Dropoff: ",-1)),r("span",ye,d(tt(e.dropoff_rate))+"%",1)])):p("",!0)])])]),t<Ne.funnel_data.funnel_stages.filter(e=>!["lost","won"].includes(e.stage)).length-1?(c(),g("div",fe,[s(l(C),{class:"w-6 h-6 text-gray-400 dark:text-gray-500"})])):p("",!0)]);var a}),128))])]),r("div",me,[r("h3",be,d(l(Xe)("analytics.stage_analysis")),1),r("div",ke,[(c(!0),g(x,null,u(Ne.funnel_data.funnel_stages.filter(e=>!["lost"].includes(e.stage)),e=>(c(),g("div",{key:e.stage,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow"},[r("div",ve,[r("div",{class:f([at(e.stage),"w-3 h-3 rounded-full"])},null,2),r("p",he,d(e.label),1)]),r("div",_e,[r("div",we,[v[9]||(v[9]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Leads:",-1)),r("span",je,d(e.count),1)]),r("div",Ce,[v[10]||(v[10]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Percentage:",-1)),r("span",De,d(tt(e.percentage))+"%",1)]),r("div",Fe,[v[11]||(v[11]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Conversion:",-1)),r("span",Le,d(tt(e.conversion_rate))+"%",1)]),e.dropoff_rate>0?(c(),g("div",Re,[v[12]||(v[12]=r("span",{class:"text-gray-600 dark:text-gray-400"},"Dropoff:",-1)),r("span",Oe,d(tt(e.dropoff_rate))+"%",1)])):p("",!0)])]))),128))])]),r("div",We,[r("h3",ze,d(l(Xe)("analytics.conversion_insights")),1),r("div",Ae,[r("div",null,[r("h4",Te,d(l(Xe)("analytics.overall_performance")),1),r("div",Ue,[r("div",Ve,[v[13]||(v[13]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Total Leads",-1)),r("span",qe,d(Ne.conversion_rates.overall.total_leads),1)]),r("div",Be,[v[14]||(v[14]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Won Deals",-1)),r("span",Ee,d(Ne.conversion_rates.overall.won_leads),1)]),r("div",Ge,[v[15]||(v[15]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Conversion Rate",-1)),r("span",Ie,d(tt(Ne.conversion_rates.overall.conversion_rate))+"%",1)])])]),r("div",null,[r("h4",Je,d(l(Xe)("analytics.time_to_close")),1),r("div",Ke,[r("div",Me,[v[16]||(v[16]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Average Days",-1)),r("span",Pe,d(Ne.conversion_rates.avg_time_to_close.avg_days)+" kun",1)]),r("div",Qe,[v[17]||(v[17]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Fastest Close",-1)),r("span",Se,d(Ne.conversion_rates.avg_time_to_close.fastest_close)+" kun",1)]),r("div",$e,[v[18]||(v[18]=r("span",{class:"text-gray-700 dark:text-gray-300"},"Slowest Close",-1)),r("span",He,d(Ne.conversion_rates.avg_time_to_close.slowest_close)+" kun",1)])])])])])])])]),_:1},8,["title"]))}};export{Ne as default};
