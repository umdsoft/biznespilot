import{h as e,r as t}from"./chunk-BhZp3z4u.js";import{_ as a}from"./chunk-BDBDdGhv.js";import{u as r}from"./app-C-ZlocOh.js";import{r as s}from"./chunk-Bsc1JRL5.js";import{r as l}from"./chunk-eMHYSAeQ.js";import{r as d}from"./chunk-XzsiFwnJ.js";import{r as n}from"./chunk-dqIIyBTR.js";import{r as c,b as o,v as i,x as g,L as y,y as x,A as p,C as u,I as k,z as m,E as b,D as h,J as f,K as v}from"./chunk-CpmtkKLp.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const w={class:"space-y-6"},j={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},_={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},C={class:"text-sm text-gray-500 dark:text-gray-400"},A={class:"flex items-center gap-3"},S={key:0,class:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},z={class:"flex items-center gap-3 mb-4"},D={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},U={class:"text-xl font-bold"},q={key:0,class:"space-y-3"},B={class:"flex items-center justify-between"},E={class:"text-lg font-bold"},O={class:"flex items-center justify-between"},F={class:"text-lg font-bold"},K={key:0,class:"flex items-center justify-between"},L={class:"text-lg font-bold"},Y={key:1,class:"text-center py-4"},$={class:"flex flex-col justify-center gap-3"},H=["disabled"],J={key:0},M={key:1},W=["disabled"],Z={key:0},G={key:1},N={key:2,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white/20 rounded-xl"},P={key:3,class:"text-center"},Q={class:b(["inline-flex px-4 py-1 rounded-full text-sm font-medium bg-white/20"])},R={key:1,class:"grid grid-cols-2 md:grid-cols-4 gap-4"},T={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},V={class:"flex items-center gap-3"},X={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},ee={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},te={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},ae={class:"flex items-center gap-3"},re={class:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center"},se={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},le={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},de={class:"flex items-center gap-3"},ne={class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},ce={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},oe={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},ie={class:"flex items-center gap-3"},ge={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},ye={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},xe={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},pe={key:0,class:"overflow-x-auto"},ue={class:"w-full"},ke={class:"divide-y divide-gray-200 dark:divide-gray-700"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},be={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},ve={class:"px-6 py-4 whitespace-nowrap"},we={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},je={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},_e={__name:"Index",props:{records:{type:Array,default:()=>[]},summary:{type:Object,default:null},todayAttendance:{type:Object,default:null},teamMembers:{type:Array,default:()=>[]},selectedUserId:{type:String,default:null},selectedDate:{type:String,default:null},view:{type:String,default:"daily"}},setup(_e){const{t:Ce}=r(),Ae=_e,Se=c(!1),Ie=c(!1);c(!1),c(null);const ze=o(()=>Ae.todayAttendance?.is_checked_in),De=o(()=>Ae.todayAttendance?.is_checked_out),Ue=async()=>{if(!Se.value){Se.value=!0;try{await t.post(route("hr.attendance.check-in"),{location:"Office"},{preserveScroll:!0,onSuccess:()=>{},onError:()=>{alert("Check-in xatolik yuz berdi")},onFinish:()=>{Se.value=!1}})}catch(e){Se.value=!1}}},qe=async()=>{if(!Ie.value){Ie.value=!0;try{await t.post(route("hr.attendance.check-out"),{},{preserveScroll:!0,onSuccess:()=>{},onError:()=>{alert("Check-out xatolik yuz berdi")},onFinish:()=>{Ie.value=!1}})}catch(e){Ie.value=!1}}},Be=e=>{t.get(route("hr.attendance.index"),{view:e,user_id:Ae.selectedUserId,date:Ae.selectedDate},{preserveState:!0,preserveScroll:!0})},Ee=e=>e||"--:--";return(t,r)=>(h(),i(a,{title:p(Ce)("hr.attendance")},{default:g(()=>[y(p(e),{title:p(Ce)("hr.attendance")},null,8,["title"]),x("div",w,[x("div",j,[x("div",null,[x("h1",_,m(p(Ce)("hr.attendance_tracking")),1),x("p",C,m(p(Ce)("hr.attendance_subtitle")),1)]),x("div",A,[x("button",{onClick:r[0]||(r[0]=e=>Be("daily")),class:b(["px-4 py-2 rounded-lg text-sm font-medium transition-colors","daily"===_e.view?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},m(p(Ce)("hr.daily")),3),x("button",{onClick:r[1]||(r[1]=e=>Be("monthly")),class:b(["px-4 py-2 rounded-lg text-sm font-medium transition-colors","monthly"===_e.view?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"])},m(p(Ce)("hr.monthly")),3)])]),_e.selectedUserId!==t.$page.props.auth.user.id&&_e.selectedUserId?k("",!0):(h(),u("div",S,[x("div",I,[x("div",null,[x("div",z,[x("div",D,[y(p(s),{class:"w-6 h-6"})]),x("div",null,[r[2]||(r[2]=x("p",{class:"text-sm opacity-90"},"Bugun",-1)),x("p",U,m((new Date).toLocaleDateString("uz-UZ",{day:"numeric",month:"long"})),1)])]),_e.todayAttendance?(h(),u("div",q,[x("div",B,[r[3]||(r[3]=x("span",{class:"text-sm opacity-90"},"Check-in:",-1)),x("span",E,m(Ee(_e.todayAttendance.check_in)),1)]),x("div",O,[r[4]||(r[4]=x("span",{class:"text-sm opacity-90"},"Check-out:",-1)),x("span",F,m(Ee(_e.todayAttendance.check_out)),1)]),_e.todayAttendance.work_hours?(h(),u("div",K,[r[5]||(r[5]=x("span",{class:"text-sm opacity-90"},"Ish soatlari:",-1)),x("span",L,m(_e.todayAttendance.work_hours)+" soat",1)])):k("",!0)])):(h(),u("div",Y,[...r[6]||(r[6]=[x("p",{class:"text-sm opacity-90"},"Bugun hali check-in qilmagansiz",-1)])]))]),x("div",$,[ze.value?De.value?(h(),u("div",N,[y(p(l),{class:"w-6 h-6"}),r[7]||(r[7]=x("span",{class:"font-semibold"},"Bugun ishni tamomladingiz",-1))])):(h(),u("button",{key:1,onClick:qe,disabled:Ie.value,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white text-purple-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[y(p(d),{class:"w-6 h-6"}),Ie.value?(h(),u("span",Z,"Check-out qilyapman...")):(h(),u("span",G,"Check-out"))],8,W)):(h(),u("button",{key:0,onClick:Ue,disabled:Se.value,class:"flex items-center justify-center gap-2 px-6 py-4 bg-white text-purple-600 font-semibold rounded-xl hover:bg-gray-100 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[y(p(l),{class:"w-6 h-6"}),Se.value?(h(),u("span",J,"Check-in qilyapman...")):(h(),u("span",M,"Check-in"))],8,H)),_e.todayAttendance?(h(),u("div",P,[x("span",Q,m(_e.todayAttendance.status_label),1)])):k("",!0)])])])),_e.summary?(h(),u("div",R,[x("div",T,[x("div",V,[x("div",X,[y(p(l),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),x("div",null,[x("p",ee,m(_e.summary.present_days),1),r[8]||(r[8]=x("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Ishda",-1))])])]),x("div",te,[x("div",ae,[x("div",re,[y(p(s),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),x("div",null,[x("p",se,m(_e.summary.late_days),1),r[9]||(r[9]=x("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Kechikkan",-1))])])]),x("div",le,[x("div",de,[x("div",ne,[y(p(d),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),x("div",null,[x("p",ce,m(_e.summary.absent_days),1),r[10]||(r[10]=x("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Yo'q",-1))])])]),x("div",oe,[x("div",ie,[x("div",ge,[y(p(n),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),x("div",null,[x("p",ye,m(_e.summary.attendance_percentage)+"%",1),r[11]||(r[11]=x("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Davomat",-1))])])])])):k("",!0),x("div",xe,[r[14]||(r[14]=x("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[x("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Davomat Yozuvlari")],-1)),_e.records.length>0?(h(),u("div",pe,[x("table",ue,[r[12]||(r[12]=x("thead",{class:"bg-gray-50 dark:bg-gray-900/50"},[x("tr",null,[x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Sana"),x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Check-in"),x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Check-out"),x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Ish soati"),x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Holat"),x("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Izoh")])],-1)),x("tbody",ke,[(h(!0),u(f,null,v(_e.records,e=>{return h(),u("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[x("td",me,m(e.date_formatted),1),x("td",be,m(Ee(e.check_in)),1),x("td",he,m(Ee(e.check_out)),1),x("td",fe,m(e.work_hours||0)+" soat ",1),x("td",ve,[x("span",{class:b(["px-2 py-1 text-xs font-medium rounded-full",(t=e.status,{present:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",absent:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",late:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",half_day:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",wfh:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400",leave:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"}[t]||"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300")])},m(e.status_label),3)]),x("td",we,m(e.notes||"-"),1)]);var t}),128))])])])):(h(),u("div",je,[y(p(s),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),r[13]||(r[13]=x("p",null,"Davomat yozuvlari topilmadi",-1))]))])])]),_:1},8,["title"]))}};export{_e as default};
