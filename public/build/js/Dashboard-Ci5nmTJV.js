import{_ as e}from"./chunk-BHCorYK2.js";import{r as a,h as t}from"./chunk-BhZp3z4u.js";import{_ as r}from"./chunk-BZGsuock.js";import{_ as s}from"./chunk-D86I8k7r.js";import{_ as l,a as o}from"./chunk-BFCfoIK9.js";import{u as d}from"./app-C-ZlocOh.js";import{b as n,C as i,D as u,I as c,J as m,K as g,y as p,E as h,z as b,A as k,Q as y,r as x,B as v,L as f,x as w,v as _}from"./chunk-CpmtkKLp.js";import{a as j}from"./chunk-i83483Sm.js";import{r as S}from"./chunk-BB7xsSUf.js";import{r as M}from"./chunk-eMHYSAeQ.js";import{r as A}from"./chunk-BiW1c8q7.js";import{n as $}from"./chunk-D7SyfRoT.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";import"./chunk-beXL1A--.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const T={class:"space-y-4"},z={class:"flex items-center justify-between mb-2"},C={class:"flex items-center gap-2"},L={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},F={class:"text-sm font-semibold text-gray-900 dark:text-white"},P={class:"h-10 bg-gray-100 dark:bg-gray-700 rounded-xl overflow-hidden relative"},H={key:0,class:"text-white text-xs font-bold drop-shadow-sm"},O={class:"absolute inset-y-0 right-3 flex items-center"},B={key:0,class:"text-xs font-medium text-gray-500 dark:text-gray-400"},D={key:0,class:"text-center py-8"},U={class:"text-gray-500 dark:text-gray-400"},N={key:1,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},I={class:"flex items-center justify-between"},K={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},R={class:"text-right"},Z={class:"text-lg font-bold text-gray-900 dark:text-white"},q={class:"text-sm text-gray-500 dark:text-gray-400 ml-2"},V={__name:"PipelineChart",props:{stages:{type:Array,default:()=>[]}},setup(e){const{t:a}=d(),t=e,r=n(()=>Array.isArray(t.stages)?t.stages:[]),s=n(()=>r.value.reduce((e,a)=>e+(a.count||0),0)),l=n(()=>r.value.reduce((e,a)=>e+(a.value||0),0)),o=e=>0===s.value?0:Math.max(e/s.value*100,8),x=e=>{const a=["bg-gradient-to-r from-blue-500 to-blue-600","bg-gradient-to-r from-yellow-500 to-yellow-600","bg-gradient-to-r from-purple-500 to-purple-600","bg-gradient-to-r from-indigo-500 to-indigo-600","bg-gradient-to-r from-orange-500 to-orange-600","bg-gradient-to-r from-emerald-500 to-emerald-600","bg-gradient-to-r from-red-500 to-red-600"];return a[e%a.length]},v=e=>{const a=["bg-blue-500","bg-yellow-500","bg-purple-500","bg-indigo-500","bg-orange-500","bg-emerald-500","bg-red-500"];return a[e%a.length]},f=e=>e?e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(e):"";return(e,t)=>(u(),i("div",T,[(u(!0),i(m,null,g(r.value,(e,t)=>(u(),i("div",{key:e.id||t,class:"relative"},[p("div",z,[p("div",C,[p("div",{class:h(["w-2.5 h-2.5 rounded-full",v(t)])},null,2),p("span",L,b(e.label),1)]),p("span",F,b(e.count)+" "+b(k(a)("dashboard.pipeline.count_unit")),1)]),p("div",P,[p("div",{class:h([x(t),"h-full transition-all duration-500 flex items-center justify-end pr-3 rounded-xl"]),style:y({width:`${o(e.count)}%`})},[e.count>0?(u(),i("span",H,b(f(e.value)),1)):c("",!0)],6),p("div",O,[e.count>0&&o(e.count)<40?(u(),i("span",B,b(Math.round(o(e.count)))+"% ",1)):c("",!0)])])]))),128)),0===r.value.length?(u(),i("div",D,[t[0]||(t[0]=p("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[p("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),p("p",U,b(k(a)("dashboard.pipeline.no_data")),1)])):c("",!0),r.value.length>0?(u(),i("div",N,[p("div",I,[p("span",K,b(k(a)("dashboard.pipeline.total")),1),p("div",R,[p("span",Z,b(s.value)+" "+b(k(a)("dashboard.pipeline.leads_count")),1),p("span",q,b(f(l.value)),1)])])])):c("",!0)]))}},E={class:"space-y-3"},J={key:0,class:"text-center py-8"},Q={class:"text-gray-500 dark:text-gray-400"},G={class:"font-semibold text-sm"},W={class:"flex-1 min-w-0"},X={class:"font-medium text-gray-900 dark:text-white truncate"},Y={class:"flex items-center gap-3 text-sm"},ee={class:"text-gray-500 dark:text-gray-400"},ae={class:"text-gray-500 dark:text-gray-400"},te={class:"text-right flex-shrink-0"},re={class:"font-bold text-gray-900 dark:text-white"},se={class:"text-xs text-gray-500 dark:text-gray-400"},le={__name:"TeamPerformance",props:{members:{type:Array,default:()=>[]},limit:{type:Number,default:5},showRank:{type:Boolean,default:!0}},setup(e){const{t:a}=d(),t=e,r=n(()=>{const e=Array.isArray(t.members)?t.members:[];return t.limit>0?e.slice(0,t.limit):e}),s=["bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400","bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400","bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400","bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400","bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"];return(t,l)=>(u(),i("div",E,[0===r.value.length?(u(),i("div",J,[l[0]||(l[0]=p("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[p("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),p("p",Q,b(k(a)("dashboard.team.no_members")),1)])):c("",!0),(u(!0),i(m,null,g(r.value,(t,r)=>{return u(),i("div",{key:t.id||r,class:h(["flex items-center gap-3 p-3 rounded-xl transition-all duration-200","bg-gray-50 dark:bg-gray-700/50","hover:bg-gray-100 dark:hover:bg-gray-700","border border-transparent hover:border-gray-200 dark:hover:border-gray-600"])},[e.showRank&&r<3?(u(),i("div",{key:0,class:h(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",0===r?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":1===r?"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300":"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"])},b(r+1),3)):c("",!0),p("div",{class:h(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",s[r%s.length]])},[p("span",G,b((o=t.name,o?o.split(" ").map(e=>e[0]).join("").toUpperCase().substring(0,2):"U")),1)],2),p("div",W,[p("p",X,b(t.name),1),p("div",Y,[p("span",ee,b(t.leads_handled||t.leads_count||0)+" "+b(k(a)("dashboard.team.lead")),1),p("span",ae,b(t.leads_won||t.won_count||0)+" "+b(k(a)("dashboard.team.won")),1),p("span",{class:h(["font-medium",(t.conversion_rate||0)>=30?"text-emerald-600 dark:text-emerald-400":(t.conversion_rate||0)>=15?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"])},b(t.conversion_rate||0)+"% CR ",3)])]),p("div",te,[p("p",re,b((l=t.revenue||0,l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(l||0))),1),p("p",se,b(k(a)("dashboard.team.revenue")),1)])]);var l,o}),128))]))}},oe={class:"space-y-6"},de={class:"flex items-center justify-between"},ne={class:"text-2xl font-bold text-gray-900 dark:text-white"},ie={class:"text-gray-500 dark:text-gray-400 mt-1"},ue={class:"flex items-center gap-3"},ce={class:"text-sm text-gray-500 dark:text-gray-400"},me=["disabled"],ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},pe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},he={class:"lg:col-span-2"},be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},ke={__name:"SalesHeadDashboard",props:{teamMembers:{type:Array,default:()=>[]},leadStats:{type:Object,default:()=>({})},revenueStats:{type:Object,default:()=>({})},pipeline:{type:Object,default:()=>({})},teamPerformance:{type:Array,default:()=>[]},recentLeads:{type:Array,default:()=>[]},overdueTasks:{type:Array,default:()=>[]},panelType:{type:String,default:"saleshead",validator:e=>["saleshead","business"].includes(e)}},setup(e){const{t:t}=d(),c=e,m=x(!1),g=n(()=>({new:{label:t("dashboard.saleshead.stage_new"),color:"bg-blue-500"},contacted:{label:t("dashboard.saleshead.stage_contacted"),color:"bg-yellow-500"},qualified:{label:t("dashboard.saleshead.stage_qualified"),color:"bg-purple-500"},proposal:{label:t("dashboard.saleshead.stage_proposal"),color:"bg-orange-500"},negotiation:{label:t("dashboard.saleshead.stage_negotiation"),color:"bg-pink-500"}})),y=n(()=>(new Date).toLocaleDateString("uz-UZ",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),_=e=>j(e),T=()=>"saleshead"===c.panelType?"/sales-head":"/business",z=()=>{m.value=!0,a.reload({only:["teamMembers","leadStats","revenueStats","pipeline","teamPerformance","recentLeads","overdueTasks"],onFinish:()=>{m.value=!1}})};return(a,d)=>(u(),i("div",oe,[p("div",de,[p("div",null,[p("h1",ne,b(k(t)("dashboard.saleshead.title")),1),p("p",ie,b(k(t)("dashboard.saleshead.subtitle")),1)]),p("div",ue,[p("span",ce,b(y.value),1),p("button",{onClick:z,disabled:m.value,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50"},[(u(),i("svg",{class:h([{"animate-spin":m.value},"w-4 h-4"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...d[0]||(d[0]=[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),v(" "+b(k(t)("dashboard.saleshead.refresh")),1)],8,me)])]),p("div",ge,[f(r,{title:k(t)("dashboard.saleshead.today_new_leads"),value:e.leadStats.new_today||0,subtitle:`${k(t)("dashboard.saleshead.active_leads")}: ${e.leadStats.total_active||0}`,icon:k(S),"icon-bg-color":"emerald"},null,8,["title","value","subtitle","icon"]),f(r,{title:k(t)("dashboard.saleshead.monthly_won"),value:e.leadStats.won_this_month||0,subtitle:`${k(t)("dashboard.saleshead.conversion")}: ${e.leadStats.conversion_rate||0}%`,icon:k(M),"icon-bg-color":"green","value-color":"emerald"},null,8,["title","value","subtitle","icon"]),f(r,{title:k(t)("dashboard.saleshead.today_revenue"),value:_(e.revenueStats.today),subtitle:`${k(t)("dashboard.saleshead.monthly")}: ${_(e.revenueStats.this_month)}`,icon:k(A),"icon-bg-color":"blue","value-color":"blue"},null,8,["title","value","subtitle","icon"]),f(r,{title:k(t)("dashboard.saleshead.operators_count"),value:e.teamMembers.length,icon:k($),"icon-bg-color":"purple","value-color":"purple",href:`${T()}/team`,"link-text":k(t)("dashboard.view_details")},null,8,["title","value","icon","href","link-text"])]),p("div",pe,[p("div",he,[f(s,{title:k(t)("dashboard.saleshead.sales_funnel"),"link-href":`${T()}/pipeline`,"link-text":k(t)("dashboard.view_details")},{default:w(()=>[f(V,{pipeline:e.pipeline,stages:g.value},null,8,["pipeline","stages"])]),_:1},8,["title","link-href","link-text"])]),f(s,{title:k(t)("dashboard.saleshead.top_operators"),"link-href":`${T()}/performance`,"link-text":k(t)("dashboard.saleshead.view_all")},{default:w(()=>[f(le,{members:e.teamPerformance,limit:5},null,8,["members"])]),_:1},8,["title","link-href","link-text"])]),p("div",be,[f(s,{title:k(t)("dashboard.saleshead.recent_leads"),"link-href":`${T()}/leads`,"link-text":k(t)("dashboard.saleshead.view_all")},{default:w(()=>[f(l,{leads:e.recentLeads,"base-path":`${T()}/leads`,"show-avatar":"","show-date":""},null,8,["leads","base-path"])]),_:1},8,["title","link-href","link-text"]),f(s,{title:k(t)("dashboard.saleshead.overdue_tasks"),badge:e.overdueTasks.length>0?e.overdueTasks.length:null,"badge-color":"red","link-href":`${T()}/tasks`,"link-text":k(t)("dashboard.saleshead.view_all")},{default:w(()=>[f(o,{tasks:e.overdueTasks,"is-overdue":"","show-assignee":"","empty-text":k(t)("dashboard.saleshead.no_overdue_tasks"),"empty-icon":"success"},null,8,["tasks","empty-text"])]),_:1},8,["title","badge","link-href","link-text"])])]))}},ye={__name:"Dashboard",props:{teamMembers:{type:Array,default:()=>[]},leadStats:{type:Object,default:()=>({})},revenueStats:{type:Object,default:()=>({})},pipeline:{type:Object,default:()=>({})},teamPerformance:{type:Array,default:()=>[]},recentLeads:{type:Array,default:()=>[]},overdueTasks:{type:Array,default:()=>[]}},setup(a){const{t:r}=d();return(s,l)=>(u(),_(e,{title:k(r)("nav.dashboard")},{default:w(()=>[f(k(t),{title:k(r)("saleshead.dashboard_title")},null,8,["title"]),f(ke,{"team-members":a.teamMembers,"lead-stats":a.leadStats,"revenue-stats":a.revenueStats,pipeline:a.pipeline,"team-performance":a.teamPerformance,"recent-leads":a.recentLeads,"overdue-tasks":a.overdueTasks,"panel-type":"saleshead"},null,8,["team-members","lead-stats","revenue-stats","pipeline","team-performance","recent-leads","overdue-tasks"])]),_:1},8,["title"]))}};export{ye as default};
