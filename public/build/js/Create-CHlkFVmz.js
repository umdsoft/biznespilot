import{b as e,r,w as a,v as t,x as s,L as l,y as o,A as n,C as d,I as i,B as c,z as u,D as g,J as m,K as p,N as b,F as x,E as y,G as k,H as h,Q as v}from"./chunk-CpmtkKLp.js";import{b as f,u as w,h as _,l as j}from"./chunk-BhZp3z4u.js";import{k as C}from"./chunk-Di_CyRGr.js";import{_ as q}from"./chunk-DbFbpSR2.js";import{u as V}from"./app-C-ZlocOh.js";import{r as X}from"./chunk-BuJDoypK.js";import{r as U}from"./chunk-BB7xsSUf.js";import{r as A}from"./chunk-beXL1A--.js";import{r as B}from"./chunk-BFPxvklm.js";import{e as I,f as T}from"./chunk-D7SyfRoT.js";import{r as z}from"./chunk-DvBKKKMs.js";import{r as F}from"./chunk-CAoK8Mdm.js";import{r as N}from"./chunk-CBAnz7Zv.js";import{a as O}from"./chunk-C9nNyFhC.js";import{r as S}from"./chunk-dqIIyBTR.js";import{r as E}from"./chunk-CvscUVdi.js";import{r as M}from"./chunk-BiW1c8q7.js";import{r as $}from"./chunk-BYA8ViGa.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-CTIk0k8a.js";import"./chunk-BvbZUszZ.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";const D={class:"p-6"},H={class:"max-w-4xl mx-auto"},J={class:"mb-8"},K={class:"flex items-center gap-4"},Z={class:"w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},G={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},L={class:"text-sm text-gray-500 dark:text-gray-400"},P={key:0,class:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},Q={class:"flex items-start gap-3"},R={class:"flex-shrink-0"},W={class:"flex-1"},Y={class:"text-sm font-semibold text-amber-800 dark:text-amber-200"},ee={class:"mt-2 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700"},re={class:"flex items-center justify-between"},ae={class:"font-medium text-gray-900 dark:text-white"},te={class:"text-sm text-gray-500 dark:text-gray-400"},se={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},le={class:"mt-3 flex items-center gap-3"},oe={key:1,class:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},ne={class:"flex items-start gap-3"},de={class:"flex-shrink-0"},ie={class:"flex-1"},ce={class:"text-sm font-semibold text-amber-800 dark:text-amber-200"},ue={class:"mt-2 space-y-2"},ge={class:"flex items-center justify-between"},me={class:"font-medium text-gray-900 dark:text-white"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},be={class:"text-xs text-gray-400 dark:text-gray-500 mt-0.5"},xe={class:"mt-2 text-xs text-amber-700 dark:text-amber-400"},ye={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},ke={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},he={class:"flex items-center gap-3"},ve={class:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},fe={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},we={class:"p-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},je={class:"md:col-span-2"},Ce={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qe={class:"relative"},Ve={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},Xe={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},Ue={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},Ae={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Be={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ie={class:"relative"},Te={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},ze={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},Fe={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},Ne={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Oe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Se={class:"relative"},Ee={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},Me={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},$e={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},De={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},He={key:1,class:"mt-1 text-xs text-gray-400 dark:text-gray-500"},Je={class:"md:col-span-2"},Ke={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ze={class:"relative"},Ge={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},Le={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Pe={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Qe={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Re={class:"flex items-center gap-3"},We={class:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg"},Ye={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},er={class:"p-6"},rr={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},ar={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tr={class:"relative"},sr={value:"new"},lr={value:"contacted"},or={value:"qualified"},nr={value:"proposal"},dr={value:"negotiation"},ir={value:"won"},cr={value:"lost"},ur={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},gr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},mr={class:"relative"},pr={value:""},br=["label"],xr=["value"],yr={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},kr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},hr={class:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},vr={class:"flex items-center justify-between mb-3"},fr={class:"flex items-center gap-2"},wr={class:"text-sm text-gray-600 dark:text-gray-400"},_r={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3"},jr={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Cr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qr={class:"relative"},Vr={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},Xr=["value"],Ur={class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},Ar={class:"text-sm text-gray-400 dark:text-gray-500"},Br={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Ir={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Tr={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},zr={class:"flex items-center gap-3"},Fr={class:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},Nr={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Or={class:"p-6"},Sr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Er=["placeholder"],Mr={class:"flex justify-between mt-1"},$r={key:0,class:"text-sm text-red-600 dark:text-red-400"},Dr={key:1},Hr={class:"text-xs text-gray-400 dark:text-gray-500"},Jr={class:"flex items-center justify-end gap-3 pt-4"},Kr=["disabled"],Zr={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},Gr={key:2},Lr={key:3},Pr={__name:"Create",props:{channels:{type:Array,default:()=>[]}},setup(Pr){const{t:Qr}=V(),Rr=Pr,Wr=f(),Yr=e(()=>Wr.props.flash?.duplicate_warning),ea=r({loading:!1,duplicates:null}),ra=r(!1),aa=w({name:"",email:"",phone:"",company:"",source_id:"",status:"new",score:0,estimated_value:null,notes:""}),ta=r({name:"",email:"",phone:""}),sa={mask:"+998 ## ### ## ##",eager:!0},la=e(()=>{const e={},r={digital:"Digital",offline:"Offline",referral:"Tavsiya",organic:"Organik"};return Rr.channels.forEach(a=>{const t=a.category||"other";e[t]||(e[t]={label:r[t]||t,items:[]}),e[t].items.push(a)}),e}),oa=e=>{if(!e)return ta.value.email="",!0;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?(ta.value.email="",!0):(ta.value.email="Email formati noto'g'ri",!1)},na=e=>{if(!e)return ta.value.phone="",!0;return e.replace(/\s/g,"").length<13?(ta.value.phone="Telefon raqamini to'liq kiriting",!1):(ta.value.phone="",!0)},da=e=>{if(!e)return ta.value.name="",!0;return/^[a-zA-ZА-Яа-яЎўҚқҒғҲҳ\s'`'-]+$/.test(e)?e.length<2?(ta.value.name="Ism kamida 2 ta belgidan iborat bo'lishi kerak",!1):(ta.value.name="",!0):(ta.value.name="Faqat harflar va bo'shliq kiritish mumkin",!1)},ia=e=>{if(!e)return"";const r=parseFloat(e);return isNaN(r)?"":new Intl.NumberFormat("uz-UZ").format(r)},ca=e=>{const r=e.target.value;aa.estimated_value=(e=>{if(!e)return null;const r=e.replace(/[^\d]/g,"");return r?parseInt(r,10):null})(r)},ua=async()=>{const e=aa.phone?.replace(/\s/g,"");if(!e||e.length<13)ea.value.duplicates=null;else{ea.value.loading=!0;try{const e=await fetch(route("business.api.sales.check-duplicate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify({phone:aa.phone})}),r=await e.json();ea.value.duplicates=r.has_duplicates?r.duplicates:null}catch(r){}finally{ea.value.loading=!1}}};let ga;a(()=>aa.phone,e=>{clearTimeout(ga);const r=e?.replace(/\s/g,"");r&&r.length>=13?ga=setTimeout(ua,500):ea.value.duplicates=null});const ma=()=>{const e=da(aa.name),r=oa(aa.email),a=na(aa.phone);e&&r&&a&&(ra.value?aa.transform(e=>({...e,force_create:!0})).post(route("business.sales.store")):aa.post(route("business.sales.store")))},pa=()=>{ra.value=!0,ma()},ba=e=>e>=70?"bg-green-500":e>=40?"bg-yellow-500":"bg-red-500";return(e,r)=>(g(),t(q,{title:n(Qr)("sales.new_lead")},{default:s(()=>{return[l(n(_),{title:n(Qr)("sales.add_new_lead")},null,8,["title"]),o("div",D,[o("div",H,[o("div",J,[l(n(j),{href:e.route("business.sales.index"),class:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-4"},{default:s(()=>[l(n(X),{class:"w-4 h-4"}),c(" "+u(n(Qr)("sales.back_to_sales")),1)]),_:1},8,["href"]),o("div",K,[o("div",Z,[l(n(U),{class:"w-8 h-8 text-blue-600 dark:text-blue-400"})]),o("div",null,[o("h1",G,u(n(Qr)("sales.add_new_lead")),1),o("p",L,u(n(Qr)("sales.enter_potential_customer_info")),1)])])]),Yr.value&&!ra.value?(g(),d("div",P,[o("div",Q,[o("div",R,[l(n(A),{class:"w-6 h-6 text-amber-600 dark:text-amber-400"})]),o("div",W,[o("h3",Y,u(Yr.value.message),1),o("div",ee,[o("div",re,[o("div",null,[o("p",ae,u(Yr.value.existing_lead.name),1),o("p",te,u(Yr.value.existing_lead.phone),1),o("p",se,u(n(Qr)("sales.created"))+": "+u(Yr.value.existing_lead.created_at),1)]),l(n(j),{href:e.route("business.sales.show",Yr.value.existing_lead.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"},{default:s(()=>[l(n(B),{class:"w-4 h-4"}),c(" "+u(n(Qr)("common.view")),1)]),_:1},8,["href"])])]),o("div",le,[o("button",{type:"button",onClick:pa,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors"},u(n(Qr)("sales.create_anyway")),1),l(n(j),{href:e.route("business.sales.show",Yr.value.existing_lead.id),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg transition-colors"},{default:s(()=>[c(u(n(Qr)("sales.go_to_existing_lead")),1)]),_:1},8,["href"])])])])])):i("",!0),ea.value.duplicates?.phone&&!Yr.value?(g(),d("div",oe,[o("div",ne,[o("div",de,[l(n(A),{class:"w-6 h-6 text-amber-600 dark:text-amber-400"})]),o("div",ie,[o("h3",ce,u(n(Qr)("sales.leads_with_phone_exist")),1),o("div",ue,[(g(!0),d(m,null,p(ea.value.duplicates.phone,r=>(g(),d("div",{key:r.id,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700"},[o("div",ge,[o("div",null,[o("p",me,u(r.name),1),o("p",pe,u(r.phone)+" • "+u(r.status),1),o("p",be,u(r.created_at),1)]),l(n(j),{href:e.route("business.sales.show",r.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"},{default:s(()=>[l(n(B),{class:"w-4 h-4"}),c(" "+u(n(Qr)("common.view")),1)]),_:1},8,["href"])])]))),128))]),o("p",xe,u(n(Qr)("sales.duplicate_warning_note")),1)])])])):i("",!0),o("form",{onSubmit:b(ma,["prevent"]),class:"space-y-6"},[o("div",ye,[o("div",ke,[o("div",he,[o("div",ve,[l(n(I),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),o("h2",fe,u(n(Qr)("sales.basic_info")),1)])]),o("div",we,[o("div",_e,[o("div",je,[o("label",Ce,[c(u(n(Qr)("sales.full_name"))+" ",1),r[13]||(r[13]=o("span",{class:"text-red-500"},"*",-1))]),o("div",qe,[o("div",Ve,[l(n(I),{class:"w-5 h-5 text-gray-400"})]),x(o("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>n(aa).name=e),type:"text",placeholder:"Alisher Valiyev",required:"",onBlur:r[1]||(r[1]=e=>da(n(aa).name)),onInput:r[2]||(r[2]=e=>da(n(aa).name)),class:y(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":n(aa).errors.name||ta.value.name,"border-green-500 dark:border-green-500":n(aa).name&&!ta.value.name&&!n(aa).errors.name}])},null,34),[[k,n(aa).name]]),ta.value.name?(g(),d("div",Xe,[l(n(z),{class:"w-5 h-5 text-red-500"})])):n(aa).name&&!n(aa).errors.name?(g(),d("div",Ue,[l(n(F),{class:"w-5 h-5 text-green-500"})])):i("",!0)]),n(aa).errors.name||ta.value.name?(g(),d("p",Ae,u(n(aa).errors.name||ta.value.name),1)):i("",!0)]),o("div",null,[o("label",Be,u(n(Qr)("forms.email")),1),o("div",Ie,[o("div",Te,[l(n(N),{class:"w-5 h-5 text-gray-400"})]),x(o("input",{"onUpdate:modelValue":r[3]||(r[3]=e=>n(aa).email=e),type:"email",placeholder:"alisher@example.com",onBlur:r[4]||(r[4]=e=>oa(n(aa).email)),onInput:r[5]||(r[5]=e=>oa(n(aa).email)),class:y(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":n(aa).errors.email||ta.value.email,"border-green-500 dark:border-green-500":n(aa).email&&!ta.value.email&&!n(aa).errors.email}])},null,34),[[k,n(aa).email]]),ta.value.email?(g(),d("div",ze,[l(n(z),{class:"w-5 h-5 text-red-500"})])):n(aa).email&&!n(aa).errors.email?(g(),d("div",Fe,[l(n(F),{class:"w-5 h-5 text-green-500"})])):i("",!0)]),n(aa).errors.email||ta.value.email?(g(),d("p",Ne,u(n(aa).errors.email||ta.value.email),1)):i("",!0)]),o("div",null,[o("label",Oe,u(n(Qr)("forms.phone")),1),o("div",Se,[o("div",Ee,[l(n(O),{class:"w-5 h-5 text-gray-400"})]),x(o("input",{"onUpdate:modelValue":r[6]||(r[6]=e=>n(aa).phone=e),type:"tel",placeholder:"+998 90 123 45 67",onBlur:r[7]||(r[7]=e=>na(n(aa).phone)),class:y(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":n(aa).errors.phone||ta.value.phone,"border-green-500 dark:border-green-500":n(aa).phone&&n(aa).phone.replace(/\s/g,"").length>=13&&!ta.value.phone&&!n(aa).errors.phone}])},null,34),[[k,n(aa).phone],[n(C),void 0,sa]]),ta.value.phone?(g(),d("div",Me,[l(n(z),{class:"w-5 h-5 text-red-500"})])):n(aa).phone&&n(aa).phone.replace(/\s/g,"").length>=13&&!n(aa).errors.phone?(g(),d("div",$e,[l(n(F),{class:"w-5 h-5 text-green-500"})])):i("",!0)]),n(aa).errors.phone||ta.value.phone?(g(),d("p",De,u(n(aa).errors.phone||ta.value.phone),1)):(g(),d("p",He," Format: +998 XX XXX XX XX "))]),o("div",Je,[o("label",Ke,u(n(Qr)("sales.company")),1),o("div",Ze,[o("div",Ge,[l(n(T),{class:"w-5 h-5 text-gray-400"})]),x(o("input",{"onUpdate:modelValue":r[8]||(r[8]=e=>n(aa).company=e),type:"text",placeholder:"ABC Company",maxlength:"255",class:y(["w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":n(aa).errors.company}])},null,2),[[k,n(aa).company]])]),n(aa).errors.company?(g(),d("p",Le,u(n(aa).errors.company),1)):i("",!0)])])])]),o("div",Pe,[o("div",Qe,[o("div",Re,[o("div",We,[l(n(S),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),o("h2",Ye,u(n(Qr)("sales.lead_info")),1)])]),o("div",er,[o("div",rr,[o("div",null,[o("label",ar,[c(u(n(Qr)("common.status"))+" ",1),r[14]||(r[14]=o("span",{class:"text-red-500"},"*",-1))]),o("div",tr,[x(o("select",{"onUpdate:modelValue":r[9]||(r[9]=e=>n(aa).status=e),required:"",class:y(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors appearance-none cursor-pointer",{"border-red-500 dark:border-red-500":n(aa).errors.status}])},[o("option",sr,u(n(Qr)("sales.status_new")),1),o("option",lr,u(n(Qr)("sales.status_contacted")),1),o("option",or,u(n(Qr)("sales.status_qualified")),1),o("option",nr,u(n(Qr)("sales.status_proposal")),1),o("option",dr,u(n(Qr)("sales.status_negotiation")),1),o("option",ir,u(n(Qr)("sales.status_won")),1),o("option",cr,u(n(Qr)("sales.status_lost")),1)],2),[[h,n(aa).status]]),r[15]||(r[15]=o("div",{class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},[o("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),n(aa).errors.status?(g(),d("p",ur,u(n(aa).errors.status),1)):i("",!0)]),o("div",null,[o("label",gr,u(n(Qr)("sales.source")),1),o("div",mr,[x(o("select",{"onUpdate:modelValue":r[10]||(r[10]=e=>n(aa).source_id=e),class:y(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors appearance-none cursor-pointer",{"border-red-500 dark:border-red-500":n(aa).errors.source_id}])},[o("option",pr,u(n(Qr)("common.select")),1),(g(!0),d(m,null,p(la.value,(e,r)=>(g(),d("optgroup",{key:r,label:e.label},[(g(!0),d(m,null,p(e.items,e=>(g(),d("option",{key:e.id,value:e.id},u(e.name),9,xr))),128))],8,br))),128))],2),[[h,n(aa).source_id]]),r[16]||(r[16]=o("div",{class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},[o("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),n(aa).errors.source_id?(g(),d("p",yr,u(n(aa).errors.source_id),1)):i("",!0)]),o("div",null,[o("label",kr,u(n(Qr)("sales.lead_score"))+" (0-100) ",1),o("div",hr,[o("div",vr,[o("div",fr,[l(n(E),{class:"w-5 h-5 text-gray-400"}),o("span",wr,u(n(Qr)("sales.lead_quality")),1)]),o("span",{class:y(["text-2xl font-bold",(a=n(aa).score,a>=70?"text-green-600 dark:text-green-400":a>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400")])},u(n(aa).score),3)]),x(o("input",{"onUpdate:modelValue":r[11]||(r[11]=e=>n(aa).score=e),type:"range",min:"0",max:"100",class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"},null,512),[[k,n(aa).score,void 0,{number:!0}]]),o("div",_r,[o("div",{class:y(["h-1.5 rounded-full transition-all duration-300",ba(n(aa).score)]),style:v({width:n(aa).score+"%"})},null,6)])]),n(aa).errors.score?(g(),d("p",jr,u(n(aa).errors.score),1)):i("",!0)]),o("div",null,[o("label",Cr,u(n(Qr)("sales.estimated_value"))+" ("+u(n(Qr)("common.currency"))+") ",1),o("div",qr,[o("div",Vr,[l(n(M),{class:"w-5 h-5 text-gray-400"})]),o("input",{value:n(aa).estimated_value?ia(n(aa).estimated_value):"",onInput:ca,type:"text",inputmode:"numeric",placeholder:"1,000,000",class:y(["w-full pl-11 pr-16 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":n(aa).errors.estimated_value}])},null,42,Xr),o("div",Ur,[o("span",Ar,u(n(Qr)("common.currency")),1)])]),n(aa).errors.estimated_value?(g(),d("p",Br,u(n(aa).errors.estimated_value),1)):i("",!0)])])])]),o("div",Ir,[o("div",Tr,[o("div",zr,[o("div",Fr,[l(n($),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),o("h2",Nr,u(n(Qr)("sales.additional_info")),1)])]),o("div",Or,[o("div",null,[o("label",Sr,u(n(Qr)("sales.notes")),1),x(o("textarea",{"onUpdate:modelValue":r[12]||(r[12]=e=>n(aa).notes=e),rows:"5",maxlength:"2000",placeholder:n(Qr)("sales.notes_placeholder"),class:y(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-none",{"border-red-500 dark:border-red-500":n(aa).errors.notes}])},null,10,Er),[[k,n(aa).notes]]),o("div",Mr,[n(aa).errors.notes?(g(),d("p",$r,u(n(aa).errors.notes),1)):(g(),d("span",Dr)),o("span",Hr,u(n(aa).notes?.length||0)+" / 2000 ",1)])])])]),o("div",Jr,[l(n(j),{href:e.route("business.sales.index"),class:"px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-xl transition-colors"},{default:s(()=>[c(u(n(Qr)("common.cancel")),1)]),_:1},8,["href"]),o("button",{type:"submit",disabled:n(aa).processing||!!ta.value.name||!!ta.value.email||!!ta.value.phone,class:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors"},[n(aa).processing?(g(),d("svg",Zr,[...r[17]||(r[17]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(g(),t(n(F),{key:0,class:"w-5 h-5"})),n(aa).processing?(g(),d("span",Gr,u(n(Qr)("common.saving"))+"...",1)):(g(),d("span",Lr,u(n(Qr)("sales.add_lead")),1))],8,Kr)])],32)])])];var a}),_:1},8,["title"]))}};export{Pr as default};
