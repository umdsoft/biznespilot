import{r as e,b as t,v as a,x as r,y as l,C as s,I as o,B as i,z as d,E as n,D as u,J as c,K as g,Q as m,N as p,F as b,G as x,H as y,P as v}from"./chunk-CpmtkKLp.js";import{r as h}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-BHCorYK2.js";import"./chunk-D7SyfRoT.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";const f={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},w={class:"bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl p-6 text-white"},j={class:"text-3xl font-bold"},q={class:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl p-6 text-white"},_={class:"text-3xl font-bold"},z={class:"bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl p-6 text-white"},S={class:"text-3xl font-bold"},C={class:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-6 text-white"},B={class:"text-3xl font-bold"},U={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},A={class:"flex gap-8"},V={key:0,class:"space-y-6"},Y={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},O={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},M={class:"flex items-start justify-between mb-4"},J={class:"flex items-center gap-3"},K={class:"font-bold text-gray-900 dark:text-white"},D={class:"flex gap-1"},F=["onClick"],H={class:"text-sm text-gray-500 mb-4"},T={class:"flex items-center justify-between text-sm"},E={class:"text-emerald-600 font-medium"},N={class:"text-gray-500"},P={key:0,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},I={class:"text-xs text-gray-500"},L={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center text-gray-500 border border-gray-200 dark:border-gray-700"},$={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},G={class:"divide-y divide-gray-200 dark:divide-gray-700"},Q={class:"flex-1"},Z={class:"flex items-center gap-2"},R={class:"font-bold text-gray-900 dark:text-white"},W={class:"font-medium text-emerald-600"},X={class:"text-sm text-gray-500"},ee={class:"text-right"},te={class:"text-emerald-600 font-bold"},ae={key:0,class:"text-xs text-gray-500"},re={key:0,class:"p-12 text-center text-gray-500"},le={key:2,class:"space-y-6"},se={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},oe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ie={class:"space-y-3"},de={class:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-700 dark:text-emerald-400 font-medium"},ne={class:"flex-1"},ue={class:"font-medium text-gray-900 dark:text-white"},ce={class:"text-sm text-gray-500"},ge={class:"text-emerald-600 font-bold"},me={key:0,class:"p-6 text-center text-gray-500"},pe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},be={class:"space-y-4"},xe={class:"flex justify-between text-sm mb-1"},ye={class:"text-gray-600 dark:text-gray-400"},ve={class:"font-medium text-gray-900 dark:text-white"},he={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},ke={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},fe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},we={class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},je={class:"grid grid-cols-2 gap-4"},qe={class:"grid grid-cols-2 gap-4"},_e={class:"grid grid-cols-2 gap-4"},ze={class:"flex items-center gap-4"},Se={class:"flex items-center gap-2"},Ce={class:"flex items-center gap-2"},Be={class:"flex justify-end gap-3 pt-4"},Ue={__name:"Achievements",props:{achievements:Array,recentAchievements:Array,topAchievers:Array,stats:Object,panelType:String},setup(Ue){const Ae=Ue,Ve=e("definitions"),Ye=e(!1),Oe=e(null),Me=e({name:"",description:"",icon:"ðŸ†",category:"sales",tier:"bronze",points:10,threshold:null,is_repeatable:!1,is_active:!0}),Je=t(()=>{const e={};return Ae.achievements.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e}),Ke=t(()=>{const e={};return Ae.achievements.forEach(t=>{e[t.category]=(e[t.category]||0)+(t.awarded_count||0)}),e}),De=t(()=>{const e=Object.values(Ke.value);return Math.max(...e,1)}),Fe=e=>e/De.value*100,He=e=>({sales:"Sotuv yutuqlari",activity:"Faoliyat yutuqlari",quality:"Sifat yutuqlari",milestone:"Bosqich yutuqlari",special:"Maxsus yutuqlar"}[e]||e),Te=e=>({sales:"text-2xl",activity:"text-2xl",quality:"text-2xl",milestone:"text-2xl",special:"text-2xl"}[e]||""),Ee=e=>({sales:"bg-emerald-500",activity:"bg-blue-500",quality:"bg-purple-500",milestone:"bg-yellow-500",special:"bg-pink-500"}[e]||"bg-gray-500"),Ne=e=>{const t={bronze:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-700",silver:"px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-700",gold:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-700",platinum:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",diamond:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"};return t[e]||t.bronze},Pe=e=>{const t={bronze:"bg-orange-100 dark:bg-orange-900/30",silver:"bg-gray-200 dark:bg-gray-700",gold:"bg-yellow-100 dark:bg-yellow-900/30",platinum:"bg-blue-100 dark:bg-blue-900/30",diamond:"bg-purple-100 dark:bg-purple-900/30"};return t[e]||t.bronze},Ie=()=>{Oe.value=null,Me.value={name:"",description:"",icon:"ðŸ†",category:"sales",tier:"bronze",points:10,threshold:null,is_repeatable:!1,is_active:!0},Ye.value=!0},Le=()=>{Oe.value?h.put(`/sales-head/sales-kpi/achievements/${Oe.value.id}`,Me.value,{onSuccess:()=>{Ye.value=!1}}):h.post("/sales-head/sales-kpi/achievements",Me.value,{onSuccess:()=>{Ye.value=!1}})};return(e,t)=>(u(),a(k,{title:"Yutuqlar"},{default:r(()=>[l("div",{class:"mb-8"},[l("div",{class:"flex items-center justify-between flex-wrap gap-4"},[t[14]||(t[14]=l("div",null,[l("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},"Yutuqlar"),l("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Jamoa yutuqlari va mukofotlar tizimi")],-1)),l("button",{onClick:Ie,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2"},[...t[13]||(t[13]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Yangi yutuq qo'shish ",-1)])])])]),l("div",f,[l("div",w,[t[15]||(t[15]=l("p",{class:"text-sm text-yellow-100 mb-1"},"Jami yutuqlar",-1)),l("p",j,d(Ue.stats.total_definitions),1)]),l("div",q,[t[16]||(t[16]=l("p",{class:"text-sm text-emerald-100 mb-1"},"Berilgan yutuqlar",-1)),l("p",_,d(Ue.stats.total_awarded),1)]),l("div",z,[t[17]||(t[17]=l("p",{class:"text-sm text-blue-100 mb-1"},"Bu oy olingan",-1)),l("p",S,d(Ue.stats.awarded_this_month),1)]),l("div",C,[t[18]||(t[18]=l("p",{class:"text-sm text-purple-100 mb-1"},"Jami ballar",-1)),l("p",B,d(Ue.stats.total_points),1)])]),l("div",U,[l("nav",A,[l("button",{onClick:t[0]||(t[0]=e=>Ve.value="definitions"),class:n(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors","definitions"===Ve.value?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Yutuq turlari ",2),l("button",{onClick:t[1]||(t[1]=e=>Ve.value="recent"),class:n(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors","recent"===Ve.value?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," So'nggi olinganlar ",2),l("button",{onClick:t[2]||(t[2]=e=>Ve.value="team"),class:n(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors","team"===Ve.value?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Jamoa statistikasi ",2)])]),"definitions"===Ve.value?(u(),s("div",V,[(u(!0),s(c,null,g(Je.value,(e,a)=>(u(),s("div",{key:a,class:"space-y-4"},[l("h3",Y,[l("span",{class:n(Te(a))},null,2),i(" "+d(He(a)),1)]),l("div",O,[(u(!0),s(c,null,g(e,e=>{return u(),s("div",{key:e.id,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow"},[l("div",M,[l("div",J,[l("div",{class:n(["w-14 h-14 rounded-xl flex items-center justify-center text-2xl",Pe(e.tier)])},d(e.icon||"ðŸ†"),3),l("div",null,[l("h4",K,d(e.name),1),l("span",{class:n(Ne(e.tier))},d((a=e.tier,{bronze:"Bronza",silver:"Kumush",gold:"Oltin",platinum:"Platina",diamond:"Olmoz"}[a]||a)),3)])]),l("div",D,[l("button",{onClick:t=>(e=>{Oe.value=e,Me.value={...e},Ye.value=!0})(e),class:"p-1 text-blue-600 hover:bg-blue-50 rounded"},[...t[19]||(t[19]=[l("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,F)])]),l("p",H,d(e.description),1),l("div",T,[l("span",E,"+"+d(e.points)+" ball",1),l("span",N,d(e.awarded_count||0)+" marta berilgan",1)]),e.threshold?(u(),s("div",P,[l("p",I,"Shart: "+d(e.threshold_type)+" â‰¥ "+d(e.threshold),1)])):o("",!0)]);var a}),128))])]))),128)),0===Object.keys(Je.value).length?(u(),s("div",L," Yutuqlar hali qo'shilmagan ")):o("",!0)])):o("",!0),"recent"===Ve.value?(u(),s("div",$,[l("div",G,[(u(!0),s(c,null,g(Ue.recentAchievements,e=>{return u(),s("div",{key:e.id,class:"p-4 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("div",{class:n(["w-12 h-12 rounded-xl flex items-center justify-center text-xl",Pe(e.achievement?.tier)])},d(e.achievement?.icon||"ðŸ†"),3),l("div",Q,[l("div",Z,[l("span",R,d(e.user?.name),1),t[20]||(t[20]=l("span",{class:"text-gray-400"},"â†’",-1)),l("span",W,d(e.achievement?.name),1)]),l("p",X,d((a=e.earned_at,a?new Date(a).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric"}):"-")),1)]),l("div",ee,[l("span",te,"+"+d(e.points_awarded)+" ball",1),e.times_earned>1?(u(),s("p",ae,d(e.times_earned)+" marta",1)):o("",!0)])]);var a}),128)),0===Ue.recentAchievements.length?(u(),s("div",re," So'nggi olingan yutuqlar yo'q ")):o("",!0)])])):o("",!0),"team"===Ve.value?(u(),s("div",le,[l("div",se,[l("div",oe,[t[21]||(t[21]=l("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"Top 5 - Yutuqlar bo'yicha",-1)),l("div",ie,[(u(!0),s(c,null,g(Ue.topAchievers,(e,t)=>{return u(),s("div",{key:e.user_id,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("span",{class:n(["w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",0===t?"bg-yellow-100 text-yellow-700":1===t?"bg-gray-100 text-gray-700":2===t?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-500"])},d(t+1),3),l("div",de,d((a=e.user?.name,a?a.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?")),1),l("div",ne,[l("p",ue,d(e.user?.name),1),l("p",ce,d(e.achievements_count)+" ta yutuq",1)]),l("span",ge,d(e.total_points)+" ball",1)]);var a}),128)),0===Ue.topAchievers.length?(u(),s("div",me," Ma'lumotlar yo'q ")):o("",!0)])]),l("div",pe,[t[22]||(t[22]=l("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"Kategoriya bo'yicha",-1)),l("div",be,[(u(!0),s(c,null,g(Ke.value,(e,t)=>(u(),s("div",{key:t},[l("div",xe,[l("span",ye,d(He(t)),1),l("span",ve,d(e),1)]),l("div",he,[l("div",{class:n([Ee(t),"h-2 rounded-full transition-all duration-500"]),style:m({width:Fe(e)+"%"})},null,6)])]))),128))])])])])):o("",!0),Ye.value?(u(),s("div",ke,[l("div",fe,[l("h3",we,d(Oe.value?"Yutuqni tahrirlash":"Yangi yutuq qo'shish"),1),l("form",{onSubmit:p(Le,["prevent"]),class:"space-y-4"},[l("div",je,[l("div",null,[t[23]||(t[23]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nomi",-1)),b(l("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>Me.value.name=e),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[x,Me.value.name]])]),l("div",null,[t[24]||(t[24]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Icon (emoji)",-1)),b(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>Me.value.icon=e),type:"text",placeholder:"ðŸ†",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[x,Me.value.icon]])])]),l("div",null,[t[25]||(t[25]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tavsif",-1)),b(l("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>Me.value.description=e),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[x,Me.value.description]])]),l("div",qe,[l("div",null,[t[27]||(t[27]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kategoriya",-1)),b(l("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>Me.value.category=e),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[26]||(t[26]=[l("option",{value:"sales"},"Sotuv",-1),l("option",{value:"activity"},"Faoliyat",-1),l("option",{value:"quality"},"Sifat",-1),l("option",{value:"milestone"},"Bosqich",-1),l("option",{value:"special"},"Maxsus",-1)])],512),[[y,Me.value.category]])]),l("div",null,[t[29]||(t[29]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Daraja",-1)),b(l("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>Me.value.tier=e),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[28]||(t[28]=[l("option",{value:"bronze"},"Bronza",-1),l("option",{value:"silver"},"Kumush",-1),l("option",{value:"gold"},"Oltin",-1),l("option",{value:"platinum"},"Platina",-1),l("option",{value:"diamond"},"Olmoz",-1)])],512),[[y,Me.value.tier]])])]),l("div",_e,[l("div",null,[t[30]||(t[30]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ball",-1)),b(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>Me.value.points=e),type:"number",min:"1",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[x,Me.value.points,void 0,{number:!0}]])]),l("div",null,[t[31]||(t[31]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Chegarasi",-1)),b(l("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>Me.value.threshold=e),type:"number",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[x,Me.value.threshold,void 0,{number:!0}]])])]),l("div",ze,[l("label",Se,[b(l("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>Me.value.is_repeatable=e),type:"checkbox",class:"rounded"},null,512),[[v,Me.value.is_repeatable]]),t[32]||(t[32]=l("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Takrorlanadigan",-1))]),l("label",Ce,[b(l("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>Me.value.is_active=e),type:"checkbox",class:"rounded"},null,512),[[v,Me.value.is_active]]),t[33]||(t[33]=l("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Faol",-1))])]),l("div",Be,[l("button",{type:"button",onClick:t[12]||(t[12]=e=>Ye.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),t[34]||(t[34]=l("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Saqlash ",-1))])],32)])])):o("",!0)]),_:1}))}};export{Ue as default};
