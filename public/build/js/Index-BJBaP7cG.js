import{r as e,b as t,v as a,x as s,L as r,y as l,A as d,z as o,F as n,G as x,H as g,C as c,D as i,J as p,K as u,E as m}from"./chunk-CpmtkKLp.js";import{h as y,l as h}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-BHCorYK2.js";import{u as b}from"./app-C-ZlocOh.js";import{r as f}from"./chunk-BiW1c8q7.js";import{r as v}from"./chunk-eMHYSAeQ.js";import{r as w}from"./chunk-Bsc1JRL5.js";import{r as j}from"./chunk-yvcCPqrN.js";import{r as _}from"./chunk-BFPxvklm.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-BuJDoypK.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";import"./chunk-BWiubfpN.js";const L={class:"space-y-6"},C={class:"text-2xl font-bold text-gray-900 dark:text-white"},U={class:"text-sm text-gray-500 dark:text-gray-400"},z={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},D={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},A={class:"flex items-center gap-3"},F={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},I={class:"text-sm text-gray-500 dark:text-gray-400"},N={class:"text-xl font-bold text-gray-900 dark:text-white"},V={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Z={class:"flex items-center gap-3"},$={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},E={class:"text-sm text-gray-500 dark:text-gray-400"},G={class:"text-xl font-bold text-green-600 dark:text-green-400"},H={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},J={class:"flex items-center gap-3"},K={class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},O={class:"text-sm text-gray-500 dark:text-gray-400"},S={class:"text-xl font-bold text-red-600 dark:text-red-400"},q={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},B={class:"flex items-center gap-3"},M={class:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center"},P={class:"text-sm text-gray-500 dark:text-gray-400"},Q={class:"text-xl font-bold text-emerald-600 dark:text-emerald-400"},R={class:"flex flex-col sm:flex-row gap-4"},T={class:"relative flex-1"},W=["placeholder"],X={value:""},Y={value:"won"},ee={value:"lost"},te={value:"pending"},ae={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},se={key:0,class:"p-12 text-center"},re={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},le={class:"text-gray-500 dark:text-gray-400"},de={key:1,class:"w-full"},oe={class:"bg-gray-50 dark:bg-gray-900/50"},ne={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},xe={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ge={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ce={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ie={class:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase"},pe={class:"divide-y divide-gray-200 dark:divide-gray-700"},ue={class:"px-6 py-4 font-medium text-gray-900 dark:text-white"},me={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},ye={class:"px-6 py-4 font-semibold text-emerald-600 dark:text-emerald-400"},he={class:"px-6 py-4"},ke={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},be={class:"px-6 py-4 text-right"},fe={__name:"Index",props:{deals:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,won:0,lost:0,total_value:0})}},setup(fe){const{t:ve}=b(),we=fe,je=e(""),_e=e(""),Le=t(()=>{let e=we.deals;if(je.value){const t=je.value.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t)||e.lead?.name?.toLowerCase().includes(t))}return _e.value&&(e=e.filter(e=>e.status===_e.value)),e}),Ce=e=>e?new Intl.NumberFormat("uz-UZ").format(e)+" so'm":"0 so'm",Ue=e=>({won:ve("saleshead.deal_won"),lost:ve("saleshead.deal_lost"),pending:ve("tasks.pending")}[e]||e);return(e,t)=>(i(),a(k,{title:d(ve)("sales.deals")},{default:s(()=>[r(d(y),{title:d(ve)("sales.deals")},null,8,["title"]),l("div",L,[l("div",null,[l("h1",C,o(d(ve)("sales.deals")),1),l("p",U,o(d(ve)("saleshead.deals_subtitle")),1)]),l("div",z,[l("div",D,[l("div",A,[l("div",F,[r(d(f),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),l("div",null,[l("p",I,o(d(ve)("saleshead.total_deals")),1),l("p",N,o(fe.stats.total),1)])])]),l("div",V,[l("div",Z,[l("div",$,[r(d(v),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),l("div",null,[l("p",E,o(d(ve)("saleshead.deal_won")),1),l("p",G,o(fe.stats.won),1)])])]),l("div",H,[l("div",J,[l("div",K,[r(d(w),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),l("div",null,[l("p",O,o(d(ve)("saleshead.deal_lost")),1),l("p",S,o(fe.stats.lost),1)])])]),l("div",q,[l("div",B,[l("div",M,[r(d(f),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})]),l("div",null,[l("p",P,o(d(ve)("common.total"))+" "+o(d(ve)("saleshead.amount")),1),l("p",Q,o(Ce(fe.stats.total_value)),1)])])])]),l("div",R,[l("div",T,[r(d(j),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),n(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>je.value=e),type:"text",placeholder:d(ve)("saleshead.search_deal"),class:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},null,8,W),[[x,je.value]])]),n(l("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>_e.value=e),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},[l("option",X,o(d(ve)("saleshead.all_statuses")),1),l("option",Y,o(d(ve)("saleshead.deal_won")),1),l("option",ee,o(d(ve)("saleshead.deal_lost")),1),l("option",te,o(d(ve)("tasks.pending")),1)],512),[[g,_e.value]])]),l("div",ae,[0===Le.value.length?(i(),c("div",se,[r(d(f),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),l("h3",re,o(d(ve)("saleshead.deal_not_found")),1),l("p",le,o(d(ve)("saleshead.no_deals_yet")),1)])):(i(),c("table",de,[l("thead",oe,[l("tr",null,[l("th",ne,o(d(ve)("saleshead.deal")),1),t[2]||(t[2]=l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},"Lead",-1)),l("th",xe,o(d(ve)("saleshead.amount")),1),l("th",ge,o(d(ve)("common.status")),1),l("th",ce,o(d(ve)("common.date")),1),l("th",ie,o(d(ve)("common.actions")),1)])]),l("tbody",pe,[(i(!0),c(p,null,u(Le.value,e=>{return i(),c("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("td",ue,o(e.name),1),l("td",me,o(e.lead?.name||"-"),1),l("td",ye,o(Ce(e.value)),1),l("td",he,[l("span",{class:m([(a=e.status,{won:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",lost:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}[a]||"bg-gray-100 text-gray-700"),"px-2.5 py-1 rounded-full text-xs font-medium"])},o(Ue(e.status)),3)]),l("td",ke,o((t=e.closed_at,t?new Date(t).toLocaleDateString("uz-UZ"):"-")),1),l("td",be,[r(d(h),{href:`/sales-head/deals/${e.id}`,class:"p-2 text-gray-400 hover:text-emerald-600 inline-block"},{default:s(()=>[r(d(_),{class:"w-5 h-5"})]),_:1},8,["href"])])]);var t,a}),128))])]))])])]),_:1},8,["title"]))}};export{fe as default};
