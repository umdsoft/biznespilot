import{h as e,r}from"./chunk-BhZp3z4u.js";import{_ as t}from"./chunk-BDBDdGhv.js";import{u as a}from"./app-C-ZlocOh.js";import{r as s}from"./chunk-SzhoqsJO.js";import{r as d}from"./chunk-BeDuKP2K.js";import{r as l}from"./chunk-DCXiFUg-.js";import{b as o,v as i,x as g,L as n,y,A as c,C as u,z as m,D as x,J as b,K as p,E as h,I as k}from"./chunk-CpmtkKLp.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const v={class:"space-y-6"},f={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},w={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},j={class:"text-sm text-gray-500 dark:text-gray-400"},_={class:"flex items-center gap-3"},D={class:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold min-w-[180px] text-center"},S={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},T={class:"grid grid-cols-7 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"},q={class:"grid grid-cols-7 auto-rows-fr"},C={key:0,class:"h-full flex flex-col"},Y={class:"flex-1 space-y-1 overflow-y-auto"},M=["title"],$={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},O={class:"space-y-2"},z={class:"flex items-center justify-between"},A={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},J={class:"flex items-center justify-between"},L={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},U={class:"flex items-center justify-between"},I={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},K={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},N={class:"divide-y divide-gray-200 dark:divide-gray-700"},W={class:"flex items-center justify-between"},B={class:"flex items-center gap-3"},E={class:"font-medium text-gray-900 dark:text-gray-100"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},H={class:"text-right"},P={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},X={class:"text-xs text-gray-500 dark:text-gray-400"},G={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},Q={__name:"Calendar",props:{requests:{type:Array,default:()=>[]},month:{type:Number,required:!0},year:{type:Number,required:!0}},setup(Q){const{t:R}=a(),V=Q,ee=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],re=["Du","Se","Cho","Pa","Ju","Sha","Ya"],te=o(()=>ee[V.month-1]),ae=o(()=>{const e=new Date(V.year,V.month-1,1),r=new Date(V.year,V.month,0).getDate(),t=e.getDay(),a=[];for(let s=0;s<t;s++)a.push({day:null,date:null,leaves:[]});for(let s=1;s<=r;s++){const e=new Date(V.year,V.month-1,s),r=se(e),t=V.requests.filter(r=>{const t=new Date(r.start_date),a=new Date(r.end_date);return e>=t&&e<=a});a.push({day:s,date:r,dateObj:e,leaves:t,isToday:de(e),isWeekend:0===e.getDay()||6===e.getDay()})}return a}),se=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,de=e=>{const r=new Date;return e.getDate()===r.getDate()&&e.getMonth()===r.getMonth()&&e.getFullYear()===r.getFullYear()},le=e=>{let t=V.month+e,a=V.year;t>12?(t=1,a++):t<1&&(t=12,a--),r.get(route("hr.leave.calendar"),{month:t,year:a},{preserveState:!0,preserveScroll:!0})},oe=()=>{const e=new Date;r.get(route("hr.leave.calendar"),{month:e.getMonth()+1,year:e.getFullYear()},{preserveState:!0,preserveScroll:!0})},ie=e=>({annual:"bg-blue-500",sick:"bg-red-500",family:"bg-purple-500",unpaid:"bg-gray-500"}[e]||"bg-green-500"),ge=o(()=>{const e={};return V.requests.forEach(r=>{e[r.user_id]||(e[r.user_id]={name:r.user_name,leaves:[]}),e[r.user_id].leaves.push(r)}),Object.values(e)});return(r,a)=>(x(),i(t,{title:c(R)("hr.leave_calendar")},{default:g(()=>[n(c(e),{title:c(R)("hr.leave_calendar")},null,8,["title"]),y("div",v,[y("div",f,[y("div",null,[y("h1",w,m(c(R)("hr.leave_calendar")),1),y("p",j,m(c(R)("hr.team_members"))+" "+m(c(R)("hr.leave").toLowerCase()),1)]),y("div",_,[y("button",{onClick:a[0]||(a[0]=e=>le(-1)),class:"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[n(c(s),{class:"w-5 h-5 text-gray-700 dark:text-gray-300"})]),y("button",{onClick:oe,class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-medium text-gray-700 dark:text-gray-300"}," Bugun "),y("div",D,m(te.value)+" "+m(Q.year),1),y("button",{onClick:a[1]||(a[1]=e=>le(1)),class:"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[n(c(d),{class:"w-5 h-5 text-gray-700 dark:text-gray-300"})])])]),y("div",S,[y("div",T,[(x(),u(b,null,p(re,e=>y("div",{key:e,class:"p-3 text-center text-sm font-semibold text-gray-600 dark:text-gray-400"},m(e),1)),64))]),y("div",q,[(x(!0),u(b,null,p(ae.value,(e,r)=>(x(),u("div",{key:r,class:h(["min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700",e.isWeekend?"bg-gray-50 dark:bg-gray-900/30":"bg-white dark:bg-gray-800",e.isToday?"ring-2 ring-inset ring-purple-500":""])},[e.day?(x(),u("div",C,[y("div",{class:h(["text-sm font-medium mb-2",e.isToday?"w-7 h-7 flex items-center justify-center rounded-full bg-purple-600 text-white":"text-gray-900 dark:text-gray-100"])},m(e.day),3),y("div",Y,[(x(!0),u(b,null,p(e.leaves,e=>(x(),u("div",{key:e.id,class:h(["px-2 py-1 rounded text-xs text-white truncate cursor-pointer hover:opacity-80 transition-opacity",ie(e.leave_type_code)]),title:`${e.user_name} - ${e.leave_type}`},m(e.user_name),11,M))),128))])])):k("",!0)],2))),128))])]),y("div",$,[a[6]||(a[6]=y("div",{class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},[y("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3"},"Ta'til Turlari"),y("div",{class:"space-y-2"},[y("div",{class:"flex items-center gap-2"},[y("div",{class:"w-4 h-4 rounded bg-blue-500"}),y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Yillik Ta'til")]),y("div",{class:"flex items-center gap-2"},[y("div",{class:"w-4 h-4 rounded bg-red-500"}),y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Kasallik Ta'tili")]),y("div",{class:"flex items-center gap-2"},[y("div",{class:"w-4 h-4 rounded bg-purple-500"}),y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Oilaviy Ta'til")]),y("div",{class:"flex items-center gap-2"},[y("div",{class:"w-4 h-4 rounded bg-gray-500"}),y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"To'lovdan Tashqari")])])],-1)),y("div",F,[a[5]||(a[5]=y("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3"},"Statistika",-1)),y("div",O,[y("div",z,[a[2]||(a[2]=y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jami Ta'tillar:",-1)),y("span",A,m(Q.requests.length),1)]),y("div",J,[a[3]||(a[3]=y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Xodimlar:",-1)),y("span",L,m(ge.value.length),1)]),y("div",U,[a[4]||(a[4]=y("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jami Kunlar:",-1)),y("span",I,m(Q.requests.reduce((e,r)=>e+r.total_days,0))+" kun ",1)])])])]),Q.requests.length>0?(x(),u("div",K,[a[7]||(a[7]=y("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[y("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Ushbu Oyda Ta'tillar")],-1)),y("div",N,[(x(!0),u(b,null,p(Q.requests,e=>(x(),u("div",{key:e.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors"},[y("div",W,[y("div",B,[y("div",{class:h(["w-3 h-3 rounded-full",ie(e.leave_type_code)])},null,2),y("div",null,[y("p",E,m(e.user_name),1),y("p",Z,m(e.leave_type),1)])]),y("div",H,[y("p",P,m(new Date(e.start_date).toLocaleDateString("uz-UZ"))+" - "+m(new Date(e.end_date).toLocaleDateString("uz-UZ")),1),y("p",X,m(e.total_days)+" kun",1)])])]))),128))])])):(x(),u("div",G,[n(c(l),{class:"w-12 h-12 mx-auto mb-4 text-gray-400 opacity-50"}),a[8]||(a[8]=y("p",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Ushbu oyda ta'tillar yo'q",-1)),a[9]||(a[9]=y("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Hozircha hech kim ta'tilda emas",-1))]))])]),_:1},8,["title"]))}};export{Q as default};
