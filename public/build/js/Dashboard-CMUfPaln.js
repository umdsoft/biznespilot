import{r as v,b as k,v as w,x as u,y as l,z as t,A as s,C as g,H as e,I as C,J as j,E as i,M as B,B as I,D as _}from"./chunk-BcTZxe-J.js";import{h as T,l as y}from"./chunk-BYRtWSr0.js";import{_ as V}from"./chunk-TXgJ1MaD.js";import{u as F}from"./app-BC9IivQF.js";import{C as h,r as R}from"./chunk-CHxAOWeL.js";import{r as E}from"./chunk-I93QdGKi.js";import{r as f}from"./chunk-br81ceNR.js";import{r as $}from"./chunk-Brk9BpGk.js";import{r as N}from"./chunk-qVc0_oyq.js";import{r as W}from"./chunk-CQoMtUf7.js";import{r as U}from"./chunk-HQg0WsOq.js";import{a as A}from"./chunk-D58UsNjm.js";import{r as L}from"./chunk-aL39oRCf.js";import{r as M}from"./chunk-DnfwDglZ.js";import"./chunk-AyRJdOJv.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-LBbTbQSS.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const P={class:"py-12 px-4 sm:px-6 lg:px-8"},S={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},H={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},J={class:"mt-2 text-gray-600 dark:text-gray-400"},Z={class:"flex gap-2"},q={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},G={class:"flex flex-wrap items-end gap-4"},K={class:"flex-1 min-w-[200px]"},Q={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},X={class:"flex-1 min-w-[200px]"},Y={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},tt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},et={class:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},st={class:"flex items-center justify-between mb-2"},rt={class:"text-sm font-medium opacity-90 mb-1"},at={class:"text-3xl font-bold mb-1"},ot={class:"text-xs opacity-80"},lt={class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white"},dt={class:"flex items-center justify-between mb-2"},nt={class:"text-sm font-medium opacity-90"},it={class:"text-sm font-medium opacity-90 mb-1"},ct={class:"text-3xl font-bold mb-1"},mt={class:"text-xs opacity-80"},_t={class:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},ut={class:"flex items-center justify-between mb-2"},gt={class:"text-sm font-medium opacity-90"},xt={class:"text-sm font-medium opacity-90 mb-1"},pt={class:"text-3xl font-bold mb-1"},yt={class:"text-xs opacity-80"},bt={class:"bg-gradient-to-br from-orange-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},ft={class:"flex items-center justify-between mb-2"},ht={class:"text-sm font-medium opacity-90 mb-1"},vt={class:"text-3xl font-bold mb-1"},kt={class:"text-xs opacity-80"},wt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ct={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},jt={class:"flex items-center justify-between mb-4"},$t={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Dt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Ot={class:"flex items-center justify-between mb-4"},zt={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Bt={class:"text-sm text-gray-500 dark:text-gray-400"},It={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},Tt={class:"flex items-center gap-3 mb-6"},Vt={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Ft={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Rt={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Et={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},Nt={key:0},Wt={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},Ut={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},At={class:"text-green-600 dark:text-green-400 font-semibold"},Lt={class:"text-blue-600 dark:text-blue-400 font-semibold"},Mt={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Pt={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},St={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},Ht={key:0},Jt={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},Zt={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},qt={class:"text-green-600 dark:text-green-400 font-semibold"},Gt={class:"text-blue-600 dark:text-blue-400 font-semibold"},Kt={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Qt={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Xt={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},Yt={key:0},te={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},ee={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},se={class:"text-green-600 dark:text-green-400 font-semibold"},re={class:"text-blue-600 dark:text-blue-400 font-semibold"},ae={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},oe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},le={class:"flex items-center justify-between mb-6"},de={class:"flex items-center gap-3"},ne={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},ie={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ce={class:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},me={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},_e={class:"text-center p-4 bg-green-50 dark:bg-green-900/30 rounded-lg"},ue={class:"text-2xl font-bold text-green-600 dark:text-green-400"},ge={class:"text-center p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg"},xe={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},pe={class:"text-center p-4 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},ye={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"};h.register(...R);const be={mounted(){this.$nextTick(()=>{this.initializeCharts()})},methods:{initializeCharts(){if(this.revenueChartData){const r=document.getElementById("revenueChart");r&&new h(r,{type:"line",data:this.revenueChartData,options:this.chartOptions})}if(this.dealCountChartData){const r=document.getElementById("dealsChart");r&&new h(r,{type:"bar",data:this.dealCountChartData,options:this.chartOptions})}}}},qe=Object.assign(be,{__name:"Dashboard",props:{metrics:{type:Object,default:()=>({revenue_growth:0,total_revenue:0,total_leads:0,new_leads:0,active_pipeline_deals:0,won_deals:0,conversion_rate:0,avg_deal_size:0,pipeline_value:0})},revenue_trends:Object,top_performers:{type:Object,default:()=>({top_dream_buyer:null,top_offer:null,top_source:null})},funnel_summary:{type:Object,default:()=>({total_leads:0,won_leads:0,active_leads:0,overall_conversion_rate:0})},filters:Object},setup(r){const{t:a}=F(),n=r,x=v(n.filters?.date_from||""),p=v(n.filters?.date_to||""),c=d=>new Intl.NumberFormat("uz-UZ").format(d)+" so'm",m=d=>d?.toFixed(1)||"0",D=d=>d>0?L:M;k(()=>n.revenue_trends?.chart_data?{labels:n.revenue_trends.chart_data.labels,datasets:n.revenue_trends.chart_data.datasets.map(d=>({...d,fill:!0}))}:null),k(()=>n.revenue_trends?.deal_count_chart?{labels:n.revenue_trends.deal_count_chart.labels,datasets:n.revenue_trends.deal_count_chart.datasets.map(d=>({...d,fill:!0}))}:null);const O=()=>{window.location.href=route("business.analytics.index",{date_from:x.value,date_to:p.value})},z=()=>{x.value="",p.value="",window.location.href=route("business.analytics.index")};return(d,o)=>(i(),w(V,{title:s(a)("analytics.sales_analytics")},{default:u(()=>[l(s(T),{title:s(a)("analytics.dashboard")},null,8,["title"]),t("div",P,[t("div",S,[t("div",null,[t("h1",H,[l(s(E),{class:"w-10 h-10 text-blue-600 dark:text-blue-400"}),g(" "+e(s(a)("analytics.sales_analytics")),1)]),t("p",J,e(s(a)("analytics.track_sales_conversion")),1)]),t("div",Z,[l(s(y),{href:d.route("business.analytics.funnel"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:u(()=>[l(s(f),{class:"w-4 h-4"}),g(" "+e(s(a)("analytics.funnel")),1)]),_:1},8,["href"]),l(s(y),{href:d.route("business.analytics.performance"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:u(()=>[l(s($),{class:"w-4 h-4"}),g(" "+e(s(a)("analytics.performance")),1)]),_:1},8,["href"])])]),t("div",q,[t("div",G,[t("div",K,[t("label",Q,e(s(a)("reports.filter.start_date")),1),C(t("input",{"onUpdate:modelValue":o[0]||(o[0]=b=>x.value=b),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,x.value]])]),t("div",X,[t("label",Y,e(s(a)("reports.filter.end_date")),1),C(t("input",{"onUpdate:modelValue":o[1]||(o[1]=b=>p.value=b),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[j,p.value]])]),t("button",{onClick:O,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"},e(s(a)("common.filter")),1),t("button",{onClick:z,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},e(s(a)("reports.filter.reset")),1)])]),t("div",tt,[t("div",et,[t("div",st,[l(s(N),{class:"w-8 h-8 opacity-80"}),(i(),w(B(D(r.metrics.revenue_growth)),{class:I(["w-6 h-6",r.metrics.revenue_growth>0?"text-green-200":"text-red-200"])},null,8,["class"]))]),t("p",rt,e(s(a)("analytics.total_revenue")),1),t("p",at,e(c(r.metrics.total_revenue||0)),1),t("p",ot,e(r.metrics.revenue_growth>0?"+":"")+e(m(r.metrics.revenue_growth))+"% "+e(s(a)("analytics.vs_previous_period")),1)]),t("div",lt,[t("div",dt,[l(s(W),{class:"w-8 h-8 opacity-80"}),t("span",nt,e(r.metrics.new_leads||0)+" "+e(s(a)("analytics.new")),1)]),t("p",it,e(s(a)("dashboard.total_leads")),1),t("p",ct,e(r.metrics.total_leads||0),1),t("p",mt,e(r.metrics.active_pipeline_deals||0)+" "+e(s(a)("analytics.active_pipeline")),1)]),t("div",_t,[t("div",ut,[l(s(U),{class:"w-8 h-8 opacity-80"}),t("span",gt,e(m(r.metrics.conversion_rate))+"% CR ",1)]),t("p",xt,e(s(a)("analytics.won_deals")),1),t("p",pt,e(r.metrics.won_deals||0),1),t("p",yt,e(s(a)("analytics.average"))+": "+e(c(r.metrics.avg_deal_size||0)),1)]),t("div",bt,[t("div",ft,[l(s(f),{class:"w-8 h-8 opacity-80"}),l(s(A),{class:"w-6 h-6 opacity-80"})]),t("p",ht,e(s(a)("analytics.pipeline_value")),1),t("p",vt,e(c(r.metrics.pipeline_value||0)),1),t("p",kt,e(s(a)("analytics.potential_revenue")),1)])]),t("div",wt,[t("div",Ct,[t("div",jt,[t("h3",$t,e(s(a)("analytics.revenue_trends")),1),l(s(y),{href:d.route("business.analytics.revenue"),class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"},{default:u(()=>[g(e(s(a)("common.view"))+" → ",1)]),_:1},8,["href"])]),o[2]||(o[2]=t("div",{class:"h-64"},[t("canvas",{id:"revenueChart"})],-1))]),t("div",Dt,[t("div",Ot,[t("h3",zt,e(s(a)("analytics.deals_won")),1),t("span",Bt,e(s(a)("analytics.last_30_days")),1)]),o[3]||(o[3]=t("div",{class:"h-64"},[t("canvas",{id:"dealsChart"})],-1))])]),t("div",It,[t("div",Tt,[l(s($),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"}),t("h3",Vt,e(s(a)("analytics.top_performers")),1)]),t("div",Ft,[t("div",Rt,[t("p",Et,e(s(a)("analytics.top_ideal_customer")),1),r.top_performers.top_dream_buyer?(i(),_("div",Nt,[t("p",Wt,e(r.top_performers.top_dream_buyer.dream_buyer_name),1),t("div",Ut,[t("p",null,"Leads: "+e(r.top_performers.top_dream_buyer.total_leads),1),t("p",null,"Won: "+e(r.top_performers.top_dream_buyer.won_leads),1),t("p",At," CR: "+e(m(r.top_performers.top_dream_buyer.conversion_rate))+"% ",1),t("p",Lt,e(c(r.top_performers.top_dream_buyer.total_revenue)),1)])])):(i(),_("p",Mt,e(s(a)("reports.no_data")),1))]),t("div",Pt,[t("p",St,e(s(a)("analytics.top_offer")),1),r.top_performers.top_offer?(i(),_("div",Ht,[t("p",Jt,e(r.top_performers.top_offer.offer_name),1),t("div",Zt,[t("p",null,"Value Score: "+e(r.top_performers.top_offer.value_score),1),t("p",null,"Won: "+e(r.top_performers.top_offer.won_leads),1),t("p",qt," CR: "+e(m(r.top_performers.top_offer.conversion_rate))+"% ",1),t("p",Gt,e(c(r.top_performers.top_offer.total_revenue)),1)])])):(i(),_("p",Kt,e(s(a)("reports.no_data")),1))]),t("div",Qt,[t("p",Xt,e(s(a)("analytics.top_source")),1),r.top_performers.top_source?(i(),_("div",Yt,[t("p",te,e(r.top_performers.top_source.source_name),1),t("div",ee,[t("p",null,"Type: "+e(r.top_performers.top_source.channel_type),1),t("p",null,"Won: "+e(r.top_performers.top_source.won_leads),1),t("p",se," ROI: "+e(m(r.top_performers.top_source.roi))+"% ",1),t("p",re,e(c(r.top_performers.top_source.total_revenue)),1)])])):(i(),_("p",ae,e(s(a)("reports.no_data")),1))])])]),t("div",oe,[t("div",le,[t("div",de,[l(s(f),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"}),t("h3",ne,e(s(a)("analytics.conversion_funnel_overview")),1)]),l(s(y),{href:d.route("business.analytics.funnel"),class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"},{default:u(()=>[g(e(s(a)("common.view"))+" → ",1)]),_:1},8,["href"])]),t("div",ie,[t("div",ce,[t("p",me,e(r.funnel_summary.total_leads||0),1),o[4]||(o[4]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Total Leads",-1))]),t("div",_e,[t("p",ue,e(r.funnel_summary.won_leads||0),1),o[5]||(o[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Won",-1))]),t("div",ge,[t("p",xe,e(r.funnel_summary.active_leads||0),1),o[6]||(o[6]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Active",-1))]),t("div",pe,[t("p",ye,e(m(r.funnel_summary.overall_conversion_rate))+"%",1),o[7]||(o[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Conversion Rate",-1))])])])])]),_:1},8,["title"]))}});export{qe as default};
