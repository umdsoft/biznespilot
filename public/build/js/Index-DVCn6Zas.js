import{r as e,b as t,v as a,x as s,y as r,z as l,A as d,H as o,I as n,J as x,K as g,D as i,E as c,F as p,G as u,B as m}from"./chunk-7Urb0kxg.js";import{h as y,l as h}from"./chunk-DKkye6wf.js";import{_ as k}from"./chunk-k4W8urQJ.js";import{u as b}from"./app-DFslr8vl.js";import{r as f}from"./chunk-Sfe4u6kO.js";import{r as v}from"./chunk-DUcDuGHI.js";import{r as w}from"./chunk-afst19KZ.js";import{r as j}from"./chunk-COgkU9mi.js";import{r as _}from"./chunk-DR2SDUSg.js";import"./chunk-Dm-LAqtr.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-D4tA7yBb.js";import"./chunk-DmCyVuil.js";import"./chunk-Be6I8nOg.js";import"./chunk-DpGbuIFK.js";import"./chunk-78n7fhob.js";import"./chunk-Di7Oc7TS.js";const L={class:"space-y-6"},U={class:"text-2xl font-bold text-gray-900 dark:text-white"},z={class:"text-sm text-gray-500 dark:text-gray-400"},A={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},C={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},D={class:"flex items-center gap-3"},I={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},F={class:"text-sm text-gray-500 dark:text-gray-400"},V={class:"text-xl font-bold text-gray-900 dark:text-white"},Z={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},$={class:"flex items-center gap-3"},q={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},B={class:"text-sm text-gray-500 dark:text-gray-400"},E={class:"text-xl font-bold text-green-600 dark:text-green-400"},G={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},H={class:"flex items-center gap-3"},J={class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},K={class:"text-sm text-gray-500 dark:text-gray-400"},N={class:"text-xl font-bold text-red-600 dark:text-red-400"},O={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},S={class:"flex items-center gap-3"},M={class:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center"},P={class:"text-sm text-gray-500 dark:text-gray-400"},Q={class:"text-xl font-bold text-emerald-600 dark:text-emerald-400"},R={class:"flex flex-col sm:flex-row gap-4"},T={class:"relative flex-1"},W=["placeholder"],X={value:""},Y={value:"won"},ee={value:"lost"},te={value:"pending"},ae={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},se={key:0,class:"p-12 text-center"},re={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},le={class:"text-gray-500 dark:text-gray-400"},de={key:1,class:"w-full"},oe={class:"bg-gray-50 dark:bg-gray-900/50"},ne={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},xe={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ge={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ie={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},ce={class:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase"},pe={class:"divide-y divide-gray-200 dark:divide-gray-700"},ue={class:"px-6 py-4 font-medium text-gray-900 dark:text-white"},me={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},ye={class:"px-6 py-4 font-semibold text-emerald-600 dark:text-emerald-400"},he={class:"px-6 py-4"},ke={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},be={class:"px-6 py-4 text-right"},fe={__name:"Index",props:{deals:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,won:0,lost:0,total_value:0})}},setup(fe){const{t:ve}=b(),we=fe,je=e(""),_e=e(""),Le=t(()=>{let e=we.deals;if(je.value){const t=je.value.toLowerCase();e=e.filter(e=>e.name?.toLowerCase().includes(t)||e.lead?.name?.toLowerCase().includes(t))}return _e.value&&(e=e.filter(e=>e.status===_e.value)),e}),Ue=e=>e?new Intl.NumberFormat("uz-UZ").format(e)+" so'm":"0 so'm",ze=e=>({won:ve("saleshead.deal_won"),lost:ve("saleshead.deal_lost"),pending:ve("tasks.pending")}[e]||e);return(e,t)=>(c(),a(k,{title:d(ve)("sales.deals")},{default:s(()=>[r(d(y),{title:d(ve)("sales.deals")},null,8,["title"]),l("div",L,[l("div",null,[l("h1",U,o(d(ve)("sales.deals")),1),l("p",z,o(d(ve)("saleshead.deals_subtitle")),1)]),l("div",A,[l("div",C,[l("div",D,[l("div",I,[r(d(f),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),l("div",null,[l("p",F,o(d(ve)("saleshead.total_deals")),1),l("p",V,o(fe.stats.total),1)])])]),l("div",Z,[l("div",$,[l("div",q,[r(d(v),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),l("div",null,[l("p",B,o(d(ve)("saleshead.deal_won")),1),l("p",E,o(fe.stats.won),1)])])]),l("div",G,[l("div",H,[l("div",J,[r(d(w),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),l("div",null,[l("p",K,o(d(ve)("saleshead.deal_lost")),1),l("p",N,o(fe.stats.lost),1)])])]),l("div",O,[l("div",S,[l("div",M,[r(d(f),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})]),l("div",null,[l("p",P,o(d(ve)("common.total"))+" "+o(d(ve)("saleshead.amount")),1),l("p",Q,o(Ue(fe.stats.total_value)),1)])])])]),l("div",R,[l("div",T,[r(d(j),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),n(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>je.value=e),type:"text",placeholder:d(ve)("saleshead.search_deal"),class:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},null,8,W),[[x,je.value]])]),n(l("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>_e.value=e),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},[l("option",X,o(d(ve)("saleshead.all_statuses")),1),l("option",Y,o(d(ve)("saleshead.deal_won")),1),l("option",ee,o(d(ve)("saleshead.deal_lost")),1),l("option",te,o(d(ve)("tasks.pending")),1)],512),[[g,_e.value]])]),l("div",ae,[0===Le.value.length?(c(),i("div",se,[r(d(f),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),l("h3",re,o(d(ve)("saleshead.deal_not_found")),1),l("p",le,o(d(ve)("saleshead.no_deals_yet")),1)])):(c(),i("table",de,[l("thead",oe,[l("tr",null,[l("th",ne,o(d(ve)("saleshead.deal")),1),t[2]||(t[2]=l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},"Lead",-1)),l("th",xe,o(d(ve)("saleshead.amount")),1),l("th",ge,o(d(ve)("common.status")),1),l("th",ie,o(d(ve)("common.date")),1),l("th",ce,o(d(ve)("common.actions")),1)])]),l("tbody",pe,[(c(!0),i(p,null,u(Le.value,e=>{return c(),i("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("td",ue,o(e.name),1),l("td",me,o(e.lead?.name||"-"),1),l("td",ye,o(Ue(e.value)),1),l("td",he,[l("span",{class:m([(a=e.status,{won:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",lost:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"}[a]||"bg-gray-100 text-gray-700"),"px-2.5 py-1 rounded-full text-xs font-medium"])},o(ze(e.status)),3)]),l("td",ke,o((t=e.closed_at,t?new Date(t).toLocaleDateString("uz-UZ"):"-")),1),l("td",be,[r(d(h),{href:`/sales-head/deals/${e.id}`,class:"p-2 text-gray-400 hover:text-emerald-600 inline-block"},{default:s(()=>[r(d(_),{class:"w-5 h-5"})]),_:1},8,["href"])])]);var t,a}),128))])]))])])]),_:1},8,["title"]))}};export{fe as default};
