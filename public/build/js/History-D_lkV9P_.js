import{r as e,w as s,C as t,L as a,A as l,x as r,y as o,F as i,G as d,D as p,J as c,K as n,z as u,H as x,I as m,E as b}from"./chunk-CpmtkKLp.js";import{h,l as g,r as f}from"./chunk-BhZp3z4u.js";import{_ as v}from"./chunk-DbFbpSR2.js";import{u as k}from"./app-C-ZlocOh.js";import{r as y}from"./chunk-BuJDoypK.js";import{r as w}from"./chunk-yvcCPqrN.js";import{r as j}from"./chunk-SzhoqsJO.js";import{r as _}from"./chunk-BeDuKP2K.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BWiubfpN.js";const S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},M={class:"flex items-center justify-between mb-8"},z={class:"flex items-center gap-4"},B={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6 mb-6"},C={class:"flex flex-col sm:flex-row gap-4"},T={class:"flex-1"},Y={class:"relative"},q={class:"sm:w-48"},H=["value"],K={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl overflow-hidden"},Q={class:"overflow-x-auto"},V={class:"w-full"},X={class:"divide-y divide-slate-700/50"},E={key:0},O={class:"px-6 py-4"},P={class:"text-white font-medium"},U={class:"text-slate-400 text-sm"},A={class:"px-6 py-4"},D=["title"],F={key:0,class:"text-red-400 text-xs mt-1"},G={class:"px-6 py-4"},I={class:"px-6 py-4"},J={class:"text-slate-300 text-sm"},L={class:"px-6 py-4"},N={class:"text-slate-300 text-sm"},$={class:"px-6 py-4"},R={class:"text-slate-400 text-sm"},W={key:0,class:"px-6 py-4 border-t border-slate-700/50 flex items-center justify-between"},Z={class:"text-sm text-slate-400"},ee={class:"flex items-center gap-2"},se=["disabled"],te={class:"text-slate-300 px-3"},ae=["disabled"],le={__name:"History",props:{messages:Object,filters:{type:Object,default:()=>({status:null,search:""})}},setup(le){const re=le;k();const oe=e(re.filters.search||""),ie=e(re.filters.status||"all"),de=[{value:"all",label:"Barchasi"},{value:"pending",label:"Kutilmoqda"},{value:"sent",label:"Yuborildi"},{value:"delivered",label:"Yetkazildi"},{value:"failed",label:"Xatolik"}],pe=e=>({pending:"Kutilmoqda",sent:"Yuborildi",delivered:"Yetkazildi",failed:"Xatolik"}[e]||e),ce=()=>{f.get(route("business.sms.history"),{status:"all"===ie.value?null:ie.value,search:oe.value||null},{preserveState:!0,replace:!0})};let ne=null;s(oe,()=>{clearTimeout(ne),ne=setTimeout(ce,500)}),s(ie,()=>{ce()});const ue=e=>{e&&f.get(e,{},{preserveState:!0})};return(e,s)=>(p(),t(c,null,[a(l(h),{title:"SMS Tarixi"}),a(v,null,{default:r(()=>[o("div",S,[o("div",M,[o("div",z,[a(l(g),{href:e.route("business.settings.sms"),class:"p-2 bg-slate-700 rounded-xl hover:bg-slate-600 transition-colors"},{default:r(()=>[a(l(y),{class:"w-5 h-5 text-white"})]),_:1},8,["href"]),s[4]||(s[4]=o("div",null,[o("h1",{class:"text-2xl font-bold text-white"},"SMS Tarixi"),o("p",{class:"text-slate-400 text-sm"},"Barcha yuborilgan SMS xabarlar")],-1))])]),o("div",B,[o("div",C,[o("div",T,[o("div",Y,[a(l(w),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i(o("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>oe.value=e),type:"text",placeholder:"Qidirish (telefon, xabar, ism)...",class:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:border-teal-500 focus:ring-1 focus:ring-teal-500"},null,512),[[d,oe.value]])])]),o("div",q,[i(o("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>ie.value=e),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-teal-500 focus:ring-1 focus:ring-teal-500"},[(p(),t(c,null,n(de,e=>o("option",{key:e.value,value:e.value},u(e.label),9,H)),64))],512),[[x,ie.value]])])])]),o("div",K,[o("div",Q,[o("table",V,[s[6]||(s[6]=o("thead",{class:"bg-slate-700/30"},[o("tr",null,[o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Qabul qiluvchi "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Xabar "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Status "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Provayder "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Qismlar "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Sana ")])],-1)),o("tbody",X,[0===le.messages.data.length?(p(),t("tr",E,[...s[5]||(s[5]=[o("td",{colspan:"6",class:"px-6 py-12 text-center"},[o("svg",{class:"w-12 h-12 text-slate-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})]),o("p",{class:"text-slate-400"},"SMS xabarlar topilmadi")],-1)])])):m("",!0),(p(!0),t(c,null,n(le.messages.data,e=>{return p(),t("tr",{key:e.id,class:"hover:bg-slate-700/20 transition-colors"},[o("td",O,[o("div",null,[o("p",P,u(e.lead?.name||"Noma'lum"),1),o("p",U,u(e.phone),1)])]),o("td",A,[o("p",{class:"text-slate-300 text-sm max-w-xs truncate",title:e.message},u(e.message),9,D),e.error_message?(p(),t("p",F,u(e.error_message),1)):m("",!0)]),o("td",G,[o("span",{class:b(["px-2.5 py-1 rounded-lg text-xs font-medium border",(a=e.status,{pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",sent:"bg-blue-500/20 text-blue-400 border-blue-500/30",delivered:"bg-green-500/20 text-green-400 border-green-500/30",failed:"bg-red-500/20 text-red-400 border-red-500/30"}[a]||"bg-slate-500/20 text-slate-400 border-slate-500/30")])},u(pe(e.status)),3)]),o("td",I,[o("span",J,u((s=e.provider,{eskiz:"Eskiz",playmobile:"PlayMobile"}[s]||s)),1)]),o("td",L,[o("span",N,u(e.parts_count),1)]),o("td",$,[o("span",R,u(e.created_at),1)])]);var s,a}),128))])])]),le.messages.last_page>1?(p(),t("div",W,[o("p",Z,u(le.messages.from)+"-"+u(le.messages.to)+" / "+u(le.messages.total)+" ta xabar ",1),o("div",ee,[o("button",{onClick:s[2]||(s[2]=e=>ue(le.messages.prev_page_url)),disabled:!le.messages.prev_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[a(l(j),{class:"w-5 h-5 text-white"})],8,se),o("span",te,u(le.messages.current_page)+" / "+u(le.messages.last_page),1),o("button",{onClick:s[3]||(s[3]=e=>ue(le.messages.next_page_url)),disabled:!le.messages.next_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[a(l(_),{class:"w-5 h-5 text-white"})],8,ae)])])):m("",!0)])])]),_:1})],64))}};export{le as default};
