import{r as e,v as a,x as t,y as r,z as s,D as l,L as d,A as o,H as n,C as g,E as i,F as u,G as c,B as y,Q as x,I as b,K as p,J as m}from"./chunk-7Urb0kxg.js";import{_ as k}from"./chunk-L0R09JI1.js";import{u as h,h as f}from"./chunk-DKkye6wf.js";import{u as v}from"./app-DFslr8vl.js";import{r as w}from"./chunk-ujXbNZhL.js";import{r as _}from"./chunk-Sfe4u6kO.js";import{r as j}from"./chunk-DUcDuGHI.js";import{e as S}from"./chunk-Dm-LAqtr.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const q={class:"space-y-6"},U={class:"flex items-center justify-between"},C={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},V={class:"text-sm text-gray-500 dark:text-gray-400"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},T={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},A={class:"flex items-center gap-3"},M={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},F={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},B={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},D={class:"flex items-center gap-3"},H={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},K={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},N={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},I={class:"flex items-center gap-3"},J={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"},Q={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},X={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"},Z={key:0,class:"p-12 text-center"},O={key:1,class:"p-6 space-y-4"},E={class:"flex items-start justify-between mb-4"},G={class:"flex items-center gap-3 mb-2"},L={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Y={key:0,class:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded"},P={key:1,class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded"},R={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},W={key:0},$={class:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm"},ee={class:"font-semibold text-gray-900 dark:text-gray-100"},ae={class:"font-semibold text-green-600 dark:text-green-400"},te={class:"font-semibold text-red-600 dark:text-red-400"},re={class:"font-bold text-gray-900 dark:text-gray-100"},se={key:0,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={key:0},oe={class:"space-y-1"},ne={class:"text-green-600 dark:text-green-400"},ge={key:1},ie={class:"space-y-1"},ue={class:"text-red-600 dark:text-red-400"},ce={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ye={class:"bg-white dark:bg-gray-800 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},xe={class:"space-y-4"},be=["value"],pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},me={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},ke={key:0,class:"mb-4 space-y-2"},he={class:"flex-1 text-sm text-gray-900 dark:text-gray-100"},fe={class:"text-sm font-semibold text-green-600 dark:text-green-400"},ve=["onClick"],we={class:"flex gap-2"},_e={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},je={key:0,class:"mb-4 space-y-2"},Se={class:"flex-1 text-sm text-gray-900 dark:text-gray-100"},qe={class:"text-sm font-semibold text-red-600 dark:text-red-400"},Ue=["onClick"],Ce={class:"flex gap-2"},Ve={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},ze=["disabled"],Te={__name:"SalaryStructures",props:{structures:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]}},setup(Te){const{t:Ae}=v(),Me=e(!1),Fe=h({user_id:null,base_salary:"",payment_frequency:"monthly",effective_from:(new Date).toISOString().split("T")[0],allowances:[],deductions:[]}),Be=e({name:"",amount:""}),De=e({name:"",amount:""}),He=()=>{Be.value.name&&Be.value.amount&&(Fe.allowances.push({...Be.value}),Be.value={name:"",amount:""})},Ke=()=>{De.value.name&&De.value.amount&&(Fe.deductions.push({...De.value}),De.value={name:"",amount:""})},Ne=()=>{Fe.post(route("hr.payroll.salary-structures.store"),{preserveScroll:!0,onSuccess:()=>{Me.value=!1,Fe.reset(),Fe.allowances=[],Fe.deductions=[]}})},Ie=e=>new Intl.NumberFormat("uz-UZ").format(e)+" UZS";return(e,h)=>(i(),a(k,{title:o(Ae)("hr.salary_structures")},{default:t(()=>[r(o(f),{title:o(Ae)("hr.salary_structures")},null,8,["title"]),s("div",q,[s("div",U,[s("div",null,[s("h1",C,n(o(Ae)("hr.salary_structures")),1),s("p",V,n(o(Ae)("hr.salary_structures_subtitle")),1)]),s("button",{onClick:h[0]||(h[0]=e=>Me.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[r(o(w),{class:"w-5 h-5"}),g(" "+n(o(Ae)("hr.add_salary")),1)])]),s("div",z,[s("div",T,[s("div",A,[s("div",M,[r(o(_),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),s("div",null,[s("p",F,n(Te.structures.length),1),h[11]||(h[11]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami Tuzilmalar",-1))])])]),s("div",B,[s("div",D,[s("div",H,[r(o(j),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),s("div",null,[s("p",K,n(Te.structures.filter(e=>e.is_active).length),1),h[12]||(h[12]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol",-1))])])]),s("div",N,[s("div",I,[s("div",J,[r(o(_),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),s("div",null,[s("p",Q,n(Ie(Te.structures.filter(e=>e.is_active).reduce((e,a)=>e+parseFloat(a.base_salary),0))),1),h[13]||(h[13]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami Maosh",-1))])])])]),s("div",X,[h[21]||(h[21]=s("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[s("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Barcha Maosh Tuzilmalari"),s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Xodimlar maosh parametrlari")],-1)),0===Te.structures.length?(i(),l("div",Z,[r(o(_),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),h[14]||(h[14]=s("p",{class:"text-gray-500 dark:text-gray-400"},"Hali maosh tuzilmalari yo'q",-1)),s("button",{onClick:h[1]||(h[1]=e=>Me.value=!0),class:"mt-4 text-blue-600 dark:text-blue-400 hover:underline"}," Birinchi maoshni qo'shing ")])):(i(),l("div",O,[(i(!0),l(u,null,c(Te.structures,e=>(i(),l("div",{key:e.id,class:y(["border border-gray-200 dark:border-gray-700 rounded-lg p-4",{"bg-green-50 dark:bg-green-900/10":e.is_active}])},[s("div",E,[s("div",null,[s("div",G,[s("h3",L,n(e.user_name),1),e.is_active?(i(),l("span",Y," Faol ")):(i(),l("span",P," Nofaol "))]),s("div",R,[s("span",null,n(e.payment_frequency_label),1),s("span",null,"Kuchga kirish: "+n(e.effective_from),1),e.effective_until?(i(),l("span",W,"Tugash: "+n(e.effective_until),1)):d("",!0)])])]),s("div",$,[s("div",null,[h[15]||(h[15]=s("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Asosiy Maosh",-1)),s("span",ee,n(Ie(e.base_salary)),1)]),s("div",null,[h[16]||(h[16]=s("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Ustamalar",-1)),s("span",ae,"+"+n(Ie(e.total_allowances)),1)]),s("div",null,[h[17]||(h[17]=s("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Chegirmalar",-1)),s("span",te,"-"+n(Ie(e.total_deductions)),1)]),s("div",null,[h[18]||(h[18]=s("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Sof Maosh",-1)),s("span",re,n(Ie(e.net_salary)),1)])]),e.allowances.length>0||e.deductions.length>0?(i(),l("div",se,[s("div",le,[e.allowances.length>0?(i(),l("div",de,[h[19]||(h[19]=s("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Ustamalar:",-1)),s("div",oe,[(i(!0),l(u,null,c(e.allowances,(e,a)=>(i(),l("div",{key:a,class:"flex justify-between text-xs text-gray-600 dark:text-gray-400"},[s("span",null,n(e.name),1),s("span",ne,"+"+n(Ie(e.amount)),1)]))),128))])])):d("",!0),e.deductions.length>0?(i(),l("div",ge,[h[20]||(h[20]=s("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Chegirmalar:",-1)),s("div",ie,[(i(!0),l(u,null,c(e.deductions,(e,a)=>(i(),l("div",{key:a,class:"flex justify-between text-xs text-gray-600 dark:text-gray-400"},[s("span",null,n(e.name),1),s("span",ue,"-"+n(Ie(e.amount)),1)]))),128))])])):d("",!0)])])):d("",!0)],2))),128))]))])]),Me.value?(i(),l("div",ce,[s("div",ye,[h[30]||(h[30]=s("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[s("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Yangi Maosh Tuzilmasi")],-1)),s("form",{onSubmit:x(Ne,["prevent"]),class:"p-6 space-y-6"},[s("div",xe,[s("div",null,[h[23]||(h[23]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[g(" Xodim "),s("span",{class:"text-red-500"},"*")],-1)),b(s("select",{"onUpdate:modelValue":h[2]||(h[2]=e=>o(Fe).user_id=e),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[h[22]||(h[22]=s("option",{value:null,disabled:""},"Xodimni tanlang",-1)),(i(!0),l(u,null,c(Te.employees,e=>(i(),l("option",{key:e.id,value:e.id},n(e.name),9,be))),128))],512),[[p,o(Fe).user_id]])]),s("div",pe,[s("div",null,[h[24]||(h[24]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[g(" Asosiy Maosh (UZS) "),s("span",{class:"text-red-500"},"*")],-1)),b(s("input",{"onUpdate:modelValue":h[3]||(h[3]=e=>o(Fe).base_salary=e),type:"number",step:"100000",min:"0",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5000000"},null,512),[[m,o(Fe).base_salary]])]),s("div",null,[h[26]||(h[26]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[g(" To'lov Davri "),s("span",{class:"text-red-500"},"*")],-1)),b(s("select",{"onUpdate:modelValue":h[4]||(h[4]=e=>o(Fe).payment_frequency=e),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...h[25]||(h[25]=[s("option",{value:"monthly"},"Oylik",-1),s("option",{value:"bi-weekly"},"2 Haftalik",-1),s("option",{value:"weekly"},"Haftalik",-1)])],512),[[p,o(Fe).payment_frequency]])])]),s("div",null,[h[27]||(h[27]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[g(" Kuchga Kirish Sanasi "),s("span",{class:"text-red-500"},"*")],-1)),b(s("input",{"onUpdate:modelValue":h[5]||(h[5]=e=>o(Fe).effective_from=e),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[m,o(Fe).effective_from]])])]),s("div",me,[h[28]||(h[28]=s("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Ustamalar (Allowances)",-1)),o(Fe).allowances.length>0?(i(),l("div",ke,[(i(!0),l(u,null,c(o(Fe).allowances,(e,a)=>(i(),l("div",{key:a,class:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded"},[s("span",he,n(e.name),1),s("span",fe,n(Ie(e.amount)),1),s("button",{type:"button",onClick:e=>(e=>{Fe.allowances.splice(e,1)})(a),class:"text-red-600 hover:text-red-700"},[r(o(S),{class:"w-4 h-4"})],8,ve)]))),128))])):d("",!0),s("div",we,[b(s("input",{"onUpdate:modelValue":h[6]||(h[6]=e=>Be.value.name=e),type:"text",placeholder:"Nomi (Transport, Uy-joy, va h.k.)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[m,Be.value.name]]),b(s("input",{"onUpdate:modelValue":h[7]||(h[7]=e=>Be.value.amount=e),type:"number",step:"10000",min:"0",placeholder:"Summa",class:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[m,Be.value.amount]]),s("button",{type:"button",onClick:He,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm"}," Qo'shish ")])]),s("div",_e,[h[29]||(h[29]=s("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Chegirmalar (Deductions)",-1)),o(Fe).deductions.length>0?(i(),l("div",je,[(i(!0),l(u,null,c(o(Fe).deductions,(e,a)=>(i(),l("div",{key:a,class:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded"},[s("span",Se,n(e.name),1),s("span",qe,n(Ie(e.amount)),1),s("button",{type:"button",onClick:e=>(e=>{Fe.deductions.splice(e,1)})(a),class:"text-red-600 hover:text-red-700"},[r(o(S),{class:"w-4 h-4"})],8,Ue)]))),128))])):d("",!0),s("div",Ce,[b(s("input",{"onUpdate:modelValue":h[8]||(h[8]=e=>De.value.name=e),type:"text",placeholder:"Nomi (Soliq, Sug'urta, va h.k.)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[m,De.value.name]]),b(s("input",{"onUpdate:modelValue":h[9]||(h[9]=e=>De.value.amount=e),type:"number",step:"10000",min:"0",placeholder:"Summa",class:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[m,De.value.amount]]),s("button",{type:"button",onClick:Ke,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm"}," Qo'shish ")])]),s("div",Ve,[s("button",{type:"button",onClick:h[10]||(h[10]=e=>{Me.value=!1,o(Fe).reset(),o(Fe).allowances=[],o(Fe).deductions=[]}),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Bekor qilish "),s("button",{type:"submit",disabled:o(Fe).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},n(o(Fe).processing?"Saqlanmoqda...":"Saqlash"),9,ze)])],32)])])):d("",!0)]),_:1},8,["title"]))}};export{Te as default};
