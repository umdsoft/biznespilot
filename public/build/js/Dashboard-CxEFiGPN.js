import{r as e,b as t,v as r,x as a,L as s,y as l,A as o,B as n,z as d,F as i,G as c,D as p,O as m,E as u,C as g}from"./chunk-CpmtkKLp.js";import{h as x,l as b}from"./chunk-BhZp3z4u.js";import{_ as y}from"./chunk-DbFbpSR2.js";import{u as f}from"./app-C-ZlocOh.js";import{C as _,r as h}from"./chunk-Dl5Vnr2b.js";import{r as v}from"./chunk-dqIIyBTR.js";import{r as k}from"./chunk-DvlohF_U.js";import{r as w}from"./chunk-C2r_KHf6.js";import{r as j}from"./chunk-BiW1c8q7.js";import{r as C}from"./chunk-DNKDGYPp.js";import{r as O}from"./chunk-C0F29rqV.js";import{r as z}from"./chunk-DCXiFUg-.js";import{r as D}from"./chunk-D7oP9pDe.js";import{r as R}from"./chunk-C-cD-j23.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const I={class:"py-12 px-4 sm:px-6 lg:px-8"},W={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},B={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},E={class:"mt-2 text-gray-600 dark:text-gray-400"},F={class:"flex gap-2"},L={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},T={class:"flex flex-wrap items-end gap-4"},U={class:"flex-1 min-w-[200px]"},V={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},A={class:"flex-1 min-w-[200px]"},$={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},G={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},N={class:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white"},S={class:"flex items-center justify-between mb-2"},Z={class:"text-sm font-medium opacity-90 mb-1"},q={class:"text-3xl font-bold mb-1"},H={class:"text-xs opacity-80"},J={class:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white"},K={class:"flex items-center justify-between mb-2"},M={class:"text-sm font-medium opacity-90"},P={class:"text-sm font-medium opacity-90 mb-1"},Q={class:"text-3xl font-bold mb-1"},X={class:"text-xs opacity-80"},Y={class:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},ee={class:"flex items-center justify-between mb-2"},te={class:"text-sm font-medium opacity-90"},re={class:"text-sm font-medium opacity-90 mb-1"},ae={class:"text-3xl font-bold mb-1"},se={class:"text-xs opacity-80"},le={class:"bg-gradient-to-br from-orange-500 to-purple-600 rounded-xl shadow-lg p-6 text-white"},oe={class:"flex items-center justify-between mb-2"},ne={class:"text-sm font-medium opacity-90 mb-1"},de={class:"text-3xl font-bold mb-1"},ie={class:"text-xs opacity-80"},ce={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},pe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},me={class:"flex items-center justify-between mb-4"},ue={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},ge={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},xe={class:"flex items-center justify-between mb-4"},be={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},ye={class:"text-sm text-gray-500 dark:text-gray-400"},fe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},_e={class:"flex items-center gap-3 mb-6"},he={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},ke={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},we={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},je={key:0},Ce={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},Oe={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},ze={class:"text-green-600 dark:text-green-400 font-semibold"},De={class:"text-blue-600 dark:text-blue-400 font-semibold"},Re={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Ie={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},We={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},Be={key:0},Ee={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},Fe={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},Le={class:"text-green-600 dark:text-green-400 font-semibold"},Te={class:"text-blue-600 dark:text-blue-400 font-semibold"},Ue={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Ve={class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},Ae={class:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2"},$e={key:0},Ge={class:"font-bold text-gray-900 dark:text-gray-100 mb-2"},Ne={class:"space-y-1 text-sm text-gray-600 dark:text-gray-400"},Se={class:"text-green-600 dark:text-green-400 font-semibold"},Ze={class:"text-blue-600 dark:text-blue-400 font-semibold"},qe={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},He={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Je={class:"flex items-center justify-between mb-6"},Ke={class:"flex items-center gap-3"},Me={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},Pe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Qe={class:"text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg"},Xe={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Ye={class:"text-center p-4 bg-green-50 dark:bg-green-900/30 rounded-lg"},et={class:"text-2xl font-bold text-green-600 dark:text-green-400"},tt={class:"text-center p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg"},rt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},at={class:"text-center p-4 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},st={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"};_.register(...h);const lt={mounted(){this.$nextTick(()=>{this.initializeCharts()})},methods:{initializeCharts(){if(this.revenueChartData){const e=document.getElementById("revenueChart");e&&new _(e,{type:"line",data:this.revenueChartData,options:this.chartOptions})}if(this.dealCountChartData){const e=document.getElementById("dealsChart");e&&new _(e,{type:"bar",data:this.dealCountChartData,options:this.chartOptions})}}}},ot=Object.assign(lt,{__name:"Dashboard",props:{metrics:{type:Object,default:()=>({revenue_growth:0,total_revenue:0,total_leads:0,new_leads:0,active_pipeline_deals:0,won_deals:0,conversion_rate:0,avg_deal_size:0,pipeline_value:0})},revenue_trends:Object,top_performers:{type:Object,default:()=>({top_dream_buyer:null,top_offer:null,top_source:null})},funnel_summary:{type:Object,default:()=>({total_leads:0,won_leads:0,active_leads:0,overall_conversion_rate:0})},filters:Object},setup(_){const{t:h}=f(),lt=_,ot=e(lt.filters?.date_from||""),nt=e(lt.filters?.date_to||""),dt=e=>new Intl.NumberFormat("uz-UZ").format(e)+" so'm",it=e=>e?.toFixed(1)||"0";t(()=>lt.revenue_trends?.chart_data?{labels:lt.revenue_trends.chart_data.labels,datasets:lt.revenue_trends.chart_data.datasets.map(e=>({...e,fill:!0}))}:null),t(()=>lt.revenue_trends?.deal_count_chart?{labels:lt.revenue_trends.deal_count_chart.labels,datasets:lt.revenue_trends.deal_count_chart.datasets.map(e=>({...e,fill:!0}))}:null);const ct=()=>{window.location.href=route("business.analytics.index",{date_from:ot.value,date_to:nt.value})},pt=()=>{ot.value="",nt.value="",window.location.href=route("business.analytics.index")};return(e,t)=>(p(),r(y,{title:o(h)("analytics.sales_analytics")},{default:a(()=>{return[s(o(x),{title:o(h)("analytics.dashboard")},null,8,["title"]),l("div",I,[l("div",W,[l("div",null,[l("h1",B,[s(o(v),{class:"w-10 h-10 text-blue-600 dark:text-blue-400"}),n(" "+d(o(h)("analytics.sales_analytics")),1)]),l("p",E,d(o(h)("analytics.track_sales_conversion")),1)]),l("div",F,[s(o(b),{href:e.route("business.analytics.funnel"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:a(()=>[s(o(k),{class:"w-4 h-4"}),n(" "+d(o(h)("analytics.funnel")),1)]),_:1},8,["href"]),s(o(b),{href:e.route("business.analytics.performance"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:a(()=>[s(o(w),{class:"w-4 h-4"}),n(" "+d(o(h)("analytics.performance")),1)]),_:1},8,["href"])])]),l("div",L,[l("div",T,[l("div",U,[l("label",V,d(o(h)("reports.filter.start_date")),1),i(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>ot.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[c,ot.value]])]),l("div",A,[l("label",$,d(o(h)("reports.filter.end_date")),1),i(l("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>nt.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[c,nt.value]])]),l("button",{onClick:ct,class:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"},d(o(h)("common.filter")),1),l("button",{onClick:pt,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},d(o(h)("reports.filter.reset")),1)])]),l("div",G,[l("div",N,[l("div",S,[s(o(j),{class:"w-8 h-8 opacity-80"}),(p(),r(m((y=_.metrics.revenue_growth,y>0?D:R)),{class:u(["w-6 h-6",_.metrics.revenue_growth>0?"text-green-200":"text-red-200"])},null,8,["class"]))]),l("p",Z,d(o(h)("analytics.total_revenue")),1),l("p",q,d(dt(_.metrics.total_revenue||0)),1),l("p",H,d(_.metrics.revenue_growth>0?"+":"")+d(it(_.metrics.revenue_growth))+"% "+d(o(h)("analytics.vs_previous_period")),1)]),l("div",J,[l("div",K,[s(o(C),{class:"w-8 h-8 opacity-80"}),l("span",M,d(_.metrics.new_leads||0)+" "+d(o(h)("analytics.new")),1)]),l("p",P,d(o(h)("dashboard.total_leads")),1),l("p",Q,d(_.metrics.total_leads||0),1),l("p",X,d(_.metrics.active_pipeline_deals||0)+" "+d(o(h)("analytics.active_pipeline")),1)]),l("div",Y,[l("div",ee,[s(o(O),{class:"w-8 h-8 opacity-80"}),l("span",te,d(it(_.metrics.conversion_rate))+"% CR ",1)]),l("p",re,d(o(h)("analytics.won_deals")),1),l("p",ae,d(_.metrics.won_deals||0),1),l("p",se,d(o(h)("analytics.average"))+": "+d(dt(_.metrics.avg_deal_size||0)),1)]),l("div",le,[l("div",oe,[s(o(k),{class:"w-8 h-8 opacity-80"}),s(o(z),{class:"w-6 h-6 opacity-80"})]),l("p",ne,d(o(h)("analytics.pipeline_value")),1),l("p",de,d(dt(_.metrics.pipeline_value||0)),1),l("p",ie,d(o(h)("analytics.potential_revenue")),1)])]),l("div",ce,[l("div",pe,[l("div",me,[l("h3",ue,d(o(h)("analytics.revenue_trends")),1),s(o(b),{href:e.route("business.analytics.revenue"),class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"},{default:a(()=>[n(d(o(h)("common.view"))+" → ",1)]),_:1},8,["href"])]),t[2]||(t[2]=l("div",{class:"h-64"},[l("canvas",{id:"revenueChart"})],-1))]),l("div",ge,[l("div",xe,[l("h3",be,d(o(h)("analytics.deals_won")),1),l("span",ye,d(o(h)("analytics.last_30_days")),1)]),t[3]||(t[3]=l("div",{class:"h-64"},[l("canvas",{id:"dealsChart"})],-1))])]),l("div",fe,[l("div",_e,[s(o(w),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"}),l("h3",he,d(o(h)("analytics.top_performers")),1)]),l("div",ve,[l("div",ke,[l("p",we,d(o(h)("analytics.top_ideal_customer")),1),_.top_performers.top_dream_buyer?(p(),g("div",je,[l("p",Ce,d(_.top_performers.top_dream_buyer.dream_buyer_name),1),l("div",Oe,[l("p",null,"Leads: "+d(_.top_performers.top_dream_buyer.total_leads),1),l("p",null,"Won: "+d(_.top_performers.top_dream_buyer.won_leads),1),l("p",ze," CR: "+d(it(_.top_performers.top_dream_buyer.conversion_rate))+"% ",1),l("p",De,d(dt(_.top_performers.top_dream_buyer.total_revenue)),1)])])):(p(),g("p",Re,d(o(h)("reports.no_data")),1))]),l("div",Ie,[l("p",We,d(o(h)("analytics.top_offer")),1),_.top_performers.top_offer?(p(),g("div",Be,[l("p",Ee,d(_.top_performers.top_offer.offer_name),1),l("div",Fe,[l("p",null,"Value Score: "+d(_.top_performers.top_offer.value_score),1),l("p",null,"Won: "+d(_.top_performers.top_offer.won_leads),1),l("p",Le," CR: "+d(it(_.top_performers.top_offer.conversion_rate))+"% ",1),l("p",Te,d(dt(_.top_performers.top_offer.total_revenue)),1)])])):(p(),g("p",Ue,d(o(h)("reports.no_data")),1))]),l("div",Ve,[l("p",Ae,d(o(h)("analytics.top_source")),1),_.top_performers.top_source?(p(),g("div",$e,[l("p",Ge,d(_.top_performers.top_source.source_name),1),l("div",Ne,[l("p",null,"Type: "+d(_.top_performers.top_source.channel_type),1),l("p",null,"Won: "+d(_.top_performers.top_source.won_leads),1),l("p",Se," ROI: "+d(it(_.top_performers.top_source.roi))+"% ",1),l("p",Ze,d(dt(_.top_performers.top_source.total_revenue)),1)])])):(p(),g("p",qe,d(o(h)("reports.no_data")),1))])])]),l("div",He,[l("div",Je,[l("div",Ke,[s(o(k),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"}),l("h3",Me,d(o(h)("analytics.conversion_funnel_overview")),1)]),s(o(b),{href:e.route("business.analytics.funnel"),class:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium"},{default:a(()=>[n(d(o(h)("common.view"))+" → ",1)]),_:1},8,["href"])]),l("div",Pe,[l("div",Qe,[l("p",Xe,d(_.funnel_summary.total_leads||0),1),t[4]||(t[4]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Total Leads",-1))]),l("div",Ye,[l("p",et,d(_.funnel_summary.won_leads||0),1),t[5]||(t[5]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Won",-1))]),l("div",tt,[l("p",rt,d(_.funnel_summary.active_leads||0),1),t[6]||(t[6]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Active",-1))]),l("div",at,[l("p",st,d(it(_.funnel_summary.overall_conversion_rate))+"%",1),t[7]||(t[7]=l("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},"Conversion Rate",-1))])])])])];var y}),_:1},8,["title"]))}});export{ot as default};
