import{r as w,C as d,z as e,N as p,D as l,y as F,x as j,A as f,H as a,J as H,L as N,B as i,E as y,G as h,I as b,v as _,F as n}from"./chunk-KPSVwAyv.js";import{l as k,r as T}from"./chunk-BVrjkT6E.js";const V={class:"space-y-6"},U={class:"relative overflow-hidden bg-gradient-to-br from-orange-600 via-orange-700 to-amber-800 dark:from-orange-800 dark:via-orange-900 dark:to-amber-950 rounded-2xl p-6 md:p-8"},O={class:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4"},A={class:"flex items-center"},D={class:"text-orange-100"},I={key:0,class:"flex items-center px-4 py-2 bg-red-500/20 border border-red-400/30 rounded-xl"},q={class:"text-white font-medium"},E={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},J={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},K={class:"text-2xl font-bold text-gray-900 dark:text-white"},R={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Y={class:"text-2xl font-bold text-green-600 dark:text-green-400"},G={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},P={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},Q={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},W={class:"text-2xl font-bold text-red-600 dark:text-red-400"},X={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Z={class:"flex flex-col md:flex-row gap-4"},$={class:"flex-1"},ee={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},te={key:0},re={class:"divide-y divide-gray-200 dark:divide-gray-700"},se={class:"flex items-start justify-between"},ae={class:"flex items-center"},oe={class:"relative"},ne={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center"},de={class:"ml-4"},le={class:"flex items-center gap-2"},ie={class:"font-medium text-gray-900 dark:text-white"},ge={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ue={key:1,class:"text-sm text-orange-600 dark:text-orange-400 mt-1"},xe={class:"text-right"},ce={class:"text-sm text-gray-500 dark:text-gray-400"},fe={key:0,class:"text-xs text-blue-600 dark:text-blue-400 mt-1"},ye={key:1,class:"flex flex-wrap gap-1 mt-2 justify-end"},he={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between"},be={class:"text-sm text-gray-500 dark:text-gray-400"},ke={class:"flex gap-2"},ve={key:1,class:"p-12 text-center"},pe={__name:"TelegramConversationsIndex",props:{bot:Object,conversations:Object,stats:{type:Object,default:()=>({total:0,active:0,handoff:0,unassigned_handoff:0})},filters:{type:Object,default:()=>({})},panelType:{type:String,required:!0,validator:s=>["business","marketing"].includes(s)}},setup(s){const g=s,x=(o,t=null)=>{const r=g.panelType==="business"?"business.":"marketing.";return Array.isArray(t)||t?route(r+o,t):route(r+o)},c=w(g.filters.status||""),u=w(g.filters.operator_id==="unassigned"),M=o=>o?o.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2):"?",C=o=>({active:"Faol",handoff:"Handoff",closed:"Yopilgan"})[o]||o,B=o=>{const t={active:"bg-green-100 dark:bg-green-900/30",handoff:"bg-yellow-100 dark:bg-yellow-900/30",closed:"bg-gray-100 dark:bg-gray-700"};return t[o]||t.active},z=o=>{const t={active:"text-green-600 dark:text-green-400",handoff:"text-yellow-600 dark:text-yellow-400",closed:"text-gray-600 dark:text-gray-400"};return t[o]||t.active},L=o=>{const t={active:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",handoff:"px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 animate-pulse",closed:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"};return t[o]||t.active},v=()=>{T.get(x("telegram-funnels.conversations.index",g.bot.id),{status:c.value||void 0,operator_id:u.value?"unassigned":void 0},{preserveState:!0,preserveScroll:!0})},S=()=>{u.value=!u.value,v()};return(o,t)=>(n(),d("div",V,[e("div",U,[t[5]||(t[5]=p('<div class="absolute inset-0 opacity-10"><svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="white" stroke-width="0.5"></path></pattern></defs><rect width="100" height="100" fill="url(#grid)"></rect></svg></div>',1)),e("div",O,[e("div",A,[F(f(k),{href:x("telegram-funnels.show",s.bot.id),class:"text-white/70 hover:text-white mr-4 transition-colors"},{default:j(()=>[...t[1]||(t[1]=[e("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),t[3]||(t[3]=e("div",{class:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center mr-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),e("div",null,[t[2]||(t[2]=e("h1",{class:"text-2xl md:text-3xl font-bold text-white"},"Suhbatlar",-1)),e("p",D,"@"+a(s.bot.username)+" - Live Chat & Handoff",1)])]),s.stats.unassigned_handoff>0?(n(),d("div",I,[t[4]||(t[4]=e("svg",{class:"w-5 h-5 text-red-300 mr-2 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",q,a(s.stats.unassigned_handoff)+" ta kutayotgan suhbat",1)])):l("",!0)])]),e("div",E,[e("div",J,[t[6]||(t[6]=e("div",{class:"flex items-center justify-between mb-2"},[e("div",{class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])])],-1)),e("p",K,a(s.stats.total),1),t[7]||(t[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami",-1))]),e("div",R,[t[8]||(t[8]=e("div",{class:"flex items-center justify-between mb-2"},[e("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])])],-1)),e("p",Y,a(s.stats.active),1),t[9]||(t[9]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol",-1))]),e("div",G,[t[10]||(t[10]=e("div",{class:"flex items-center justify-between mb-2"},[e("div",{class:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])])],-1)),e("p",P,a(s.stats.handoff),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Handoff",-1))]),e("div",Q,[t[12]||(t[12]=e("div",{class:"flex items-center justify-between mb-2"},[e("div",{class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("p",W,a(s.stats.unassigned_handoff),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kutayotgan",-1))])]),e("div",X,[e("div",Z,[e("div",$,[H(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>c.value=r),onChange:v,class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-gray-900 dark:text-white"},[...t[14]||(t[14]=[e("option",{value:""},"Barcha status",-1),e("option",{value:"active"},"Faol",-1),e("option",{value:"handoff"},"Handoff",-1),e("option",{value:"closed"},"Yopilgan",-1)])],544),[[N,c.value]])]),e("button",{onClick:S,class:i(["px-4 py-2.5 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",u.value?"bg-orange-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),y(" Kutayotganlar ",-1)])],2)])]),e("div",ee,[s.conversations.data&&s.conversations.data.length>0?(n(),d("div",te,[e("div",re,[(n(!0),d(h,null,b(s.conversations.data,r=>(n(),_(f(k),{key:r.id,href:x("telegram-funnels.conversations.show",[s.bot.id,r.id]),class:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},{default:j(()=>[e("div",se,[e("div",ae,[e("div",oe,[e("div",{class:i(["w-12 h-12 rounded-full flex items-center justify-center",B(r.status)])},[e("span",{class:i(["text-lg font-semibold",z(r.status)])},a(M(r.user?.full_name)),3)],2),r.unread_count>0?(n(),d("span",ne,a(r.unread_count>9?"9+":r.unread_count),1)):l("",!0)]),e("div",de,[e("div",le,[e("p",ie,a(r.user?.full_name||"Noma'lum"),1),e("span",{class:i(L(r.status))},a(C(r.status)),3)]),r.user?.username?(n(),d("p",ge,"@"+a(r.user.username),1)):l("",!0),r.handoff_reason?(n(),d("p",ue,[t[16]||(t[16]=e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y(" "+a(r.handoff_reason),1)])):l("",!0)])]),e("div",xe,[e("p",ce,a(r.last_message_at),1),r.assigned_operator?(n(),d("p",fe,[t[17]||(t[17]=e("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),y(" "+a(r.assigned_operator),1)])):l("",!0),r.tags&&r.tags.length>0?(n(),d("div",ye,[(n(!0),d(h,null,b(r.tags.slice(0,2),m=>(n(),d("span",{key:m,class:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full"},a(m),1))),128))])):l("",!0)])])]),_:2},1032,["href"]))),128))]),s.conversations.links&&s.conversations.links.length>3?(n(),d("div",he,[e("div",be,a(s.conversations.from)+" - "+a(s.conversations.to)+" / "+a(s.conversations.total)+" ta suhbat ",1),e("div",ke,[(n(!0),d(h,null,b(s.conversations.links,r=>(n(),_(f(k),{key:r.label,href:r.url||"#",class:i(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",r.active?"bg-orange-600 text-white":r.url?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600":"bg-gray-50 dark:bg-gray-800 text-gray-400 cursor-not-allowed"]),innerHTML:r.label},null,8,["href","class","innerHTML"]))),128))])])):l("",!0)])):(n(),d("div",ve,[...t[18]||(t[18]=[p('<div class="w-20 h-20 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-orange-600 dark:text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Hali suhbat yo&#39;q</h3><p class="text-gray-500 dark:text-gray-400 max-w-sm mx-auto"> Foydalanuvchilar bot bilan suhbatni boshlaganda bu yerda ko&#39;rinadi. </p>',3)])]))])]))}};export{pe as _};
