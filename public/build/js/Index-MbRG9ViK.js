import{i as T,C as d,F as l,z as e,B as y,H as a,E as p,D as v,G as x,I as w,r as _,b as h,o as q,A as m,v as F}from"./chunk-KPSVwAyv.js";import{u as O}from"./chunk-D4s-eF4I.js";import{u as E}from"./chunk-BMYvF852.js";import{a as $}from"./chunk-BVrjkT6E.js";import{u as G}from"./app-906_W7J6.js";import"./chunk-BvkwlYlD.js";const R=Symbol("");function Y(){return T(R)}const K={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},P={class:"p-6 border-b border-gray-100"},W={class:"flex items-start justify-between"},Z={class:"flex items-center gap-4"},J={class:"text-lg font-semibold text-gray-900 mb-1"},Q={class:"text-sm text-gray-600"},X={class:"p-6"},ee={key:0,class:"mb-4"},te={class:"space-y-1"},se={key:1,class:"mb-4 p-3 bg-green-50 rounded-lg"},ne={class:"text-sm"},oe={key:0,class:"flex items-center gap-2 text-gray-700 mb-1"},ie={class:"font-medium"},ae={key:1,class:"text-xs text-gray-500"},re={key:2,class:"grid grid-cols-3 gap-3 mb-4"},le={class:"text-lg font-semibold text-gray-900"},ce={class:"text-xs text-gray-600"},de={class:"flex items-center gap-2"},ue=["disabled"],ge={key:0,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},me={key:1,class:"animate-spin w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},fe=["disabled"],ye={__name:"IntegrationCard",props:{icon:{type:String,required:!0},name:{type:String,required:!0},description:{type:String,required:!0},isConnected:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},features:{type:Array,default:()=>[]},connectionInfo:{type:Object,default:null},stats:{type:Object,default:null}},emits:["connect","disconnect","sync","settings"],setup(i){return(t,o)=>(l(),d("div",K,[e("div",P,[e("div",W,[e("div",Z,[e("div",{class:y(["w-16 h-16 rounded-lg flex items-center justify-center text-3xl",i.isConnected?"bg-green-50":"bg-gray-50"])},a(i.icon),3),e("div",null,[e("h3",J,a(i.name),1),e("p",Q,a(i.description),1)])]),e("span",{class:y(["inline-flex items-center px-3 py-1 rounded-full text-xs font-medium",i.isConnected?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"])},[e("span",{class:y(["w-2 h-2 rounded-full mr-2",i.isConnected?"bg-green-500":"bg-gray-400"])},null,2),p(" "+a(i.isConnected?"Ulangan":"Ulanmagan"),1)],2)])]),e("div",X,[i.features&&i.features.length>0?(l(),d("div",ee,[o[5]||(o[5]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Imkoniyatlar:",-1)),e("ul",te,[(l(!0),d(x,null,w(i.features,(u,f)=>(l(),d("li",{key:f,class:"flex items-start gap-2 text-sm text-gray-600"},[o[4]||(o[4]=e("svg",{class:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),p(" "+a(u),1)]))),128))])])):v("",!0),i.isConnected&&i.connectionInfo?(l(),d("div",se,[e("div",ne,[i.connectionInfo.account?(l(),d("div",oe,[o[6]||(o[6]=e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",ie,a(i.connectionInfo.account),1)])):v("",!0),i.connectionInfo.lastSync?(l(),d("div",ae," Oxirgi sinxronlash: "+a(i.connectionInfo.lastSync),1)):v("",!0)])])):v("",!0),i.isConnected&&i.stats?(l(),d("div",re,[(l(!0),d(x,null,w(i.stats,(u,f)=>(l(),d("div",{key:f,class:"text-center p-2 bg-gray-50 rounded"},[e("div",le,a(u.value),1),e("div",ce,a(u.label),1)]))),128))])):v("",!0),e("div",de,[i.isConnected?(l(),d(x,{key:1},[e("button",{onClick:o[1]||(o[1]=u=>t.$emit("sync")),disabled:i.loading,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},[(l(),d("svg",{class:y([{"animate-spin":i.loading},"w-4 h-4 mr-2"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[9]||(o[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),o[10]||(o[10]=p(" Sinxronlash ",-1))],8,fe),e("button",{onClick:o[2]||(o[2]=u=>t.$emit("settings")),class:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",title:"Sozlamalar"},[...o[11]||(o[11]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)])]),e("button",{onClick:o[3]||(o[3]=u=>t.$emit("disconnect")),class:"px-4 py-2 bg-white border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition-colors",title:"Uzish"},[...o[12]||(o[12]=[e("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])],64)):(l(),d("button",{key:0,onClick:o[0]||(o[0]=u=>t.$emit("connect")),disabled:i.loading,class:"flex-1 inline-flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[i.loading?(l(),d("svg",me,[...o[8]||(o[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(l(),d("svg",ge,[...o[7]||(o[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"},null,-1)])])),p(" "+a(i.loading?"Ulanmoqda...":"Ulash"),1)],8,ue))])])]))}},he={class:"space-y-6"},ve={class:"flex items-center justify-between"},pe={class:"text-2xl font-bold text-gray-900"},be={class:"text-sm text-gray-600 mt-1"},xe=["disabled"],ke={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},we={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},Ce={class:"flex items-center justify-between"},_e={class:"text-sm text-gray-600"},$e={class:"text-2xl font-bold text-gray-900 mt-1"},Ie={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},je={class:"flex items-center justify-between"},Se={class:"text-sm text-gray-600"},Ae={class:"text-2xl font-bold text-green-600 mt-1"},Be={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},Me={class:"flex items-center justify-between"},ze={class:"text-sm text-gray-600"},De={class:"text-2xl font-bold text-blue-600 mt-1"},Ne={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},Le={class:"flex items-center justify-between"},He={class:"text-sm text-gray-600"},Ue={class:"text-sm font-medium text-gray-900 mt-1"},Ve={class:"border-b border-gray-200"},Te={class:"-mb-px flex space-x-8"},qe=["onClick"],Fe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Oe={key:0,class:"text-center py-12 bg-white rounded-lg border border-gray-200"},Ee={class:"text-lg font-medium text-gray-900 mb-2"},Ge={class:"text-gray-600"},Je={__name:"Index",setup(i){const{t}=G(),o=Y(),u=O(),f=E(),k=_(!1),b=_("all"),g=_([]),j=h(()=>[{id:"all",name:t("integrations.categories.all"),count:g.value.length},{id:"social",name:t("integrations.categories.social"),count:g.value.filter(s=>s.category==="social").length},{id:"messaging",name:t("integrations.categories.messaging"),count:g.value.filter(s=>s.category==="messaging").length},{id:"business",name:t("integrations.categories.business"),count:g.value.filter(s=>s.category==="business").length},{id:"marketing",name:t("integrations.categories.marketing"),count:g.value.filter(s=>s.category==="marketing").length}]),I=h(()=>b.value==="all"?g.value:g.value.filter(s=>s.category===b.value)),S=h(()=>g.value.length),A=h(()=>g.value.filter(s=>s.isConnected).length),B=h(()=>g.value.filter(s=>s.isConnected&&s.isActive).length),M=h(()=>{const s=g.value.filter(n=>n.connectionInfo?.lastSync).map(n=>new Date(n.connectionInfo.lastSync));if(s.length===0)return t("integrations.time.never");const r=new Date(Math.max(...s));return V(r)}),z=()=>{g.value=[{id:"instagram",category:"social",icon:"ðŸ“·",name:"Instagram",description:t("integrations.instagram.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.instagram.features").split("|"),connectionInfo:null,stats:null},{id:"facebook",category:"social",icon:"ðŸ‘¥",name:"Facebook",description:t("integrations.facebook.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.facebook.features").split("|"),connectionInfo:null,stats:null},{id:"telegram",category:"messaging",icon:"âœˆï¸",name:"Telegram",description:t("integrations.telegram.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.telegram.features").split("|"),connectionInfo:null,stats:null},{id:"whatsapp",category:"messaging",icon:"ðŸ’¬",name:"WhatsApp Business",description:t("integrations.whatsapp.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.whatsapp.features").split("|"),connectionInfo:null,stats:null},{id:"pos",category:"business",icon:"ðŸ’³",name:"POS Sistema",description:t("integrations.pos.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.pos.features").split("|"),connectionInfo:null,stats:null},{id:"google_analytics",category:"marketing",icon:"ðŸ“Š",name:"Google Analytics 4",description:t("integrations.google_analytics.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.google_analytics.features").split("|"),connectionInfo:null,stats:null},{id:"yandex_metrica",category:"marketing",icon:"ðŸ“ˆ",name:"Yandex.Metrica",description:t("integrations.yandex_metrica.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.yandex_metrica.features").split("|"),connectionInfo:null,stats:null},{id:"google_ads",category:"marketing",icon:"ðŸŽ¯",name:"Google Ads",description:t("integrations.google_ads.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.google_ads.features").split("|"),connectionInfo:null,stats:null},{id:"yandex_direct",category:"marketing",icon:"ðŸŽª",name:"Yandex.Direct",description:t("integrations.yandex_direct.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.yandex_direct.features").split("|"),connectionInfo:null,stats:null},{id:"email",category:"marketing",icon:"ðŸ“§",name:"Email Marketing",description:t("integrations.email.desc"),isConnected:!1,isActive:!1,loading:!1,features:t("integrations.email.features").split("|"),connectionInfo:null,stats:null}]},C=async()=>{k.value=!0;try{const s=f.currentBusiness?.id;if(!s)return;const r=await $.get("/api/integrations/status",{params:{business_id:s}});r.data.data&&(g.value=g.value.map(n=>{const c=r.data.data[n.id];return c&&c.isConnected?{...n,isConnected:c.isConnected||!1,isActive:c.isActive||!1,connectionInfo:{connectedAt:c.connectedAt,lastSync:c.lastSync,username:c.username||c.pageName||c.botName||c.phoneNumber||c.systemName||c.propertyName||c.counterName||c.accountName||c.websiteUrl},stats:c.stats||null}:n}))}catch(s){console.error("Failed to load integration status:",s)}finally{k.value=!1}},D=async s=>{s.loading=!0;try{const n={instagram:"/business/settings/instagram-ai",facebook:"/target-analysis",telegram:"/business/customer-bot/settings",whatsapp:"/business/settings/whatsapp-ai",pos:"/business/settings",google_analytics:"/business/settings",google_ads:"/target-analysis",email:"/business/settings"}[s.id];n?o.push(n):u.info(t("integrations.toast.in_development",{name:s.name}))}catch{u.error(t("integrations.toast.connect_error",{name:s.name}))}finally{s.loading=!1}},N=async s=>{if(confirm(t("integrations.confirm.disconnect",{name:s.name}))){s.loading=!0;try{await $.post(`/api/integrations/${s.id}/disconnect`,{business_id:f.currentBusiness?.id}),s.isConnected=!1,s.isActive=!1,s.connectionInfo=null,s.stats=null,u.success(t("integrations.toast.disconnected",{name:s.name}))}catch{u.error(t("integrations.toast.disconnect_error",{name:s.name}))}finally{s.loading=!1}}},L=async s=>{s.loading=!0;try{await $.post(`/api/integrations/${s.id}/sync`,{business_id:f.currentBusiness?.id}),u.success(t("integrations.toast.synced",{name:s.name})),await C()}catch{u.error(t("integrations.toast.sync_error",{name:s.name}))}finally{s.loading=!1}},H=s=>{const n={instagram:"/business/settings/instagram-ai",facebook:"/target-analysis",telegram:"/business/customer-bot/settings",whatsapp:"/business/settings/whatsapp-ai"}[s.id];n&&o.push(n)},U=async()=>{await C(),u.success(t("integrations.toast.refreshed"))},V=s=>{const n=Math.floor((new Date-s)/1e3);return n<60?t("integrations.time.just_now"):n<3600?t("integrations.time.minutes_ago",{count:Math.floor(n/60)}):n<86400?t("integrations.time.hours_ago",{count:Math.floor(n/3600)}):n<604800?t("integrations.time.days_ago",{count:Math.floor(n/86400)}):s.toLocaleDateString("uz-UZ")};return q(()=>{z(),C()}),(s,r)=>(l(),d("div",he,[e("div",ve,[e("div",null,[e("h1",pe,a(m(t)("integrations.title")),1),e("p",be,a(m(t)("integrations.description")),1)]),e("button",{onClick:U,disabled:k.value,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},[(l(),d("svg",{class:y([{"animate-spin":k.value},"w-4 h-4 mr-2"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...r[0]||(r[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),p(" "+a(m(t)("integrations.refresh_all")),1)],8,xe)]),e("div",ke,[e("div",we,[e("div",Ce,[e("div",null,[e("p",_e,a(m(t)("integrations.stats.total")),1),e("p",$e,a(S.value),1)]),r[1]||(r[1]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",Ie,[e("div",je,[e("div",null,[e("p",Se,a(m(t)("integrations.stats.connected")),1),e("p",Ae,a(A.value),1)]),r[2]||(r[2]=e("div",{class:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1))])]),e("div",Be,[e("div",Me,[e("div",null,[e("p",ze,a(m(t)("integrations.stats.active")),1),e("p",De,a(B.value),1)]),r[3]||(r[3]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),e("div",Ne,[e("div",Le,[e("div",null,[e("p",He,a(m(t)("integrations.stats.last_sync")),1),e("p",Ue,a(M.value),1)]),r[4]||(r[4]=e("div",{class:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),e("div",Ve,[e("nav",Te,[(l(!0),d(x,null,w(j.value,n=>(l(),d("button",{key:n.id,onClick:c=>b.value=n.id,class:y(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors",b.value===n.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[p(a(n.name)+" ",1),e("span",{class:y(["ml-2 py-0.5 px-2 rounded-full text-xs",b.value===n.id?"bg-primary-100 text-primary-600":"bg-gray-100 text-gray-600"])},a(n.count),3)],10,qe))),128))])]),e("div",Fe,[(l(!0),d(x,null,w(I.value,n=>(l(),F(ye,{key:n.id,icon:n.icon,name:n.name,description:n.description,"is-connected":n.isConnected,loading:n.loading,features:n.features,"connection-info":n.connectionInfo,stats:n.stats,onConnect:c=>D(n),onDisconnect:c=>N(n),onSync:c=>L(n),onSettings:c=>H(n)},null,8,["icon","name","description","is-connected","loading","features","connection-info","stats","onConnect","onDisconnect","onSync","onSettings"]))),128))]),I.value.length===0?(l(),d("div",Oe,[r[5]||(r[5]=e("div",{class:"text-6xl mb-4"},"ðŸ”Œ",-1)),e("h3",Ee,a(m(t)("integrations.empty.title")),1),e("p",Ge,a(m(t)("integrations.empty.desc")),1)])):v("",!0)]))}};export{Je as default};
