import{r as m,v as B,x as f,y as n,z as t,D as o,L as k,A as a,H as l,C as v,E as d,F as c,G as b,B as C,Q as h,I as g,K as V,J as x}from"./chunk-BcTZxe-J.js";import{u as j,h as U,l as $,r as A}from"./chunk-BYRtWSr0.js";import{_ as I}from"./chunk-D2CDubcM.js";import{u as z}from"./app-DWC75jbx.js";import{a as _,r as w}from"./chunk-D58UsNjm.js";import{r as F}from"./chunk-gCWBLgcy.js";import"./chunk-CYarSvys.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const N={class:"space-y-6"},D={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},M={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Y={class:"text-sm text-gray-500 dark:text-gray-400"},K={class:"flex items-center gap-3"},L={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},R={class:"flex items-start justify-between mb-3"},E={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},H={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 mt-1"},J={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"},G={class:"space-y-1 text-xs text-gray-500 dark:text-gray-400"},Q={class:"flex justify-between"},O={class:"font-medium"},P={class:"flex justify-between"},W={class:"font-medium text-red-600 dark:text-red-400"},X={class:"flex justify-between"},Z={class:"font-medium text-yellow-600 dark:text-yellow-400"},tt={key:0,class:"col-span-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl p-8 text-center"},et={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},rt={key:0,class:"overflow-x-auto"},at={class:"w-full"},st={class:"divide-y divide-gray-200 dark:divide-gray-700"},lt={class:"px-6 py-4 whitespace-nowrap"},dt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},it={class:"px-6 py-4 whitespace-nowrap"},gt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},yt={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate"},pt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"px-6 py-4 whitespace-nowrap text-sm"},xt=["onClick"],mt={key:1,class:"text-gray-400"},ct={key:1,class:"p-12 text-center text-gray-500 dark:text-gray-400"},bt={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ft=["value"],kt={class:"grid grid-cols-2 gap-4"},vt={class:"grid grid-cols-2 gap-4"},ht={class:"flex justify-end gap-3 pt-4"},_t=["disabled"],wt={key:0},Tt={key:1},Pt={__name:"Index",props:{requests:{type:Array,default:()=>[]},balances:{type:Array,default:()=>[]},leaveTypes:{type:Array,default:()=>[]},selectedUserId:{type:String,default:null},selectedStatus:{type:String,default:null},selectedYear:{type:Number,default:new Date().getFullYear()}},setup(y){const{t:i}=z(),p=m(!1);m(!1),m(null);const s=j({leave_type_id:"",start_date:"",end_date:"",reason:"",notes:"",emergency_contact:"",emergency_phone:""}),T=()=>{s.post(route("hr.leave.store"),{preserveScroll:!0,onSuccess:()=>{p.value=!1,s.reset()}})},S=u=>{confirm("Ta'til so'rovini bekor qilmoqchimisiz?")&&A.post(route("hr.leave.cancel",u.id),{},{preserveScroll:!0})},q=u=>({pending:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",approved:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",rejected:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400",cancelled:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"})[u]||"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300";return(u,e)=>(d(),B(I,{title:a(i)("hr.leave")},{default:f(()=>[n(a(U),{title:a(i)("hr.leave_management")},null,8,["title"]),t("div",N,[t("div",D,[t("div",null,[t("h1",M,l(a(i)("hr.leave_management")),1),t("p",Y,l(a(i)("hr.leave_subtitle")),1)]),t("div",K,[n(a($),{href:u.route("hr.leave.calendar"),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:f(()=>[n(a(_),{class:"w-5 h-5 inline mr-2"}),v(" "+l(a(i)("hr.leave_calendar")),1)]),_:1},8,["href"]),t("button",{onClick:e[0]||(e[0]=r=>p.value=!0),class:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2"},[n(a(F),{class:"w-5 h-5"}),v(" "+l(a(i)("hr.request_leave")),1)])])]),t("div",L,[(d(!0),o(c,null,b(y.balances,r=>(d(),o("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},[t("div",R,[t("div",null,[t("p",E,l(r.leave_type.name),1),t("p",H,l(r.available_days),1)]),t("div",J,[n(a(w),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})])]),t("div",G,[t("div",Q,[e[9]||(e[9]=t("span",null,"Jami:",-1)),t("span",O,l(r.total_days)+" kun",1)]),t("div",P,[e[10]||(e[10]=t("span",null,"Ishlatilgan:",-1)),t("span",W,l(r.used_days)+" kun",1)]),t("div",X,[e[11]||(e[11]=t("span",null,"Kutilmoqda:",-1)),t("span",Z,l(r.pending_days)+" kun",1)])])]))),128)),y.balances.length===0?(d(),o("div",tt,[n(a(w),{class:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e[12]||(e[12]=t("p",{class:"text-gray-500 dark:text-gray-400"},"Ta'til balanslari topilmadi",-1))])):k("",!0)]),t("div",et,[e[15]||(e[15]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Ta'til So'rovlari")],-1)),y.requests.length>0?(d(),o("div",rt,[t("table",at,[e[13]||(e[13]=t("thead",{class:"bg-gray-50 dark:bg-gray-900/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Turi"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Boshlanish"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Tugash"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Kunlar"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Sabab"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Holat"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Amallar")])],-1)),t("tbody",st,[(d(!0),o(c,null,b(y.requests,r=>(d(),o("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[t("td",lt,[t("span",dt,l(r.leave_type.name),1)]),t("td",ot,l(r.start_date_formatted),1),t("td",nt,l(r.end_date_formatted),1),t("td",it,[t("span",gt,l(r.total_days)+" kun ",1)]),t("td",yt,l(r.reason),1),t("td",pt,[t("span",{class:C(["px-2 py-1 text-xs font-medium rounded-full",q(r.status)])},l(r.status_label),3)]),t("td",ut,[r.status==="pending"?(d(),o("button",{key:0,onClick:St=>S(r),class:"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300"}," Bekor qilish ",8,xt)):(d(),o("span",mt,"-"))])]))),128))])])])):(d(),o("div",ct,[n(a(_),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),e[14]||(e[14]=t("p",null,"Ta'til so'rovlari topilmadi",-1))]))])]),p.value?(d(),o("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e[8]||(e[8]=h(r=>p.value=!1,["self"]))},[t("div",bt,[e[23]||(e[23]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-xl font-bold text-gray-900 dark:text-gray-100"},"Ta'til So'rash")],-1)),t("form",{onSubmit:h(T,["prevent"]),class:"p-6 space-y-4"},[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Ta'til Turi * ",-1)),g(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>a(s).leave_type_id=r),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[e[16]||(e[16]=t("option",{value:""},"Tanlang",-1)),(d(!0),o(c,null,b(y.leaveTypes,r=>(d(),o("option",{key:r.id,value:r.id},l(r.name),9,ft))),128))],512),[[V,a(s).leave_type_id]])]),t("div",kt,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Boshlanish Sanasi * ",-1)),g(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>a(s).start_date=r),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},null,512),[[x,a(s).start_date]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Tugash Sanasi * ",-1)),g(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>a(s).end_date=r),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},null,512),[[x,a(s).end_date]])])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Sababi * ",-1)),g(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>a(s).reason=r),required:"",rows:"3",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"Ta'til sababini yozing..."},null,512),[[x,a(s).reason]])]),t("div",vt,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Favqulodda Aloqa ",-1)),g(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a(s).emergency_contact=r),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"Ism"},null,512),[[x,a(s).emergency_contact]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Telefon Raqami ",-1)),g(t("input",{"onUpdate:modelValue":e[6]||(e[6]=r=>a(s).emergency_phone=r),type:"tel",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"+998"},null,512),[[x,a(s).emergency_phone]])])]),t("div",ht,[t("button",{type:"button",onClick:e[7]||(e[7]=r=>p.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"}," Bekor qilish "),t("button",{type:"submit",disabled:a(s).processing,class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed"},[a(s).processing?(d(),o("span",wt,"Yuklanmoqda...")):(d(),o("span",Tt,"Yuborish"))],8,_t)])],32)])])):k("",!0)]),_:1},8,["title"]))}};export{Pt as default};
