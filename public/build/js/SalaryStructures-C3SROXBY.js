import{r as S,v as T,x as $,y,z as e,C as d,D as m,A as a,H as o,E as w,F as l,G as p,I as k,B as z,Q as B,J as x,L as q,K as f}from"./chunk-KPSVwAyv.js";import{_ as F}from"./chunk-Dm1vntEs.js";import{u as N,h as H}from"./chunk-BVrjkT6E.js";import{u as I}from"./app-BtfI-58n.js";import{r as K}from"./chunk-Tj_a7zxz.js";import{r as C}from"./chunk-D5sR6A8B.js";import{r as J}from"./chunk-Dfha1x8d.js";import{f as U}from"./chunk-Qa9RIO0M.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const Q={class:"space-y-6"},X={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},E={class:"text-sm text-gray-500 dark:text-gray-400"},L={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},O={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},G={class:"flex items-center gap-3"},Y={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},P={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},R={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},W={class:"flex items-center gap-3"},ee={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},te={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},re={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ae={class:"flex items-center gap-3"},se={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"},oe={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},le={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700"},de={key:0,class:"p-12 text-center"},ne={key:1,class:"p-6 space-y-4"},ie={class:"flex items-start justify-between mb-4"},ge={class:"flex items-center gap-3 mb-2"},ue={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ye={key:0,class:"px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 text-xs rounded"},xe={key:1,class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded"},me={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},be={key:0},ce={class:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm"},pe={class:"font-semibold text-gray-900 dark:text-gray-100"},ke={class:"font-semibold text-green-600 dark:text-green-400"},fe={class:"font-semibold text-red-600 dark:text-red-400"},ve={class:"font-bold text-gray-900 dark:text-gray-100"},he={key:0,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={key:0},Se={class:"space-y-1"},Ce={class:"text-green-600 dark:text-green-400"},qe={key:1},Ue={class:"space-y-1"},Ve={class:"text-red-600 dark:text-red-400"},je={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},Me={class:"bg-white dark:bg-gray-800 rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},Ae={class:"space-y-4"},De=["value"],Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},$e={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},ze={key:0,class:"mb-4 space-y-2"},Be={class:"flex-1 text-sm text-gray-900 dark:text-gray-100"},Fe={class:"text-sm font-semibold text-green-600 dark:text-green-400"},Ne=["onClick"],He={class:"flex gap-2"},Ie={class:"border-t border-gray-200 dark:border-gray-700 pt-6"},Ke={key:0,class:"mb-4 space-y-2"},Je={class:"flex-1 text-sm text-gray-900 dark:text-gray-100"},Qe={class:"text-sm font-semibold text-red-600 dark:text-red-400"},Xe=["onClick"],Ze={class:"flex gap-2"},Ee={class:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700"},Le=["disabled"],pt={__name:"SalaryStructures",props:{structures:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]}},setup(b){const{t:v}=I(),h=S(!1),s=N({user_id:null,base_salary:"",payment_frequency:"monthly",effective_from:new Date().toISOString().split("T")[0],allowances:[],deductions:[]}),g=S({name:"",amount:""}),u=S({name:"",amount:""}),V=()=>{g.value.name&&g.value.amount&&(s.allowances.push({...g.value}),g.value={name:"",amount:""})},j=c=>{s.allowances.splice(c,1)},M=()=>{u.value.name&&u.value.amount&&(s.deductions.push({...u.value}),u.value={name:"",amount:""})},A=c=>{s.deductions.splice(c,1)},D=()=>{s.post(route("hr.payroll.salary-structures.store"),{preserveScroll:!0,onSuccess:()=>{h.value=!1,s.reset(),s.allowances=[],s.deductions=[]}})},i=c=>new Intl.NumberFormat("uz-UZ").format(c)+" UZS";return(c,t)=>(l(),T(F,{title:a(v)("hr.salary_structures")},{default:$(()=>[y(a(H),{title:a(v)("hr.salary_structures")},null,8,["title"]),e("div",Q,[e("div",X,[e("div",null,[e("h1",Z,o(a(v)("hr.salary_structures")),1),e("p",E,o(a(v)("hr.salary_structures_subtitle")),1)]),e("button",{onClick:t[0]||(t[0]=r=>h.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},[y(a(K),{class:"w-5 h-5"}),w(" "+o(a(v)("hr.add_salary")),1)])]),e("div",L,[e("div",O,[e("div",G,[e("div",Y,[y(a(C),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),e("div",null,[e("p",P,o(b.structures.length),1),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami Tuzilmalar",-1))])])]),e("div",R,[e("div",W,[e("div",ee,[y(a(J),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),e("div",null,[e("p",te,o(b.structures.filter(r=>r.is_active).length),1),t[12]||(t[12]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol",-1))])])]),e("div",re,[e("div",ae,[e("div",se,[y(a(C),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),e("div",null,[e("p",oe,o(i(b.structures.filter(r=>r.is_active).reduce((r,n)=>r+parseFloat(n.base_salary),0))),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami Maosh",-1))])])])]),e("div",le,[t[21]||(t[21]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Barcha Maosh Tuzilmalari"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Xodimlar maosh parametrlari")],-1)),b.structures.length===0?(l(),d("div",de,[y(a(C),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t[14]||(t[14]=e("p",{class:"text-gray-500 dark:text-gray-400"},"Hali maosh tuzilmalari yo'q",-1)),e("button",{onClick:t[1]||(t[1]=r=>h.value=!0),class:"mt-4 text-blue-600 dark:text-blue-400 hover:underline"}," Birinchi maoshni qo'shing ")])):(l(),d("div",ne,[(l(!0),d(p,null,k(b.structures,r=>(l(),d("div",{key:r.id,class:z(["border border-gray-200 dark:border-gray-700 rounded-lg p-4",{"bg-green-50 dark:bg-green-900/10":r.is_active}])},[e("div",ie,[e("div",null,[e("div",ge,[e("h3",ue,o(r.user_name),1),r.is_active?(l(),d("span",ye," Faol ")):(l(),d("span",xe," Nofaol "))]),e("div",me,[e("span",null,o(r.payment_frequency_label),1),e("span",null,"Kuchga kirish: "+o(r.effective_from),1),r.effective_until?(l(),d("span",be,"Tugash: "+o(r.effective_until),1)):m("",!0)])])]),e("div",ce,[e("div",null,[t[15]||(t[15]=e("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Asosiy Maosh",-1)),e("span",pe,o(i(r.base_salary)),1)]),e("div",null,[t[16]||(t[16]=e("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Ustamalar",-1)),e("span",ke,"+"+o(i(r.total_allowances)),1)]),e("div",null,[t[17]||(t[17]=e("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Chegirmalar",-1)),e("span",fe,"-"+o(i(r.total_deductions)),1)]),e("div",null,[t[18]||(t[18]=e("span",{class:"block text-xs text-gray-500 dark:text-gray-500 mb-1"},"Sof Maosh",-1)),e("span",ve,o(i(r.net_salary)),1)])]),r.allowances.length>0||r.deductions.length>0?(l(),d("div",he,[e("div",_e,[r.allowances.length>0?(l(),d("div",we,[t[19]||(t[19]=e("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Ustamalar:",-1)),e("div",Se,[(l(!0),d(p,null,k(r.allowances,(n,_)=>(l(),d("div",{key:_,class:"flex justify-between text-xs text-gray-600 dark:text-gray-400"},[e("span",null,o(n.name),1),e("span",Ce,"+"+o(i(n.amount)),1)]))),128))])])):m("",!0),r.deductions.length>0?(l(),d("div",qe,[t[20]||(t[20]=e("h4",{class:"text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Chegirmalar:",-1)),e("div",Ue,[(l(!0),d(p,null,k(r.deductions,(n,_)=>(l(),d("div",{key:_,class:"flex justify-between text-xs text-gray-600 dark:text-gray-400"},[e("span",null,o(n.name),1),e("span",Ve,"-"+o(i(n.amount)),1)]))),128))])])):m("",!0)])])):m("",!0)],2))),128))]))])]),h.value?(l(),d("div",je,[e("div",Me,[t[30]||(t[30]=e("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[e("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},"Yangi Maosh Tuzilmasi")],-1)),e("form",{onSubmit:B(D,["prevent"]),class:"p-6 space-y-6"},[e("div",Ae,[e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[w(" Xodim "),e("span",{class:"text-red-500"},"*")],-1)),x(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>a(s).user_id=r),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[t[22]||(t[22]=e("option",{value:null,disabled:""},"Xodimni tanlang",-1)),(l(!0),d(p,null,k(b.employees,r=>(l(),d("option",{key:r.id,value:r.id},o(r.name),9,De))),128))],512),[[q,a(s).user_id]])]),e("div",Te,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[w(" Asosiy Maosh (UZS) "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>a(s).base_salary=r),type:"number",step:"100000",min:"0",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"5000000"},null,512),[[f,a(s).base_salary]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[w(" To'lov Davri "),e("span",{class:"text-red-500"},"*")],-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=r=>a(s).payment_frequency=r),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},[...t[25]||(t[25]=[e("option",{value:"monthly"},"Oylik",-1),e("option",{value:"bi-weekly"},"2 Haftalik",-1),e("option",{value:"weekly"},"Haftalik",-1)])],512),[[q,a(s).payment_frequency]])])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},[w(" Kuchga Kirish Sanasi "),e("span",{class:"text-red-500"},"*")],-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>a(s).effective_from=r),type:"date",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[f,a(s).effective_from]])])]),e("div",$e,[t[28]||(t[28]=e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Ustamalar (Allowances)",-1)),a(s).allowances.length>0?(l(),d("div",ze,[(l(!0),d(p,null,k(a(s).allowances,(r,n)=>(l(),d("div",{key:n,class:"flex items-center gap-2 p-2 bg-green-50 dark:bg-green-900/20 rounded"},[e("span",Be,o(r.name),1),e("span",Fe,o(i(r.amount)),1),e("button",{type:"button",onClick:_=>j(n),class:"text-red-600 hover:text-red-700"},[y(a(U),{class:"w-4 h-4"})],8,Ne)]))),128))])):m("",!0),e("div",He,[x(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>g.value.name=r),type:"text",placeholder:"Nomi (Transport, Uy-joy, va h.k.)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[f,g.value.name]]),x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>g.value.amount=r),type:"number",step:"10000",min:"0",placeholder:"Summa",class:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[f,g.value.amount]]),e("button",{type:"button",onClick:V,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm"}," Qo'shish ")])]),e("div",Ie,[t[29]||(t[29]=e("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Chegirmalar (Deductions)",-1)),a(s).deductions.length>0?(l(),d("div",Ke,[(l(!0),d(p,null,k(a(s).deductions,(r,n)=>(l(),d("div",{key:n,class:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 rounded"},[e("span",Je,o(r.name),1),e("span",Qe,o(i(r.amount)),1),e("button",{type:"button",onClick:_=>A(n),class:"text-red-600 hover:text-red-700"},[y(a(U),{class:"w-4 h-4"})],8,Xe)]))),128))])):m("",!0),e("div",Ze,[x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>u.value.name=r),type:"text",placeholder:"Nomi (Soliq, Sug'urta, va h.k.)",class:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[f,u.value.name]]),x(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>u.value.amount=r),type:"number",step:"10000",min:"0",placeholder:"Summa",class:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[f,u.value.amount]]),e("button",{type:"button",onClick:M,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm"}," Qo'shish ")])]),e("div",Ee,[e("button",{type:"button",onClick:t[10]||(t[10]=r=>{h.value=!1,a(s).reset(),a(s).allowances=[],a(s).deductions=[]}),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Bekor qilish "),e("button",{type:"submit",disabled:a(s).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},o(a(s).processing?"Saqlanmoqda...":"Saqlash"),9,Le)])],32)])])):m("",!0)]),_:1},8,["title"]))}};export{pt as default};
