import{r as y,v as A,x as h,z as e,C as d,Q as z,D as o,E as a,F as f,G as _,B as g,I as m,L as x,_ as b,H as l,y as B,A as C}from"./chunk-BcTZxe-J.js";import{l as S,r as j}from"./chunk-BYRtWSr0.js";import{_ as q}from"./chunk-TXgJ1MaD.js";import"./chunk-AyRJdOJv.js";import"./app-BC9IivQF.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const V={class:"max-w-4xl mx-auto py-8 px-4"},M={class:"mb-8"},T={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 text-center"},F={key:1,class:"space-y-3"},H={class:"flex items-center gap-4"},I=["value"],N={class:"flex-1"},U={class:"font-medium text-gray-900 dark:text-white"},D={class:"text-sm text-gray-500 dark:text-gray-400"},E={key:0,class:"text-right"},K={class:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded"},L={class:"block cursor-pointer"},O={class:"flex items-center gap-4"},P={class:"mb-8"},Q={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 text-center"},R={key:1,class:"space-y-3"},X={class:"flex items-center gap-4"},G=["value"],J=["src","alt"],$={key:1,class:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center"},W={class:"text-lg font-bold text-gray-500"},Y={class:"flex-1"},Z={class:"font-medium text-gray-900 dark:text-white"},ee={class:"text-sm text-gray-500 dark:text-gray-400"},te={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},re={class:"block cursor-pointer"},ae={class:"flex items-center gap-4"},se={class:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"},oe=["disabled"],le={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},qe={__name:"SelectSocialAccounts",props:{adAccounts:{type:Array,default:()=>[]},instagramAccounts:{type:Array,default:()=>[]},facebookPages:{type:Array,default:()=>[]},currentBusiness:{type:Object,required:!0}},setup(u){const k=u,i=y(k.adAccounts[0]?.id||null),n=y(k.instagramAccounts[0]?.id||null),c=y(!1),v=s=>s?s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString():"0",w=async()=>{if(!i.value&&!n.value){alert("Kamida bitta akkaunt tanlashingiz kerak");return}c.value=!0;try{const s=await fetch(route("business.settings.social.save-accounts"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({selected_ad_account_id:i.value,selected_instagram_id:n.value})}),t=await s.json();s.ok&&t.success?j.visit(route("business.settings.index"),{preserveState:!1,onSuccess:()=>{}}):alert(t.error||"Xatolik yuz berdi")}catch(s){console.error("Error:",s),alert("Tarmoq xatoligi. Qayta urinib ko'ring.")}finally{c.value=!1}};return(s,t)=>(a(),A(q,{title:"Akkaunt Tanlash"},{default:h(()=>[e("div",V,[t[12]||(t[12]=e("div",{class:"text-center mb-8"},[e("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])]),e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Akkaunt Tanlang "),e("p",{class:"text-gray-600 dark:text-gray-400"},[d(" Quyidagi akkauntlardan "),e("strong",null,"faqat bittasini"),d(" tanlang. Keyinchalik o'zgartirish uchun avval mavjud akkauntni uzishingiz kerak bo'ladi. ")])],-1)),t[13]||(t[13]=e("div",{class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 mb-8"},[e("div",{class:"flex items-start gap-3"},[e("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("div",null,[e("h3",{class:"font-medium text-amber-800 dark:text-amber-300"},"Muhim!"),e("p",{class:"text-sm text-amber-700 dark:text-amber-400"},[d(" Har bir kategoriyadan faqat "),e("strong",null,"1 ta"),d(" akkaunt ulash mumkin. Tanlangan akkauntning "),e("strong",null,"oxirgi 6 oylik"),d(" ma'lumotlari avtomatik yuklanadi. ")])])])],-1)),e("form",{onSubmit:z(w,["prevent"])},[e("div",M,[t[6]||(t[6]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[e("span",{class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})])]),d(" Facebook Ads Account ")],-1)),u.adAccounts.length===0?(a(),o("div",T,[...t[4]||(t[4]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"Hech qanday Ad Account topilmadi",-1)])])):(a(),o("div",F,[(a(!0),o(f,null,_(u.adAccounts,r=>(a(),o("label",{key:r.id,class:"block cursor-pointer"},[e("div",{class:g(["border rounded-xl p-4 transition-all",i.value===r.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[e("div",H,[m(e("input",{type:"radio",name:"ad_account",value:r.id,"onUpdate:modelValue":t[0]||(t[0]=p=>i.value=p),class:"w-4 h-4 text-blue-600"},null,8,I),[[b,i.value]]),e("div",N,[e("p",U,l(r.name),1),e("p",D," ID: "+l(r.id)+" · "+l(r.currency),1)]),r.business_name?(a(),o("div",E,[e("span",K,l(r.business_name),1)])):x("",!0)])],2)]))),128)),e("label",L,[e("div",{class:g(["border rounded-xl p-4 transition-all",i.value===null?"border-gray-500 bg-gray-50 dark:bg-gray-800 ring-2 ring-gray-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300"])},[e("div",O,[m(e("input",{type:"radio",name:"ad_account",value:null,"onUpdate:modelValue":t[1]||(t[1]=r=>i.value=r),class:"w-4 h-4 text-gray-600"},null,512),[[b,i.value]]),t[5]||(t[5]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Ad Account ulamaslik",-1))])],2)])]))]),e("div",P,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[e("span",{class:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})])]),d(" Instagram Business Account ")],-1)),u.instagramAccounts.length===0?(a(),o("div",Q,[...t[7]||(t[7]=[e("p",{class:"text-gray-500 dark:text-gray-400"},"Hech qanday Instagram Business Account topilmadi",-1),e("p",{class:"text-xs text-gray-400 dark:text-gray-500 mt-1"}," Instagram Business Account ulash uchun Facebook Page bilan bog'langan bo'lishi kerak. ",-1)])])):(a(),o("div",R,[(a(!0),o(f,null,_(u.instagramAccounts,r=>(a(),o("label",{key:r.id,class:"block cursor-pointer"},[e("div",{class:g(["border rounded-xl p-4 transition-all",n.value===r.id?"border-pink-500 bg-pink-50 dark:bg-pink-900/20 ring-2 ring-pink-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[e("div",X,[m(e("input",{type:"radio",name:"instagram",value:r.id,"onUpdate:modelValue":t[2]||(t[2]=p=>n.value=p),class:"w-4 h-4 text-pink-600"},null,8,G),[[b,n.value]]),r.profile_picture_url?(a(),o("img",{key:0,src:r.profile_picture_url,alt:r.username,class:"w-12 h-12 rounded-full object-cover"},null,8,J)):(a(),o("div",$,[e("span",W,l(r.username?.charAt(0)?.toUpperCase()),1)])),e("div",Y,[e("p",Z,"@"+l(r.username),1),e("p",ee,l(v(r.followers_count))+" followers · "+l(v(r.media_count))+" posts ",1),r.linked_page_name?(a(),o("p",te," Ulangan: "+l(r.linked_page_name),1)):x("",!0)])])],2)]))),128)),e("label",re,[e("div",{class:g(["border rounded-xl p-4 transition-all",n.value===null?"border-gray-500 bg-gray-50 dark:bg-gray-800 ring-2 ring-gray-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300"])},[e("div",ae,[m(e("input",{type:"radio",name:"instagram",value:null,"onUpdate:modelValue":t[3]||(t[3]=r=>n.value=r),class:"w-4 h-4 text-gray-600"},null,512),[[b,n.value]]),t[8]||(t[8]=e("p",{class:"text-gray-600 dark:text-gray-400"},"Instagram ulamaslik",-1))])],2)])]))]),e("div",se,[B(C(S),{href:s.route("business.settings.index"),class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"},{default:h(()=>[...t[10]||(t[10]=[d(" Bekor qilish ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:c.value||!i.value&&!n.value,class:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[c.value?(a(),o("svg",le,[...t[11]||(t[11]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):x("",!0),e("span",null,l(c.value?"Saqlanmoqda...":"Ulash va Sinxronlash"),1)],8,oe)])],32)])]),_:1}))}};export{qe as default};
