import{b as F,r as B,w as W,v as I,x as _,y as u,z as t,A as e,C as c,D as g,E as h,H as a,F as d,G as j,I as N,Q as Y,J as x,B as m,K as f,L as U,S as ee}from"./chunk-KPSVwAyv.js";import{b as te,u as re,h as se,l as v}from"./chunk-BVrjkT6E.js";import{k as ae}from"./chunk-BoSLtb37.js";import{_ as oe}from"./chunk-BEX9HuyE.js";import{u as le}from"./app-DMGwzSHW.js";import{r as ne}from"./chunk-J14gS6og.js";import{r as de}from"./chunk-CPI6G2q3.js";import{r as z}from"./chunk-BgOPVSvg.js";import{r as A}from"./chunk-BeK6HK_O.js";import{g as E,h as ie}from"./chunk-C_PbB7ed.js";import{r as S}from"./chunk-CQ-EgyBm.js";import{r as k}from"./chunk-Cwn-ie4q.js";import{r as ce}from"./chunk-BIFKCSDr.js";import{a as ue}from"./chunk-DN454CZt.js";import{r as ge}from"./chunk-D59q4lxq.js";import{r as me}from"./chunk-Cw_2vanC.js";import{r as pe}from"./chunk-D5sR6A8B.js";import{r as be}from"./chunk-CYZ54WJE.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-Dems4pAU.js";import"./chunk-14qmXdHo.js";import"./chunk-D-7B8ZCD.js";const xe={class:"p-6"},ye={class:"max-w-4xl mx-auto"},he={class:"mb-8"},_e={class:"flex items-center gap-4"},fe={class:"w-14 h-14 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},ve={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ke={class:"text-sm text-gray-500 dark:text-gray-400"},we={key:0,class:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},Ce={class:"flex items-start gap-3"},$e={class:"flex-shrink-0"},Ve={class:"flex-1"},Be={class:"text-sm font-semibold text-amber-800 dark:text-amber-200"},je={class:"mt-2 p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700"},Ne={class:"flex items-center justify-between"},Se={class:"font-medium text-gray-900 dark:text-white"},qe={class:"text-sm text-gray-500 dark:text-gray-400"},Te={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},Xe={class:"mt-3 flex items-center gap-3"},Fe={key:1,class:"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4"},Ie={class:"flex items-start gap-3"},Ue={class:"flex-shrink-0"},ze={class:"flex-1"},Ae={class:"text-sm font-semibold text-amber-800 dark:text-amber-200"},Ee={class:"mt-2 space-y-2"},Pe={class:"flex items-center justify-between"},Me={class:"font-medium text-gray-900 dark:text-white"},De={class:"text-sm text-gray-500 dark:text-gray-400"},Oe={class:"text-xs text-gray-400 dark:text-gray-500 mt-0.5"},Re={class:"mt-2 text-xs text-amber-700 dark:text-amber-400"},Le={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},He={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},Je={class:"flex items-center gap-3"},Ke={class:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},Ze={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},Ge={class:"p-6"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},We={class:"md:col-span-2"},Ye={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},et={class:"relative"},tt={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},rt={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},st={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},at={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},ot={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},lt={class:"relative"},nt={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},dt={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},it={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},ct={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},ut={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},gt={class:"relative"},mt={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},pt={key:0,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},bt={key:1,class:"absolute inset-y-0 right-0 pr-3.5 flex items-center"},xt={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},yt={key:1,class:"mt-1 text-xs text-gray-400 dark:text-gray-500"},ht={class:"md:col-span-2"},_t={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ft={class:"relative"},vt={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},kt={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},wt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Ct={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},$t={class:"flex items-center gap-3"},Vt={class:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg"},Bt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},jt={class:"p-6"},Nt={class:"grid grid-cols-1 md:grid-cols-2 gap-5"},St={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qt={class:"relative"},Tt={value:"new"},Xt={value:"contacted"},Ft={value:"qualified"},It={value:"proposal"},Ut={value:"negotiation"},zt={value:"won"},At={value:"lost"},Et={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Pt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Mt={class:"relative"},Dt={value:""},Ot=["label"],Rt=["value"],Lt={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Ht={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Jt={class:"bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl p-4"},Kt={class:"flex items-center justify-between mb-3"},Zt={class:"flex items-center gap-2"},Gt={class:"text-sm text-gray-600 dark:text-gray-400"},Qt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5 mt-3"},Wt={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},Yt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},er={class:"relative"},tr={class:"absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"},rr=["value"],sr={class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},ar={class:"text-sm text-gray-400 dark:text-gray-500"},or={key:0,class:"mt-1.5 text-sm text-red-600 dark:text-red-400"},lr={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},nr={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50"},dr={class:"flex items-center gap-3"},ir={class:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},cr={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},ur={class:"p-6"},gr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},mr=["placeholder"],pr={class:"flex justify-between mt-1"},br={key:0,class:"text-sm text-red-600 dark:text-red-400"},xr={key:1},yr={class:"text-xs text-gray-400 dark:text-gray-500"},hr={class:"flex items-center justify-end gap-3 pt-4"},_r=["disabled"],fr={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},vr={key:2},kr={key:3},Qr={__name:"Create",props:{channels:{type:Array,default:()=>[]}},setup(P){const{t:l}=le(),M=P,D=te(),b=F(()=>D.props.flash?.duplicate_warning),y=B({loading:!1,duplicates:null}),w=B(!1),r=re({name:"",email:"",phone:"",company:"",source_id:"",status:"new",score:0,estimated_value:null,notes:""}),i=B({name:"",email:"",phone:""}),O={mask:"+998 ## ### ## ##",eager:!0},R=F(()=>{const o={},s={digital:"Digital",offline:"Offline",referral:"Tavsiya",organic:"Organik"};return M.channels.forEach(n=>{const p=n.category||"other";o[p]||(o[p]={label:s[p]||p,items:[]}),o[p].items.push(n)}),o}),C=o=>o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?(i.value.email="",!0):(i.value.email="Email formati noto'g'ri",!1):(i.value.email="",!0),q=o=>o&&o.replace(/\s/g,"").length<13?(i.value.phone="Telefon raqamini to'liq kiriting",!1):(i.value.phone="",!0),$=o=>o?/^[a-zA-ZА-Яа-яЎўҚқҒғҲҳ\s'`'-]+$/.test(o)?o.length<2?(i.value.name="Ism kamida 2 ta belgidan iborat bo'lishi kerak",!1):(i.value.name="",!0):(i.value.name="Faqat harflar va bo'shliq kiritish mumkin",!1):(i.value.name="",!0),L=o=>{if(!o)return"";const s=parseFloat(o);return isNaN(s)?"":new Intl.NumberFormat("uz-UZ").format(s)},H=o=>{if(!o)return null;const s=o.replace(/[^\d]/g,"");return s?parseInt(s,10):null},J=o=>{const s=o.target.value;r.estimated_value=H(s)},K=async()=>{const o=r.phone?.replace(/\s/g,"");if(!o||o.length<13){y.value.duplicates=null;return}y.value.loading=!0;try{const n=await(await fetch(route("business.api.sales.check-duplicate"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"},body:JSON.stringify({phone:r.phone})})).json();y.value.duplicates=n.has_duplicates?n.duplicates:null}catch(s){console.error("Duplicate check failed:",s)}finally{y.value.loading=!1}};let T;W(()=>r.phone,o=>{clearTimeout(T);const s=o?.replace(/\s/g,"");s&&s.length>=13?T=setTimeout(K,500):y.value.duplicates=null});const X=()=>{const o=$(r.name),s=C(r.email),n=q(r.phone);!o||!s||!n||(w.value?r.transform(p=>({...p,force_create:!0})).post(route("business.sales.store")):r.post(route("business.sales.store")))},Z=()=>{w.value=!0,X()},G=o=>o>=70?"text-green-600 dark:text-green-400":o>=40?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400",Q=o=>o>=70?"bg-green-500":o>=40?"bg-yellow-500":"bg-red-500";return(o,s)=>(d(),I(oe,{title:e(l)("sales.new_lead")},{default:_(()=>[u(e(se),{title:e(l)("sales.add_new_lead")},null,8,["title"]),t("div",xe,[t("div",ye,[t("div",he,[u(e(v),{href:o.route("business.sales.index"),class:"inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors mb-4"},{default:_(()=>[u(e(ne),{class:"w-4 h-4"}),h(" "+a(e(l)("sales.back_to_sales")),1)]),_:1},8,["href"]),t("div",_e,[t("div",fe,[u(e(de),{class:"w-8 h-8 text-blue-600 dark:text-blue-400"})]),t("div",null,[t("h1",ve,a(e(l)("sales.add_new_lead")),1),t("p",ke,a(e(l)("sales.enter_potential_customer_info")),1)])])]),b.value&&!w.value?(d(),c("div",we,[t("div",Ce,[t("div",$e,[u(e(z),{class:"w-6 h-6 text-amber-600 dark:text-amber-400"})]),t("div",Ve,[t("h3",Be,a(b.value.message),1),t("div",je,[t("div",Ne,[t("div",null,[t("p",Se,a(b.value.existing_lead.name),1),t("p",qe,a(b.value.existing_lead.phone),1),t("p",Te,a(e(l)("sales.created"))+": "+a(b.value.existing_lead.created_at),1)]),u(e(v),{href:o.route("business.sales.show",b.value.existing_lead.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"},{default:_(()=>[u(e(A),{class:"w-4 h-4"}),h(" "+a(e(l)("common.view")),1)]),_:1},8,["href"])])]),t("div",Xe,[t("button",{type:"button",onClick:Z,class:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white text-sm font-medium rounded-lg transition-colors"},a(e(l)("sales.create_anyway")),1),u(e(v),{href:o.route("business.sales.show",b.value.existing_lead.id),class:"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 text-sm font-medium rounded-lg transition-colors"},{default:_(()=>[h(a(e(l)("sales.go_to_existing_lead")),1)]),_:1},8,["href"])])])])])):g("",!0),y.value.duplicates?.phone&&!b.value?(d(),c("div",Fe,[t("div",Ie,[t("div",Ue,[u(e(z),{class:"w-6 h-6 text-amber-600 dark:text-amber-400"})]),t("div",ze,[t("h3",Ae,a(e(l)("sales.leads_with_phone_exist")),1),t("div",Ee,[(d(!0),c(j,null,N(y.value.duplicates.phone,n=>(d(),c("div",{key:n.id,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-700"},[t("div",Pe,[t("div",null,[t("p",Me,a(n.name),1),t("p",De,a(n.phone)+" • "+a(n.status),1),t("p",Oe,a(n.created_at),1)]),u(e(v),{href:o.route("business.sales.show",n.id),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"},{default:_(()=>[u(e(A),{class:"w-4 h-4"}),h(" "+a(e(l)("common.view")),1)]),_:1},8,["href"])])]))),128))]),t("p",Re,a(e(l)("sales.duplicate_warning_note")),1)])])])):g("",!0),t("form",{onSubmit:Y(X,["prevent"]),class:"space-y-6"},[t("div",Le,[t("div",He,[t("div",Je,[t("div",Ke,[u(e(E),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),t("h2",Ze,a(e(l)("sales.basic_info")),1)])]),t("div",Ge,[t("div",Qe,[t("div",We,[t("label",Ye,[h(a(e(l)("sales.full_name"))+" ",1),s[13]||(s[13]=t("span",{class:"text-red-500"},"*",-1))]),t("div",et,[t("div",tt,[u(e(E),{class:"w-5 h-5 text-gray-400"})]),x(t("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>e(r).name=n),type:"text",placeholder:"Alisher Valiyev",required:"",onBlur:s[1]||(s[1]=n=>$(e(r).name)),onInput:s[2]||(s[2]=n=>$(e(r).name)),class:m(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":e(r).errors.name||i.value.name,"border-green-500 dark:border-green-500":e(r).name&&!i.value.name&&!e(r).errors.name}])},null,34),[[f,e(r).name]]),i.value.name?(d(),c("div",rt,[u(e(S),{class:"w-5 h-5 text-red-500"})])):e(r).name&&!e(r).errors.name?(d(),c("div",st,[u(e(k),{class:"w-5 h-5 text-green-500"})])):g("",!0)]),e(r).errors.name||i.value.name?(d(),c("p",at,a(e(r).errors.name||i.value.name),1)):g("",!0)]),t("div",null,[t("label",ot,a(e(l)("forms.email")),1),t("div",lt,[t("div",nt,[u(e(ce),{class:"w-5 h-5 text-gray-400"})]),x(t("input",{"onUpdate:modelValue":s[3]||(s[3]=n=>e(r).email=n),type:"email",placeholder:"alisher@example.com",onBlur:s[4]||(s[4]=n=>C(e(r).email)),onInput:s[5]||(s[5]=n=>C(e(r).email)),class:m(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":e(r).errors.email||i.value.email,"border-green-500 dark:border-green-500":e(r).email&&!i.value.email&&!e(r).errors.email}])},null,34),[[f,e(r).email]]),i.value.email?(d(),c("div",dt,[u(e(S),{class:"w-5 h-5 text-red-500"})])):e(r).email&&!e(r).errors.email?(d(),c("div",it,[u(e(k),{class:"w-5 h-5 text-green-500"})])):g("",!0)]),e(r).errors.email||i.value.email?(d(),c("p",ct,a(e(r).errors.email||i.value.email),1)):g("",!0)]),t("div",null,[t("label",ut,a(e(l)("forms.phone")),1),t("div",gt,[t("div",mt,[u(e(ue),{class:"w-5 h-5 text-gray-400"})]),x(t("input",{"onUpdate:modelValue":s[6]||(s[6]=n=>e(r).phone=n),type:"tel",placeholder:"+998 90 123 45 67",onBlur:s[7]||(s[7]=n=>q(e(r).phone)),class:m(["w-full pl-11 pr-10 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":e(r).errors.phone||i.value.phone,"border-green-500 dark:border-green-500":e(r).phone&&e(r).phone.replace(/\s/g,"").length>=13&&!i.value.phone&&!e(r).errors.phone}])},null,34),[[f,e(r).phone],[e(ae),void 0,O]]),i.value.phone?(d(),c("div",pt,[u(e(S),{class:"w-5 h-5 text-red-500"})])):e(r).phone&&e(r).phone.replace(/\s/g,"").length>=13&&!e(r).errors.phone?(d(),c("div",bt,[u(e(k),{class:"w-5 h-5 text-green-500"})])):g("",!0)]),e(r).errors.phone||i.value.phone?(d(),c("p",xt,a(e(r).errors.phone||i.value.phone),1)):(d(),c("p",yt," Format: +998 XX XXX XX XX "))]),t("div",ht,[t("label",_t,a(e(l)("sales.company")),1),t("div",ft,[t("div",vt,[u(e(ie),{class:"w-5 h-5 text-gray-400"})]),x(t("input",{"onUpdate:modelValue":s[8]||(s[8]=n=>e(r).company=n),type:"text",placeholder:"ABC Company",maxlength:"255",class:m(["w-full pl-11 pr-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":e(r).errors.company}])},null,2),[[f,e(r).company]])]),e(r).errors.company?(d(),c("p",kt,a(e(r).errors.company),1)):g("",!0)])])])]),t("div",wt,[t("div",Ct,[t("div",$t,[t("div",Vt,[u(e(ge),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),t("h2",Bt,a(e(l)("sales.lead_info")),1)])]),t("div",jt,[t("div",Nt,[t("div",null,[t("label",St,[h(a(e(l)("common.status"))+" ",1),s[14]||(s[14]=t("span",{class:"text-red-500"},"*",-1))]),t("div",qt,[x(t("select",{"onUpdate:modelValue":s[9]||(s[9]=n=>e(r).status=n),required:"",class:m(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors appearance-none cursor-pointer",{"border-red-500 dark:border-red-500":e(r).errors.status}])},[t("option",Tt,a(e(l)("sales.status_new")),1),t("option",Xt,a(e(l)("sales.status_contacted")),1),t("option",Ft,a(e(l)("sales.status_qualified")),1),t("option",It,a(e(l)("sales.status_proposal")),1),t("option",Ut,a(e(l)("sales.status_negotiation")),1),t("option",zt,a(e(l)("sales.status_won")),1),t("option",At,a(e(l)("sales.status_lost")),1)],2),[[U,e(r).status]]),s[15]||(s[15]=t("div",{class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),e(r).errors.status?(d(),c("p",Et,a(e(r).errors.status),1)):g("",!0)]),t("div",null,[t("label",Pt,a(e(l)("sales.source")),1),t("div",Mt,[x(t("select",{"onUpdate:modelValue":s[10]||(s[10]=n=>e(r).source_id=n),class:m(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors appearance-none cursor-pointer",{"border-red-500 dark:border-red-500":e(r).errors.source_id}])},[t("option",Dt,a(e(l)("common.select")),1),(d(!0),c(j,null,N(R.value,(n,p)=>(d(),c("optgroup",{key:p,label:n.label},[(d(!0),c(j,null,N(n.items,V=>(d(),c("option",{key:V.id,value:V.id},a(V.name),9,Rt))),128))],8,Ot))),128))],2),[[U,e(r).source_id]]),s[16]||(s[16]=t("div",{class:"absolute inset-y-0 right-0 pr-3.5 flex items-center pointer-events-none"},[t("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),e(r).errors.source_id?(d(),c("p",Lt,a(e(r).errors.source_id),1)):g("",!0)]),t("div",null,[t("label",Ht,a(e(l)("sales.lead_score"))+" (0-100) ",1),t("div",Jt,[t("div",Kt,[t("div",Zt,[u(e(me),{class:"w-5 h-5 text-gray-400"}),t("span",Gt,a(e(l)("sales.lead_quality")),1)]),t("span",{class:m(["text-2xl font-bold",G(e(r).score)])},a(e(r).score),3)]),x(t("input",{"onUpdate:modelValue":s[11]||(s[11]=n=>e(r).score=n),type:"range",min:"0",max:"100",class:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600"},null,512),[[f,e(r).score,void 0,{number:!0}]]),t("div",Qt,[t("div",{class:m(["h-1.5 rounded-full transition-all duration-300",Q(e(r).score)]),style:ee({width:e(r).score+"%"})},null,6)])]),e(r).errors.score?(d(),c("p",Wt,a(e(r).errors.score),1)):g("",!0)]),t("div",null,[t("label",Yt,a(e(l)("sales.estimated_value"))+" ("+a(e(l)("common.currency"))+") ",1),t("div",er,[t("div",tr,[u(e(pe),{class:"w-5 h-5 text-gray-400"})]),t("input",{value:e(r).estimated_value?L(e(r).estimated_value):"",onInput:J,type:"text",inputmode:"numeric",placeholder:"1,000,000",class:m(["w-full pl-11 pr-16 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",{"border-red-500 dark:border-red-500":e(r).errors.estimated_value}])},null,42,rr),t("div",sr,[t("span",ar,a(e(l)("common.currency")),1)])]),e(r).errors.estimated_value?(d(),c("p",or,a(e(r).errors.estimated_value),1)):g("",!0)])])])]),t("div",lr,[t("div",nr,[t("div",dr,[t("div",ir,[u(e(be),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),t("h2",cr,a(e(l)("sales.additional_info")),1)])]),t("div",ur,[t("div",null,[t("label",gr,a(e(l)("sales.notes")),1),x(t("textarea",{"onUpdate:modelValue":s[12]||(s[12]=n=>e(r).notes=n),rows:"5",maxlength:"2000",placeholder:e(l)("sales.notes_placeholder"),class:m(["w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors resize-none",{"border-red-500 dark:border-red-500":e(r).errors.notes}])},null,10,mr),[[f,e(r).notes]]),t("div",pr,[e(r).errors.notes?(d(),c("p",br,a(e(r).errors.notes),1)):(d(),c("span",xr)),t("span",yr,a(e(r).notes?.length||0)+" / 2000 ",1)])])])]),t("div",hr,[u(e(v),{href:o.route("business.sales.index"),class:"px-6 py-3 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-xl transition-colors"},{default:_(()=>[h(a(e(l)("common.cancel")),1)]),_:1},8,["href"]),t("button",{type:"submit",disabled:e(r).processing||!!i.value.name||!!i.value.email||!!i.value.phone,class:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors"},[e(r).processing?(d(),c("svg",fr,[...s[17]||(s[17]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),I(e(k),{key:0,class:"w-5 h-5"})),e(r).processing?(d(),c("span",vr,a(e(l)("common.saving"))+"...",1)):(d(),c("span",kr,a(e(l)("sales.add_lead")),1))],8,_r)])],32)])])]),_:1},8,["title"]))}};export{Qr as default};
