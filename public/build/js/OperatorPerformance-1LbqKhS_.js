import{r as m,o as w,v as k,x as B,y as C,z as t,A as j,C as n,D as z,J as h,K as f,F as i,G as p,H as o,E as v,I as g,B as O}from"./chunk-KPSVwAyv.js";import{h as L,a as N}from"./chunk-BVrjkT6E.js";import{_ as V}from"./chunk-BDCgzsM6.js";import"./chunk-Qa9RIO0M.js";import"./app-BtfI-58n.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const q={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},D={class:"mb-6 flex gap-4 items-end"},F={key:0,class:"flex justify-center py-12"},M={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8"},T={class:"bg-white rounded-lg shadow p-4"},J={class:"text-2xl font-bold text-gray-900"},S={class:"bg-white rounded-lg shadow p-4"},Y={class:"text-2xl font-bold text-gray-900"},$={class:"bg-white rounded-lg shadow p-4"},E={class:"text-2xl font-bold text-green-600"},I={class:"bg-white rounded-lg shadow p-4"},K={class:"text-2xl font-bold text-indigo-600"},P={class:"bg-white rounded-lg shadow p-4"},U={class:"text-2xl font-bold text-gray-900"},A={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},H={class:"bg-green-50 rounded-lg p-6 border border-green-200"},G={class:"space-y-3"},R={class:"flex items-center gap-3"},Z={class:"w-6 h-6 flex items-center justify-center rounded-full bg-green-200 text-green-800 text-sm font-bold"},Q={class:"font-medium"},W={class:"text-right"},X={class:"text-green-600 font-bold"},tt={class:"text-gray-500 text-sm ml-2"},et={class:"bg-red-50 rounded-lg p-6 border border-red-200"},st={class:"space-y-3"},ot={class:"flex items-center gap-3"},rt={class:"w-6 h-6 flex items-center justify-center rounded-full bg-red-200 text-red-800 text-sm font-bold"},at={class:"font-medium"},it={class:"text-right"},nt={class:"text-red-600 font-bold"},lt={class:"text-gray-500 text-sm ml-2"},dt={class:"bg-white rounded-lg shadow overflow-hidden"},ct={class:"overflow-x-auto"},mt={class:"min-w-full divide-y divide-gray-200"},pt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"flex items-center"},gt={class:"h-10 w-10 flex-shrink-0 rounded-full bg-indigo-100 flex items-center justify-center"},_t={class:"text-indigo-600 font-medium"},ht={class:"ml-4"},ft={class:"text-sm font-medium text-gray-900"},vt={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-green-600 font-medium"},bt={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-red-600 font-medium"},wt={class:"px-6 py-4 whitespace-nowrap text-center"},kt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-indigo-600"},Rt={__name:"OperatorPerformance",props:{lazyLoad:Boolean},setup(jt){const x=m(!0),a=m(null),d=m(""),c=m(""),_=async()=>{x.value=!0;try{const r={};d.value&&(r.date_from=d.value),c.value&&(r.date_to=c.value);const e=await N.get(route("business.analytics.api.operator-performance"),{params:r});a.value=e.data}catch(r){console.error("Failed to fetch operator performance:",r)}finally{x.value=!1}};w(()=>{_()});const l=r=>r?new Intl.NumberFormat("uz-UZ").format(r):"0",y=(r,e)=>r>=e*1.2?"text-green-600 bg-green-50":r>=e?"text-blue-600 bg-blue-50":r>=e*.8?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",b=r=>{if(!r)return"-";if(r<60)return`${r} daqiqa`;const e=Math.floor(r/60),s=r%60;return`${e}s ${s}d`};return(r,e)=>(i(),k(V,{title:"Operator Samaradorligi"},{default:B(()=>[C(j(L),{title:"Operator Samaradorligi"}),t("div",q,[e[14]||(e[14]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Operator Samaradorligi"),t("p",{class:"mt-1 text-sm text-gray-500"},"Har bir operatorning KPI va natijalarini kuzating")],-1)),t("div",D,[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700"},"Boshlanish",-1)),h(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[f,d.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700"},"Tugash",-1)),h(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[f,c.value]])]),t("button",{onClick:_,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Yangilash ")]),x.value?(i(),n("div",F,[...e[4]||(e[4]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):a.value?(i(),n(p,{key:1},[t("div",M,[t("div",T,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500"},"Operatorlar",-1)),t("p",J,o(a.value.team_stats?.total_operators),1)]),t("div",S,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Jami lidlar",-1)),t("p",Y,o(a.value.team_stats?.total_leads),1)]),t("div",$,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500"},"Jami daromad",-1)),t("p",E,o(l(a.value.team_stats?.total_revenue)),1)]),t("div",I,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500"},"O'rtacha konversiya",-1)),t("p",K,o(a.value.team_stats?.avg_conversion_rate)+"%",1)]),t("div",P,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500"},"O'rtacha chek",-1)),t("p",U,o(l(a.value.team_stats?.avg_deal_size)),1)])]),t("div",A,[t("div",H,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold text-green-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),v(" Eng yaxshilar ")],-1)),t("div",G,[(i(!0),n(p,null,g(a.value.top_performers,(s,u)=>(i(),n("div",{key:s.user_id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[t("div",R,[t("span",Z,o(u+1),1),t("span",Q,o(s.user_name),1)]),t("div",W,[t("span",X,o(s.conversion_rate)+"%",1),t("span",tt,o(l(s.total_revenue))+" so'm",1)])]))),128))])]),t("div",et,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),v(" Yordam kerak ")],-1)),t("div",st,[(i(!0),n(p,null,g(a.value.bottom_performers,(s,u)=>(i(),n("div",{key:s.user_id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[t("div",ot,[t("span",rt,o(u+1),1),t("span",at,o(s.user_name),1)]),t("div",it,[t("span",nt,o(s.conversion_rate)+"%",1),t("span",lt,o(s.lost_leads)+" yo'qotilgan",1)])]))),128))])])]),t("div",dt,[e[13]||(e[13]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Barcha operatorlar")],-1)),t("div",ct,[t("table",mt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Operator"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Lidlar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Yutilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Yo'qotilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Konversiya"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Daromad"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Javob vaqti"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pipeline")])],-1)),t("tbody",pt,[(i(!0),n(p,null,g(a.value.operators,s=>(i(),n("tr",{key:s.user_id,class:"hover:bg-gray-50"},[t("td",xt,[t("div",ut,[t("div",gt,[t("span",_t,o(s.user_name?.charAt(0)),1)]),t("div",ht,[t("div",ft,o(s.user_name),1)])])]),t("td",vt,o(s.total_leads),1),t("td",yt,o(s.won_leads),1),t("td",bt,o(s.lost_leads),1),t("td",wt,[t("span",{class:O(["px-2 py-1 text-sm font-bold rounded",y(s.conversion_rate,a.value.team_stats?.avg_conversion_rate)])},o(s.conversion_rate)+"% ",3)]),t("td",kt,o(l(s.total_revenue))+" so'm",1),t("td",Bt,o(b(s.avg_response_time_minutes)),1),t("td",Ct,o(l(s.pipeline_value))+" so'm",1)]))),128))])])])])],64)):z("",!0)])]),_:1}))}};export{Rt as default};
