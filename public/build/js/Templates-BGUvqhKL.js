import{h as e,l as t,r as a}from"./chunk-DKkye6wf.js";import{_ as r}from"./chunk-BB8-4400.js";import{r as s,w as l,b as o,v as n,E as i,y as c,x as d,D as g,L as u,z as p,T as m,H as y,A as b,I as x,J as h,F as k,G as v,B as f,O as w,P as j,C}from"./chunk-7Urb0kxg.js";import{u as _}from"./app-DFslr8vl.js";import{r as S}from"./chunk-Rl16a4N0.js";import{r as O}from"./chunk-pKP15yhx.js";import{e as T}from"./chunk-Dm-LAqtr.js";import{r as A}from"./chunk-ujXbNZhL.js";import{r as E}from"./chunk-D4tA7yBb.js";import{r as K}from"./chunk-jWGe-wOn.js";import{r as q}from"./chunk-34FQ54zy.js";import{r as I}from"./chunk-CrCLH5wG.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";const N={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},F={class:"flex min-h-full items-center justify-center p-4"},P={key:0,class:"relative bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col"},U={class:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700"},R={class:"text-lg font-semibold text-gray-900 dark:text-white"},X={class:"flex-1 overflow-y-auto p-6 space-y-4"},B={key:0,class:"p-3 bg-red-50 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-sm rounded-lg"},J={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},V=["placeholder"],z={key:0,class:"mt-1 text-sm text-red-600"},D={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},L=["placeholder"],G={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},H={class:"grid grid-cols-5 gap-2"},M=["onClick"],$={class:"hidden sm:inline"},Q={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},W={class:"space-y-2 mb-3"},Y={class:"flex items-center gap-2 p-3"},Z={class:"flex-1 text-sm text-gray-700 dark:text-gray-300"},ee=["onClick"],te={key:0,class:"border-t border-gray-200 dark:border-gray-600 pl-6 pr-3 py-2 space-y-1"},ae={class:"flex-1"},re=["onClick"],se={class:"border-t border-gray-200 dark:border-gray-600 pl-6 pr-3 py-2"},le=["onKeyup","placeholder"],oe={class:"flex gap-2"},ne=["placeholder"],ie={class:"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700"},ce=["disabled"],de={__name:"TemplateModal",props:{show:Boolean,template:Object,categories:Object,categoryIcons:Object},emits:["close","saved"],setup(e,{emit:t}){const{t:a}=_(),r=e,C=t,E=s({name:"",description:"",category:"custom",items:[]}),K=s(""),q=s(!1),I=s({}),de=()=>{E.value={name:"",description:"",category:"custom",items:[]},K.value="",I.value={}};l(()=>r.template,async e=>{if(e)try{const t=await fetch(route("business.todo-templates.show",e.id),{headers:{Accept:"application/json"}});if(t.ok){const e=await t.json();E.value={name:e.template.name||"",description:e.template.description||"",category:e.template.category||"custom",items:e.items||[]}}}catch(t){E.value={name:e.name||"",description:e.description||"",category:e.category||"custom",items:[]}}else de()},{immediate:!0});const ge=()=>{K.value.trim()&&(E.value.items.push({title:K.value.trim(),description:null,default_assignee_role:null,due_days_offset:null,children:[]}),K.value="")},ue=async()=>{q.value=!0,I.value={};const e=r.template?route("business.todo-templates.update",r.template.id):route("business.todo-templates.store"),t=r.template?"PUT":"POST";try{const r=await fetch(e,{method:t,headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:E.value.name,description:E.value.description||null,category:E.value.category,items:E.value.items})}),s=await r.json();r.ok?(C("saved"),C("close"),de()):I.value=s.errors||{general:s.error||a("common.error")}}catch(s){I.value={general:a("todos.template.network_error")}}finally{q.value=!1}},pe=()=>{C("close"),de()},me=o(()=>!!r.template),ye=o(()=>me.value?a("todos.template.edit_title"):a("todos.template.new_title"));return(t,r)=>(i(),n(j,{to:"body"},[c(m,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:d(()=>[e.show?(i(),g("div",N,[p("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-900 bg-opacity-75 dark:bg-opacity-75",onClick:pe}),p("div",F,[c(m,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:d(()=>[e.show?(i(),g("div",P,[p("div",U,[p("h3",R,y(ye.value),1),p("button",{onClick:pe,class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"},[c(b(S),{class:"w-5 h-5"})])]),p("div",X,[I.value.general?(i(),g("div",B,y(I.value.general),1)):u("",!0),p("div",null,[p("label",J,y(b(a)("todos.template.name"))+" * ",1),x(p("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>E.value.name=e),type:"text",required:"",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:b(a)("todos.template.name_placeholder")},null,8,V),[[h,E.value.name]]),I.value.name?(i(),g("p",z,y(I.value.name[0]),1)):u("",!0)]),p("div",null,[p("label",D,y(b(a)("todos.template.description")),1),x(p("textarea",{"onUpdate:modelValue":r[1]||(r[1]=e=>E.value.description=e),rows:"2",class:"w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-xl bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:b(a)("todos.template.description_placeholder")},null,8,L),[[h,E.value.description]])]),p("div",null,[p("label",G,y(b(a)("todos.template.category")),1),p("div",H,[(i(!0),g(k,null,v(e.categories,(t,a)=>(i(),g("button",{key:a,type:"button",onClick:e=>E.value.category=a,class:f(["px-3 py-2 text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-1",E.value.category===a?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"])},[p("span",null,y(e.categoryIcons[a]),1),p("span",$,y(t),1)],10,M))),128))])]),p("div",null,[p("label",Q,y(b(a)("todos.template.tasks")),1),p("div",W,[(i(!0),g(k,null,v(E.value.items,(e,t)=>(i(),g("div",{key:t,class:"bg-gray-50 dark:bg-gray-700 rounded-lg overflow-hidden"},[p("div",Y,[e.children?.length?(i(),n(b(O),{key:0,class:"w-4 h-4 text-gray-400"})):u("",!0),p("span",Z,y(e.title),1),p("button",{type:"button",onClick:e=>(e=>{E.value.items.splice(e,1)})(t),class:"p-1 text-gray-400 hover:text-red-500"},[c(b(T),{class:"w-4 h-4"})],8,ee)]),e.children?.length?(i(),g("div",te,[(i(!0),g(k,null,v(e.children,(e,a)=>(i(),g("div",{key:a,class:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400"},[r[3]||(r[3]=p("span",{class:"w-1.5 h-1.5 bg-gray-400 rounded-full"},null,-1)),p("span",ae,y(e.title),1),p("button",{type:"button",onClick:e=>((e,t)=>{E.value.items[e].children.splice(t,1)})(t,a),class:"p-1 text-gray-400 hover:text-red-500"},[c(b(T),{class:"w-3 h-3"})],8,re)]))),128))])):u("",!0),p("div",se,[p("input",{type:"text",onKeyup:w(e=>{var a,r;a=t,(r=e.target.value).trim()&&E.value.items[a].children.push({title:r.trim(),description:null,default_assignee_role:null,due_days_offset:null,children:[]}),e.target.value=""},["enter"]),class:"w-full px-3 py-1.5 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-600 text-gray-900 dark:text-white",placeholder:b(a)("todos.template.add_subtask")},null,40,le)])]))),128))]),p("div",oe,[x(p("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>K.value=e),type:"text",onKeyup:w(ge,["enter"]),class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",placeholder:b(a)("todos.template.new_task")},null,40,ne),[[h,K.value]]),p("button",{type:"button",onClick:ge,class:"px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-500"},[c(b(A),{class:"w-5 h-5"})])])])]),p("div",ie,[p("button",{type:"button",onClick:pe,class:"px-4 py-2.5 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},y(b(a)("common.cancel")),1),p("button",{onClick:ue,disabled:q.value,class:"px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors disabled:opacity-50"},y(q.value?b(a)("common.saving")+"...":b(a)("common.save")),9,ce)])])):u("",!0)]),_:1})])])):u("",!0)]),_:1})]))}},ge={class:"h-full flex flex-col -m-4 sm:-m-6 lg:-m-8"},ue={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 lg:px-8 py-4"},pe={class:"flex items-center justify-between"},me={class:"flex items-center gap-4"},ye={class:"text-2xl font-bold text-gray-900 dark:text-white"},be={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},xe={class:"flex items-center gap-2 mt-6 overflow-x-auto pb-2"},he=["onClick"],ke={class:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8"},ve={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},fe={class:"p-5"},we={class:"flex items-start justify-between mb-3"},je={class:"flex items-center gap-3"},Ce={class:"text-2xl"},_e={class:"font-semibold text-gray-900 dark:text-white"},Se={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-4 line-clamp-2"},Oe={class:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400"},Te={class:"flex items-center gap-1"},Ae={class:"flex items-center gap-1"},Ee={class:"border-t border-gray-200 dark:border-gray-700 px-5 py-3 bg-gray-50 dark:bg-gray-800/50 flex items-center justify-between"},Ke=["onClick","disabled"],qe={class:"flex items-center gap-1"},Ie=["onClick","title"],Ne=["onClick","title"],Fe=["onClick","title"],Pe={key:0,class:"col-span-full text-center py-16"},Ue={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},Re={class:"text-gray-500 dark:text-gray-400 mb-6"},Xe={__name:"Templates",props:{templates:Array,categories:Object,categoryIcons:Object,currentCategory:String},setup(l){const{t:o}=_(),m=l,x=s(!1),h=s(null),w=s(m.currentCategory||"all"),j=s(null),S=(e=null)=>{h.value=e,x.value=!0},O=()=>{x.value=!1,h.value=null},N=e=>{w.value=e,a.get(route("business.todo-templates.index"),{category:e},{preserveState:!0,preserveScroll:!0})},F=()=>{a.reload()},P=e=>{const t={onboarding:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400",sales:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400",operations:"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-400",marketing:"bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-400",custom:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"};return t[e]||t.custom};return(s,m)=>(i(),n(r,{title:b(o)("templates.title")},{default:d(()=>[c(b(e),{title:b(o)("templates.title")},null,8,["title"]),p("div",ge,[p("div",ue,[p("div",pe,[p("div",me,[c(b(t),{href:s.route("business.todos.index"),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700"},{default:d(()=>[c(b(E),{class:"w-5 h-5"})]),_:1},8,["href"]),p("div",null,[p("h1",ye,y(b(o)("templates.heading")),1),p("p",be,y(b(o)("templates.description")),1)])]),p("button",{onClick:m[0]||(m[0]=e=>S()),class:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors shadow-lg shadow-blue-500/25"},[c(b(A),{class:"w-5 h-5"}),C(" "+y(b(o)("templates.new")),1)])]),p("div",xe,[p("button",{onClick:m[1]||(m[1]=e=>N("all")),class:f(["px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap","all"===w.value?"bg-gray-900 dark:bg-white text-white dark:text-gray-900":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"])},y(b(o)("templates.all")),3),(i(!0),g(k,null,v(l.categories,(e,t)=>(i(),g("button",{key:t,onClick:e=>N(t),class:f(["px-4 py-2 text-sm font-medium rounded-lg transition-colors whitespace-nowrap flex items-center gap-2",w.value===t?"bg-gray-900 dark:bg-white text-white dark:text-gray-900":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"])},[p("span",null,y(l.categoryIcons[t]),1),C(" "+y(e),1)],10,he))),128))])]),p("div",ke,[p("div",ve,[(i(!0),g(k,null,v(l.templates,e=>(i(),g("div",{key:e.id,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all overflow-hidden"},[p("div",fe,[p("div",we,[p("div",je,[p("span",Ce,y(e.icon),1),p("div",null,[p("h3",_e,y(e.name),1),p("span",{class:f(["text-xs px-2 py-0.5 rounded",P(e.category)])},y(e.category_label),3)])])]),e.description?(i(),g("p",Se,y(e.description),1)):u("",!0),p("div",Oe,[p("span",Te,[c(b(K),{class:"w-4 h-4"}),C(" "+y(b(o)("templates.tasks_count",{count:e.items_count})),1)]),p("span",Ae,[c(b(q),{class:"w-4 h-4"}),C(" "+y(b(o)("templates.usage_count",{count:e.usage_count})),1)])])]),p("div",Ee,[p("button",{onClick:t=>(async e=>{j.value=e.id;try{const t=await fetch(route("business.todo-templates.apply",e.id),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({})});if(t.ok){const e=await t.json();alert(e.message),a.visit(route("business.todos.index"))}}catch(t){}finally{j.value=null}})(e),disabled:j.value===e.id,class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50"},[c(b(q),{class:"w-4 h-4"}),C(" "+y(j.value===e.id?b(o)("templates.applying"):b(o)("templates.apply")),1)],8,Ke),p("div",qe,[p("button",{onClick:t=>(async e=>{try{(await fetch(route("business.todo-templates.duplicate",e.id),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}})).ok&&a.reload()}catch(t){}})(e),class:"p-2 text-gray-400 hover:text-blue-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:b(o)("templates.duplicate")},[c(b(K),{class:"w-5 h-5"})],8,Ie),p("button",{onClick:t=>S(e),class:"p-2 text-gray-400 hover:text-blue-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:b(o)("templates.edit")},[c(b(I),{class:"w-5 h-5"})],8,Ne),p("button",{onClick:t=>(async e=>{if(confirm(o("templates.delete_confirm")))try{(await fetch(route("business.todo-templates.destroy",e.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}})).ok&&a.reload()}catch(t){}})(e),class:"p-2 text-gray-400 hover:text-red-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",title:b(o)("templates.delete")},[c(b(T),{class:"w-5 h-5"})],8,Fe)])])]))),128)),0===l.templates.length?(i(),g("div",Pe,[c(b(K),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),p("h3",Ue,y(b(o)("templates.empty")),1),p("p",Re,y(b(o)("templates.empty_desc")),1),p("button",{onClick:m[2]||(m[2]=e=>S()),class:"inline-flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors"},[c(b(A),{class:"w-5 h-5"}),C(" "+y(b(o)("templates.new")),1)])])):u("",!0)])])]),c(de,{show:x.value,template:h.value,categories:l.categories,"category-icons":l.categoryIcons,onClose:O,onSaved:F},null,8,["show","template","categories","category-icons"])]),_:1},8,["title"]))}};export{Xe as default};
