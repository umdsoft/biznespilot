import{r as h,b as k,v as K,x as E,z as t,C as i,D as b,E as S,H as a,B as m,F as l,G as c,I as v,S as H,Q as I,J as p,K as f,L as j,R as B}from"./chunk-KPSVwAyv.js";import{r as A}from"./chunk-BVrjkT6E.js";import{_ as N}from"./chunk-g3cLJu39.js";import"./chunk-DMP3tXW5.js";import"./app-Bx12lrZQ.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";const P={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},G={class:"bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl p-6 text-white"},Q={class:"text-3xl font-bold"},R={class:"bg-gradient-to-r from-emerald-500 to-green-500 rounded-xl p-6 text-white"},Z={class:"text-3xl font-bold"},W={class:"bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl p-6 text-white"},X={class:"text-3xl font-bold"},tt={class:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-6 text-white"},et={class:"text-3xl font-bold"},rt={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},st={class:"flex gap-8"},at={key:0,class:"space-y-6"},ot={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},lt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},it={class:"flex items-start justify-between mb-4"},dt={class:"flex items-center gap-3"},nt={class:"font-bold text-gray-900 dark:text-white"},ut={class:"flex gap-1"},gt=["onClick"],bt={class:"text-sm text-gray-500 mb-4"},mt={class:"flex items-center justify-between text-sm"},pt={class:"text-emerald-600 font-medium"},xt={class:"text-gray-500"},yt={key:0,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},ct={class:"text-xs text-gray-500"},vt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center text-gray-500 border border-gray-200 dark:border-gray-700"},ft={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},ht={class:"divide-y divide-gray-200 dark:divide-gray-700"},kt={class:"flex-1"},wt={class:"flex items-center gap-2"},_t={class:"font-bold text-gray-900 dark:text-white"},qt={class:"font-medium text-emerald-600"},Ct={class:"text-sm text-gray-500"},zt={class:"text-right"},St={class:"text-emerald-600 font-bold"},jt={key:0,class:"text-xs text-gray-500"},Bt={key:0,class:"p-12 text-center text-gray-500"},At={key:2,class:"space-y-6"},Vt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Mt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},Ut={class:"space-y-3"},Tt={class:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-700 dark:text-emerald-400 font-medium"},Ot={class:"flex-1"},Yt={class:"font-medium text-gray-900 dark:text-white"},Dt={class:"text-sm text-gray-500"},$t={class:"text-emerald-600 font-bold"},Lt={key:0,class:"p-6 text-center text-gray-500"},Ft={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},Jt={class:"space-y-4"},Kt={class:"flex justify-between text-sm mb-1"},Et={class:"text-gray-600 dark:text-gray-400"},Ht={class:"font-medium text-gray-900 dark:text-white"},It={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},Nt={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Pt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},Gt={class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},Qt={class:"grid grid-cols-2 gap-4"},Rt={class:"grid grid-cols-2 gap-4"},Zt={class:"grid grid-cols-2 gap-4"},Wt={class:"flex items-center gap-4"},Xt={class:"flex items-center gap-2"},te={class:"flex items-center gap-2"},ee={class:"flex justify-end gap-3 pt-4"},Be={__name:"Achievements",props:{achievements:Array,recentAchievements:Array,topAchievers:Array,stats:Object,panelType:String},setup(u){const w=u,g=h("definitions"),x=h(!1),y=h(null),o=h({name:"",description:"",icon:"ðŸ†",category:"sales",tier:"bronze",points:10,threshold:null,is_repeatable:!1,is_active:!0}),_=k(()=>{const s={};return w.achievements.forEach(e=>{s[e.category]||(s[e.category]=[]),s[e.category].push(e)}),s}),q=k(()=>{const s={};return w.achievements.forEach(e=>{s[e.category]=(s[e.category]||0)+(e.awarded_count||0)}),s}),V=k(()=>{const s=Object.values(q.value);return Math.max(...s,1)}),M=s=>s/V.value*100,U=s=>s?new Date(s).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric"}):"-",T=s=>s?s.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?",C=s=>({sales:"Sotuv yutuqlari",activity:"Faoliyat yutuqlari",quality:"Sifat yutuqlari",milestone:"Bosqich yutuqlari",special:"Maxsus yutuqlar"})[s]||s,O=s=>({sales:"text-2xl",activity:"text-2xl",quality:"text-2xl",milestone:"text-2xl",special:"text-2xl"})[s]||"",Y=s=>({sales:"bg-emerald-500",activity:"bg-blue-500",quality:"bg-purple-500",milestone:"bg-yellow-500",special:"bg-pink-500"})[s]||"bg-gray-500",D=s=>({bronze:"Bronza",silver:"Kumush",gold:"Oltin",platinum:"Platina",diamond:"Olmoz"})[s]||s,$=s=>{const e={bronze:"px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-700",silver:"px-2 py-0.5 rounded text-xs font-medium bg-gray-200 text-gray-700",gold:"px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-700",platinum:"px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-700",diamond:"px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-700"};return e[s]||e.bronze},z=s=>{const e={bronze:"bg-orange-100 dark:bg-orange-900/30",silver:"bg-gray-200 dark:bg-gray-700",gold:"bg-yellow-100 dark:bg-yellow-900/30",platinum:"bg-blue-100 dark:bg-blue-900/30",diamond:"bg-purple-100 dark:bg-purple-900/30"};return e[s]||e.bronze},L=()=>{y.value=null,o.value={name:"",description:"",icon:"ðŸ†",category:"sales",tier:"bronze",points:10,threshold:null,is_repeatable:!1,is_active:!0},x.value=!0},F=s=>{y.value=s,o.value={...s},x.value=!0},J=()=>{y.value?A.put(`/sales-head/sales-kpi/achievements/${y.value.id}`,o.value,{onSuccess:()=>{x.value=!1}}):A.post("/sales-head/sales-kpi/achievements",o.value,{onSuccess:()=>{x.value=!1}})};return(s,e)=>(l(),K(N,{title:"Yutuqlar"},{default:E(()=>[t("div",{class:"mb-8"},[t("div",{class:"flex items-center justify-between flex-wrap gap-4"},[e[14]||(e[14]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},"Yutuqlar"),t("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Jamoa yutuqlari va mukofotlar tizimi")],-1)),t("button",{onClick:L,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2"},[...e[13]||(e[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),S(" Yangi yutuq qo'shish ",-1)])])])]),t("div",P,[t("div",G,[e[15]||(e[15]=t("p",{class:"text-sm text-yellow-100 mb-1"},"Jami yutuqlar",-1)),t("p",Q,a(u.stats.total_definitions),1)]),t("div",R,[e[16]||(e[16]=t("p",{class:"text-sm text-emerald-100 mb-1"},"Berilgan yutuqlar",-1)),t("p",Z,a(u.stats.total_awarded),1)]),t("div",W,[e[17]||(e[17]=t("p",{class:"text-sm text-blue-100 mb-1"},"Bu oy olingan",-1)),t("p",X,a(u.stats.awarded_this_month),1)]),t("div",tt,[e[18]||(e[18]=t("p",{class:"text-sm text-purple-100 mb-1"},"Jami ballar",-1)),t("p",et,a(u.stats.total_points),1)])]),t("div",rt,[t("nav",st,[t("button",{onClick:e[0]||(e[0]=r=>g.value="definitions"),class:m(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",g.value==="definitions"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Yutuq turlari ",2),t("button",{onClick:e[1]||(e[1]=r=>g.value="recent"),class:m(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",g.value==="recent"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," So'nggi olinganlar ",2),t("button",{onClick:e[2]||(e[2]=r=>g.value="team"),class:m(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",g.value==="team"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Jamoa statistikasi ",2)])]),g.value==="definitions"?(l(),i("div",at,[(l(!0),i(c,null,v(_.value,(r,n)=>(l(),i("div",{key:n,class:"space-y-4"},[t("h3",ot,[t("span",{class:m(O(n))},null,2),S(" "+a(C(n)),1)]),t("div",lt,[(l(!0),i(c,null,v(r,d=>(l(),i("div",{key:d.id,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow"},[t("div",it,[t("div",dt,[t("div",{class:m(["w-14 h-14 rounded-xl flex items-center justify-center text-2xl",z(d.tier)])},a(d.icon||"ðŸ†"),3),t("div",null,[t("h4",nt,a(d.name),1),t("span",{class:m($(d.tier))},a(D(d.tier)),3)])]),t("div",ut,[t("button",{onClick:re=>F(d),class:"p-1 text-blue-600 hover:bg-blue-50 rounded"},[...e[19]||(e[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,gt)])]),t("p",bt,a(d.description),1),t("div",mt,[t("span",pt,"+"+a(d.points)+" ball",1),t("span",xt,a(d.awarded_count||0)+" marta berilgan",1)]),d.threshold?(l(),i("div",yt,[t("p",ct,"Shart: "+a(d.threshold_type)+" â‰¥ "+a(d.threshold),1)])):b("",!0)]))),128))])]))),128)),Object.keys(_.value).length===0?(l(),i("div",vt," Yutuqlar hali qo'shilmagan ")):b("",!0)])):b("",!0),g.value==="recent"?(l(),i("div",ft,[t("div",ht,[(l(!0),i(c,null,v(u.recentAchievements,r=>(l(),i("div",{key:r.id,class:"p-4 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("div",{class:m(["w-12 h-12 rounded-xl flex items-center justify-center text-xl",z(r.achievement?.tier)])},a(r.achievement?.icon||"ðŸ†"),3),t("div",kt,[t("div",wt,[t("span",_t,a(r.user?.name),1),e[20]||(e[20]=t("span",{class:"text-gray-400"},"â†’",-1)),t("span",qt,a(r.achievement?.name),1)]),t("p",Ct,a(U(r.earned_at)),1)]),t("div",zt,[t("span",St,"+"+a(r.points_awarded)+" ball",1),r.times_earned>1?(l(),i("p",jt,a(r.times_earned)+" marta",1)):b("",!0)])]))),128)),u.recentAchievements.length===0?(l(),i("div",Bt," So'nggi olingan yutuqlar yo'q ")):b("",!0)])])):b("",!0),g.value==="team"?(l(),i("div",At,[t("div",Vt,[t("div",Mt,[e[21]||(e[21]=t("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"Top 5 - Yutuqlar bo'yicha",-1)),t("div",Ut,[(l(!0),i(c,null,v(u.topAchievers,(r,n)=>(l(),i("div",{key:r.user_id,class:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("span",{class:m(["w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm",n===0?"bg-yellow-100 text-yellow-700":n===1?"bg-gray-100 text-gray-700":n===2?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-500"])},a(n+1),3),t("div",Tt,a(T(r.user?.name)),1),t("div",Ot,[t("p",Yt,a(r.user?.name),1),t("p",Dt,a(r.achievements_count)+" ta yutuq",1)]),t("span",$t,a(r.total_points)+" ball",1)]))),128)),u.topAchievers.length===0?(l(),i("div",Lt," Ma'lumotlar yo'q ")):b("",!0)])]),t("div",Ft,[e[22]||(e[22]=t("h3",{class:"font-bold text-gray-900 dark:text-white mb-4"},"Kategoriya bo'yicha",-1)),t("div",Jt,[(l(!0),i(c,null,v(q.value,(r,n)=>(l(),i("div",{key:n},[t("div",Kt,[t("span",Et,a(C(n)),1),t("span",Ht,a(r),1)]),t("div",It,[t("div",{class:m([Y(n),"h-2 rounded-full transition-all duration-500"]),style:H({width:M(r)+"%"})},null,6)])]))),128))])])])])):b("",!0),x.value?(l(),i("div",Nt,[t("div",Pt,[t("h3",Gt,a(y.value?"Yutuqni tahrirlash":"Yangi yutuq qo'shish"),1),t("form",{onSubmit:I(J,["prevent"]),class:"space-y-4"},[t("div",Qt,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nomi",-1)),p(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.value.name=r),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[f,o.value.name]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Icon (emoji)",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.value.icon=r),type:"text",placeholder:"ðŸ†",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[f,o.value.icon]])])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tavsif",-1)),p(t("textarea",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.value.description=r),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[f,o.value.description]])]),t("div",Rt,[t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kategoriya",-1)),p(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>o.value.category=r),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...e[26]||(e[26]=[t("option",{value:"sales"},"Sotuv",-1),t("option",{value:"activity"},"Faoliyat",-1),t("option",{value:"quality"},"Sifat",-1),t("option",{value:"milestone"},"Bosqich",-1),t("option",{value:"special"},"Maxsus",-1)])],512),[[j,o.value.category]])]),t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Daraja",-1)),p(t("select",{"onUpdate:modelValue":e[7]||(e[7]=r=>o.value.tier=r),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...e[28]||(e[28]=[t("option",{value:"bronze"},"Bronza",-1),t("option",{value:"silver"},"Kumush",-1),t("option",{value:"gold"},"Oltin",-1),t("option",{value:"platinum"},"Platina",-1),t("option",{value:"diamond"},"Olmoz",-1)])],512),[[j,o.value.tier]])])]),t("div",Zt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ball",-1)),p(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>o.value.points=r),type:"number",min:"1",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[f,o.value.points,void 0,{number:!0}]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Chegarasi",-1)),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>o.value.threshold=r),type:"number",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[f,o.value.threshold,void 0,{number:!0}]])])]),t("div",Wt,[t("label",Xt,[p(t("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>o.value.is_repeatable=r),type:"checkbox",class:"rounded"},null,512),[[B,o.value.is_repeatable]]),e[32]||(e[32]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Takrorlanadigan",-1))]),t("label",te,[p(t("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>o.value.is_active=r),type:"checkbox",class:"rounded"},null,512),[[B,o.value.is_active]]),e[33]||(e[33]=t("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Faol",-1))])]),t("div",ee,[t("button",{type:"button",onClick:e[12]||(e[12]=r=>x.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),e[34]||(e[34]=t("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Saqlash ",-1))])],32)])])):b("",!0)]),_:1}))}};export{Be as default};
