import{r as a,b as e,o as s,v as t,x as i,L as l,y as r,A as n,C as o,I as d,B as c,E as g,D as u,z as m,J as p,K as h,Q as x,O as y,F as b,H as v}from"./chunk-CpmtkKLp.js";import{h as f,a as k}from"./chunk-BhZp3z4u.js";import{_ as q}from"./chunk-BDBDdGhv.js";import{r as w}from"./chunk-eMHYSAeQ.js";import{r as j}from"./chunk-beXL1A--.js";import{a as z}from"./chunk-CouA7u-j.js";import{a as _,e as H}from"./chunk-D7SyfRoT.js";import{r as Q}from"./chunk-BEiyPHRW.js";import{r as I}from"./chunk-dqIIyBTR.js";import{r as B}from"./chunk-D7oP9pDe.js";import{r as J}from"./chunk-DvlohF_U.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const N={class:"space-y-6"},O={class:"flex items-center justify-between"},$=["disabled"],A={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},D={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},C={class:"flex items-center gap-3"},E={class:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center"},M={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},G={class:"flex items-center gap-3"},K={class:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center"},T={class:"text-2xl font-bold text-emerald-400"},Y={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},F={class:"flex items-center gap-3"},R={class:"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center"},U={class:"text-2xl font-bold text-amber-400"},V={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},L={class:"flex items-center gap-3"},P={class:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center"},S={class:"text-2xl font-bold text-red-400"},W={key:1,class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Z={class:"flex items-center justify-between mb-2"},aa={class:"text-sm text-gray-300"},ea={class:"bg-gray-600 rounded-full h-2"},sa={class:"text-xs text-gray-500 mt-2"},ta={key:2,class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},ia={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},la={class:"space-y-4"},ra={class:"flex items-start gap-3"},na={class:"flex-1"},oa={class:"text-gray-300 text-sm mt-1"},da={key:0,class:"text-gray-400 text-sm mt-2 flex items-center gap-1"},ca={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},ga={class:"grid md:grid-cols-2 gap-6"},ua={class:"text-gray-300 text-sm space-y-2"},ma={class:"flex items-start gap-2"},pa={class:"flex items-start gap-2"},ha={class:"flex items-start gap-2"},xa={class:"flex items-start gap-2"},ya={class:"flex items-center gap-4"},ba={class:"flex items-center gap-2"},va=["value"],fa={class:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden"},ka={class:"overflow-x-auto"},qa={class:"min-w-full divide-y divide-gray-700"},wa={class:"divide-y divide-gray-700"},ja={class:"px-6 py-4 whitespace-nowrap"},za={class:"flex items-center"},_a={class:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center"},Ha={class:"text-sm font-medium text-purple-400"},Qa={class:"ml-4"},Ia={class:"text-sm font-medium text-white"},Ba={class:"text-sm text-gray-400"},Ja={class:"px-6 py-4 whitespace-nowrap"},Na={class:"flex items-center gap-3"},Oa={class:"w-24 bg-gray-600 rounded-full h-2"},$a={class:"px-6 py-4 whitespace-nowrap"},Aa={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-400"},Da={class:"px-6 py-4 whitespace-nowrap text-right"},Ca=["onClick"],Ea={key:0,class:"p-8 text-center"},Ma={key:1,class:"p-8 text-center text-gray-400"},Ga={__name:"Index",props:{currentBusiness:Object},setup(Ga){const Ka=Ga,Ta=a(!0),Ya=a([]),Fa=a(null),Ra=a(""),Ua=[{value:"",label:"Barcha darajalar"},{value:"highly_engaged",label:"Juda qiziqgan"},{value:"engaged",label:"Qiziqgan"},{value:"neutral",label:"Neytral"},{value:"disengaged",label:"Qiziqmagan"}],Va=a=>({highly_engaged:"Juda qiziqgan",engaged:"Qiziqgan",neutral:"Neytral",disengaged:"Qiziqmagan"}[a]||a),La=async()=>{if(Ka.currentBusiness?.id){Ta.value=!0;try{const[a,e]=await Promise.all([k.get(`/api/v1/businesses/${Ka.currentBusiness.id}/hr/engagement`,{params:{engagement_level:Ra.value||void 0}}),k.get(`/api/v1/businesses/${Ka.currentBusiness.id}/hr/engagement/statistics`)]);Ya.value=a.data.data?.data||[],Fa.value=e.data.data}catch(a){}finally{Ta.value=!1}}},Pa=a=>a>=80?"text-emerald-400":a>=65?"text-blue-400":a>=50?"text-amber-400":"text-red-400",Sa=a=>a>=80?"bg-emerald-500":a>=65?"bg-blue-500":a>=50?"bg-amber-500":"bg-red-500",Wa=e(()=>{if(!Fa.value?.components)return[];const a=[];[...Fa.value.components].sort((a,e)=>a.score-e.score).slice(0,3).filter(a=>a.score<60).forEach(e=>{const s=Xa(e.key,e.score);s&&a.push(s)});const e=Fa.value.overview?.avg_score||0;return e>=80?a.unshift({type:"success",title:"A'lo natija!",message:"Hodimlar ishga qiziqish darajasi juda yuqori. Jamoangiz motivatsiyali va samarali ishlaydi.",icon:w}):e<50&&a.unshift({type:"danger",title:"Diqqat talab qilinadi!",message:"Umumiy ishga qiziqish darajasi past. Hodimlar ishdan qoniqmayotgan bo'lishi mumkin.",icon:j}),a}),Xa=(a,e)=>{const s={work_satisfaction:{title:"Ish qoniqishi past",message:"Hodimlar kundalik vazifalardan qoniqmayapti. Vazifalarni qayta ko'rib chiqing va ularning kuchli tomonlaridan foydalaning.",action:"Har bir hodim bilan 1:1 suhbat o'tkazing"},team_collaboration:{title:"Jamoa hamkorligi zaif",message:"Jamoa a'zolari orasida yetarli aloqa yo'q. Team-building tadbirlar va hamkorlik loyihalarini ko'paytiring.",action:"Haftalik jamoa uchrashuvlarini joriy qiling"},growth_opportunities:{title:"O'sish imkoniyatlari cheklangan",message:"Hodimlar karyera rivojlanishi imkoniyatini ko'rmayapti. Treninglar va mentor dasturlarini taklif qiling.",action:"Har bir hodim uchun rivojlanish rejasi tuzing"},recognition_frequency:{title:"Tan olish yetishmaydi",message:"Hodimlar ishlarini e'tirof etilganini his qilmayapti. Muntazam ravishda minnatdorchilik bildiring.",action:'Haftalik "Star Employee" dasturini boshlang'},manager_support:{title:"Rahbar qo'llab-quvvatlashi kam",message:"Hodimlar menejerdan yetarli yordam olmayapti. Menejerlar uchun coaching treningi o'tkazing.",action:"Menejerlar bilan muloqot sifatini yaxshilang"},work_life_balance:{title:"Ish-hayot balansi buzilgan",message:"Hodimlar ish yukidan charchagan. Moslashuvchan ish jadvalini ko'rib chiqing.",action:"Overtime soatlarini kamaytiring"},purpose_clarity:{title:"Maqsad aniqligi past",message:"Hodimlar kompaniya missiyasini tushunmayapti. Kompaniya qadriyatlarini muntazam targ'ib qiling.",action:'Oylik "All-hands" uchrashuvlar o\'tkazing'},resources_adequacy:{title:"Resurslar yetishmaydi",message:"Hodimlar ishni bajarish uchun kerakli vositalardan mahrum. Zarur jihozlar va dasturlarni ta'minlang.",action:"Resurs so'rovlarini ko'rib chiqing"}};return e>=60||!s[a]?null:{type:e<40?"danger":"warning",title:s[a].title,message:s[a].message,action:s[a].action,icon:e<40?j:z}};return s(La),(a,e)=>(u(),t(q,{title:"Ishga Qiziqish"},{default:i(()=>[l(n(f),{title:"Hodimlar Ishga Qiziqishi"}),r("div",N,[r("div",O,[e[2]||(e[2]=r("div",null,[r("h1",{class:"text-2xl font-bold text-white"}," Hodimlar Ishga Qiziqishi "),r("p",{class:"text-gray-400 mt-1"}," Gallup Q12 metodologiyasiga asoslangan ishga qiziqish tahlili ")],-1)),r("button",{onClick:La,disabled:Ta.value,class:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},[l(n(_),{class:g(["w-5 h-5",Ta.value?"animate-spin":""])},null,8,["class"]),e[1]||(e[1]=c(" Yangilash ",-1))],8,$)]),Fa.value?(u(),o("div",A,[r("div",D,[r("div",C,[r("div",E,[l(n(Q),{class:"w-6 h-6 text-purple-400"})]),r("div",null,[e[3]||(e[3]=r("p",{class:"text-sm text-gray-400"},"O'rtacha ball",-1)),r("p",{class:g(["text-2xl font-bold",Pa(Fa.value.overview?.avg_score)])},m(Fa.value.overview?.avg_score?.toFixed(1)||0),3)])])]),r("div",M,[r("div",G,[r("div",K,[l(n(H),{class:"w-6 h-6 text-emerald-400"})]),r("div",null,[e[4]||(e[4]=r("p",{class:"text-sm text-gray-400"},"Qiziqgan hodimlar",-1)),r("p",T,m((Fa.value.distribution?.highly_engaged?.count||0)+(Fa.value.distribution?.engaged?.count||0)),1)])])]),r("div",Y,[r("div",F,[r("div",R,[l(n(I),{class:"w-6 h-6 text-amber-400"})]),r("div",null,[e[5]||(e[5]=r("p",{class:"text-sm text-gray-400"},"Neytral",-1)),r("p",U,m(Fa.value.distribution?.neutral?.count||0),1)])])]),r("div",V,[r("div",L,[r("div",P,[l(n(H),{class:"w-6 h-6 text-red-400"})]),r("div",null,[e[6]||(e[6]=r("p",{class:"text-sm text-gray-400"},"Qiziqmagan",-1)),r("p",S,m(Fa.value.distribution?.disengaged?.count||0),1)])])])])):d("",!0),Fa.value?.components?(u(),o("div",W,[e[7]||(e[7]=r("h3",{class:"text-lg font-semibold text-white mb-4"}," Komponent bo'yicha o'rtacha balllar ",-1)),r("div",X,[(u(!0),o(p,null,h(Fa.value.components,a=>(u(),o("div",{key:a.key,class:"p-4 bg-gray-700/50 rounded-lg border border-gray-600"},[r("div",Z,[r("span",aa,m(a.label),1),r("span",{class:g(["text-lg font-bold",Pa(a.score)])},m(a.score),3)]),r("div",ea,[r("div",{class:g(["h-2 rounded-full transition-all duration-500",Sa(a.score)]),style:x({width:`${a.score}%`})},null,6)]),r("p",sa,m(a.score>=80?"A'lo":a.score>=65?"Yaxshi":a.score>=50?"O'rtacha":"Diqqat talab"),1)]))),128))])])):d("",!0),Wa.value.length>0?(u(),o("div",ta,[r("h3",ia,[l(n(z),{class:"w-5 h-5 text-amber-400"}),e[8]||(e[8]=c(" Xulosa va tavsiyalar ",-1))]),r("div",la,[(u(!0),o(p,null,h(Wa.value,(a,e)=>(u(),o("div",{key:e,class:g(["p-4 rounded-lg border","success"===a.type?"bg-emerald-500/10 border-emerald-500/30":"danger"===a.type?"bg-red-500/10 border-red-500/30":"bg-amber-500/10 border-amber-500/30"])},[r("div",ra,[(u(),t(y(a.icon),{class:g(["w-5 h-5 mt-0.5 flex-shrink-0","success"===a.type?"text-emerald-400":"danger"===a.type?"text-red-400":"text-amber-400"])},null,8,["class"])),r("div",na,[r("h4",{class:g(["font-medium","success"===a.type?"text-emerald-400":"danger"===a.type?"text-red-400":"text-amber-400"])},m(a.title),3),r("p",oa,m(a.message),1),a.action?(u(),o("p",da,[l(n(B),{class:"w-4 h-4"}),c(" Tavsiya: "+m(a.action),1)])):d("",!0)])])],2))),128))])])):d("",!0),r("div",ca,[e[15]||(e[15]=r("h3",{class:"text-lg font-semibold text-white mb-4"}," Gallup Q12 haqida ",-1)),r("div",ga,[e[14]||(e[14]=r("div",null,[r("p",{class:"text-gray-300 text-sm leading-relaxed"},[r("strong",{class:"text-white"},"Gallup Q12"),c(" - 30 yildan ortiq tadqiqotlarga asoslangan xodimlar ishga qiziqish darajasini o'lchovchi standart metodologiya. 17 milliondan ortiq xodim ustida sinovdan o'tgan 12 ta asosiy savoldan iborat. ")]),r("div",{class:"mt-4 space-y-2"},[r("div",{class:"flex items-center gap-2 text-sm"},[r("span",{class:"w-3 h-3 bg-emerald-500 rounded-full"}),r("span",{class:"text-gray-300"},"80-100: Juda qiziqgan (Highly Engaged)")]),r("div",{class:"flex items-center gap-2 text-sm"},[r("span",{class:"w-3 h-3 bg-blue-500 rounded-full"}),r("span",{class:"text-gray-300"},"65-79: Qiziqgan (Engaged)")]),r("div",{class:"flex items-center gap-2 text-sm"},[r("span",{class:"w-3 h-3 bg-amber-500 rounded-full"}),r("span",{class:"text-gray-300"},"50-64: Neytral (Neutral)")]),r("div",{class:"flex items-center gap-2 text-sm"},[r("span",{class:"w-3 h-3 bg-red-500 rounded-full"}),r("span",{class:"text-gray-300"},"0-49: Qiziqmagan (Disengaged)")])])],-1)),r("div",null,[e[13]||(e[13]=r("h4",{class:"text-white font-medium mb-2"},"Nima uchun muhim?",-1)),r("ul",ua,[r("li",ma,[l(n(w),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),e[9]||(e[9]=r("span",null,"Yuqori ishga qiziqish = 23% ko'proq foyda (Gallup)",-1))]),r("li",pa,[l(n(w),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),e[10]||(e[10]=r("span",null,"18% yuqoriroq mijozlar sodiqlihi",-1))]),r("li",ha,[l(n(w),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),e[11]||(e[11]=r("span",null,"Kadr aylanmasi kamayadi",-1))]),r("li",xa,[l(n(w),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),e[12]||(e[12]=r("span",null,"Ish sifati va unumdorlik ortadi",-1))])])])])]),r("div",ya,[r("div",ba,[l(n(J),{class:"w-5 h-5 text-gray-400"}),b(r("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>Ra.value=a),onChange:La,class:"px-4 py-2 bg-gray-800 border border-gray-700 text-white rounded-lg focus:ring-2 focus:ring-purple-500"},[(u(),o(p,null,h(Ua,a=>r("option",{key:a.value,value:a.value},m(a.label),9,va)),64))],544),[[v,Ra.value]])])]),r("div",fa,[r("div",ka,[r("table",qa,[e[16]||(e[16]=r("thead",{class:"bg-gray-700/50"},[r("tr",null,[r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Hodim "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Umumiy ball "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Daraja "),r("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Davr "),r("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider"}," Amallar ")])],-1)),r("tbody",wa,[(u(!0),o(p,null,h(Ya.value,a=>{return u(),o("tr",{key:a.id,class:"hover:bg-gray-700/50"},[r("td",ja,[r("div",za,[r("div",_a,[r("span",Ha,m(a.user?.name?.charAt(0)||"?"),1)]),r("div",Qa,[r("div",Ia,m(a.user?.name||"Noma'lum"),1),r("div",Ba,m(a.user?.email),1)])])]),r("td",Ja,[r("div",Na,[r("span",{class:g(["text-lg font-bold",Pa(a.overall_score)])},m(a.overall_score?.toFixed(1)),3),r("div",Oa,[r("div",{class:g(["h-2 rounded-full",Sa(a.overall_score)]),style:x({width:`${a.overall_score}%`})},null,6)])])]),r("td",$a,[r("span",{class:g(["px-3 py-1 text-xs font-medium rounded-full",(e=a.engagement_level,{highly_engaged:"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",engaged:"bg-blue-500/20 text-blue-400 border border-blue-500/30",neutral:"bg-amber-500/20 text-amber-400 border border-amber-500/30",disengaged:"bg-red-500/20 text-red-400 border border-red-500/30"}[e]||"bg-gray-500/20 text-gray-400")])},m(Va(a.engagement_level)),3)]),r("td",Aa,m(a.period),1),r("td",Da,[r("button",{onClick:e=>(async a=>{if(Ka.currentBusiness?.id)try{await k.post(`/api/v1/businesses/${Ka.currentBusiness.id}/hr/engagement/${a}/recalculate`),La()}catch(e){}})(a.user?.id),class:"text-purple-400 hover:text-purple-300",title:"Qayta hisoblash"},[l(n(_),{class:"w-5 h-5"})],8,Ca)])]);var e}),128))])])]),Ta.value?(u(),o("div",Ea,[l(n(_),{class:"w-8 h-8 mx-auto animate-spin text-purple-400"}),e[17]||(e[17]=r("p",{class:"mt-2 text-gray-400"},"Yuklanmoqda...",-1))])):0===Ya.value.length?(u(),o("div",Ma,[l(n(Q),{class:"w-12 h-12 mx-auto opacity-50 mb-3"}),e[18]||(e[18]=r("p",null,"Ishga qiziqish ma'lumotlari topilmadi",-1))])):d("",!0)])])]),_:1}))}};export{Ga as default};
