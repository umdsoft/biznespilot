import{C as t,e,f as a,D as s}from"./chunk-Dl5Vnr2b.js";import{d as n,s as r,h as o,W as l,r as u,o as i,e as d,w as p,t as c,p as y,X as f}from"./chunk-CpmtkKLp.js";const b={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},g={ariaLabel:{type:String},ariaDescribedby:{type:String}},v={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...b,...g},h="2"===l[0]?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function j(t){return f(t)?c(t):t}function m(t,e){t.labels=e}function D(t,e,a){const s=[];t.datasets=e.map(e=>{const n=t.datasets.find(t=>t[a]===e[a]);return n&&e.data&&!s.includes(n)?(s.push(n),Object.assign(n,e),n):{...e}})}const O=n({props:v,setup(e,a){let{expose:s,slots:n}=a;const l=u(null),b=r(null);s({chart:b});return i(()=>{if(!l.value)return;const{type:a,data:s,options:n,plugins:r,datasetIdKey:o}=e,u=function(t,e){const a={labels:[],datasets:[]};return m(a,t.labels),D(a,t.datasets,e),a}(s,o),i=function(t){return f(arguments.length>1&&void 0!==arguments[1]?arguments[1]:t)?new Proxy(t,{}):t}(u,s);b.value=new t(l.value,{type:a,data:i,options:{...n},plugins:r})}),d(()=>{const t=c(b.value);t&&(e.destroyDelay>0?setTimeout(()=>{t.destroy(),b.value=null},e.destroyDelay):(t.destroy(),b.value=null))}),p([()=>e.options,()=>e.data],(t,a)=>{let[s,n]=t,[r,o]=a;const l=c(b.value);if(!l)return;let u=!1;if(s){const t=j(s),e=j(r);t&&t!==e&&(!function(t,e){const a=t.options;a&&e&&Object.assign(a,e)}(l,t),u=!0)}if(n){const t=j(n.labels),a=j(o.labels),s=j(n.datasets),r=j(o.datasets);t!==a&&(m(l.config.data,t),u=!0),s&&s!==r&&(D(l.config.data,s,e.datasetIdKey),u=!0)}u&&y(()=>{(t=>{t.update(e.updateMode)})(l)})},{deep:!0}),()=>o("canvas",{role:"img","aria-label":e.ariaLabel,"aria-describedby":e.ariaDescribedby,ref:l},[o("p",{},[n.default?n.default():""])])}});function S(e,a){return t.register(a),n({props:b,setup(t,a){let{expose:s}=a;const n=r(null),l=t=>{n.value=t?.chart};return s({chart:n}),()=>o(O,h({ref:l},{type:e,...t}))}})}const x=S("bar",e),w=S("doughnut",s),I=S("line",a);export{x as B,w as D,I as L};
