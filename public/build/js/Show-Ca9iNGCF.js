import{r as y,b as f,C as d,y as u,z as t,A as i,x as m,H as l,B,E as v,S as O,G as b,I as x,v as F,D as w,Q as J,J as p,K as h,L as X,F as n}from"./chunk-KPSVwAyv.js";import{h as Z,l as q,r as k}from"./chunk-BVrjkT6E.js";import{_ as tt}from"./chunk-BHkqA-P1.js";import{r as et}from"./chunk-J14gS6og.js";import{r as st}from"./chunk-BL-22xYA.js";import{r as lt,a as z}from"./chunk-D-7B8ZCD.js";import{r as ot}from"./chunk-CYZ54WJE.js";import{r as at,a as nt}from"./chunk-72FkcFIa.js";import{r as j}from"./chunk-Tj_a7zxz.js";import{r as rt}from"./chunk-Qe-_4ASA.js";import{r as it}from"./chunk-BLyl9cj4.js";import{Y as dt,h as A,G as ut,V as gt,S as ct}from"./chunk-CViO97f5.js";import"./app-DMGwzSHW.js";import"./chunk-BvkwlYlD.js";const mt={class:"py-6"},bt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xt={class:"flex items-center justify-between mb-6"},pt={class:"flex items-center space-x-4"},yt={class:"text-2xl font-bold text-gray-900"},ft={class:"text-gray-500"},vt={class:"flex items-center space-x-3"},ht={class:"bg-white rounded-lg border p-6 mb-6"},_t={class:"flex items-center justify-between mb-4"},wt={class:"text-2xl font-bold text-indigo-600"},kt={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},jt={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},$t={class:"bg-white rounded-lg border p-4"},St={class:"flex items-center justify-between"},qt={class:"text-2xl font-bold text-gray-900 mt-1"},Ct={class:"bg-white rounded-lg border p-4"},Vt={class:"flex items-center justify-between"},Mt={class:"text-2xl font-bold text-gray-900 mt-1"},Bt={class:"bg-white rounded-lg border p-4"},Ot={class:"flex items-center justify-between"},Ft={class:"text-2xl font-bold text-gray-900 mt-1"},zt={class:"bg-white rounded-lg border p-4"},At={class:"flex items-center justify-between"},Ht={class:"text-2xl font-bold text-gray-900 mt-1"},Kt={class:"bg-white rounded-lg border p-4"},Nt={class:"flex items-center justify-between"},Tt={class:"text-2xl font-bold text-gray-900 mt-1"},Ut={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Yt={class:"lg:col-span-2 space-y-6"},Dt={class:"bg-white rounded-lg border p-6"},Qt={class:"flex items-center justify-between mb-4"},Et={key:0,class:"space-y-3"},Lt={key:1,class:"text-center py-8 text-gray-500"},Rt={class:"bg-white rounded-lg border p-6"},Gt={class:"flex items-center justify-between mb-4"},It={class:"space-y-3"},Pt={class:"flex items-center justify-between mb-2"},Wt={class:"flex items-center space-x-3"},Jt={class:"font-semibold text-gray-900"},Xt={class:"text-sm text-gray-500"},Zt={class:"grid grid-cols-3 gap-4 mt-3"},te={class:"text-center p-2 bg-gray-50 rounded"},ee={class:"font-semibold"},se={class:"text-center p-2 bg-gray-50 rounded"},le={class:"font-semibold"},oe={class:"text-center p-2 bg-gray-50 rounded"},ae={class:"font-semibold text-indigo-600"},ne={class:"h-1.5 bg-gray-200 rounded-full overflow-hidden mt-3"},re={class:"text-center"},ie={class:"bg-white rounded-lg border p-6"},de={class:"flex items-center justify-between mb-4"},ue={key:0,class:"flex flex-wrap gap-2"},ge=["onClick"],ce={key:1,class:"text-center py-4 text-gray-500 text-sm"},me={class:"space-y-6"},be={class:"bg-white rounded-lg border p-6"},xe={class:"space-y-4"},pe={class:"font-medium text-gray-900 mb-2"},ye={class:"space-y-1 text-sm text-gray-600"},fe={key:0,class:"text-gray-400"},ve={key:0,class:"text-center py-4 text-gray-500 text-sm"},he={class:"flex items-center mb-3"},_e={class:"flex items-center justify-between text-sm"},we={class:"text-gray-600"},ke={class:"bg-white rounded-lg border p-6"},je={class:"flex items-center justify-between mb-4"},$e={key:0,class:"space-y-3"},Se={class:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center text-amber-600 flex-shrink-0"},qe={class:"flex-1 min-w-0"},Ce={class:"font-medium text-gray-900"},Ve={class:"text-sm text-gray-500"},Me={key:1,class:"text-center py-4 text-gray-500 text-sm"},Be={key:0,class:"bg-white rounded-lg border p-6"},Oe={class:"space-y-3"},Fe={class:"font-medium text-green-800"},ze={class:"text-sm text-green-600 mt-1"},Ae={class:"text-xs text-green-500 mt-2"},He={class:"fixed inset-0 overflow-y-auto"},Ke={class:"flex min-h-full items-center justify-center p-4"},Ne={class:"grid grid-cols-2 gap-4"},Te={class:"grid grid-cols-2 gap-4"},Ue={class:"flex justify-end space-x-3 pt-4"},Ye=["disabled"],ss={__name:"Show",props:{plan:Object,quarterly:Object,weeks:Array,content_count:Number},setup(r){const a=r,_=y(!1),H=y(!1),K=y(!1),N=y(!1),$=y(!1),g=y({title:a.plan.title||"",focus_area:a.plan.focus_area||"",budget:a.plan.budget,posts_target:a.plan.posts_target,stories_target:a.plan.stories_target,reels_target:a.plan.reels_target,status:a.plan.status}),C=f(()=>["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"][a.plan.month]||""),T=f(()=>({draft:"bg-gray-100 text-gray-700",planning:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-indigo-100 text-indigo-700"})[a.plan.status]||"bg-gray-100 text-gray-700"),U=f(()=>({draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"})[a.plan.status]||a.plan.status),V=f(()=>{const o={};return["week1","week2","week3","week4"].forEach(e=>{a.plan[e]&&a.plan[e].length>0&&(o[e]=a.plan[e])}),o}),Y=f(()=>Object.keys(V.value).length>0),D=f(()=>a.content_count||0);function Q(o){return o?o>=1e6?`${(o/1e6).toFixed(1)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:o.toLocaleString():"-"}function E(o){return{draft:"bg-gray-100 text-gray-600",planning:"bg-blue-100 text-blue-600",active:"bg-green-100 text-green-600",completed:"bg-indigo-100 text-indigo-600"}[o]||"bg-gray-100 text-gray-600"}function L(o){return{draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[o]||o}function R(o){const e=[...a.plan.monthly_objectives||[]];e[o].completed=!e[o].completed,k.put(`/business/strategy/monthly/${a.plan.id}`,{monthly_objectives:e},{preserveScroll:!0})}function G(o){if(!confirm("Bu maqsadni o'chirmoqchimisiz?"))return;const e=[...a.plan.monthly_objectives||[]];e.splice(o,1),k.put(`/business/strategy/monthly/${a.plan.id}`,{monthly_objectives:e},{preserveScroll:!0})}function I(o){const e=[...a.plan.content_themes||[]];e.splice(o,1),k.put(`/business/strategy/monthly/${a.plan.id}`,{content_themes:e},{preserveScroll:!0})}function M(){const o=(a.weeks?.length||0)+1;k.post("/business/strategy/weekly",{monthly_plan_id:a.plan.id,week_of_month:o,year:a.plan.year,month:a.plan.month})}function P(){$.value=!0,k.put(`/business/strategy/monthly/${a.plan.id}`,g.value,{preserveScroll:!0,onSuccess:()=>{_.value=!1},onFinish:()=>{$.value=!1}})}return(o,e)=>(n(),d(b,null,[u(i(Z),{title:`${C.value} ${r.plan.year}`},null,8,["title"]),t("div",mt,[t("div",bt,[t("div",xt,[t("div",pt,[u(i(q),{href:r.quarterly?`/business/strategy/quarterly/${r.quarterly.id}`:"/business/strategy",class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"},{default:m(()=>[u(i(et),{class:"w-5 h-5"})]),_:1},8,["href"]),t("div",null,[t("h1",yt,l(r.plan.title||`${C.value} ${r.plan.year}`),1),t("p",ft,l(r.plan.focus_area||"Oylik reja"),1)])]),t("div",vt,[t("span",{class:B(["px-3 py-1 rounded-full text-sm font-medium",T.value])},l(U.value),3),t("button",{onClick:e[0]||(e[0]=s=>_.value=!0),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"},[u(i(st),{class:"w-4 h-4 inline mr-1"}),e[13]||(e[13]=v(" Tahrirlash ",-1))])])]),t("div",ht,[t("div",_t,[e[14]||(e[14]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Oy progressi",-1)),t("span",wt,l(r.plan.completion_percent||0)+"%",1)]),t("div",kt,[t("div",{class:"h-full bg-indigo-600 rounded-full transition-all duration-500",style:O({width:`${r.plan.completion_percent||0}%`})},null,4)])]),t("div",jt,[t("div",$t,[t("div",St,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-500"},"Byudjet",-1)),u(i(lt),{class:"w-5 h-5 text-purple-500"})]),t("p",qt,l(Q(r.plan.budget)),1)]),t("div",Ct,[t("div",Vt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500"},"Postlar",-1)),u(i(ot),{class:"w-5 h-5 text-blue-500"})]),t("p",Mt,l(r.plan.posts_target||0),1)]),t("div",Bt,[t("div",Ot,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-500"},"Storiyalar",-1)),u(i(at),{class:"w-5 h-5 text-pink-500"})]),t("p",Ft,l(r.plan.stories_target||0),1)]),t("div",zt,[t("div",At,[e[18]||(e[18]=t("span",{class:"text-sm text-gray-500"},"Reelslar",-1)),u(i(nt),{class:"w-5 h-5 text-red-500"})]),t("p",Ht,l(r.plan.reels_target||0),1)]),t("div",Kt,[t("div",Nt,[e[19]||(e[19]=t("span",{class:"text-sm text-gray-500"},"Haftalar",-1)),u(i(z),{class:"w-5 h-5 text-amber-500"})]),t("p",Tt,l(r.weeks.length)+" / 4",1)])]),t("div",Ut,[t("div",Yt,[t("div",Dt,[t("div",Qt,[e[21]||(e[21]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Oy maqsadlari",-1)),t("button",{onClick:e[1]||(e[1]=s=>H.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(i(j),{class:"w-4 h-4 inline mr-1"}),e[20]||(e[20]=v(" Qo'shish ",-1))])]),r.plan.monthly_objectives?.length?(n(),d("div",Et,[(n(!0),d(b,null,x(r.plan.monthly_objectives,(s,c)=>(n(),F(tt,{key:c,goal:s,index:c,onToggle:S=>R(c),onDelete:S=>G(c)},null,8,["goal","index","onToggle","onDelete"]))),128))])):(n(),d("div",Lt," Hali oy maqsadlari yo'q "))]),t("div",Rt,[t("div",Gt,[e[23]||(e[23]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Haftalik rejalar",-1)),r.weeks.length<5?(n(),d("button",{key:0,onClick:M,class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(i(j),{class:"w-4 h-4 inline mr-1"}),e[22]||(e[22]=v(" Hafta qo'shish ",-1))])):w("",!0)]),t("div",It,[(n(!0),d(b,null,x(r.weeks,s=>(n(),F(i(q),{key:s.id,href:`/business/strategy/weekly/${s.id}`,class:"block p-4 rounded-lg border hover:shadow-md transition-shadow"},{default:m(()=>[t("div",Pt,[t("div",Wt,[t("span",Jt,"Hafta "+l(s.week_of_month),1),t("span",Xt,l(s.start_date)+" - "+l(s.end_date),1)]),t("span",{class:B(["px-2 py-0.5 rounded-full text-xs",E(s.status)])},l(L(s.status)),3)]),t("div",Zt,[t("div",te,[e[24]||(e[24]=t("p",{class:"text-xs text-gray-500"},"Vazifalar",-1)),t("p",ee,l(s.completed_tasks||0)+" / "+l(s.total_tasks||0),1)]),t("div",se,[e[25]||(e[25]=t("p",{class:"text-xs text-gray-500"},"Postlar",-1)),t("p",le,l(s.posts_published||0)+" / "+l(s.posts_planned||0),1)]),t("div",oe,[e[26]||(e[26]=t("p",{class:"text-xs text-gray-500"},"Progress",-1)),t("p",ae,l(s.completion_percent||0)+"%",1)])]),t("div",ne,[t("div",{class:"h-full bg-indigo-500 rounded-full",style:O({width:`${s.completion_percent||0}%`})},null,4)])]),_:2},1032,["href"]))),128)),r.weeks.length<5?(n(),d("div",{key:0,class:"p-4 rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center cursor-pointer hover:border-indigo-300 hover:bg-indigo-50 transition-colors",onClick:M},[t("div",re,[u(i(j),{class:"w-6 h-6 text-gray-400 mx-auto mb-1"}),e[27]||(e[27]=t("span",{class:"text-sm text-gray-500"},"Yangi hafta yaratish",-1))])])):w("",!0)])]),t("div",ie,[t("div",de,[e[29]||(e[29]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Kontent mavzulari",-1)),t("button",{onClick:e[2]||(e[2]=s=>K.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(i(j),{class:"w-4 h-4 inline mr-1"}),e[28]||(e[28]=v(" Qo'shish ",-1))])]),r.plan.content_themes?.length?(n(),d("div",ue,[(n(!0),d(b,null,x(r.plan.content_themes,(s,c)=>(n(),d("span",{key:c,class:"inline-flex items-center px-3 py-1.5 rounded-full bg-indigo-50 text-indigo-700 text-sm"},[v(l(s)+" ",1),t("button",{onClick:S=>I(c),class:"ml-2 text-indigo-400 hover:text-indigo-600"},[u(i(rt),{class:"w-4 h-4"})],8,ge)]))),128))])):(n(),d("div",ce," Kontent mavzulari yo'q "))])]),t("div",me,[t("div",be,[e[30]||(e[30]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Hafta bo'yicha rejalar",-1)),t("div",xe,[(n(!0),d(b,null,x(V.value,(s,c)=>(n(),d("div",{key:c,class:"p-3 bg-gray-50 rounded-lg"},[t("h4",pe,"Hafta "+l(c.replace("week","")),1),t("ul",ye,[(n(!0),d(b,null,x(s.slice(0,3),(S,W)=>(n(),d("li",{key:W,class:"truncate"},l(S),1))),128)),s.length>3?(n(),d("li",fe," +"+l(s.length-3)+" yana ",1)):w("",!0)])]))),128))]),Y.value?w("",!0):(n(),d("div",ve," Haftalik rejalar tuzilmagan "))]),u(i(q),{href:"/business/content-calendar",class:"block bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg border border-pink-200 p-6 hover:shadow-md transition-shadow"},{default:m(()=>[t("div",he,[u(i(it),{class:"w-8 h-8 text-pink-500 mr-3"}),e[31]||(e[31]=t("div",null,[t("h3",{class:"font-semibold text-gray-900"},"Kontent Kalendar"),t("p",{class:"text-sm text-gray-500"},"Kontentlarni rejalashtiring")],-1))]),t("div",_e,[t("span",we,l(D.value)+" ta kontent",1),e[32]||(e[32]=t("span",{class:"text-pink-600 font-medium"},"Ko'rish â†’",-1))])]),_:1}),t("div",ke,[t("div",je,[e[33]||(e[33]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Muhim voqealar",-1)),t("button",{onClick:e[3]||(e[3]=s=>N.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(i(j),{class:"w-4 h-4 inline"})])]),r.plan.key_events?.length?(n(),d("div",$e,[(n(!0),d(b,null,x(r.plan.key_events,(s,c)=>(n(),d("div",{key:c,class:"flex items-start space-x-3"},[t("div",Se,[u(i(z),{class:"w-5 h-5"})]),t("div",qe,[t("p",Ce,l(s.title),1),t("p",Ve,l(s.date),1)])]))),128))])):(n(),d("div",Me," Muhim voqealar yo'q "))]),r.plan.promotions?.length?(n(),d("div",Be,[e[34]||(e[34]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Aksiyalar",-1)),t("div",Oe,[(n(!0),d(b,null,x(r.plan.promotions,(s,c)=>(n(),d("div",{key:c,class:"p-3 bg-green-50 rounded-lg border border-green-200"},[t("h4",Fe,l(s.title),1),t("p",ze,l(s.description),1),t("p",Ae,l(s.dates),1)]))),128))])])):w("",!0)])])])]),u(i(ct),{appear:"",show:_.value,as:"template"},{default:m(()=>[u(i(dt),{as:"div",class:"relative z-50",onClose:e[12]||(e[12]=s=>_.value=!1)},{default:m(()=>[u(i(A),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>[...e[35]||(e[35]=[t("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),t("div",He,[t("div",Ke,[u(i(A),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[u(i(ut),{class:"w-full max-w-2xl bg-white rounded-xl shadow-xl p-6"},{default:m(()=>[u(i(gt),{class:"text-lg font-semibold text-gray-900 mb-4"},{default:m(()=>[...e[36]||(e[36]=[v(" Oylik rejani tahrirlash ",-1)])]),_:1}),t("form",{onSubmit:J(P,["prevent"]),class:"space-y-4"},[t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sarlavha",-1)),p(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>g.value.title=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.title]])]),t("div",null,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asosiy fokus",-1)),p(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>g.value.focus_area=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.focus_area]])]),t("div",Ne,[t("div",null,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Byudjet",-1)),p(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>g.value.budget=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.budget,void 0,{number:!0}]])]),t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Post maqsadi",-1)),p(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>g.value.posts_target=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.posts_target,void 0,{number:!0}]])])]),t("div",Te,[t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Story maqsadi",-1)),p(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>g.value.stories_target=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.stories_target,void 0,{number:!0}]])]),t("div",null,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reels maqsadi",-1)),p(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>g.value.reels_target=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[h,g.value.reels_target,void 0,{number:!0}]])])]),t("div",null,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),p(t("select",{"onUpdate:modelValue":e[10]||(e[10]=s=>g.value.status=s),class:"w-full rounded-lg border-gray-300"},[...e[43]||(e[43]=[t("option",{value:"draft"},"Qoralama",-1),t("option",{value:"planning"},"Rejalashtirish",-1),t("option",{value:"active"},"Faol",-1),t("option",{value:"completed"},"Yakunlangan",-1)])],512),[[X,g.value.status]])]),t("div",Ue,[t("button",{type:"button",onClick:e[11]||(e[11]=s=>_.value=!1),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"}," Bekor qilish "),t("button",{type:"submit",disabled:$.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},l($.value?"Saqlanmoqda...":"Saqlash"),9,Ye)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}};export{ss as default};
