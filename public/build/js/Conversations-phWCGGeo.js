import{r as e,w as t,C as s,L as a,A as o,x as l,y as r,z as n,B as i,F as c,G as u,H as m,I as d,D as p,J as h,K as g,E as v,v as b}from"./chunk-CpmtkKLp.js";import{h as x,l as f,r as y}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-DbFbpSR2.js";import{u as _}from"./app-C-ZlocOh.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const j={class:"py-12"},w={class:"max-w-8xl mx-auto sm:px-6 lg:px-8"},E={class:"mb-8 flex items-center justify-between"},S={class:"text-3xl font-bold text-gray-900"},N={class:"mt-2 text-gray-600"},A={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},C={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},T={class:"block text-sm font-medium text-gray-700 mb-1"},I={class:"block text-sm font-medium text-gray-700 mb-1"},R={value:"all"},O={value:"active"},U={value:"closed"},z={value:"archived"},M={class:"block text-sm font-medium text-gray-700 mb-1"},P={value:"all"},X={class:"block text-sm font-medium text-gray-700 mb-1"},H={value:"all"},D={class:"bg-white rounded-lg shadow-sm overflow-hidden"},L={class:"divide-y divide-gray-200"},V={class:"flex items-center justify-between"},F={class:"flex items-center space-x-4 flex-1"},q={class:"flex-shrink-0 text-2xl"},B={class:"flex-1 min-w-0"},Q={class:"flex items-center gap-3"},W={class:"text-lg font-semibold text-gray-900 truncate"},G={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},J={class:"mt-1 flex items-center gap-4 text-sm text-gray-500"},K={key:0},Y={key:1},Z={key:0,class:"mt-2 text-sm text-gray-600 truncate"},$={class:"flex-shrink-0 ml-4 text-right"},ee={class:"text-sm text-gray-500"},te={class:"mt-1 text-xs text-gray-400"},se={key:0,class:"mt-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},ae={key:0,class:"p-12 text-center text-gray-500"},oe={class:"mt-4"},le={key:0,class:"bg-white px-6 py-4 border-t border-gray-200"},re={class:"flex items-center justify-between"},ne={class:"text-sm text-gray-700"},ie={class:"font-medium"},ce={class:"font-medium"},ue={class:"font-medium"},me={class:"flex gap-2"},de={__name:"Conversations",props:{conversations:Object,filters:Object},setup(de){const{t:pe}=_(),he=de,ge=e({status:he.filters.status||"all",channel:he.filters.channel||"all",stage:he.filters.stage||"all",search:he.filters.search||""}),ve=()=>{y.get(route("business.customer-bot.conversations"),ge.value,{preserveState:!0,preserveScroll:!0})};t(()=>ge.value.search,e=>{(0===e.length||e.length>=3)&&ve()});const be={active:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",archived:"bg-yellow-100 text-yellow-800"},xe={telegram:"ðŸ“±",instagram:"ðŸ“·",facebook:"ðŸ‘¥"},fe={AWARENESS:"Xabardorlik",INTEREST:"Qiziqish",CONSIDERATION:"Mulohaza",INTENT:"Niyat",PURCHASE:"Xarid",POST_PURCHASE:"Xariddan keyin"};return(e,t)=>(p(),s(h,null,[a(o(x),{title:o(pe)("chatbot.conversations")},null,8,["title"]),a(k,{title:o(pe)("chatbot.conversations")},{default:l(()=>[r("div",j,[r("div",w,[r("div",E,[r("div",null,[r("h1",S,n(o(pe)("chatbot.conversations")),1),r("p",N,n(o(pe)("chatbot.all_conversations")),1)]),a(o(f),{href:e.route("business.customer-bot.settings"),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},{default:l(()=>[i(n(o(pe)("common.settings")),1)]),_:1},8,["href"])]),r("div",A,[r("div",C,[r("div",null,[r("label",T,n(o(pe)("common.search")),1),c(r("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>ge.value.search=e),placeholder:"Ism, email, telefon...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[u,ge.value.search]])]),r("div",null,[r("label",I,n(o(pe)("common.status")),1),c(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>ge.value.status=e),onChange:ve,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[r("option",R,n(o(pe)("common.all")),1),r("option",O,n(o(pe)("common.active")),1),r("option",U,n(o(pe)("chatbot.closed")),1),r("option",z,n(o(pe)("chatbot.archived")),1)],544),[[m,ge.value.status]])]),r("div",null,[r("label",M,n(o(pe)("analytics.channel")),1),c(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>ge.value.channel=e),onChange:ve,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[r("option",P,n(o(pe)("common.all")),1),t[4]||(t[4]=r("option",{value:"telegram"},"Telegram",-1)),t[5]||(t[5]=r("option",{value:"instagram"},"Instagram",-1)),t[6]||(t[6]=r("option",{value:"facebook"},"Facebook",-1))],544),[[m,ge.value.channel]])]),r("div",null,[r("label",X,n(o(pe)("chatbot.stage")),1),c(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>ge.value.stage=e),onChange:ve,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[r("option",H,n(o(pe)("common.all")),1),t[7]||(t[7]=r("option",{value:"AWARENESS"},"Xabardorlik",-1)),t[8]||(t[8]=r("option",{value:"INTEREST"},"Qiziqish",-1)),t[9]||(t[9]=r("option",{value:"CONSIDERATION"},"Mulohaza",-1)),t[10]||(t[10]=r("option",{value:"INTENT"},"Niyat",-1)),t[11]||(t[11]=r("option",{value:"PURCHASE"},"Xarid",-1)),t[12]||(t[12]=r("option",{value:"POST_PURCHASE"},"Xariddan keyin",-1))],544),[[m,ge.value.stage]])])])]),r("div",D,[r("ul",L,[(p(!0),s(h,null,g(de.conversations.data,t=>(p(),s("li",{key:t.id,class:"hover:bg-gray-50 transition-colors"},[a(o(f),{href:e.route("business.customer-bot.conversation",t.id),class:"block p-6"},{default:l(()=>{return[r("div",V,[r("div",F,[r("div",q,n(xe[t.channel]||"ðŸ’¬"),1),r("div",B,[r("div",Q,[r("p",W,n(t.customer_name||"Anonim"),1),r("span",{class:v(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",be[t.status]])},n("active"===t.status?"Faol":"closed"===t.status?"Yopilgan":"Arxiv"),3),t.handed_off?(p(),s("span",G," Operatorda ")):d("",!0)]),r("div",J,[t.customer_email?(p(),s("span",K,n(t.customer_email),1)):d("",!0),t.customer_phone?(p(),s("span",Y,n(t.customer_phone),1)):d("",!0),r("span",null,n(t.messages_count)+" xabar",1)]),t.messages&&t.messages.length>0?(p(),s("p",Z,n(t.messages[0].content),1)):d("",!0)])]),r("div",$,[r("p",ee,n((e=t.updated_at,new Date(e).toLocaleString("uz-UZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))),1),r("p",te,n(fe[t.current_stage]||t.current_stage),1),t.lead_id?(p(),s("p",se," Lid ")):d("",!0)])])];var e}),_:2},1032,["href"])]))),128)),0===de.conversations.data.length?(p(),s("li",ae,[t[13]||(t[13]=r("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),r("p",oe,n(o(pe)("chatbot.no_conversations")),1)])):d("",!0)]),de.conversations.data.length>0?(p(),s("div",le,[r("div",re,[r("div",ne,[r("span",ie,n(de.conversations.from),1),t[14]||(t[14]=i(" - ",-1)),r("span",ce,n(de.conversations.to),1),t[15]||(t[15]=i(" dan ",-1)),r("span",ue,n(de.conversations.total),1),t[16]||(t[16]=i(" ta ",-1))]),r("div",me,[de.conversations.prev_page_url?(p(),b(o(f),{key:0,href:de.conversations.prev_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:l(()=>[i(n(o(pe)("common.previous")),1)]),_:1},8,["href"])):d("",!0),de.conversations.next_page_url?(p(),b(o(f),{key:1,href:de.conversations.next_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:l(()=>[i(n(o(pe)("common.next")),1)]),_:1},8,["href"])):d("",!0)])])])):d("",!0)])])])]),_:1},8,["title"])],64))}};export{de as default};
