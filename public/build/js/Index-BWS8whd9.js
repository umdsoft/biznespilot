import{r as e,o as t,v as s,x as a,y as l,C as o,I as r,L as i,z as n,A as c,D as u,B as d,J as m,K as h,E as p,N as x,F as y,Y as g,G as v,p as b}from"./chunk-CpmtkKLp.js";import{l as k,a as f}from"./chunk-BhZp3z4u.js";import{_ as w}from"./chunk-DbFbpSR2.js";import{_ as j}from"./chunk-CXyF54xA.js";import{u as _}from"./app-C-ZlocOh.js";import{_ as C}from"./chunk-BCo6x5W8.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const K={class:"flex flex-col h-[calc(100vh-12rem)]"},M={class:"mb-4 flex items-center justify-between"},A={class:"text-2xl font-bold text-gray-900"},q={class:"text-sm text-gray-600 mt-1"},z={key:0,class:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},B={class:"flex items-start"},I={class:"text-sm font-medium text-yellow-800"},T={class:"mt-1 text-sm text-yellow-700"},G={key:0,class:"text-center py-12"},L={class:"text-lg font-semibold text-gray-900 mb-2"},H={class:"text-gray-600 max-w-md mx-auto"},J={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto"},P=["onClick"],S={class:"whitespace-pre-line text-sm"},V={key:0,class:"ml-2"},D={key:1,class:"flex justify-start"},E={class:"border-t border-gray-200 p-4"},F={class:"flex-1"},N=["onKeydown","disabled","placeholder"],O={class:"text-xs text-gray-500 mt-1"},R=["disabled"],U=C({__name:"Index",props:{messages:Array,hasApiKey:Boolean},setup(C){const{t:U}=_(),Y=C,$=e([...Y.messages]),Q=e(""),W=e(!1),X=e(null),Z=["Ideal Mijoz qanday yaratish kerak?","Ijtimoiy tarmoqlarda marketing strategiyasi","Raqobatchilardan qanday ajralib turish mumkin?","Konversiyani oshirish usullari"],ee=()=>{b(()=>{X.value&&(X.value.scrollTop=X.value.scrollHeight)})},te=async()=>{if(!Q.value.trim()||!Y.hasApiKey||W.value)return;const e=Q.value.trim();Q.value="",W.value=!0;try{const t=await f.post(route("business.chatbot.send"),{message:e});t.data.success&&($.value.push(t.data.userMessage),ee(),setTimeout(()=>{$.value.push(t.data.assistantMessage),ee()},300))}catch(t){alert(t.response?.data?.error||U("common.error"))}finally{W.value=!1}},se=async()=>{if(confirm(U("chatbot.confirm_clear")))try{await f.delete(route("business.chatbot.clear")),$.value=[]}catch(e){alert(U("common.error"))}};return t(()=>{ee()}),(e,t)=>(u(),s(w,{title:c(U)("chatbot.ai_chatbot")},{default:a(()=>[l("div",K,[l("div",M,[l("div",null,[l("h1",A,n(c(U)("chatbot.ai_marketing_advisor")),1),l("p",q,n(c(U)("chatbot.business_marketing_help")),1)]),$.value.length>0?(u(),o("button",{key:0,onClick:se,class:"px-4 py-2 text-sm text-red-600 hover:text-red-700 font-medium"},n(c(U)("chatbot.clear_history")),1)):r("",!0)]),C.hasApiKey?r("",!0):(u(),o("div",z,[l("div",B,[t[2]||(t[2]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),l("div",null,[l("h3",I,n(c(U)("chatbot.api_key_required")),1),l("p",T,n(c(U)("chatbot.api_key_message")),1),i(c(k),{href:e.route("business.settings.index"),class:"mt-3 inline-flex items-center text-sm font-medium text-yellow-800 hover:text-yellow-900"},{default:a(()=>[d(n(c(U)("chatbot.go_to_settings"))+" ",1),t[1]||(t[1]=l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["href"])])])])),i(j,{class:"flex-1 flex flex-col overflow-hidden"},{default:a(()=>[l("div",{ref_key:"messagesContainer",ref:X,class:"flex-1 overflow-y-auto p-4 space-y-4"},[0===$.value.length&&C.hasApiKey?(u(),o("div",G,[t[3]||(t[3]=l("div",{class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])],-1)),l("h3",L,n(c(U)("chatbot.greeting")),1),l("p",H,n(c(U)("chatbot.welcome_message")),1),l("div",J,[(u(),o(m,null,h(Z,e=>l("button",{key:e,onClick:t=>(e=>{Q.value=e,te()})(e),class:"px-4 py-3 text-left text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},n(e),9,P)),64))])])):r("",!0),(u(!0),o(m,null,h($.value,e=>{return u(),o("div",{key:e.id,class:p(["flex","user"===e.role?"justify-end":"justify-start"])},[l("div",{class:p(["max-w-[70%] rounded-lg px-4 py-3","user"===e.role?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"])},[l("div",S,n(e.message),1),l("div",{class:p(["text-xs mt-1 flex items-center justify-between","user"===e.role?"text-blue-100":"text-gray-500"])},[l("span",null,n(e.created_at),1),e.ai_model&&"assistant"===e.role?(u(),o("span",V,n((t=e.ai_model,t.includes("gpt-4")?"GPT-4":t.includes("gpt-3.5")?"GPT-3.5":t.includes("claude-3-opus")?"Claude 3 Opus":t.includes("claude-3-sonnet")?"Claude 3 Sonnet":t)),1)):r("",!0)],2)],2)],2);var t}),128)),W.value?(u(),o("div",D,[...t[4]||(t[4]=[l("div",{class:"bg-gray-100 rounded-lg px-4 py-3"},[l("div",{class:"flex space-x-2"},[l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),l("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})])],-1)])])):r("",!0)],512),l("div",E,[l("form",{onSubmit:x(te,["prevent"]),class:"flex items-end space-x-3"},[l("div",F,[y(l("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>Q.value=e),onKeydown:g(x(te,["exact","prevent"]),["enter"]),rows:"1",disabled:!C.hasApiKey||W.value,class:"input resize-none",placeholder:c(U)("chatbot.type_question"),style:{"min-height":"44px","max-height":"120px"}},null,40,N),[[v,Q.value]]),l("p",O,n(c(U)("chatbot.enter_to_send")),1)]),l("button",{type:"submit",disabled:!Q.value.trim()||!C.hasApiKey||W.value,class:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0"},[...t[5]||(t[5]=[l("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,R)],32)])]),_:1})])]),_:1},8,["title"]))}},[["__scopeId","data-v-c9d3109a"]]);export{U as default};
