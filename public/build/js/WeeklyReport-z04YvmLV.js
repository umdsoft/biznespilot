import{r as b,o as T,w as E,b as z,v as I,x as K,y as W,z as t,A as N,D as r,E as a,H as o,F as d,L as f,I as m,G as c,K as F,B as u,C as p,W as v,S as O}from"./chunk-BcTZxe-J.js";import{h as $,a as B}from"./chunk-BYRtWSr0.js";import{_ as U}from"./chunk-Dd--AZOj.js";import"./chunk-CYarSvys.js";import"./app-DWC75jbx.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},P={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-red-800"},R={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},G={class:"mt-4 md:mt-0"},Z=["value"],D={key:0,class:"flex justify-center py-12"},Q={class:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg shadow-lg p-6 mb-8 text-white"},X={class:"flex items-center justify-between"},tt={class:"text-2xl font-bold"},et={class:"text-indigo-200 text-sm mt-1"},st={class:"text-right"},ot={class:"text-3xl font-bold"},lt={class:"border-b border-gray-200 mb-6"},at={class:"flex -mb-px overflow-x-auto"},rt=["onClick"],nt={class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},it=["d"],dt={key:0,class:"ml-1 flex h-2 w-2"},ct={class:"space-y-6"},ut={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},xt={class:"bg-white rounded-lg shadow p-4"},gt={class:"text-2xl font-bold text-gray-900"},pt={class:"bg-white rounded-lg shadow p-4"},mt={class:"text-2xl font-bold text-green-600"},vt={class:"bg-white rounded-lg shadow p-4"},yt={class:"text-2xl font-bold text-red-600"},_t={class:"bg-white rounded-lg shadow p-4"},ht={class:"text-2xl font-bold text-indigo-600"},bt={class:"bg-white rounded-lg shadow p-4"},ft={class:"text-2xl font-bold text-gray-900"},wt={key:0,class:"bg-white rounded-lg shadow p-6"},kt={class:"grid grid-cols-4 gap-4"},Mt={class:"text-sm text-gray-500 mb-2"},zt={class:"space-y-2"},Ct={class:"text-lg font-bold text-gray-900"},qt={class:"text-lg font-bold text-indigo-600"},Ht={class:"text-sm font-medium text-green-600"},jt={class:"space-y-6"},Bt={class:"bg-white rounded-lg shadow overflow-hidden"},At={class:"overflow-x-auto"},St={class:"min-w-full divide-y divide-gray-200"},Vt={class:"bg-white divide-y divide-gray-200"},Yt={class:"px-6 py-4 whitespace-nowrap"},Lt={class:"font-medium text-gray-900"},Tt={class:"text-xs text-gray-500"},Et={class:"px-6 py-4 text-center text-sm text-gray-900"},It={class:"px-6 py-4 text-center text-sm text-green-600 font-medium"},Kt={class:"px-6 py-4 text-center text-sm text-red-600 font-medium"},Wt={class:"px-6 py-4 text-center"},Nt={class:"px-6 py-4 text-right text-sm font-medium text-gray-900"},Ft={key:0,class:"bg-white rounded-lg shadow p-6"},Ot={class:"space-y-4"},$t={class:"font-medium text-gray-700 mb-2"},Ut={class:"flex flex-wrap gap-2"},Jt={class:"space-y-6"},Pt={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rt={class:"bg-green-50 rounded-lg p-6 border border-green-200"},Gt={class:"space-y-3"},Zt={class:"flex items-center gap-3"},Dt={class:"w-6 h-6 flex items-center justify-center rounded-full bg-green-200 text-green-800 text-sm font-bold"},Qt={class:"font-medium"},Xt={class:"text-xs text-gray-500"},te={class:"text-right"},ee={class:"text-green-600 font-bold"},se={class:"text-xs text-gray-500"},oe={key:0,class:"bg-red-50 rounded-lg p-6 border border-red-200"},le={class:"space-y-3"},ae={class:"flex items-center gap-3"},re={class:"w-6 h-6 flex items-center justify-center rounded-full bg-red-200 text-red-800 text-sm font-bold"},ne={class:"font-medium"},ie={class:"text-right"},de={class:"text-red-600 font-bold"},ce={class:"text-xs text-gray-500"},ue={key:1,class:"bg-gray-50 rounded-lg p-6 text-center text-gray-500"},xe={class:"bg-white rounded-lg shadow overflow-hidden"},ge={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200"},me={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap"},ye={class:"flex items-center"},_e={class:"h-10 w-10 flex-shrink-0 rounded-full bg-indigo-100 flex items-center justify-center"},he={class:"text-indigo-600 font-medium"},be={class:"ml-4"},fe={class:"text-sm font-medium text-gray-900"},we={class:"px-6 py-4 text-center text-sm text-gray-900"},ke={class:"px-6 py-4 text-center text-sm text-green-600 font-medium"},Me={class:"px-6 py-4 text-center"},ze={class:"px-6 py-4 text-right text-sm font-medium text-gray-900"},Ce={class:"px-6 py-4 text-center text-sm text-gray-500"},qe={class:"px-6 py-4 text-sm text-gray-900"},He={class:"space-y-6"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Be={class:"bg-red-50 rounded-lg p-6 border border-red-200"},Ae={class:"text-3xl font-bold text-red-700"},Se={class:"bg-orange-50 rounded-lg p-6 border border-orange-200"},Ve={class:"text-3xl font-bold text-orange-700"},Ye={class:"bg-yellow-50 rounded-lg p-6 border border-yellow-200"},Le={class:"text-xl font-bold text-yellow-700"},Te={class:"text-xs text-yellow-500"},Ee={class:"bg-white rounded-lg shadow p-6"},Ie={class:"space-y-4"},Ke={class:"flex justify-between items-center mb-2"},We={class:"font-medium text-gray-900"},Ne={class:"text-right"},Fe={class:"text-sm text-gray-500"},Oe={class:"w-full bg-gray-200 rounded-full h-3"},$e={class:"mt-2 text-sm text-gray-600"},Ue={class:"space-y-6"},Je={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Pe={class:"bg-green-50 rounded-lg p-4 border border-green-200"},Re={class:"text-lg font-bold text-green-800"},Ge={class:"bg-red-50 rounded-lg p-4 border border-red-200"},Ze={class:"text-lg font-bold text-red-800"},De={class:"bg-green-50 rounded-lg p-4 border border-green-200"},Qe={class:"text-lg font-bold text-green-800"},Xe={class:"bg-red-50 rounded-lg p-4 border border-red-200"},ts={class:"text-lg font-bold text-red-800"},es={class:"bg-white rounded-lg shadow p-6"},ss={class:"grid grid-cols-7 gap-2"},os={class:"text-sm font-medium text-gray-700"},ls={class:"text-lg font-bold text-gray-900"},as={class:"bg-white rounded-lg shadow p-6"},rs={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ns={class:"text-sm font-medium text-gray-700"},is={class:"text-2xl font-bold text-gray-900"},ds={class:"text-xs text-gray-500"},cs={class:"space-y-6"},us={key:0,class:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-8 text-center border border-purple-200"},xs=["disabled"],gs={key:0,class:"flex items-center gap-2"},ps={key:1},ms={class:"text-sm text-gray-500 mb-4"},vs={class:"bg-green-50 rounded-lg p-6 border border-green-200"},ys={class:"space-y-2"},_s={class:"bg-red-50 rounded-lg p-6 border border-red-200"},hs={class:"space-y-2"},bs={class:"bg-blue-50 rounded-lg p-6 border border-blue-200"},fs={class:"space-y-2 list-decimal list-inside"},ws={class:"bg-purple-50 rounded-lg p-6 border border-purple-200"},ks={class:"text-purple-800 text-lg"},Ps={__name:"WeeklyReport",props:{weeks:{type:Array,default:()=>[]},currentWeekStart:{type:String,default:()=>new Date().toISOString().split("T")[0]},error:{type:String,default:null}},setup(w){const A=w,M=b(!0),y=b(!1),l=b(null),_=b(A.currentWeekStart),x=b("summary"),S=[{key:"summary",label:"Umumiy",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{key:"channels",label:"Kanallar",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"},{key:"operators",label:"Operatorlar",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{key:"lost",label:"Yo'qotilgan",icon:"M6 18L18 6M6 6l12 12"},{key:"time",label:"Vaqt",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{key:"ai",label:"AI Tahlil",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"}],C=async()=>{M.value=!0;try{const n=_.value?route("business.analytics.api.weekly-report",{weekStart:_.value}):route("business.analytics.api.weekly-report"),e=await B.get(n);l.value=e.data}catch(n){console.error("Failed to fetch weekly report:",n),l.value=null}finally{M.value=!1}},V=async()=>{if(!(!l.value?.id||y.value)){y.value=!0;try{const n=await B.post(route("business.analytics.api.weekly-report.ai",{id:l.value.id}));n.data.success&&(l.value.ai=n.data.ai)}catch(n){console.error("Failed to generate AI analysis:",n)}finally{y.value=!1}}};T(()=>{C()}),E(_,()=>{C()});const g=n=>n?new Intl.NumberFormat("uz-UZ").format(n):"0",Y=n=>{if(!n)return"-";if(n<60)return`${n} daqiqa`;const e=Math.floor(n/60),s=n%60;return`${e}s ${s}d`},h=n=>n?typeof n=="string"?n.startsWith("+")?"text-green-600":n.startsWith("-")?"text-red-600":"text-gray-500":n>0?"text-green-600":n<0?"text-red-600":"text-gray-500":"text-gray-500",q=(n,e)=>e?n>=e*1.2?"text-green-600 bg-green-50":n>=e?"text-blue-600 bg-blue-50":n>=e*.8?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50":"text-gray-600 bg-gray-50",k=z(()=>l.value?.summary?.conversion_rate||0),L=z(()=>l.value?.operators?.length?l.value.operators.slice(0,3):[]),H=z(()=>l.value?.operators?.length?l.value.operators.length<=3?[]:[...l.value.operators].reverse().slice(0,3):[]);return(n,e)=>(a(),I(U,{title:"Haftalik Hisobot"},{default:K(()=>[W(N($),{title:"Haftalik Hisobot"}),t("div",J,[w.error?(a(),r("div",P,o(w.error),1)):(a(),r(d,{key:1},[t("div",R,[e[1]||(e[1]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"Haftalik Hisobot"),t("p",{class:"mt-1 text-sm text-gray-500"},"Biznesingizning haftalik natijalarini ko'ring")],-1)),t("div",G,[m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>_.value=s),class:"block w-full md:w-auto rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[(a(!0),r(d,null,c(w.weeks,s=>(a(),r("option",{key:s.week_start,value:s.week_start},o(s.week_label)+" "+o(s.has_ai?"(AI)":""),9,Z))),128))],512),[[F,_.value]])])]),M.value?(a(),r("div",D,[...e[2]||(e[2]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):l.value?(a(),r(d,{key:1},[t("div",Q,[t("div",X,[t("div",null,[e[3]||(e[3]=t("p",{class:"text-indigo-200 text-sm"},"Hafta",-1)),t("h2",tt,o(l.value.week_label),1),t("p",et,o(l.value.week_start)+" - "+o(l.value.week_end),1)]),t("div",st,[e[4]||(e[4]=t("p",{class:"text-indigo-200 text-sm"},"Umumiy daromad",-1)),t("p",ot,o(g(l.value.summary?.total_revenue)),1),t("p",{class:u(["text-sm",h(l.value.summary?.vs_last_week?.revenue)])},o(l.value.summary?.vs_last_week?.revenue)+" o'tgan haftaga nisbatan ",3)])])]),t("div",lt,[t("nav",at,[(a(),r(d,null,c(S,s=>t("button",{key:s.key,onClick:i=>x.value=s.key,class:u(["flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",x.value===s.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(a(),r("svg",nt,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:s.icon},null,8,it)])),p(" "+o(s.label)+" ",1),s.key==="ai"&&l.value.ai?.has_analysis?(a(),r("span",dt,[...e[5]||(e[5]=[t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)])])):f("",!0)],10,rt)),64))])]),m(t("div",ct,[t("div",ut,[t("div",xt,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500"},"Jami lidlar",-1)),t("p",gt,o(l.value.summary?.total_leads),1),t("p",{class:u(["text-xs",h(l.value.summary?.vs_last_week?.leads)])},o(l.value.summary?.vs_last_week?.leads),3)]),t("div",pt,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500"},"Yutilgan",-1)),t("p",mt,o(l.value.summary?.won),1)]),t("div",vt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500"},"Yo'qotilgan",-1)),t("p",yt,o(l.value.summary?.lost),1)]),t("div",_t,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500"},"Konversiya",-1)),t("p",ht,o(l.value.summary?.conversion_rate)+"%",1),t("p",{class:u(["text-xs",h(l.value.summary?.vs_last_week?.conversion)])},o(l.value.summary?.vs_last_week?.conversion>0?"+":"")+o(l.value.summary?.vs_last_week?.conversion)+"% ",3)]),t("div",bt,[e[10]||(e[10]=t("p",{class:"text-sm text-gray-500"},"O'rtacha chek",-1)),t("p",ft,o(g(l.value.summary?.avg_deal_value)),1)])]),l.value.trends?.weeks?.length?(a(),r("div",wt,[e[14]||(e[14]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"4 haftalik trend",-1)),t("div",kt,[(a(!0),r(d,null,c(l.value.trends.weeks,(s,i)=>(a(),r("div",{key:s,class:"text-center"},[t("p",Mt,o(s),1),t("div",zt,[t("div",null,[t("p",Ct,o(l.value.trends.leads[i]),1),e[11]||(e[11]=t("p",{class:"text-xs text-gray-500"},"lid",-1))]),t("div",null,[t("p",qt,o(l.value.trends.conversion[i])+"%",1),e[12]||(e[12]=t("p",{class:"text-xs text-gray-500"},"konversiya",-1))]),t("div",null,[t("p",Ht,o(g(l.value.trends.revenue[i])),1),e[13]||(e[13]=t("p",{class:"text-xs text-gray-500"},"so'm",-1))])])]))),128))])])):f("",!0)],512),[[v,x.value==="summary"]]),m(t("div",jt,[t("div",Bt,[e[16]||(e[16]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Marketing kanallar")],-1)),t("div",At,[t("table",St,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kanal"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Lidlar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yutilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yo'qotilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Konversiya"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Daromad"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"vs o'tgan hafta")])],-1)),t("tbody",Vt,[(a(!0),r(d,null,c(l.value.channels,s=>(a(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",Yt,[t("div",Lt,o(s.name),1),t("div",Tt,o(s.type),1)]),t("td",Et,o(s.leads),1),t("td",It,o(s.won),1),t("td",Kt,o(s.lost),1),t("td",Wt,[t("span",{class:u(["px-2 py-1 text-sm font-bold rounded",q(s.conversion,k.value)])},o(s.conversion)+"% ",3)]),t("td",Nt,o(g(s.revenue)),1),t("td",{class:u(["px-6 py-4 text-center text-sm",h(s.vs_last_week)])},o(s.vs_last_week>0?"+":"")+o(s.vs_last_week)+"% ",3)]))),128))])])])]),l.value.channels?.length?(a(),r("div",Ft,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Kanal bo'yicha yo'qotish sabablari",-1)),t("div",Ot,[(a(!0),r(d,null,c(l.value.channels?.filter(s=>Object.keys(s.lost_reasons||{}).length),s=>(a(),r("div",{key:s.id},[t("p",$t,o(s.name),1),t("div",Ut,[(a(!0),r(d,null,c(s.lost_reasons,(i,j)=>(a(),r("span",{key:j,class:"px-2 py-1 text-xs bg-red-50 text-red-700 rounded"},o(j)+": "+o(i),1))),128))])]))),128))])])):f("",!0)],512),[[v,x.value==="channels"]]),m(t("div",Jt,[l.value.operators?.length>0?(a(),r("div",Pt,[t("div",Rt,[e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-green-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),p(" Eng yaxshilar ")],-1)),t("div",Gt,[(a(!0),r(d,null,c(L.value,(s,i)=>(a(),r("div",{key:s.id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[t("div",Zt,[t("span",Dt,o(i+1),1),t("div",null,[t("span",Qt,o(s.name),1),t("p",Xt,"Eng yaxshi kanal: "+o(s.best_channel||"-"),1)])]),t("div",te,[t("span",ee,o(s.conversion)+"%",1),t("p",se,o(g(s.revenue))+" so'm",1)])]))),128))])]),H.value.length>0?(a(),r("div",oe,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),p(" Yordam kerak ")],-1)),t("div",le,[(a(!0),r(d,null,c(H.value,(s,i)=>(a(),r("div",{key:s.id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[t("div",ae,[t("span",re,o(i+1),1),t("span",ne,o(s.name),1)]),t("div",ie,[t("span",de,o(s.conversion)+"%",1),t("p",ce,o(s.lost)+" yo'qotilgan",1)])]))),128))])])):f("",!0)])):(a(),r("div",ue," Bu hafta uchun operator ma'lumotlari mavjud emas ")),t("div",xe,[e[21]||(e[21]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-medium text-gray-900"},"Barcha operatorlar")],-1)),t("div",ge,[t("table",pe,[e[20]||(e[20]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Operator"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Lidlar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yutilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Konversiya"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Daromad"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Javob vaqti"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Eng yaxshi kanal")])],-1)),t("tbody",me,[(a(!0),r(d,null,c(l.value.operators,s=>(a(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",ve,[t("div",ye,[t("div",_e,[t("span",he,o(s.name?.charAt(0)),1)]),t("div",be,[t("div",fe,o(s.name),1)])])]),t("td",we,o(s.leads),1),t("td",ke,o(s.won),1),t("td",Me,[t("span",{class:u(["px-2 py-1 text-sm font-bold rounded",q(s.conversion,k.value)])},o(s.conversion)+"% ",3)]),t("td",ze,o(g(s.revenue)),1),t("td",Ce,o(Y(s.avg_response_minutes)),1),t("td",qe,o(s.best_channel||"-"),1)]))),128))])])])])],512),[[v,x.value==="operators"]]),m(t("div",He,[t("div",je,[t("div",Be,[e[22]||(e[22]=t("p",{class:"text-sm font-medium text-red-600"},"Jami yo'qotilgan",-1)),t("p",Ae,o(l.value.lost_reasons?.total_lost),1)]),t("div",Se,[e[23]||(e[23]=t("p",{class:"text-sm font-medium text-orange-600"},"Yo'qotilgan qiymat",-1)),t("p",Ve,o(g(l.value.lost_reasons?.total_value_lost)),1),e[24]||(e[24]=t("p",{class:"text-xs text-orange-500"},"so'm",-1))]),t("div",Ye,[e[25]||(e[25]=t("p",{class:"text-sm font-medium text-yellow-600"},"Asosiy sabab",-1)),t("p",Le,o(l.value.lost_reasons?.reasons?.[0]?.label||"-"),1),t("p",Te,o(l.value.lost_reasons?.reasons?.[0]?.percentage)+"%",1)])]),t("div",Ee,[e[26]||(e[26]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Yo'qotish sabablari",-1)),t("div",Ie,[(a(!0),r(d,null,c(l.value.lost_reasons?.reasons,s=>(a(),r("div",{key:s.reason,class:"p-4 bg-gray-50 rounded-lg"},[t("div",Ke,[t("h4",We,o(s.label),1),t("div",Ne,[t("span",Fe,o(s.count)+" lid ("+o(s.percentage)+"%)",1),t("span",{class:u(["ml-2 text-xs",h(s.vs_last_week)])},o(s.vs_last_week>0?"+":"")+o(s.vs_last_week)+"% ",3)])]),t("div",Oe,[t("div",{class:"bg-red-500 h-3 rounded-full transition-all",style:O({width:s.percentage+"%"})},null,4)]),t("p",$e,"Yo'qotilgan qiymat: "+o(g(s.value_lost))+" so'm",1)]))),128))])])],512),[[v,x.value==="lost"]]),m(t("div",Ue,[t("div",Je,[t("div",Pe,[e[27]||(e[27]=t("p",{class:"text-xs text-green-600 uppercase"},"Eng yaxshi kun",-1)),t("p",Re,o(l.value.time_stats?.by_day?.[l.value.time_stats?.best_day]?.label),1)]),t("div",Ge,[e[28]||(e[28]=t("p",{class:"text-xs text-red-600 uppercase"},"Eng yomon kun",-1)),t("p",Ze,o(l.value.time_stats?.by_day?.[l.value.time_stats?.worst_day]?.label),1)]),t("div",De,[e[29]||(e[29]=t("p",{class:"text-xs text-green-600 uppercase"},"Eng yaxshi vaqt",-1)),t("p",Qe,o(l.value.time_stats?.by_hour?.[l.value.time_stats?.best_hour]?.label),1)]),t("div",Xe,[e[30]||(e[30]=t("p",{class:"text-xs text-red-600 uppercase"},"Eng yomon vaqt",-1)),t("p",ts,o(l.value.time_stats?.by_hour?.[l.value.time_stats?.worst_hour]?.label),1)])]),t("div",es,[e[32]||(e[32]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Hafta kunlari bo'yicha",-1)),t("div",ss,[(a(!0),r(d,null,c(l.value.time_stats?.by_day,(s,i)=>(a(),r("div",{key:i,class:u(["text-center p-3 rounded-lg",i===l.value.time_stats?.best_day?"bg-green-50 border-2 border-green-300":"bg-gray-50"])},[t("p",os,o(s.label),1),t("p",ls,o(s.leads),1),e[31]||(e[31]=t("p",{class:"text-xs text-gray-500"},"lid",-1)),t("p",{class:u(["text-sm font-bold",s.conversion>=k.value?"text-green-600":"text-red-600"])},o(s.conversion)+"%",3)],2))),128))])]),t("div",as,[e[34]||(e[34]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Soatlar bo'yicha",-1)),t("div",rs,[(a(!0),r(d,null,c(l.value.time_stats?.by_hour,(s,i)=>(a(),r("div",{key:i,class:u(["text-center p-4 rounded-lg",i===l.value.time_stats?.best_hour?"bg-green-50 border-2 border-green-300":"bg-gray-50"])},[t("p",ns,o(s.label),1),t("p",is,o(s.leads),1),e[33]||(e[33]=t("p",{class:"text-xs text-gray-500"},"lid",-1)),t("p",{class:u(["text-lg font-bold",s.conversion>=k.value?"text-green-600":"text-red-600"])},o(s.conversion)+"%",3),t("p",ds,o(s.won)+" yutilgan",1)],2))),128))])])],512),[[v,x.value==="time"]]),m(t("div",cs,[l.value.ai?.has_analysis?(a(),r(d,{key:1},[t("div",ms," Yaratilgan: "+o(l.value.ai.generated_at)+" | Tokenlar: "+o(l.value.ai.tokens_used),1),t("div",vs,[e[39]||(e[39]=t("h3",{class:"text-lg font-semibold text-green-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),p(" Yaxshi natijalar ")],-1)),t("ul",ys,[(a(!0),r(d,null,c(l.value.ai.good_results,(s,i)=>(a(),r("li",{key:i,class:"text-green-800"},o(s),1))),128))])]),t("div",_s,[e[40]||(e[40]=t("h3",{class:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),p(" Muammolar ")],-1)),t("ul",hs,[(a(!0),r(d,null,c(l.value.ai.problems,(s,i)=>(a(),r("li",{key:i,class:"text-red-800"},o(s),1))),128))])]),t("div",bs,[e[41]||(e[41]=t("h3",{class:"text-lg font-semibold text-blue-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})]),p(" Tavsiyalar ")],-1)),t("ol",fs,[(a(!0),r(d,null,c(l.value.ai.recommendations,(s,i)=>(a(),r("li",{key:i,class:"text-blue-800"},o(s),1))),128))])]),t("div",ws,[e[42]||(e[42]=t("h3",{class:"text-lg font-semibold text-purple-800 mb-4 flex items-center gap-2"},[t("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),p(" Keyingi hafta maqsadi ")],-1)),t("p",ks,o(l.value.ai.next_week_goal),1)])],64)):(a(),r("div",us,[e[36]||(e[36]=t("svg",{class:"mx-auto h-16 w-16 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),e[37]||(e[37]=t("h3",{class:"mt-4 text-xl font-semibold text-gray-900"},"AI Tahlil",-1)),e[38]||(e[38]=t("p",{class:"mt-2 text-gray-600"},"Sun'iy intellekt yordamida haftalik natijalarni tahlil qiling",-1)),t("button",{onClick:V,disabled:y.value,class:"mt-6 px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[y.value?(a(),r("span",gs,[...e[35]||(e[35]=[t("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),p(" Tahlil qilinmoqda... ",-1)])])):(a(),r("span",ps,"AI Tahlil yaratish"))],8,xs)]))],512),[[v,x.value==="ai"]])],64)):f("",!0)],64))])]),_:1}))}};export{Ps as default};
