import{r as e,w as t,C as l,L as s,A as a,x as r,y as o,F as i,G as n,D as u,J as c,K as d,z as p,H as x,I as b,v as m,O as h,E as g,B as f}from"./chunk-CpmtkKLp.js";import{h as v,l as k,r as y}from"./chunk-BhZp3z4u.js";import{_ as w}from"./chunk-DbFbpSR2.js";import{u as j}from"./app-C-ZlocOh.js";import{r as _}from"./chunk-BuJDoypK.js";import{r as C}from"./chunk-yvcCPqrN.js";import{r as q}from"./chunk-CHHwFzll.js";import{r as B}from"./chunk-SzhoqsJO.js";import{r as z}from"./chunk-BeDuKP2K.js";import{r as S}from"./chunk-aa-vVmX_.js";import{r as T}from"./chunk-DaboJpfQ.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BWiubfpN.js";const V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O={class:"flex items-center justify-between mb-8"},Q={class:"flex items-center gap-4"},U={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6 mb-6"},D={class:"flex flex-col sm:flex-row gap-4"},H={class:"flex-1"},J={class:"relative"},K={class:"sm:w-40"},Y=["value"],P={class:"sm:w-48"},X=["value"],A={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl overflow-hidden"},E={class:"overflow-x-auto"},F={class:"w-full"},G={class:"divide-y divide-slate-700/50"},I={key:0},L={class:"px-6 py-4"},M={class:"flex items-center gap-2"},N={class:"text-sm text-slate-300"},$={class:"px-6 py-4"},R={class:"text-white font-medium"},W={key:1},Z={class:"text-slate-400 text-sm"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},le={class:"text-slate-300 text-sm"},se={class:"px-6 py-4"},ae={class:"text-slate-300 text-sm"},re={class:"px-6 py-4"},oe={class:"text-slate-400 text-sm"},ie={class:"px-6 py-4"},ne=["onClick"],ue={key:1,class:"text-slate-500 text-sm"},ce={key:0,class:"px-6 py-4 border-t border-slate-700/50 flex items-center justify-between"},de={class:"text-sm text-slate-400"},pe={class:"flex items-center gap-2"},xe=["disabled"],be={class:"text-slate-300 px-3"},me=["disabled"],he={__name:"History",props:{calls:Object,filters:{type:Object,default:()=>({status:null,direction:null,search:""})}},setup(he){const ge=he;j();const fe=e(ge.filters.search||""),ve=e(ge.filters.status||"all"),ke=e(ge.filters.direction||"all"),ye=[{value:"all",label:"Barchasi"},{value:"completed",label:"Tugallangan"},{value:"answered",label:"Javob berilgan"},{value:"no_answer",label:"Javobsiz"},{value:"busy",label:"Band"},{value:"failed",label:"Xatolik"},{value:"missed",label:"O'tkazib yuborilgan"}],we=[{value:"all",label:"Barchasi"},{value:"outbound",label:"Chiquvchi"},{value:"inbound",label:"Kiruvchi"}],je=e=>"outbound"===e?"text-blue-400":"text-green-400",_e=()=>{y.get(route("integrations.telephony.history"),{status:"all"===ve.value?null:ve.value,direction:"all"===ke.value?null:ke.value,search:fe.value||null},{preserveState:!0,replace:!0})};let Ce=null;t(fe,()=>{clearTimeout(Ce),Ce=setTimeout(_e,500)}),t(ve,()=>{_e()}),t(ke,()=>{_e()});const qe=e=>{e&&y.get(e,{},{preserveState:!0})};return(e,t)=>(u(),l(c,null,[s(a(v),{title:"Qo'ng'iroqlar Tarixi"}),s(w,null,{default:r(()=>[o("div",V,[o("div",O,[o("div",Q,[s(a(k),{href:e.route("integrations.telephony.settings"),class:"p-2 bg-slate-700 rounded-xl hover:bg-slate-600 transition-colors"},{default:r(()=>[s(a(_),{class:"w-5 h-5 text-white"})]),_:1},8,["href"]),t[5]||(t[5]=o("div",null,[o("h1",{class:"text-2xl font-bold text-white"},"Qo'ng'iroqlar Tarixi"),o("p",{class:"text-slate-400 text-sm"},"Barcha qo'ng'iroqlar ro'yxati")],-1))])]),o("div",U,[o("div",D,[o("div",H,[o("div",J,[s(a(C),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>fe.value=e),type:"text",placeholder:"Qidirish (telefon, ism)...",class:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},null,512),[[n,fe.value]])])]),o("div",K,[i(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>ke.value=e),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},[(u(),l(c,null,d(we,e=>o("option",{key:e.value,value:e.value},p(e.label),9,Y)),64))],512),[[x,ke.value]])]),o("div",P,[i(o("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>ve.value=e),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},[(u(),l(c,null,d(ye,e=>o("option",{key:e.value,value:e.value},p(e.label),9,X)),64))],512),[[x,ve.value]])])])]),o("div",A,[o("div",E,[o("table",F,[t[7]||(t[7]=o("thead",{class:"bg-slate-700/30"},[o("tr",null,[o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Yo'nalish "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Kontakt "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Status "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Davomiyligi "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Provayder "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Sana "),o("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Yozuv ")])],-1)),o("tbody",G,[0===he.calls.data.length?(u(),l("tr",I,[...t[6]||(t[6]=[o("td",{colspan:"7",class:"px-6 py-12 text-center"},[o("svg",{class:"w-12 h-12 text-slate-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),o("p",{class:"text-slate-400"},"Qo'ng'iroqlar topilmadi")],-1)])])):b("",!0),(u(!0),l(c,null,d(he.calls.data,t=>{return u(),l("tr",{key:t.id,class:"hover:bg-slate-700/20 transition-colors"},[o("td",L,[o("div",M,[(u(),m(h((c=t.direction,"outbound"===c?S:T)),{class:g(["w-5 h-5",je(t.direction)])},null,8,["class"])),o("span",N,p(t.direction_label),1)])]),o("td",$,[o("div",null,[o("p",R,[t.lead?(u(),m(a(k),{key:0,href:e.route("business.sales.show",t.lead.id),class:"hover:text-blue-400 transition-colors"},{default:r(()=>[f(p(t.lead.name),1)]),_:2},1032,["href"])):(u(),l("span",W,"Noma'lum"))]),o("p",Z,p("outbound"===t.direction?t.to_number:t.from_number),1)])]),o("td",ee,[o("span",{class:g(["px-2.5 py-1 rounded-lg text-xs font-medium border",(n=t.status,{initiated:"bg-gray-500/20 text-gray-400 border-gray-500/30",ringing:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",answered:"bg-blue-500/20 text-blue-400 border-blue-500/30",completed:"bg-green-500/20 text-green-400 border-green-500/30",failed:"bg-red-500/20 text-red-400 border-red-500/30",missed:"bg-orange-500/20 text-orange-400 border-orange-500/30",busy:"bg-purple-500/20 text-purple-400 border-purple-500/30",no_answer:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}[n]||"bg-slate-500/20 text-slate-400 border-slate-500/30")])},p(t.status_label),3)]),o("td",te,[o("span",le,p(t.formatted_duration),1)]),o("td",se,[o("span",ae,p((i=t.provider,{pbx:"PBX",sipuni:"SipUni"}[i]||i)),1)]),o("td",re,[o("span",oe,p(t.created_at),1)]),o("td",ie,[t.recording_url?(u(),l("button",{key:0,onClick:e=>{var l;(l=t.recording_url)&&window.open(l,"_blank")},class:"p-2 bg-slate-600 rounded-lg hover:bg-slate-500 transition-colors",title:"Yozuvni tinglash"},[s(a(q),{class:"w-4 h-4 text-white"})],8,ne)):(u(),l("span",ue,"-"))])]);var i,n,c}),128))])])]),he.calls.last_page>1?(u(),l("div",ce,[o("p",de,p(he.calls.from)+"-"+p(he.calls.to)+" / "+p(he.calls.total)+" ta qo'ng'iroq ",1),o("div",pe,[o("button",{onClick:t[3]||(t[3]=e=>qe(he.calls.prev_page_url)),disabled:!he.calls.prev_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s(a(B),{class:"w-5 h-5 text-white"})],8,xe),o("span",be,p(he.calls.current_page)+" / "+p(he.calls.last_page),1),o("button",{onClick:t[4]||(t[4]=e=>qe(he.calls.next_page_url)),disabled:!he.calls.next_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s(a(z),{class:"w-5 h-5 text-white"})],8,me)])])):b("",!0)])])]),_:1})],64))}};export{he as default};
