import{r as b,b as F,o as G,v as C,x as R,y as r,z as e,A as l,D as d,L as p,C as v,B as c,E as o,H as i,F as f,G as _,S as N,M as T,I as K,K as Y}from"./chunk-BcTZxe-J.js";import{h as U,a as j}from"./chunk-BYRtWSr0.js";import{_ as P}from"./chunk-D2CDubcM.js";import{r as h}from"./chunk-Rs1WNzbn.js";import{r as D}from"./chunk-CJsSO8V8.js";import{a as I}from"./chunk-BVYwhYNk.js";import{b as H,f as E}from"./chunk-CYarSvys.js";import{r as M}from"./chunk-BaCQBAcd.js";import{r as X}from"./chunk-I93QdGKi.js";import{r as Z}from"./chunk-aL39oRCf.js";import{r as W}from"./chunk-br81ceNR.js";import"./app-DWC75jbx.js";import"./chunk-C1xeNfMu.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const ee={class:"space-y-6"},te={class:"flex items-center justify-between"},ae=["disabled"],se={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ie={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},re={class:"flex items-center gap-3"},le={class:"w-12 h-12 bg-purple-500/20 rounded-xl flex items-center justify-center"},oe={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},ne={class:"flex items-center gap-3"},de={class:"w-12 h-12 bg-emerald-500/20 rounded-xl flex items-center justify-center"},ce={class:"text-2xl font-bold text-emerald-400"},ue={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},me={class:"flex items-center gap-3"},ge={class:"w-12 h-12 bg-amber-500/20 rounded-xl flex items-center justify-center"},pe={class:"text-2xl font-bold text-amber-400"},he={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},xe={class:"flex items-center gap-3"},ye={class:"w-12 h-12 bg-red-500/20 rounded-xl flex items-center justify-center"},be={class:"text-2xl font-bold text-red-400"},ve={key:1,class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},fe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},_e={class:"flex items-center justify-between mb-2"},qe={class:"text-sm text-gray-300"},we={class:"bg-gray-600 rounded-full h-2"},ke={class:"text-xs text-gray-500 mt-2"},ze={key:2,class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},je={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},He={class:"space-y-4"},$e={class:"flex items-start gap-3"},Qe={class:"flex-1"},Be={class:"text-gray-300 text-sm mt-1"},Ce={key:0,class:"text-gray-400 text-sm mt-2 flex items-center gap-1"},Ne={class:"bg-gray-800 rounded-xl p-6 border border-gray-700"},De={class:"grid md:grid-cols-2 gap-6"},Ie={class:"text-gray-300 text-sm space-y-2"},Ee={class:"flex items-start gap-2"},Me={class:"flex items-start gap-2"},Se={class:"flex items-start gap-2"},Oe={class:"flex items-start gap-2"},Ae={class:"flex items-center gap-4"},Je={class:"flex items-center gap-2"},Le=["value"],Ve={class:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden"},Fe={class:"overflow-x-auto"},Ge={class:"min-w-full divide-y divide-gray-700"},Re={class:"divide-y divide-gray-700"},Te={class:"px-6 py-4 whitespace-nowrap"},Ke={class:"flex items-center"},Ye={class:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center"},Ue={class:"text-sm font-medium text-purple-400"},Pe={class:"ml-4"},Xe={class:"text-sm font-medium text-white"},Ze={class:"text-sm text-gray-400"},We={class:"px-6 py-4 whitespace-nowrap"},et={class:"flex items-center gap-3"},tt={class:"w-24 bg-gray-600 rounded-full h-2"},at={class:"px-6 py-4 whitespace-nowrap"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-400"},it={class:"px-6 py-4 whitespace-nowrap text-right"},rt=["onClick"],lt={key:0,class:"p-8 text-center"},ot={key:1,class:"p-8 text-center text-gray-400"},It={__name:"Index",props:{currentBusiness:Object},setup(S){const m=S,g=b(!0),q=b([]),n=b(null),w=b(""),O=[{value:"",label:"Barcha darajalar"},{value:"highly_engaged",label:"Juda qiziqgan"},{value:"engaged",label:"Qiziqgan"},{value:"neutral",label:"Neytral"},{value:"disengaged",label:"Qiziqmagan"}],A=s=>({highly_engaged:"Juda qiziqgan",engaged:"Qiziqgan",neutral:"Neytral",disengaged:"Qiziqmagan"})[s]||s,x=async()=>{if(m.currentBusiness?.id){g.value=!0;try{const[s,t]=await Promise.all([j.get(`/api/v1/businesses/${m.currentBusiness.id}/hr/engagement`,{params:{engagement_level:w.value||void 0}}),j.get(`/api/v1/businesses/${m.currentBusiness.id}/hr/engagement/statistics`)]);q.value=s.data.data?.data||[],n.value=t.data.data}catch(s){console.error("Error fetching engagement data:",s)}finally{g.value=!1}}},J=async s=>{if(m.currentBusiness?.id)try{await j.post(`/api/v1/businesses/${m.currentBusiness.id}/hr/engagement/${s}/recalculate`),x()}catch(t){console.error("Error recalculating engagement:",t)}},L=s=>({highly_engaged:"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",engaged:"bg-blue-500/20 text-blue-400 border border-blue-500/30",neutral:"bg-amber-500/20 text-amber-400 border border-amber-500/30",disengaged:"bg-red-500/20 text-red-400 border border-red-500/30"})[s]||"bg-gray-500/20 text-gray-400",k=s=>s>=80?"text-emerald-400":s>=65?"text-blue-400":s>=50?"text-amber-400":"text-red-400",$=s=>s>=80?"bg-emerald-500":s>=65?"bg-blue-500":s>=50?"bg-amber-500":"bg-red-500",Q=F(()=>{if(!n.value?.components)return[];const s=[];[...n.value.components].sort((u,y)=>u.score-y.score).slice(0,3).filter(u=>u.score<60).forEach(u=>{const y=V(u.key,u.score);y&&s.push(y)});const B=n.value.overview?.avg_score||0;return B>=80?s.unshift({type:"success",title:"A'lo natija!",message:"Hodimlar ishga qiziqish darajasi juda yuqori. Jamoangiz motivatsiyali va samarali ishlaydi.",icon:h}):B<50&&s.unshift({type:"danger",title:"Diqqat talab qilinadi!",message:"Umumiy ishga qiziqish darajasi past. Hodimlar ishdan qoniqmayotgan bo'lishi mumkin.",icon:D}),s}),V=(s,t)=>{const a={work_satisfaction:{title:"Ish qoniqishi past",message:"Hodimlar kundalik vazifalardan qoniqmayapti. Vazifalarni qayta ko'rib chiqing va ularning kuchli tomonlaridan foydalaning.",action:"Har bir hodim bilan 1:1 suhbat o'tkazing"},team_collaboration:{title:"Jamoa hamkorligi zaif",message:"Jamoa a'zolari orasida yetarli aloqa yo'q. Team-building tadbirlar va hamkorlik loyihalarini ko'paytiring.",action:"Haftalik jamoa uchrashuvlarini joriy qiling"},growth_opportunities:{title:"O'sish imkoniyatlari cheklangan",message:"Hodimlar karyera rivojlanishi imkoniyatini ko'rmayapti. Treninglar va mentor dasturlarini taklif qiling.",action:"Har bir hodim uchun rivojlanish rejasi tuzing"},recognition_frequency:{title:"Tan olish yetishmaydi",message:"Hodimlar ishlarini e'tirof etilganini his qilmayapti. Muntazam ravishda minnatdorchilik bildiring.",action:'Haftalik "Star Employee" dasturini boshlang'},manager_support:{title:"Rahbar qo'llab-quvvatlashi kam",message:"Hodimlar menejerdan yetarli yordam olmayapti. Menejerlar uchun coaching treningi o'tkazing.",action:"Menejerlar bilan muloqot sifatini yaxshilang"},work_life_balance:{title:"Ish-hayot balansi buzilgan",message:"Hodimlar ish yukidan charchagan. Moslashuvchan ish jadvalini ko'rib chiqing.",action:"Overtime soatlarini kamaytiring"},purpose_clarity:{title:"Maqsad aniqligi past",message:"Hodimlar kompaniya missiyasini tushunmayapti. Kompaniya qadriyatlarini muntazam targ'ib qiling.",action:`Oylik "All-hands" uchrashuvlar o'tkazing`},resources_adequacy:{title:"Resurslar yetishmaydi",message:"Hodimlar ishni bajarish uchun kerakli vositalardan mahrum. Zarur jihozlar va dasturlarni ta'minlang.",action:"Resurs so'rovlarini ko'rib chiqing"}};return t>=60||!a[s]?null:{type:t<40?"danger":"warning",title:a[s].title,message:a[s].message,action:a[s].action,icon:t<40?D:I}};return G(x),(s,t)=>(o(),C(P,{title:"Ishga Qiziqish"},{default:R(()=>[r(l(U),{title:"Hodimlar Ishga Qiziqishi"}),e("div",ee,[e("div",te,[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-2xl font-bold text-white"}," Hodimlar Ishga Qiziqishi "),e("p",{class:"text-gray-400 mt-1"}," Gallup Q12 metodologiyasiga asoslangan ishga qiziqish tahlili ")],-1)),e("button",{onClick:x,disabled:g.value,class:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},[r(l(H),{class:c(["w-5 h-5",g.value?"animate-spin":""])},null,8,["class"]),t[1]||(t[1]=v(" Yangilash ",-1))],8,ae)]),n.value?(o(),d("div",se,[e("div",ie,[e("div",re,[e("div",le,[r(l(M),{class:"w-6 h-6 text-purple-400"})]),e("div",null,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-400"},"O'rtacha ball",-1)),e("p",{class:c(["text-2xl font-bold",k(n.value.overview?.avg_score)])},i(n.value.overview?.avg_score?.toFixed(1)||0),3)])])]),e("div",oe,[e("div",ne,[e("div",de,[r(l(E),{class:"w-6 h-6 text-emerald-400"})]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-400"},"Qiziqgan hodimlar",-1)),e("p",ce,i((n.value.distribution?.highly_engaged?.count||0)+(n.value.distribution?.engaged?.count||0)),1)])])]),e("div",ue,[e("div",me,[e("div",ge,[r(l(X),{class:"w-6 h-6 text-amber-400"})]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-400"},"Neytral",-1)),e("p",pe,i(n.value.distribution?.neutral?.count||0),1)])])]),e("div",he,[e("div",xe,[e("div",ye,[r(l(E),{class:"w-6 h-6 text-red-400"})]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-400"},"Qiziqmagan",-1)),e("p",be,i(n.value.distribution?.disengaged?.count||0),1)])])])])):p("",!0),n.value?.components?(o(),d("div",ve,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-white mb-4"}," Komponent bo'yicha o'rtacha balllar ",-1)),e("div",fe,[(o(!0),d(f,null,_(n.value.components,a=>(o(),d("div",{key:a.key,class:"p-4 bg-gray-700/50 rounded-lg border border-gray-600"},[e("div",_e,[e("span",qe,i(a.label),1),e("span",{class:c(["text-lg font-bold",k(a.score)])},i(a.score),3)]),e("div",we,[e("div",{class:c(["h-2 rounded-full transition-all duration-500",$(a.score)]),style:N({width:`${a.score}%`})},null,6)]),e("p",ke,i(a.score>=80?"A'lo":a.score>=65?"Yaxshi":a.score>=50?"O'rtacha":"Diqqat talab"),1)]))),128))])])):p("",!0),Q.value.length>0?(o(),d("div",ze,[e("h3",je,[r(l(I),{class:"w-5 h-5 text-amber-400"}),t[8]||(t[8]=v(" Xulosa va tavsiyalar ",-1))]),e("div",He,[(o(!0),d(f,null,_(Q.value,(a,z)=>(o(),d("div",{key:z,class:c(["p-4 rounded-lg border",a.type==="success"?"bg-emerald-500/10 border-emerald-500/30":a.type==="danger"?"bg-red-500/10 border-red-500/30":"bg-amber-500/10 border-amber-500/30"])},[e("div",$e,[(o(),C(T(a.icon),{class:c(["w-5 h-5 mt-0.5 flex-shrink-0",a.type==="success"?"text-emerald-400":a.type==="danger"?"text-red-400":"text-amber-400"])},null,8,["class"])),e("div",Qe,[e("h4",{class:c(["font-medium",a.type==="success"?"text-emerald-400":a.type==="danger"?"text-red-400":"text-amber-400"])},i(a.title),3),e("p",Be,i(a.message),1),a.action?(o(),d("p",Ce,[r(l(Z),{class:"w-4 h-4"}),v(" Tavsiya: "+i(a.action),1)])):p("",!0)])])],2))),128))])])):p("",!0),e("div",Ne,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-white mb-4"}," Gallup Q12 haqida ",-1)),e("div",De,[t[14]||(t[14]=e("div",null,[e("p",{class:"text-gray-300 text-sm leading-relaxed"},[e("strong",{class:"text-white"},"Gallup Q12"),v(" - 30 yildan ortiq tadqiqotlarga asoslangan xodimlar ishga qiziqish darajasini o'lchovchi standart metodologiya. 17 milliondan ortiq xodim ustida sinovdan o'tgan 12 ta asosiy savoldan iborat. ")]),e("div",{class:"mt-4 space-y-2"},[e("div",{class:"flex items-center gap-2 text-sm"},[e("span",{class:"w-3 h-3 bg-emerald-500 rounded-full"}),e("span",{class:"text-gray-300"},"80-100: Juda qiziqgan (Highly Engaged)")]),e("div",{class:"flex items-center gap-2 text-sm"},[e("span",{class:"w-3 h-3 bg-blue-500 rounded-full"}),e("span",{class:"text-gray-300"},"65-79: Qiziqgan (Engaged)")]),e("div",{class:"flex items-center gap-2 text-sm"},[e("span",{class:"w-3 h-3 bg-amber-500 rounded-full"}),e("span",{class:"text-gray-300"},"50-64: Neytral (Neutral)")]),e("div",{class:"flex items-center gap-2 text-sm"},[e("span",{class:"w-3 h-3 bg-red-500 rounded-full"}),e("span",{class:"text-gray-300"},"0-49: Qiziqmagan (Disengaged)")])])],-1)),e("div",null,[t[13]||(t[13]=e("h4",{class:"text-white font-medium mb-2"},"Nima uchun muhim?",-1)),e("ul",Ie,[e("li",Ee,[r(l(h),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),t[9]||(t[9]=e("span",null,"Yuqori ishga qiziqish = 23% ko'proq foyda (Gallup)",-1))]),e("li",Me,[r(l(h),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),t[10]||(t[10]=e("span",null,"18% yuqoriroq mijozlar sodiqlihi",-1))]),e("li",Se,[r(l(h),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),t[11]||(t[11]=e("span",null,"Kadr aylanmasi kamayadi",-1))]),e("li",Oe,[r(l(h),{class:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),t[12]||(t[12]=e("span",null,"Ish sifati va unumdorlik ortadi",-1))])])])])]),e("div",Ae,[e("div",Je,[r(l(W),{class:"w-5 h-5 text-gray-400"}),K(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>w.value=a),onChange:x,class:"px-4 py-2 bg-gray-800 border border-gray-700 text-white rounded-lg focus:ring-2 focus:ring-purple-500"},[(o(),d(f,null,_(O,a=>e("option",{key:a.value,value:a.value},i(a.label),9,Le)),64))],544),[[Y,w.value]])])]),e("div",Ve,[e("div",Fe,[e("table",Ge,[t[16]||(t[16]=e("thead",{class:"bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Hodim "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Umumiy ball "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Daraja "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider"}," Davr "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase tracking-wider"}," Amallar ")])],-1)),e("tbody",Re,[(o(!0),d(f,null,_(q.value,a=>(o(),d("tr",{key:a.id,class:"hover:bg-gray-700/50"},[e("td",Te,[e("div",Ke,[e("div",Ye,[e("span",Ue,i(a.user?.name?.charAt(0)||"?"),1)]),e("div",Pe,[e("div",Xe,i(a.user?.name||"Noma'lum"),1),e("div",Ze,i(a.user?.email),1)])])]),e("td",We,[e("div",et,[e("span",{class:c(["text-lg font-bold",k(a.overall_score)])},i(a.overall_score?.toFixed(1)),3),e("div",tt,[e("div",{class:c(["h-2 rounded-full",$(a.overall_score)]),style:N({width:`${a.overall_score}%`})},null,6)])])]),e("td",at,[e("span",{class:c(["px-3 py-1 text-xs font-medium rounded-full",L(a.engagement_level)])},i(A(a.engagement_level)),3)]),e("td",st,i(a.period),1),e("td",it,[e("button",{onClick:z=>J(a.user?.id),class:"text-purple-400 hover:text-purple-300",title:"Qayta hisoblash"},[r(l(H),{class:"w-5 h-5"})],8,rt)])]))),128))])])]),g.value?(o(),d("div",lt,[r(l(H),{class:"w-8 h-8 mx-auto animate-spin text-purple-400"}),t[17]||(t[17]=e("p",{class:"mt-2 text-gray-400"},"Yuklanmoqda...",-1))])):q.value.length===0?(o(),d("div",ot,[r(l(M),{class:"w-12 h-12 mx-auto opacity-50 mb-3"}),t[18]||(t[18]=e("p",null,"Ishga qiziqish ma'lumotlari topilmadi",-1))])):p("",!0)])])]),_:1}))}};export{It as default};
