import{r as t,o as e,v as s,x as a,L as l,y as r,A as o,C as i,I as n,F as d,G as c,D as m,J as u,K as x,E as p,z as g,Q as y}from"./chunk-CpmtkKLp.js";import{h,a as b}from"./chunk-BhZp3z4u.js";import{_ as v}from"./chunk-DbFbpSR2.js";import"./chunk-D7SyfRoT.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const f={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},w={class:"mb-6 flex gap-4 items-end"},k={key:0,class:"flex justify-center py-12"},j={class:"mb-8"},_={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z={class:"flex items-start gap-3"},M={class:"h-6 w-6 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},B=["d"],I={class:"font-medium"},q={class:"text-sm mt-1 opacity-80"},K={class:"text-sm mt-2 font-medium"},L={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},O={class:"bg-white rounded-lg shadow p-4"},V={class:"text-2xl font-bold text-gray-900"},C={class:"bg-white rounded-lg shadow p-4"},D={class:"text-2xl font-bold text-gray-900"},T={class:"bg-white rounded-lg shadow p-4"},U={class:"text-2xl font-bold text-red-600"},Y={class:"bg-white rounded-lg shadow p-4"},A={class:"text-2xl font-bold text-gray-900"},E={class:"bg-white rounded-lg shadow mb-8"},F={class:"p-4"},J={class:"space-y-4"},R={class:"flex items-center gap-3"},G={class:"font-medium text-gray-900"},N={class:"text-sm text-gray-500"},Q={class:"text-right"},X={class:"font-bold text-green-600"},Z={class:"text-sm text-gray-500"},$={class:"bg-white rounded-lg shadow mb-8"},H={class:"p-4 overflow-x-auto"},P={class:"min-w-full divide-y divide-gray-200"},S={class:"divide-y divide-gray-200"},W={class:"px-4 py-3 text-sm text-gray-900"},tt={class:"px-4 py-3 text-sm text-gray-600 text-right"},et={class:"px-4 py-3 text-sm text-gray-600 text-right"},st={class:"px-4 py-3 text-sm text-gray-600 text-right"},at={class:"px-4 py-3 text-center"},lt={class:"bg-white rounded-lg shadow"},rt={class:"p-4"},ot={class:"space-y-3"},it={class:"flex-1"},nt={class:"flex justify-between mb-1"},dt={class:"text-sm text-gray-700"},ct={class:"text-sm text-gray-500"},mt={class:"w-full bg-gray-200 rounded-full h-2"},ut={__name:"Insights",props:{lazyLoad:Boolean},setup(ut){const xt=t(!0),pt=t(null),gt=t(""),yt=t(""),ht=async()=>{xt.value=!0;try{const t={};gt.value&&(t.date_from=gt.value),yt.value&&(t.date_to=yt.value);const e=await b.get(route("business.analytics.api.insights"),{params:t});pt.value=e.data}catch(t){}finally{xt.value=!1}};e(()=>{ht()});const bt=t=>t?new Intl.NumberFormat("uz-UZ").format(t):"0",vt=t=>{const e={alert:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",star:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z",user:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z","trending-up":"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6","trending-down":"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6",dollar:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"};return e[t]||e.alert},ft=t=>{const e={success:"bg-green-50 border-green-200 text-green-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",danger:"bg-red-50 border-red-200 text-red-800",info:"bg-blue-50 border-blue-200 text-blue-800"};return e[t]||e.info},wt=t=>{const e={scale_up:{text:"Byudjetni oshiring",color:"bg-green-100 text-green-800"},maintain:{text:"Davom eting",color:"bg-blue-100 text-blue-800"},optimize:{text:"Optimizatsiya qiling",color:"bg-yellow-100 text-yellow-800"},test_more:{text:"Ko'proq test qiling",color:"bg-gray-100 text-gray-800"},reduce:{text:"Kamaytiring",color:"bg-red-100 text-red-800"}};return e[t]||e.maintain};return(t,e)=>(m(),s(v,{title:"Biznes Insaytlar"},{default:a(()=>[l(o(h),{title:"Biznes Insaytlar"}),r("div",f,[e[14]||(e[14]=r("div",{class:"mb-8"},[r("h1",{class:"text-2xl font-bold text-gray-900"},"Biznes Insaytlar"),r("p",{class:"mt-1 text-sm text-gray-500"},"Biznesingiz holati haqida muhim ma'lumotlar")],-1)),r("div",w,[r("div",null,[e[2]||(e[2]=r("label",{class:"block text-sm font-medium text-gray-700"},"Boshlanish",-1)),d(r("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=t=>gt.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[c,gt.value]])]),r("div",null,[e[3]||(e[3]=r("label",{class:"block text-sm font-medium text-gray-700"},"Tugash",-1)),d(r("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=t=>yt.value=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[c,yt.value]])]),r("button",{onClick:ht,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Yangilash ")]),xt.value?(m(),i("div",k,[...e[4]||(e[4]=[r("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):pt.value?(m(),i(u,{key:1},[r("div",j,[e[5]||(e[5]=r("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Asosiy Topilmalar",-1)),r("div",_,[(m(!0),i(u,null,x(pt.value.insights,t=>(m(),i("div",{key:t.title,class:p(["p-4 rounded-lg border",ft(t.type)])},[r("div",z,[(m(),i("svg",M,[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:vt(t.icon)},null,8,B)])),r("div",null,[r("h3",I,g(t.title),1),r("p",q,g(t.description),1),r("p",K,g(t.action),1)])])],2))),128))])]),r("div",L,[r("div",O,[e[6]||(e[6]=r("p",{class:"text-sm text-gray-500"},"Jami daromad",-1)),r("p",V,g(bt(pt.value.metrics?.total_revenue))+" so'm",1)]),r("div",C,[e[7]||(e[7]=r("p",{class:"text-sm text-gray-500"},"Konversiya",-1)),r("p",D,g(pt.value.metrics?.conversion_rate)+"%",1)]),r("div",T,[e[8]||(e[8]=r("p",{class:"text-sm text-gray-500"},"Yo'qotilgan qiymat",-1)),r("p",U,g(bt(pt.value.lost_deals?.summary?.total_value_lost))+" so'm",1)]),r("div",Y,[e[9]||(e[9]=r("p",{class:"text-sm text-gray-500"},"Operatorlar",-1)),r("p",A,g(pt.value.operators?.team_stats?.total_operators),1)])]),r("div",E,[e[10]||(e[10]=r("div",{class:"px-4 py-5 border-b border-gray-200"},[r("h3",{class:"text-lg font-medium text-gray-900"},"Eng yaxshi operatorlar")],-1)),r("div",F,[r("div",J,[(m(!0),i(u,null,x(pt.value.operators?.top_performers,(t,e)=>(m(),i("div",{key:t.user_id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[r("div",R,[r("span",{class:p(["flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full",0===e?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-600"])},g(e+1),3),r("div",null,[r("p",G,g(t.user_name),1),r("p",N,g(t.total_leads)+" lid, "+g(t.won_leads)+" yutilgan",1)])]),r("div",Q,[r("p",X,g(t.conversion_rate)+"%",1),r("p",Z,g(bt(t.total_revenue))+" so'm",1)])]))),128))])])]),r("div",$,[e[12]||(e[12]=r("div",{class:"px-4 py-5 border-b border-gray-200"},[r("h3",{class:"text-lg font-medium text-gray-900"},"Marketing kanallar ROI")],-1)),r("div",H,[r("table",P,[e[11]||(e[11]=r("thead",null,[r("tr",null,[r("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Kanal"),r("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Lidlar"),r("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Daromad"),r("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"Xarajat"),r("th",{class:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase"},"ROI"),r("th",{class:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase"},"Tavsiya")])],-1)),r("tbody",S,[(m(!0),i(u,null,x(pt.value.channels?.channels,t=>(m(),i("tr",{key:t.channel_id},[r("td",W,g(t.channel_name),1),r("td",tt,g(t.total_leads),1),r("td",et,g(bt(t.revenue)),1),r("td",st,g(bt(t.spend)),1),r("td",{class:p(["px-4 py-3 text-sm text-right",t.roi>0?"text-green-600 font-bold":"text-red-600 font-bold"])},g(t.roi)+"% ",3),r("td",at,[r("span",{class:p(["px-2 py-1 text-xs rounded-full",wt(t.recommendation).color])},g(wt(t.recommendation).text),3)])]))),128))])])])]),r("div",lt,[e[13]||(e[13]=r("div",{class:"px-4 py-5 border-b border-gray-200"},[r("h3",{class:"text-lg font-medium text-gray-900"},"Yo'qotish sabablari")],-1)),r("div",rt,[r("div",ot,[(m(!0),i(u,null,x(pt.value.lost_deals?.by_reason,t=>(m(),i("div",{key:t.reason,class:"flex items-center"},[r("div",it,[r("div",nt,[r("span",dt,g(t.reason_label),1),r("span",ct,g(t.count)+" ("+g(t.percentage)+"%)",1)]),r("div",mt,[r("div",{class:"bg-red-500 h-2 rounded-full",style:y({width:t.percentage+"%"})},null,4)])])]))),128))])])])],64)):n("",!0)])]),_:1}))}};export{ut as default};
