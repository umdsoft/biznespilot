import{r as f,v as $,x as j,y as c,z as e,A as r,C as p,H as t,D as i,L as g,B as _,E as d,M as D,F as w,G as C,I as S,J as K,K as N}from"./chunk-BcTZxe-J.js";import{h as U,l as z,r as v}from"./chunk-BYRtWSr0.js";import{_ as J}from"./chunk-TeKI173G.js";import{u as R}from"./app-BC9IivQF.js";import{r as X}from"./chunk-BHX0ueEB.js";import{a as I,c as L,d as T,f as M,g as G,e as H}from"./chunk-AyRJdOJv.js";import{r as Q,a as W}from"./chunk-BVYwhYNk.js";import{r as Y}from"./chunk-gCWBLgcy.js";import{r as Z}from"./chunk-B3ZTnMwM.js";import{r as ee}from"./chunk-CZ-1eK5e.js";import{a as te}from"./chunk-D58UsNjm.js";import{r as re}from"./chunk-Rs1WNzbn.js";import"./chunk-C1xeNfMu.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-Ba8J67bG.js";const ae={class:"max-w-5xl mx-auto space-y-6"},se={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},de={class:"lg:col-span-2 space-y-6"},oe={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},le={class:"flex items-center gap-3"},ne={class:"font-semibold text-lg"},ie={class:"p-6"},ce={class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},ge={class:"prose prose-sm dark:prose-invert max-w-none"},be={class:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ue={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},me={class:"font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},ye={class:"grid grid-cols-2 gap-4"},ke={key:0,class:"aspect-video bg-gray-100 dark:bg-gray-700"},fe=["src","alt"],xe={key:1,class:"aspect-video bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},he={class:"p-3"},pe={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},ve={class:"text-xs text-gray-500 dark:text-gray-400"},_e=["href"],we={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},Ce={class:"flex items-center justify-between mb-4"},Se={class:"font-semibold text-gray-900 dark:text-white"},$e={key:0,class:"mb-4"},je=["placeholder"],Ne={class:"flex justify-end gap-2 mt-2"},Te=["disabled"],Fe={key:1,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4"},Oe={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap font-sans"},Ae={key:2,class:"text-gray-500 dark:text-gray-400 text-sm"},Ee={class:"space-y-6"},Ve={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 space-y-4"},qe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pe=["value"],Be={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},De=["value"],Ke={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},Ue={class:"font-semibold text-gray-900 dark:text-white mb-4"},ze={class:"space-y-3"},Je={key:0,class:"flex items-center gap-3"},Re={class:"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center"},Xe={class:"font-medium text-gray-900 dark:text-white"},Ie={class:"text-sm text-gray-500 dark:text-gray-400"},Le={key:1,class:"flex items-start gap-3 pt-3 border-t border-gray-200 dark:border-gray-700"},Me={class:"text-sm text-gray-500 dark:text-gray-400"},Ge={class:"font-medium text-gray-900 dark:text-white"},He={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"},Qe={class:"font-semibold text-gray-900 dark:text-white mb-4"},We={class:"space-y-3 text-sm"},Ye={key:0,class:"flex items-start gap-3"},Ze={class:"min-w-0"},et={class:"text-gray-500 dark:text-gray-400"},tt=["href"],rt={key:1,class:"flex items-start gap-3"},at={class:"min-w-0"},st={class:"text-gray-500 dark:text-gray-400"},dt={class:"text-gray-700 dark:text-gray-300 break-all text-xs"},ot={class:"flex items-start gap-3"},lt={class:"text-gray-500 dark:text-gray-400"},nt={class:"text-gray-700 dark:text-gray-300"},it={key:2,class:"flex items-start gap-3"},ct={class:"text-gray-500 dark:text-gray-400"},gt={class:"text-gray-700 dark:text-gray-300"},bt={key:0,class:"text-xs text-gray-500"},Kt={__name:"Show",props:{feedback:Object,statuses:Object,priorities:Object},setup(a){const{t:s}=R(),m=a,x=f(m.feedback.status),h=f(m.feedback.priority),b=f(""),y=f(!1),u=f(!1),F={bug:L,suggestion:W,question:Q,other:I},O=o=>{const l={bug:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800/30",suggestion:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 border-blue-200 dark:border-blue-800/30",question:"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 border-purple-200 dark:border-purple-800/30",other:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400 border-gray-200 dark:border-gray-600"};return l[o]||l.other},A=o=>{const l={pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",in_progress:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",resolved:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",closed:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"};return l[o]||l.pending},E=o=>{const l={low:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",medium:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",high:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",urgent:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"};return l[o]||l.medium},V=async()=>{u.value=!0;try{(await fetch(route("admin.feedback.update-status",m.feedback.id),{method:"PUT",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({status:x.value})})).ok&&v.reload({preserveScroll:!0})}catch(o){console.error("Failed to update status:",o)}finally{u.value=!1}},q=async()=>{u.value=!0;try{(await fetch(route("admin.feedback.update-priority",m.feedback.id),{method:"PUT",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({priority:h.value})})).ok&&v.reload({preserveScroll:!0})}catch(o){console.error("Failed to update priority:",o)}finally{u.value=!1}},P=async()=>{if(b.value.trim()){u.value=!0;try{(await fetch(route("admin.feedback.add-note",m.feedback.id),{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({note:b.value})})).ok&&(b.value="",y.value=!1,v.reload({preserveScroll:!0}))}catch(o){console.error("Failed to add note:",o)}finally{u.value=!1}}},B=async()=>{if(confirm(s("admin.feedback.delete_confirm")))try{(await fetch(route("admin.feedback.destroy",m.feedback.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}})).ok&&v.visit(route("admin.feedback.index"))}catch(o){console.error("Failed to delete feedback:",o)}};return(o,l)=>(d(),$(J,{title:r(s)("admin.feedback.details")},{default:j(()=>[c(r(U),{title:`Feedback: ${a.feedback.title}`},null,8,["title"]),e("div",ae,[c(r(z),{href:o.route("admin.feedback.index"),class:"inline-flex items-center gap-2 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"},{default:j(()=>[c(r(X),{class:"w-5 h-5"}),p(" "+t(r(s)("common.back")),1)]),_:1},8,["href"]),e("div",se,[e("div",de,[e("div",oe,[e("div",{class:_(["px-6 py-4 border-b",O(a.feedback.type)])},[e("div",le,[(d(),$(D(F[a.feedback.type]),{class:"w-6 h-6"})),e("span",ne,t(a.feedback.type_label),1)])],2),e("div",ie,[e("h1",ce,t(a.feedback.title),1),e("div",ge,[e("p",be,t(a.feedback.description),1)])])]),a.feedback.attachments.length>0?(d(),i("div",ue,[e("h3",me,[c(r(T),{class:"w-5 h-5"}),p(" "+t(r(s)("admin.feedback.attached_files"))+" ("+t(a.feedback.attachments.length)+") ",1)]),e("div",ye,[(d(!0),i(w,null,C(a.feedback.attachments,n=>(d(),i("div",{key:n.id,class:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden"},[n.is_image?(d(),i("div",ke,[e("img",{src:n.url,alt:n.file_name,class:"w-full h-full object-cover"},null,8,fe)])):(d(),i("div",xe,[c(r(T),{class:"w-12 h-12 text-gray-400"})])),e("div",he,[e("p",pe,t(n.file_name),1),e("p",ve,t(n.file_size),1),e("a",{href:n.url,target:"_blank",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline mt-1 inline-block"},t(r(s)("common.view")),9,_e)])]))),128))])])):g("",!0),e("div",we,[e("div",Ce,[e("h3",Se,t(r(s)("admin.feedback.admin_notes")),1),y.value?g("",!0):(d(),i("button",{key:0,onClick:l[0]||(l[0]=n=>y.value=!0),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1"},[c(r(Y),{class:"w-4 h-4"}),p(" "+t(r(s)("admin.feedback.add_note")),1)]))]),y.value?(d(),i("div",$e,[S(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=n=>b.value=n),rows:"3",placeholder:r(s)("admin.feedback.write_note"),class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl text-gray-900 dark:text-white text-sm resize-none"},null,8,je),[[K,b.value]]),e("div",Ne,[e("button",{onClick:l[2]||(l[2]=n=>{y.value=!1,b.value=""}),class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-sm"},t(r(s)("common.cancel")),1),e("button",{onClick:P,disabled:!b.value.trim()||u.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm disabled:opacity-50"},t(r(s)("common.save")),9,Te)])])):g("",!0),a.feedback.admin_notes?(d(),i("div",Fe,[e("pre",Oe,t(a.feedback.admin_notes),1)])):(d(),i("p",Ae,t(r(s)("admin.feedback.no_notes")),1))])]),e("div",Ee,[e("div",Ve,[e("div",null,[e("label",qe,t(r(s)("common.status")),1),S(e("select",{"onUpdate:modelValue":l[3]||(l[3]=n=>x.value=n),onChange:V,class:_(["w-full px-4 py-2.5 rounded-xl text-sm font-medium border-0",A(x.value)])},[(d(!0),i(w,null,C(a.statuses,(n,k)=>(d(),i("option",{key:k,value:k},t(n),9,Pe))),128))],34),[[N,x.value]])]),e("div",null,[e("label",Be,t(r(s)("admin.feedback.priority")),1),S(e("select",{"onUpdate:modelValue":l[4]||(l[4]=n=>h.value=n),onChange:q,class:_(["w-full px-4 py-2.5 rounded-xl text-sm font-medium border-0",E(h.value)])},[(d(!0),i(w,null,C(a.priorities,(n,k)=>(d(),i("option",{key:k,value:k},t(n),9,De))),128))],34),[[N,h.value]])])]),e("div",Ke,[e("h3",Ue,t(r(s)("admin.feedback.user")),1),e("div",ze,[a.feedback.user?(d(),i("div",Je,[e("div",Re,[c(r(M),{class:"w-5 h-5 text-gray-500"})]),e("div",null,[e("p",Xe,t(a.feedback.user.name),1),e("p",Ie,t(a.feedback.user.email),1)])])):g("",!0),a.feedback.business?(d(),i("div",Le,[c(r(G),{class:"w-5 h-5 text-gray-400 mt-0.5"}),e("div",null,[e("p",Me,t(r(s)("admin.feedback.business")),1),e("p",Ge,t(a.feedback.business.name),1)])])):g("",!0)])]),e("div",He,[e("h3",Qe,t(r(s)("admin.feedback.technical_info")),1),e("div",We,[a.feedback.page_url?(d(),i("div",Ye,[c(r(Z),{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),e("div",Ze,[e("p",et,t(r(s)("admin.feedback.page_url")),1),e("a",{href:a.feedback.page_url,target:"_blank",class:"text-blue-600 dark:text-blue-400 hover:underline break-all"},t(a.feedback.page_url),9,tt)])])):g("",!0),a.feedback.browser_info?(d(),i("div",rt,[c(r(ee),{class:"w-5 h-5 text-gray-400 mt-0.5 flex-shrink-0"}),e("div",at,[e("p",st,t(r(s)("admin.feedback.browser")),1),e("p",dt,t(a.feedback.browser_info),1)])])):g("",!0),e("div",ot,[c(r(te),{class:"w-5 h-5 text-gray-400 mt-0.5"}),e("div",null,[e("p",lt,t(r(s)("admin.feedback.created")),1),e("p",nt,t(a.feedback.created_at),1)])]),a.feedback.resolved_at?(d(),i("div",it,[c(r(re),{class:"w-5 h-5 text-green-500 mt-0.5"}),e("div",null,[e("p",ct,t(r(s)("admin.feedback.resolved")),1),e("p",gt,t(a.feedback.resolved_at),1),a.feedback.resolved_by?(d(),i("p",bt,t(r(s)("admin.feedback.by"))+" "+t(a.feedback.resolved_by.name),1)):g("",!0)])])):g("",!0)])]),e("button",{onClick:B,class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-xl transition-colors"},[c(r(H),{class:"w-5 h-5"}),p(" "+t(r(s)("common.delete")),1)])])])])]),_:1},8,["title"]))}};export{Kt as default};
