import{r as p,v as T,x as b,y as l,z as t,A as r,C as _,H as s,I as v,J as h,D as c,E as i,F as k,G as w,L as y,S as $,B as j}from"./chunk-BcTZxe-J.js";import{h as z,l as N}from"./chunk-BYRtWSr0.js";import{_ as R}from"./chunk-TXgJ1MaD.js";import{u as W}from"./app-BC9IivQF.js";import{r as C}from"./chunk-br81ceNR.js";import{r as D}from"./chunk-I93QdGKi.js";import{r as O}from"./chunk-Rs1WNzbn.js";import{r as A}from"./chunk-Ba8J67bG.js";import{r as E}from"./chunk-73y9UAkj.js";import"./chunk-AyRJdOJv.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const I={class:"py-12"},M={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},P={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},U={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},q={class:"mt-2 text-gray-600 dark:text-gray-400"},G={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},H={class:"flex flex-wrap items-end gap-4"},J={class:"flex-1 min-w-[200px]"},K={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Q={class:"flex-1 min-w-[200px]"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Y={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},Z={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},tt={class:"flex items-center gap-3 mb-2"},et={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},st={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},at={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},rt={class:"flex items-center gap-3 mb-2"},ot={class:"w-10 h-10 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},nt={class:"text-2xl font-bold text-green-600 dark:text-green-400"},dt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},lt={class:"flex items-center gap-3 mb-2"},it={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/50 rounded-lg flex items-center justify-center"},gt={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},ct={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},xt={class:"flex items-center gap-3 mb-2"},ut={class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/50 rounded-lg flex items-center justify-center"},_t={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},yt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-8 mb-8"},ft={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},mt={class:"space-y-4"},pt={class:"flex items-center gap-4"},bt={class:"w-32 text-right"},vt={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},ht={class:"flex-1"},kt={class:"relative h-16 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden"},wt={class:"text-white font-bold"},jt={class:"text-white text-sm font-medium"},Ct={class:"w-48"},Dt={class:"text-sm"},Ft={class:"text-gray-600 dark:text-gray-400"},Vt={class:"font-semibold text-gray-900 dark:text-gray-100"},Bt={key:0,class:"text-red-600 dark:text-red-400"},Lt={class:"font-semibold"},St={key:0,class:"flex justify-center my-2"},Tt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},$t={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},zt={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Nt={class:"flex items-center gap-2 mb-3"},Rt={class:"font-bold text-gray-900 dark:text-gray-100"},Wt={class:"space-y-2 text-sm"},Ot={class:"flex justify-between"},At={class:"font-semibold text-gray-900 dark:text-gray-100"},Et={class:"flex justify-between"},It={class:"font-semibold text-gray-900 dark:text-gray-100"},Mt={class:"flex justify-between"},Pt={class:"font-semibold text-green-600 dark:text-green-400"},Ut={key:0,class:"flex justify-between"},qt={class:"font-semibold text-red-600 dark:text-red-400"},Gt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Ht={class:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-6"},Jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Kt={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},Qt={class:"space-y-3"},Xt={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},Yt={class:"font-bold text-gray-900 dark:text-gray-100"},Zt={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},te={class:"font-bold text-green-600 dark:text-green-400"},ee={class:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/30 rounded-lg"},se={class:"font-bold text-purple-600 dark:text-purple-400"},ae={class:"font-semibold text-gray-700 dark:text-gray-300 mb-4"},re={class:"space-y-3"},oe={class:"flex justify-between items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg"},ne={class:"font-bold text-gray-900 dark:text-gray-100"},de={class:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/30 rounded-lg"},le={class:"font-bold text-green-600 dark:text-green-400"},ie={class:"flex justify-between items-center p-3 bg-orange-50 dark:bg-orange-900/30 rounded-lg"},ge={class:"font-bold text-orange-600 dark:text-orange-400"},Re={__name:"Funnel",props:{funnel_data:{type:Object,default:()=>({funnel_stages:[],summary:{total_leads:0,won_leads:0,lost_leads:0,active_leads:0,overall_conversion_rate:0,win_rate:0}})},conversion_rates:{type:Object,default:()=>({})},filters:Object},setup(o){const{t:n}=W(),f=o,x=p(f.filters?.date_from||""),u=p(f.filters?.date_to||""),d=g=>g?.toFixed(1)||"0",m=g=>({new:"bg-blue-500",contacted:"bg-indigo-500",qualified:"bg-purple-500",proposal:"bg-pink-500",negotiation:"bg-orange-500",won:"bg-green-500",lost:"bg-red-500"})[g]||"bg-gray-500",F=g=>Math.max(g,10),V=()=>{window.location.href=route("business.analytics.funnel",{date_from:x.value,date_to:u.value})},B=()=>{x.value="",u.value="",window.location.href=route("business.analytics.funnel")};return(g,e)=>(i(),T(R,{title:r(n)("analytics.conversion_funnel")},{default:b(()=>[l(r(z),{title:r(n)("analytics.conversion_funnel")},null,8,["title"]),t("div",I,[t("div",M,[t("div",P,[t("div",null,[t("h1",U,[l(r(C),{class:"w-10 h-10 text-purple-600 dark:text-purple-400"}),_(" "+s(r(n)("analytics.conversion_funnel")),1)]),t("p",q,s(r(n)("analytics.funnel_analysis_desc")),1)]),l(r(N),{href:g.route("business.analytics.index"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:b(()=>[l(r(D),{class:"w-4 h-4"}),e[2]||(e[2]=_(" Dashboard ",-1))]),_:1},8,["href"])]),t("div",G,[t("div",H,[t("div",J,[t("label",K,s(r(n)("reports.filter.start_date")),1),v(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>x.value=a),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[h,x.value]])]),t("div",Q,[t("label",X,s(r(n)("reports.filter.end_date")),1),v(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[h,u.value]])]),t("button",{onClick:V,class:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg transition-colors"},s(r(n)("common.filter")),1),t("button",{onClick:B,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},s(r(n)("reports.filter.reset")),1)])]),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[l(r(C),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Total Leads",-1)),t("p",st,s(o.funnel_data.summary.total_leads||0),1)])])]),t("div",at,[t("div",rt,[t("div",ot,[l(r(O),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Won Deals",-1)),t("p",nt,s(o.funnel_data.summary.won_leads||0),1)])])]),t("div",dt,[t("div",lt,[t("div",it,[l(r(D),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Conversion Rate",-1)),t("p",gt,s(d(o.funnel_data.summary.overall_conversion_rate))+"%",1)])])]),t("div",ct,[t("div",xt,[t("div",ut,[l(r(A),{class:"w-6 h-6 text-orange-600 dark:text-orange-400"})]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Win Rate",-1)),t("p",_t,s(d(o.funnel_data.summary.win_rate))+"%",1)])])])]),t("div",yt,[t("h3",ft,s(r(n)("analytics.funnel_visualization")),1),t("div",mt,[(i(!0),c(k,null,w(o.funnel_data.funnel_stages.filter(a=>!["lost"].includes(a.stage)),(a,L)=>(i(),c("div",{key:a.stage,class:"relative"},[t("div",pt,[t("div",bt,[t("p",vt,s(a.label),1)]),t("div",ht,[t("div",kt,[t("div",{class:j([m(a.stage),"h-full transition-all duration-500 flex items-center justify-between px-4"]),style:$({width:F(a.percentage)+"%"})},[t("span",wt,s(a.count),1),t("span",jt,s(d(a.percentage))+"%",1)],6)])]),t("div",Ct,[t("div",Dt,[t("p",Ft,[e[7]||(e[7]=_(" CR: ",-1)),t("span",Vt,s(d(a.conversion_rate))+"%",1)]),a.dropoff_rate>0?(i(),c("p",Bt,[e[8]||(e[8]=_(" Dropoff: ",-1)),t("span",Lt,s(d(a.dropoff_rate))+"%",1)])):y("",!0)])])]),L<o.funnel_data.funnel_stages.filter(S=>!["lost","won"].includes(S.stage)).length-1?(i(),c("div",St,[l(r(E),{class:"w-6 h-6 text-gray-400 dark:text-gray-500"})])):y("",!0)]))),128))])]),t("div",Tt,[t("h3",$t,s(r(n)("analytics.stage_analysis")),1),t("div",zt,[(i(!0),c(k,null,w(o.funnel_data.funnel_stages.filter(a=>!["lost"].includes(a.stage)),a=>(i(),c("div",{key:a.stage,class:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow"},[t("div",Nt,[t("div",{class:j([m(a.stage),"w-3 h-3 rounded-full"])},null,2),t("p",Rt,s(a.label),1)]),t("div",Wt,[t("div",Ot,[e[9]||(e[9]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Leads:",-1)),t("span",At,s(a.count),1)]),t("div",Et,[e[10]||(e[10]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Percentage:",-1)),t("span",It,s(d(a.percentage))+"%",1)]),t("div",Mt,[e[11]||(e[11]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Conversion:",-1)),t("span",Pt,s(d(a.conversion_rate))+"%",1)]),a.dropoff_rate>0?(i(),c("div",Ut,[e[12]||(e[12]=t("span",{class:"text-gray-600 dark:text-gray-400"},"Dropoff:",-1)),t("span",qt,s(d(a.dropoff_rate))+"%",1)])):y("",!0)])]))),128))])]),t("div",Gt,[t("h3",Ht,s(r(n)("analytics.conversion_insights")),1),t("div",Jt,[t("div",null,[t("h4",Kt,s(r(n)("analytics.overall_performance")),1),t("div",Qt,[t("div",Xt,[e[13]||(e[13]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Total Leads",-1)),t("span",Yt,s(o.conversion_rates.overall.total_leads),1)]),t("div",Zt,[e[14]||(e[14]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Won Deals",-1)),t("span",te,s(o.conversion_rates.overall.won_leads),1)]),t("div",ee,[e[15]||(e[15]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Conversion Rate",-1)),t("span",se,s(d(o.conversion_rates.overall.conversion_rate))+"%",1)])])]),t("div",null,[t("h4",ae,s(r(n)("analytics.time_to_close")),1),t("div",re,[t("div",oe,[e[16]||(e[16]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Average Days",-1)),t("span",ne,s(o.conversion_rates.avg_time_to_close.avg_days)+" kun",1)]),t("div",de,[e[17]||(e[17]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Fastest Close",-1)),t("span",le,s(o.conversion_rates.avg_time_to_close.fastest_close)+" kun",1)]),t("div",ie,[e[18]||(e[18]=t("span",{class:"text-gray-700 dark:text-gray-300"},"Slowest Close",-1)),t("span",ge,s(o.conversion_rates.avg_time_to_close.slowest_close)+" kun",1)])])])])])])])]),_:1},8,["title"]))}};export{Re as default};
