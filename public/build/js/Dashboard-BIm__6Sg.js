import{_ as A}from"./chunk-Dpr7eH3O.js";import{r as z,h as T}from"./chunk-BVrjkT6E.js";import{_ as w}from"./chunk-BIHyX7cH.js";import{_ as $}from"./chunk-B9i0VCos.js";import{_ as B,a as F}from"./chunk-BOuG-cl8.js";import{u as S}from"./app-DMGwzSHW.js";import{b as _,C as u,F as d,D as x,G as M,I as j,z as e,B as y,H as o,A as a,S as D,r as P,E as H,y as c,x as k,v as L}from"./chunk-KPSVwAyv.js";import{a as N}from"./chunk-6yb70bcY.js";import{r as V}from"./chunk-CPI6G2q3.js";import{r as O}from"./chunk-Dfha1x8d.js";import{r as I}from"./chunk-D5sR6A8B.js";import{o as U}from"./chunk-C_PbB7ed.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";import"./chunk-BgOPVSvg.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const R={class:"space-y-4"},Z={class:"flex items-center justify-between mb-2"},q={class:"flex items-center gap-2"},E={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},K={class:"text-sm font-semibold text-gray-900 dark:text-white"},G={class:"h-10 bg-gray-100 dark:bg-gray-700 rounded-xl overflow-hidden relative"},J={key:0,class:"text-white text-xs font-bold drop-shadow-sm"},Q={class:"absolute inset-y-0 right-3 flex items-center"},W={key:0,class:"text-xs font-medium text-gray-500 dark:text-gray-400"},X={key:0,class:"text-center py-8"},Y={class:"text-gray-500 dark:text-gray-400"},ee={key:1,class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700"},te={class:"flex items-center justify-between"},ae={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},se={class:"text-right"},re={class:"text-lg font-bold text-gray-900 dark:text-white"},oe={class:"text-sm text-gray-500 dark:text-gray-400 ml-2"},le={__name:"PipelineChart",props:{stages:{type:Array,default:()=>[]}},setup(s){const{t}=S(),h=s,i=_(()=>Array.isArray(h.stages)?h.stages:[]),b=_(()=>i.value.reduce((r,m)=>r+(m.count||0),0)),v=_(()=>i.value.reduce((r,m)=>r+(m.value||0),0)),p=r=>b.value===0?0:Math.max(r/b.value*100,8),l=r=>{const m=["bg-gradient-to-r from-blue-500 to-blue-600","bg-gradient-to-r from-yellow-500 to-yellow-600","bg-gradient-to-r from-purple-500 to-purple-600","bg-gradient-to-r from-indigo-500 to-indigo-600","bg-gradient-to-r from-orange-500 to-orange-600","bg-gradient-to-r from-emerald-500 to-emerald-600","bg-gradient-to-r from-red-500 to-red-600"];return m[r%m.length]},f=r=>{const m=["bg-blue-500","bg-yellow-500","bg-purple-500","bg-indigo-500","bg-orange-500","bg-emerald-500","bg-red-500"];return m[r%m.length]},n=r=>r?r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(r):"";return(r,m)=>(d(),u("div",R,[(d(!0),u(M,null,j(i.value,(g,C)=>(d(),u("div",{key:g.id||C,class:"relative"},[e("div",Z,[e("div",q,[e("div",{class:y(["w-2.5 h-2.5 rounded-full",f(C)])},null,2),e("span",E,o(g.label),1)]),e("span",K,o(g.count)+" "+o(a(t)("dashboard.pipeline.count_unit")),1)]),e("div",G,[e("div",{class:y([l(C),"h-full transition-all duration-500 flex items-center justify-end pr-3 rounded-xl"]),style:D({width:`${p(g.count)}%`})},[g.count>0?(d(),u("span",J,o(n(g.value)),1)):x("",!0)],6),e("div",Q,[g.count>0&&p(g.count)<40?(d(),u("span",W,o(Math.round(p(g.count)))+"% ",1)):x("",!0)])])]))),128)),i.value.length===0?(d(),u("div",X,[m[0]||(m[0]=e("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("p",Y,o(a(t)("dashboard.pipeline.no_data")),1)])):x("",!0),i.value.length>0?(d(),u("div",ee,[e("div",te,[e("span",ae,o(a(t)("dashboard.pipeline.total")),1),e("div",se,[e("span",re,o(b.value)+" "+o(a(t)("dashboard.pipeline.leads_count")),1),e("span",oe,o(n(v.value)),1)])])])):x("",!0)]))}},ne={class:"space-y-3"},de={key:0,class:"text-center py-8"},ie={class:"text-gray-500 dark:text-gray-400"},ce={class:"font-semibold text-sm"},ue={class:"flex-1 min-w-0"},me={class:"font-medium text-gray-900 dark:text-white truncate"},he={class:"flex items-center gap-3 text-sm"},ge={class:"text-gray-500 dark:text-gray-400"},be={class:"text-gray-500 dark:text-gray-400"},pe={class:"text-right flex-shrink-0"},fe={class:"font-bold text-gray-900 dark:text-white"},ye={class:"text-xs text-gray-500 dark:text-gray-400"},xe={__name:"TeamPerformance",props:{members:{type:Array,default:()=>[]},limit:{type:Number,default:5},showRank:{type:Boolean,default:!0}},setup(s){const{t}=S(),h=s,i=_(()=>{const l=Array.isArray(h.members)?h.members:[];return h.limit>0?l.slice(0,h.limit):l}),b=["bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400","bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400","bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400","bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400","bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"],v=l=>l?l.split(" ").map(f=>f[0]).join("").toUpperCase().substring(0,2):"U",p=l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(l||0);return(l,f)=>(d(),u("div",ne,[i.value.length===0?(d(),u("div",de,[f[0]||(f[0]=e("div",{class:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])],-1)),e("p",ie,o(a(t)("dashboard.team.no_members")),1)])):x("",!0),(d(!0),u(M,null,j(i.value,(n,r)=>(d(),u("div",{key:n.id||r,class:y(["flex items-center gap-3 p-3 rounded-xl transition-all duration-200","bg-gray-50 dark:bg-gray-700/50","hover:bg-gray-100 dark:hover:bg-gray-700","border border-transparent hover:border-gray-200 dark:hover:border-gray-600"])},[s.showRank&&r<3?(d(),u("div",{key:0,class:y(["w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold flex-shrink-0",r===0?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":r===1?"bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300":"bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400"])},o(r+1),3)):x("",!0),e("div",{class:y(["w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",b[r%b.length]])},[e("span",ce,o(v(n.name)),1)],2),e("div",ue,[e("p",me,o(n.name),1),e("div",he,[e("span",ge,o(n.leads_handled||n.leads_count||0)+" "+o(a(t)("dashboard.team.lead")),1),e("span",be,o(n.leads_won||n.won_count||0)+" "+o(a(t)("dashboard.team.won")),1),e("span",{class:y(["font-medium",(n.conversion_rate||0)>=30?"text-emerald-600 dark:text-emerald-400":(n.conversion_rate||0)>=15?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"])},o(n.conversion_rate||0)+"% CR ",3)])]),e("div",pe,[e("p",fe,o(p(n.revenue||0)),1),e("p",ye,o(a(t)("dashboard.team.revenue")),1)])]))),128))]))}},_e={class:"space-y-6"},ve={class:"flex items-center justify-between"},ke={class:"text-2xl font-bold text-gray-900 dark:text-white"},we={class:"text-gray-500 dark:text-gray-400 mt-1"},$e={class:"flex items-center gap-3"},Se={class:"text-sm text-gray-500 dark:text-gray-400"},Ce=["disabled"],Me={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},je={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Ae={class:"lg:col-span-2"},ze={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Te={__name:"SalesHeadDashboard",props:{teamMembers:{type:Array,default:()=>[]},leadStats:{type:Object,default:()=>({})},revenueStats:{type:Object,default:()=>({})},pipeline:{type:Object,default:()=>({})},teamPerformance:{type:Array,default:()=>[]},recentLeads:{type:Array,default:()=>[]},overdueTasks:{type:Array,default:()=>[]},panelType:{type:String,default:"saleshead",validator:s=>["saleshead","business"].includes(s)}},setup(s){const{t}=S(),h=s,i=P(!1),b=_(()=>({new:{label:t("dashboard.saleshead.stage_new"),color:"bg-blue-500"},contacted:{label:t("dashboard.saleshead.stage_contacted"),color:"bg-yellow-500"},qualified:{label:t("dashboard.saleshead.stage_qualified"),color:"bg-purple-500"},proposal:{label:t("dashboard.saleshead.stage_proposal"),color:"bg-orange-500"},negotiation:{label:t("dashboard.saleshead.stage_negotiation"),color:"bg-pink-500"}})),v=_(()=>new Date().toLocaleDateString("uz-UZ",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),p=n=>N(n),l=()=>h.panelType==="saleshead"?"/sales-head":"/business",f=()=>{i.value=!0,z.reload({only:["teamMembers","leadStats","revenueStats","pipeline","teamPerformance","recentLeads","overdueTasks"],onFinish:()=>{i.value=!1}})};return(n,r)=>(d(),u("div",_e,[e("div",ve,[e("div",null,[e("h1",ke,o(a(t)("dashboard.saleshead.title")),1),e("p",we,o(a(t)("dashboard.saleshead.subtitle")),1)]),e("div",$e,[e("span",Se,o(v.value),1),e("button",{onClick:f,disabled:i.value,class:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg transition-colors flex items-center gap-2 disabled:opacity-50"},[(d(),u("svg",{class:y([{"animate-spin":i.value},"w-4 h-4"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...r[0]||(r[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),H(" "+o(a(t)("dashboard.saleshead.refresh")),1)],8,Ce)])]),e("div",Me,[c(w,{title:a(t)("dashboard.saleshead.today_new_leads"),value:s.leadStats.new_today||0,subtitle:`${a(t)("dashboard.saleshead.active_leads")}: ${s.leadStats.total_active||0}`,icon:a(V),"icon-bg-color":"emerald"},null,8,["title","value","subtitle","icon"]),c(w,{title:a(t)("dashboard.saleshead.monthly_won"),value:s.leadStats.won_this_month||0,subtitle:`${a(t)("dashboard.saleshead.conversion")}: ${s.leadStats.conversion_rate||0}%`,icon:a(O),"icon-bg-color":"green","value-color":"emerald"},null,8,["title","value","subtitle","icon"]),c(w,{title:a(t)("dashboard.saleshead.today_revenue"),value:p(s.revenueStats.today),subtitle:`${a(t)("dashboard.saleshead.monthly")}: ${p(s.revenueStats.this_month)}`,icon:a(I),"icon-bg-color":"blue","value-color":"blue"},null,8,["title","value","subtitle","icon"]),c(w,{title:a(t)("dashboard.saleshead.operators_count"),value:s.teamMembers.length,icon:a(U),"icon-bg-color":"purple","value-color":"purple",href:`${l()}/team`,"link-text":a(t)("dashboard.view_details")},null,8,["title","value","icon","href","link-text"])]),e("div",je,[e("div",Ae,[c($,{title:a(t)("dashboard.saleshead.sales_funnel"),"link-href":`${l()}/pipeline`,"link-text":a(t)("dashboard.view_details")},{default:k(()=>[c(le,{pipeline:s.pipeline,stages:b.value},null,8,["pipeline","stages"])]),_:1},8,["title","link-href","link-text"])]),c($,{title:a(t)("dashboard.saleshead.top_operators"),"link-href":`${l()}/performance`,"link-text":a(t)("dashboard.saleshead.view_all")},{default:k(()=>[c(xe,{members:s.teamPerformance,limit:5},null,8,["members"])]),_:1},8,["title","link-href","link-text"])]),e("div",ze,[c($,{title:a(t)("dashboard.saleshead.recent_leads"),"link-href":`${l()}/leads`,"link-text":a(t)("dashboard.saleshead.view_all")},{default:k(()=>[c(B,{leads:s.recentLeads,"base-path":`${l()}/leads`,"show-avatar":"","show-date":""},null,8,["leads","base-path"])]),_:1},8,["title","link-href","link-text"]),c($,{title:a(t)("dashboard.saleshead.overdue_tasks"),badge:s.overdueTasks.length>0?s.overdueTasks.length:null,"badge-color":"red","link-href":`${l()}/tasks`,"link-text":a(t)("dashboard.saleshead.view_all")},{default:k(()=>[c(F,{tasks:s.overdueTasks,"is-overdue":"","show-assignee":"","empty-text":a(t)("dashboard.saleshead.no_overdue_tasks"),"empty-icon":"success"},null,8,["tasks","empty-text"])]),_:1},8,["title","badge","link-href","link-text"])])]))}},it={__name:"Dashboard",props:{teamMembers:{type:Array,default:()=>[]},leadStats:{type:Object,default:()=>({})},revenueStats:{type:Object,default:()=>({})},pipeline:{type:Object,default:()=>({})},teamPerformance:{type:Array,default:()=>[]},recentLeads:{type:Array,default:()=>[]},overdueTasks:{type:Array,default:()=>[]}},setup(s){const{t}=S();return(h,i)=>(d(),L(A,{title:a(t)("nav.dashboard")},{default:k(()=>[c(a(T),{title:a(t)("saleshead.dashboard_title")},null,8,["title"]),c(Te,{"team-members":s.teamMembers,"lead-stats":s.leadStats,"revenue-stats":s.revenueStats,pipeline:s.pipeline,"team-performance":s.teamPerformance,"recent-leads":s.recentLeads,"overdue-tasks":s.overdueTasks,"panel-type":"saleshead"},null,8,["team-members","lead-stats","revenue-stats","pipeline","team-performance","recent-leads","overdue-tasks"])]),_:1},8,["title"]))}};export{it as default};
