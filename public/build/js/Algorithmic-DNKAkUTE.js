import{r as c,a as V,v as $,x as q,z as e,C as i,D as f,E as h,H as a,F as o,G as m,I as b,S as z,B as u,J as k,K as p,L as R}from"./chunk-KPSVwAyv.js";import{r as y,a as v}from"./chunk-BVrjkT6E.js";import{_ as T}from"./chunk-C_LZBpOn.js";import"./chunk-DMP3tXW5.js";import"./app-Bx12lrZQ.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const U={class:"space-y-6"},Y={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},I={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},L={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},F={class:"col-span-2 md:col-span-1 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-4 text-white"},K={class:"text-4xl font-bold"},N={class:"mt-1 text-xs text-blue-200"},J={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},O={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Z={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},E={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},G={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},P={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Q={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4"},W={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},X={key:0,class:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},te={class:"flex justify-between text-sm mb-1"},re={class:"text-gray-600 dark:text-gray-400"},se={class:"font-medium text-gray-900 dark:text-gray-100"},ae={class:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},oe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},le={key:0,class:"p-8 text-center"},ie={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},de=["onClick"],ne={class:"flex items-center justify-between"},ge={class:"flex items-center space-x-4"},ue={class:"font-medium text-gray-900 dark:text-gray-100"},ye={class:"text-sm text-gray-500 dark:text-gray-400"},xe={class:"flex items-center space-x-4"},me={class:"text-right"},be={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ce={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700"},ke={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},ve={key:0,class:"p-6 text-center text-gray-500 dark:text-gray-400"},fe={key:1,class:"divide-y divide-gray-200 dark:divide-gray-700"},he={class:"font-medium text-gray-900 dark:text-gray-100"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},we={class:"flex items-center space-x-3"},_e=["onClick"],Se=["onClick"],Ce={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},je={class:"flex min-h-full items-center justify-center p-4"},Be={class:"relative bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full p-6"},He={class:"space-y-4"},Me=["value"],Ae={class:"mt-6 flex justify-end space-x-3"},De=["disabled"],Ve={key:0},$e={key:1},rt={__name:"Algorithmic",props:{reports:Array,schedules:Array,templates:Array,realtimeSummary:Object},setup(l){const n=c(!1),w=c(!1),x=c(!1),d=V({start_date:new Date(Date.now()-10080*60*1e3).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],template_id:null}),_=s=>s?new Intl.NumberFormat("uz-UZ").format(s)+" UZS":"0 UZS",S=s=>({"bg-green-500":s==="excellent"||s==="on_track","bg-yellow-500":s==="warning","bg-red-500":s==="critical","bg-gray-400":!s}),C=s=>s?s>=80?"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400":s>=60?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":s>=40?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400":"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-gray-100 dark:bg-gray-700 text-gray-500",j=s=>({"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":s==="completed"||s==="delivered","bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":s==="generating","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":s==="pending","bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400":s==="failed"}),B=()=>{y.reload({only:["realtimeSummary"]})},H=async()=>{x.value=!0;try{(await v.post(route("business.reports.generate"),d)).data.success&&(n.value=!1,y.reload({only:["reports"]}))}catch(s){console.error("Report generation failed:",s),alert(s.response?.data?.message||"Hisobot yaratishda xatolik")}finally{x.value=!1}},M=s=>{y.visit(route("business.reports.show",s))},A=async s=>{try{await v.post(route("business.reports.schedules.toggle",s)),y.reload({only:["schedules"]})}catch(t){console.error("Toggle failed:",t)}},D=async s=>{if(confirm("Jadvalni o'chirishni xohlaysizmi?"))try{await v.delete(route("business.reports.schedules.delete",s)),y.reload({only:["schedules"]})}catch(t){console.error("Delete failed:",t)}};return(s,t)=>(o(),$(T,{title:"Algoritmik Hisobotlar"},{default:q(()=>[e("div",U,[e("div",Y,[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Algoritmik Hisobotlar"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Real vaqtda biznes ko'rsatkichlari va tahlillar ")],-1)),e("button",{onClick:t[0]||(t[0]=r=>n.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),h(" Yangi hisobot ",-1)])])]),e("div",I,[e("div",{class:"flex items-center justify-between mb-6"},[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Real vaqt holati",-1)),e("button",{onClick:B,class:"text-blue-600 hover:text-blue-700 text-sm font-medium"},[...t[10]||(t[10]=[e("svg",{class:"w-4 h-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),h(" Yangilash ",-1)])])]),e("div",L,[e("div",F,[e("div",K,a(l.realtimeSummary?.health_score||0),1),t[12]||(t[12]=e("div",{class:"text-blue-100 text-sm"},"Salomatlik balli",-1)),e("div",N,a(l.realtimeSummary?.health_label||"Hisoblanmoqda..."),1)]),e("div",J,[e("div",O,a(l.realtimeSummary?.key_metrics?.total_sales||0),1),t[13]||(t[13]=e("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Sotuvlar (7 kun)",-1))]),e("div",Z,[e("div",E,a(_(l.realtimeSummary?.key_metrics?.total_revenue||0)),1),t[14]||(t[14]=e("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Daromad",-1))]),e("div",G,[e("div",P,a(l.realtimeSummary?.key_metrics?.total_leads||0),1),t[15]||(t[15]=e("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Lidlar",-1))]),e("div",Q,[e("div",W,a(l.realtimeSummary?.key_metrics?.conversion_rate||0)+"% ",1),t[16]||(t[16]=e("div",{class:"text-gray-600 dark:text-gray-400 text-sm"},"Konversiya",-1))])]),l.realtimeSummary?.kpi_progress?.has_plan?(o(),i("div",X,[t[17]||(t[17]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"},"KPI bajarilishi",-1)),e("div",ee,[(o(),i(m,null,b(["sales","revenue","leads"],(r,g)=>e("div",{key:g,class:"relative"},[e("div",te,[e("span",re,a(g==="sales"?"Sotuvlar":g==="revenue"?"Daromad":"Lidlar"),1),e("span",se,a(l.realtimeSummary?.kpi_progress?.[r]?.progress||0)+"% ",1)]),e("div",ae,[e("div",{class:u(["h-full transition-all duration-500",S(l.realtimeSummary?.kpi_progress?.[r]?.status)]),style:z({width:Math.min(100,l.realtimeSummary?.kpi_progress?.[r]?.progress||0)+"%"})},null,6)])])),64))])])):f("",!0)]),e("div",oe,[t[21]||(t[21]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"So'nggi hisobotlar")],-1)),l.reports.length===0?(o(),i("div",le,[t[18]||(t[18]=e("svg",{class:"w-12 h-12 mx-auto text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[19]||(t[19]=e("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Hali hisobotlar yo'q",-1)),e("button",{onClick:t[1]||(t[1]=r=>n.value=!0),class:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors"}," Birinchi hisobotni yarating ")])):(o(),i("div",ie,[(o(!0),i(m,null,b(l.reports,r=>(o(),i("div",{key:r.id,class:"px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",onClick:g=>M(r.id)},[e("div",ne,[e("div",ge,[e("div",{class:u(["w-12 h-12 rounded-xl flex items-center justify-center font-bold text-lg",C(r.health_score)])},a(r.health_score||"-"),3),e("div",null,[e("h4",ue,a(r.title),1),e("p",ye,a(r.period),1)])]),e("div",xe,[e("div",me,[e("span",{class:u(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",j(r.status)])},a(r.status_label),3),e("p",be,a(r.created_at),1)]),t[20]||(t[20]=e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))])])],8,de))),128))]))]),e("div",ce,[e("div",ke,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Jadvallar",-1)),e("button",{onClick:t[2]||(t[2]=r=>w.value=!0),class:"text-blue-600 hover:text-blue-700 text-sm font-medium"}," + Yangi jadval ")]),l.schedules.length===0?(o(),i("div",ve," Avtomatik hisobot jadvallari yo'q ")):(o(),i("div",fe,[(o(!0),i(m,null,b(l.schedules,r=>(o(),i("div",{key:r.id,class:"px-6 py-4 flex items-center justify-between"},[e("div",null,[e("h4",he,a(r.name),1),e("p",pe,a(r.frequency_label)+" | Keyingi: "+a(r.next_scheduled_at||"Belgilanmagan"),1)]),e("div",we,[e("button",{onClick:g=>A(r.id),class:u([r.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"])},[e("span",{class:u([r.is_active?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},null,2)],10,_e),e("button",{onClick:g=>D(r.id),class:"text-red-500 hover:text-red-700"},[...t[23]||(t[23]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Se)])]))),128))]))])]),n.value?(o(),i("div",Ce,[e("div",je,[e("div",{class:"fixed inset-0 bg-black/50",onClick:t[3]||(t[3]=r=>n.value=!1)}),e("div",Be,[t[28]||(t[28]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Yangi hisobot yaratish",-1)),e("div",He,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Boshlanish sanasi",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=r=>d.start_date=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,512),[[p,d.start_date]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tugash sanasi",-1)),k(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=r=>d.end_date=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},null,512),[[p,d.end_date]])]),e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Shablon (ixtiyoriy)",-1)),k(e("select",{"onUpdate:modelValue":t[6]||(t[6]=r=>d.template_id=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"},[t[26]||(t[26]=e("option",{value:null},"Standart",-1)),(o(!0),i(m,null,b(l.templates,r=>(o(),i("option",{key:r.id,value:r.id},a(r.name),9,Me))),128))],512),[[R,d.template_id]])])]),e("div",Ae,[e("button",{onClick:t[7]||(t[7]=r=>n.value=!1),class:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"}," Bekor qilish "),e("button",{onClick:H,disabled:x.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50"},[x.value?(o(),i("span",Ve,"Yaratilmoqda...")):(o(),i("span",$e,"Yaratish"))],8,De)])])])])):f("",!0)]),_:1}))}};export{rt as default};
