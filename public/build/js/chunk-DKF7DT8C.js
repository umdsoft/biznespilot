import{h as e,l as t}from"./chunk-BhZp3z4u.js";import{C as a,r as s}from"./chunk-Dl5Vnr2b.js";import{u as l}from"./app-C-ZlocOh.js";import{r}from"./chunk-BuJDoypK.js";import{r as n}from"./chunk-dqIIyBTR.js";import{r as o}from"./chunk-BFPxvklm.js";import{C as i,y as c,D as m,r as g,o as d,e as p,L as x,A as y,x as u,B as h,z as f,E as v,v as k,J as w,K as b,I as _}from"./chunk-CpmtkKLp.js";import{r as j}from"./chunk-D7oP9pDe.js";function C(e,t){return m(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})])}const D={class:"mb-6 flex items-center justify-between"},z={class:"flex items-center space-x-4"},A={class:"flex items-center space-x-3"},M={key:0,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},Z={key:1,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},B={key:2,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},F={class:"font-semibold text-xl text-gray-800 leading-tight"},H={class:"text-sm text-gray-600"},I={class:"flex items-center space-x-2"},N={class:"text-sm text-gray-600"},S=["value"],U=["value"],O={class:"max-w-8xl mx-auto"},T={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},$={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6"},L={class:"flex items-center"},V={class:"flex-shrink-0"},E={class:"ml-4 flex-1"},G={class:"text-sm font-medium text-gray-500 truncate"},J={class:"text-2xl font-bold text-gray-900"},K={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},R={class:"p-6"},P={class:"flex items-center"},Q={class:"flex-shrink-0"},W={class:"ml-4 flex-1"},X={class:"text-sm font-medium text-gray-500 truncate"},Y={class:"text-2xl font-bold text-gray-900"},ee={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},te={class:"p-6"},ae={class:"flex items-center"},se={class:"flex-shrink-0"},le={class:"ml-4 flex-1"},re={class:"text-sm font-medium text-gray-500 truncate"},ne={class:"text-2xl font-bold text-gray-900"},oe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ie={class:"p-6"},ce={class:"flex items-center"},me={class:"flex-shrink-0"},ge={class:"ml-4 flex-1"},de={class:"text-sm font-medium text-gray-500 truncate"},pe={class:"text-2xl font-bold text-gray-900"},xe={key:0},ye={key:1},ue={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},he={class:"p-6"},fe={class:"text-lg font-semibold text-gray-900 mb-4"},ve={key:0,style:{height:"400px"}},ke={key:1,class:"text-center py-12 text-gray-500"},we={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},be={class:"p-6"},_e={class:"text-lg font-semibold text-gray-900 mb-4"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Ce={class:"border-l-4 border-red-500 pl-4"},De={class:"text-sm text-gray-600"},ze={class:"text-2xl font-bold text-gray-900"},Ae={class:"border-l-4 border-green-500 pl-4"},Me={class:"text-sm text-gray-600"},Ze={class:"text-2xl font-bold text-gray-900"},Be={class:"border-l-4 border-blue-500 pl-4"},Fe={class:"text-sm text-gray-600"},He={class:"text-2xl font-bold text-gray-900"},Ie={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ne={class:"p-6"},Se={class:"text-lg font-semibold text-gray-900 mb-4"},Ue={key:0,class:"overflow-x-auto"},Oe={class:"min-w-full divide-y divide-gray-200"},Te={class:"bg-gray-50"},$e={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},qe={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Le={key:1,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ve={key:2,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ee={key:3,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ge={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Je={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Ke={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Re={class:"bg-white divide-y divide-gray-200"},Pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Qe={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},We={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Xe={key:2,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Ye={key:3,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},tt={key:0},at={key:1},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={key:0},nt={key:1},ot={key:1,class:"text-center py-8 text-gray-500"},it={__name:"MarketingChannelDetail",props:{panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)},channel:{type:Object,required:!0},metrics:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},summary:{type:Object,default:()=>({})},period:{type:Number,default:30}},setup(it){const{t:ct}=l();a.register(...s);const mt=it,gt=e=>("business"===mt.panelType?"/business/marketing":"/marketing")+e,dt=g(null);let pt=null;const xt=e=>e||0===e?new Intl.NumberFormat("uz-UZ").format(e):"0",yt=e=>e?Number(e).toFixed(2):"0.00",ut=e=>{if(!e)return"0";const t=e/100;return new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(t)},ht=()=>({instagram:"instagram",telegram:"telegram",facebook:"facebook",google_ads:"google_ads"}[mt.channel.type]||"default");d(()=>{if(dt.value&&mt.chartData.labels.length>0){const e=dt.value.getContext("2d");pt=new a(e,{type:"line",data:mt.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return xt(e)}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}}),p(()=>{pt&&pt.destroy()});const ft=[{value:7,label:ct("marketing.days_7")},{value:14,label:ct("marketing.days_14")},{value:30,label:ct("marketing.days_30")},{value:60,label:ct("marketing.days_60")},{value:90,label:ct("marketing.days_90")}];return(a,s)=>(m(),i(w,null,[x(y(e),{title:`${it.channel.name} - Analytics`},null,8,["title"]),c("div",null,[c("div",D,[c("div",z,[x(y(t),{href:gt("/channels"),class:"inline-flex items-center text-gray-600 hover:text-gray-900"},{default:u(()=>[x(y(r),{class:"w-5 h-5 mr-2"}),h(" "+f(y(ct)("common.back")),1)]),_:1},8,["href"]),c("div",null,[c("div",A,[c("div",{class:v(["w-12 h-12 rounded-lg flex items-center justify-center",{"bg-gradient-to-br from-pink-500 to-purple-600":"instagram"===ht(),"bg-gradient-to-br from-blue-400 to-blue-600":"telegram"===ht(),"bg-blue-600":"facebook"===ht(),"bg-gradient-to-br from-red-500 to-yellow-500":"google_ads"===ht(),"bg-gray-500":"default"===ht()}])},["instagram"===ht()?(m(),i("svg",M,[...s[1]||(s[1]=[c("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069z"},null,-1)])])):"telegram"===ht()?(m(),i("svg",Z,[...s[2]||(s[2]=[c("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"},null,-1)])])):"facebook"===ht()?(m(),i("svg",B,[...s[3]||(s[3]=[c("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"},null,-1)])])):(m(),k(y(n),{key:3,class:"w-6 h-6 text-white"}))],2),c("div",null,[c("h2",F,f(it.channel.name),1),c("p",H,f({instagram:"Instagram",telegram:"Telegram",facebook:"Facebook",google_ads:"Google Ads"}[mt.channel.type]||mt.channel.type),1)])])])]),c("div",I,[c("span",N,f(y(ct)("marketing.period"))+":",1),c("select",{onChange:s[0]||(s[0]=e=>{return t=e.target.value,void(window.location.href=`${gt("/channels/"+mt.channel.id)}?period=${t}`);var t}),value:it.period,class:"rounded-md border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500"},[(m(),i(w,null,b(ft,e=>c("option",{key:e.value,value:e.value},f(e.label),9,U)),64))],40,S)])]),c("div",O,[c("div",T,[c("div",$,[c("div",q,[c("div",L,[c("div",V,[x(y(o),{class:"h-10 w-10 text-blue-600"})]),c("div",E,[c("p",G,f("google_ads"===it.channel.type?y(ct)("marketing.total_impressions"):y(ct)("marketing.total_reach")),1),c("p",J,f(xt(it.summary.total_reach||it.summary.total_impressions||0)),1)])])])]),c("div",K,[c("div",R,[c("div",P,[c("div",Q,[x(y(C),{class:"h-10 w-10 text-green-600"})]),c("div",W,[c("p",X,f("google_ads"===it.channel.type?y(ct)("marketing.total_clicks"):y(ct)("marketing.total_engagement")),1),c("p",Y,f(xt(it.summary.total_engagement||it.summary.total_clicks||0)),1)])])])]),c("div",ee,[c("div",te,[c("div",ae,[c("div",se,[x(y(n),{class:"h-10 w-10 text-purple-600"})]),c("div",le,[c("p",re,f("google_ads"===it.channel.type?y(ct)("marketing.avg_ctr"):y(ct)("marketing.avg_engagement")),1),c("p",ne,f(yt(it.summary.avg_engagement_rate||it.summary.avg_ctr||0))+"% ",1)])])])]),c("div",oe,[c("div",ie,[c("div",ce,[c("div",me,[x(y(j),{class:v(["h-10 w-10",(it.summary.growth||0)>=0?"text-green-600":"text-red-600"])},null,8,["class"])]),c("div",ge,[c("p",de,f("google_ads"===it.channel.type?y(ct)("marketing.avg_roas"):y(ct)("marketing.growth")),1),c("p",pe,["google_ads"===it.channel.type?(m(),i("span",xe,f(yt(it.summary.avg_roas||0)),1)):(m(),i("span",ye,f((it.summary.growth||0)>=0?"+":"")+f(xt(it.summary.growth||0)),1))])])])])])]),c("div",ue,[c("div",he,[c("h3",fe,f(y(ct)("marketing.performance_chart"))+" ("+f(it.period)+" "+f(y(ct)("marketing.days"))+") ",1),it.chartData.labels.length>0?(m(),i("div",ve,[c("canvas",{ref_key:"chartCanvas",ref:dt},null,512)])):(m(),i("div",ke,[x(y(n),{class:"mx-auto h-12 w-12 text-gray-400 mb-2"}),c("p",null,f(y(ct)("marketing.no_data_for_period")),1)]))])]),"google_ads"===it.channel.type&&it.summary.total_cost?(m(),i("div",we,[c("div",be,[c("h3",_e,f(y(ct)("marketing.cost_and_conversion")),1),c("div",je,[c("div",Ce,[c("p",De,f(y(ct)("marketing.total_cost")),1),c("p",ze,f(ut(it.summary.total_cost)),1)]),c("div",Ae,[c("p",Me,f(y(ct)("marketing.total_conversions")),1),c("p",Ze,f(xt(it.summary.total_conversions||0)),1)]),c("div",Be,[c("p",Fe,f(y(ct)("marketing.avg_cpa")),1),c("p",He,f(it.summary.total_conversions>0?ut(it.summary.total_cost/it.summary.total_conversions*100):"0"),1)])])])])):_("",!0),c("div",Ie,[c("div",Ne,[c("h3",Se,f(y(ct)("marketing.recent_data")),1),it.metrics.length>0?(m(),i("div",Ue,[c("table",Oe,[c("thead",Te,[c("tr",null,[c("th",$e,f(y(ct)("common.date")),1),"instagram"===it.channel.type?(m(),i("th",qe,f(y(ct)("marketing.followers")),1)):_("",!0),"telegram"===it.channel.type?(m(),i("th",Le,f(y(ct)("marketing.members")),1)):_("",!0),"facebook"===it.channel.type?(m(),i("th",Ve,f(y(ct)("marketing.page_followers")),1)):_("",!0),"google_ads"===it.channel.type?(m(),i("th",Ee,f(y(ct)("marketing.impressions")),1)):_("",!0),c("th",Ge,f("google_ads"===it.channel.type?y(ct)("marketing.clicks"):y(ct)("marketing.reach")),1),c("th",Je,f("google_ads"===it.channel.type?y(ct)("marketing.conversions"):y(ct)("marketing.engagement")),1),c("th",Ke,f("google_ads"===it.channel.type?y(ct)("marketing.ctr")+" %":y(ct)("marketing.engagement_rate")+" %"),1)])]),c("tbody",Re,[(m(!0),i(w,null,b(it.metrics.slice(0,10),e=>(m(),i("tr",{key:e.id},[c("td",Pe,f(new Date(e.metric_date).toLocaleDateString("uz-UZ")),1),"instagram"===it.channel.type?(m(),i("td",Qe,f(xt(e.followers_count)),1)):_("",!0),"telegram"===it.channel.type?(m(),i("td",We,f(xt(e.members_count)),1)):_("",!0),"facebook"===it.channel.type?(m(),i("td",Xe,f(xt(e.page_followers)),1)):_("",!0),"google_ads"===it.channel.type?(m(),i("td",Ye,f(xt(e.impressions)),1)):_("",!0),c("td",et,["google_ads"===it.channel.type?(m(),i("span",tt,f(xt(e.clicks)),1)):(m(),i("span",at,f(xt(e.reach||e.total_views)),1))]),c("td",st,f("google_ads"===it.channel.type?xt(e.conversions):xt(e.likes+e.comments+(e.shares||0))),1),c("td",lt,["google_ads"===it.channel.type?(m(),i("span",rt,f(yt(e.ctr))+"%",1)):(m(),i("span",nt,f(yt(e.engagement_rate))+"%",1))])]))),128))])])])):(m(),i("div",ot,f(y(ct)("common.no_data")),1))])])])])],64))}};export{it as _};
