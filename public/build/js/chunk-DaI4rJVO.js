import{r as e,b as t,C as r,L as a,y as s,A as l,z as n,x as d,B as i,F as o,G as g,J as u,K as c,E as m,I as p,v as x,O as k,Q as b,N as f,D as h}from"./chunk-CpmtkKLp.js";import{h as y,l as v,r as w}from"./chunk-BhZp3z4u.js";import{u as _}from"./app-C-ZlocOh.js";import{r as j}from"./chunk-BiBvtcLb.js";import{m as C}from"./chunk-D7SyfRoT.js";import{r as M}from"./chunk-CHHwFzll.js";import{r as S}from"./chunk-yvcCPqrN.js";import{r as L}from"./chunk-DmrwHl-6.js";import{r as B}from"./chunk-DNKDGYPp.js";import{r as z}from"./chunk-CsQ5VFFw.js";import{r as $}from"./chunk-DOHfaLsi.js";import{r as G}from"./chunk-BYA8ViGa.js";import{r as I}from"./chunk-eMHYSAeQ.js";const O={class:"space-y-6"},T={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},A={class:"text-2xl font-bold text-gray-900 dark:text-white"},D={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},F={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},E={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},H={class:"flex items-center justify-between"},U={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},V={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},q={class:"w-12 h-12 bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded-xl flex items-center justify-center"},J={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},K={class:"flex items-center justify-between"},N={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Q={class:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},Z={class:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-green-100 dark:from-emerald-900/40 dark:to-green-900/40 rounded-xl flex items-center justify-center"},P={class:"mt-3 flex items-center text-xs text-emerald-600 dark:text-emerald-400"},R={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},W={class:"flex items-center justify-between"},X={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Y={class:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1"},ee={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},te={class:"flex items-center justify-between"},re={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},ae={class:"text-3xl font-bold text-amber-600 dark:text-amber-400 mt-1"},se={class:"space-y-4"},le={class:"relative max-w-md"},ne=["placeholder"],de={class:"flex flex-wrap gap-2"},ie=["onClick"],oe={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden"},ge={key:0,class:"p-12 text-center"},ue={class:"w-20 h-20 mx-auto bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded-2xl flex items-center justify-center mb-4"},ce={class:"text-lg font-semibold text-gray-900 dark:text-white"},me={class:"mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto"},pe={class:"mt-6"},xe={key:1,class:"divide-y divide-gray-100 dark:divide-gray-700"},ke={class:"flex items-start gap-4"},be={class:"text-white text-sm font-bold"},fe={class:"flex-1 min-w-0"},he={class:"flex items-center gap-3 mb-1 flex-wrap"},ye={class:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 flex-wrap"},ve={key:0,class:"flex items-center gap-1"},we={key:0,class:"mt-3 flex items-center gap-6"},_e={key:0,class:"flex items-center gap-2"},je={class:"text-xs text-gray-500 dark:text-gray-400"},Ce={class:"text-sm font-medium text-gray-900 dark:text-white"},Me={class:"text-xs font-medium text-emerald-600 dark:text-emerald-400"},Se={key:1,class:"flex-1 max-w-[200px]"},Le={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-1"},Be={class:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},ze={class:"flex items-center gap-2 flex-shrink-0"},$e=["onClick","title"],Ge=["onClick","title"],Ie=["onClick","title"],Oe={class:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-2xl p-6 border border-purple-100 dark:border-purple-800/30"},Te={class:"flex items-start"},Ae={class:"text-sm font-semibold text-gray-900 dark:text-white"},De={class:"mt-2 space-y-1.5 text-sm text-gray-600 dark:text-gray-400"},Fe={class:"flex items-center"},Ee={class:"text-gray-700 dark:text-gray-300"},He={class:"flex items-center"},Ue={class:"text-gray-700 dark:text-gray-300"},Ve={class:"flex items-center"},qe={class:"text-gray-700 dark:text-gray-300"},Je={__name:"MarketingCampaignsIndex",props:{panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)},campaigns:{type:Array,default:()=>[]},stats:Object,filters:Object,currentBusiness:Object},setup(Je){const Ke=Je,Ne=e=>("business"===Ke.panelType?"/business/marketing":"/marketing")+e,{t:Qe}=_(),Ze=e(Ke.filters?.search||"");e(Ke.filters?.status||""),e(Ke.filters?.type||""),e(!1);const Pe=e("all"),Re=t(()=>Ke.campaigns.filter(e=>"running"===e.status||"active"===e.status).length),We=t(()=>Ke.campaigns.filter(e=>"scheduled"===e.status).length),Xe=t(()=>Ke.campaigns.reduce((e,t)=>e+(t.sent_count||0),0)),Ye=t(()=>[{value:"all",label:Qe("common.all"),count:Ke.campaigns.length},{value:"running",label:Qe("marketing.status_active"),count:Re.value},{value:"scheduled",label:Qe("marketing.status_scheduled"),count:We.value},{value:"draft",label:Qe("marketing.status_draft"),count:Ke.campaigns.filter(e=>"draft"===e.status).length},{value:"completed",label:Qe("marketing.status_completed"),count:Ke.campaigns.filter(e=>"completed"===e.status).length}]),et=t(()=>{let e=Ke.campaigns;if("all"!==Pe.value&&(e=e.filter(e=>e.status===Pe.value||"running"===Pe.value&&"active"===e.status)),Ze.value){const t=Ze.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return e}),tt=t(()=>Ze.value||"all"!==Pe.value),rt=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric"})},at=e=>({active:Qe("marketing.status_active"),running:Qe("marketing.status_active"),completed:Qe("marketing.status_completed"),paused:Qe("marketing.status_paused"),draft:Qe("marketing.status_draft"),scheduled:Qe("marketing.status_scheduled"),failed:Qe("marketing.status_failed")}[e]||e),st=e=>({active:M,running:M,completed:I,paused:z,draft:G,scheduled:G}[e]||G),lt=e=>({broadcast:Qe("marketing.type_broadcast"),drip:Qe("marketing.type_drip"),trigger:Qe("marketing.type_trigger"),promotion:Qe("marketing.campaign_type_promotion"),branding:Qe("marketing.campaign_type_branding")}[e]||e),nt=e=>({instagram:"Instagram",telegram:"Telegram",facebook:"Facebook",email:"Email",sms:"SMS",all:Qe("marketing.all_channels")}[e]||e),dt=e=>({instagram:"IG",facebook:"FB",telegram:"TG",email:"@",sms:"SMS",all:"ALL"}[e?.toLowerCase()]||"?"),it=e=>{const t=(e.sent_count||0)+(e.failed_count||0);return 0===t?0:Math.round((e.sent_count||0)/t*100)},ot=e=>e.budget&&0!==e.budget?Math.min(100,Math.round(e.spent/e.budget*100)):0,gt=()=>{Ze.value="",Pe.value="all"};return(e,t)=>(h(),r(u,null,[a(l(y),{title:l(Qe)("marketing.campaigns")},null,8,["title"]),s("div",O,[s("div",T,[s("div",null,[s("h1",A,n(l(Qe)("marketing.campaigns")),1),s("p",D,n(l(Qe)("marketing.campaigns_description")),1)]),a(l(v),{href:Ne("/campaigns/create"),class:"inline-flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-medium rounded-xl shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transition-all duration-200"},{default:d(()=>[a(l(j),{class:"w-5 h-5 mr-2"}),i(" "+n(l(Qe)("marketing.new_campaign")),1)]),_:1},8,["href"])]),s("div",F,[s("div",E,[s("div",H,[s("div",null,[s("p",U,n(l(Qe)("marketing.total_campaigns")),1),s("p",V,n(Je.campaigns.length),1)]),s("div",q,[a(l(C),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})])])]),s("div",J,[s("div",K,[s("div",null,[s("p",N,n(l(Qe)("marketing.active_campaigns")),1),s("p",Q,n(Re.value),1)]),s("div",Z,[a(l(M),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})])]),s("div",P,[t[1]||(t[1]=s("span",{class:"w-2 h-2 bg-emerald-500 rounded-full mr-2 animate-pulse"},null,-1)),i(" "+n(l(Qe)("marketing.currently_running")),1)])]),s("div",R,[s("div",W,[s("div",null,[s("p",X,n(l(Qe)("marketing.sent_messages")),1),s("p",Y,n(Xe.value),1)]),t[2]||(t[2]=s("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/40 dark:to-cyan-900/40 rounded-xl flex items-center justify-center"},[s("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1))])]),s("div",ee,[s("div",te,[s("div",null,[s("p",re,n(l(Qe)("marketing.status_scheduled")),1),s("p",ae,n(We.value),1)]),t[3]||(t[3]=s("div",{class:"w-12 h-12 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/40 dark:to-orange-900/40 rounded-xl flex items-center justify-center"},[s("svg",{class:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),s("div",se,[s("div",le,[a(l(S),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>Ze.value=e),type:"text",placeholder:l(Qe)("marketing.search_campaign"),class:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,8,ne),[[g,Ze.value]])]),s("div",de,[(h(!0),r(u,null,c(Ye.value,e=>(h(),r("button",{key:e.value,onClick:t=>Pe.value=e.value,class:m(["px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200",Pe.value===e.value?"bg-purple-600 text-white shadow-lg shadow-purple-500/25":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-600"])},[i(n(e.label)+" ",1),e.count>0?(h(),r("span",{key:0,class:m(["ml-1.5 px-1.5 py-0.5 text-xs rounded-full",Pe.value===e.value?"bg-white/20":"bg-gray-100 dark:bg-gray-700"])},n(e.count),3)):p("",!0)],10,ie))),128))])]),s("div",oe,[0===et.value.length?(h(),r("div",ge,[s("div",ue,[a(l(C),{class:"w-10 h-10 text-purple-600 dark:text-purple-400"})]),s("h3",ce,n(tt.value?l(Qe)("marketing.no_results"):l(Qe)("marketing.no_campaigns")),1),s("p",me,n(tt.value?l(Qe)("marketing.try_changing_filters"):l(Qe)("marketing.no_campaigns_desc")),1),s("div",pe,[tt.value?(h(),r("button",{key:0,onClick:gt,class:"inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors mr-3"},[a(l(L),{class:"w-5 h-5 mr-2"}),i(" "+n(l(Qe)("marketing.clear_filters")),1)])):p("",!0),a(l(v),{href:Ne("/campaigns/create"),class:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-medium rounded-xl shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transition-all duration-200"},{default:d(()=>[a(l(j),{class:"w-5 h-5 mr-2"}),i(" "+n(l(Qe)("marketing.create_first_campaign")),1)]),_:1},8,["href"])])])):(h(),r("div",xe,[(h(!0),r(u,null,c(et.value,e=>{return h(),r("div",{key:e.id,class:"p-4 sm:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group"},[s("div",ke,[s("div",{class:m(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",(g=e.channel,{instagram:"bg-gradient-to-br from-purple-500 to-pink-500",facebook:"bg-blue-600",telegram:"bg-sky-500",email:"bg-teal-500",sms:"bg-orange-500",all:"bg-gray-700"}[g?.toLowerCase()]||"bg-gray-500")])},[s("span",be,n(dt(e.channel)),1)],2),s("div",fe,[s("div",he,[a(l(v),{href:Ne(`/campaigns/${e.id}`),class:"text-lg font-semibold text-gray-900 dark:text-white truncate group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"},{default:d(()=>[i(n(e.name),1)]),_:2},1032,["href"]),s("span",{class:m(["px-2.5 py-1 text-xs font-medium rounded-full flex items-center gap-1",(o=e.status,{active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",running:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",completed:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",paused:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",draft:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",scheduled:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",failed:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300"}[o]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400")])},[(h(),x(k(st(e.status)),{class:"w-3 h-3"})),i(" "+n(at(e.status)),1)],2),s("span",{class:m(["px-2.5 py-1 text-xs font-medium rounded-lg",(t=e.type,{broadcast:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",drip:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300",trigger:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300",promotion:"bg-pink-100 text-pink-700 dark:bg-pink-900/40 dark:text-pink-300",branding:"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"}[t]||"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300")])},n(lt(e.type)),3)]),s("div",ye,[s("span",null,n(nt(e.channel)),1),s("span",null,n(rt(e.created_at)),1),e.leads?(h(),r("span",ve,[a(l(B),{class:"w-4 h-4"}),i(" "+n(e.leads)+" lead ",1)])):p("",!0)]),e.sent_count||e.budget?(h(),r("div",we,[e.sent_count?(h(),r("div",_e,[s("span",je,n(l(Qe)("marketing.sent"))+":",1),s("span",Ce,n(e.sent_count||0),1),s("span",Me,n(it(e))+"% ",1)])):p("",!0),e.budget>0?(h(),r("div",Se,[s("div",Le,[s("span",null,n(l(Qe)("marketing.budget")),1),s("span",null,n(ot(e))+"%",1)]),s("div",Be,[s("div",{class:"h-full bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full transition-all duration-500",style:b({width:ot(e)+"%"})},null,4)])])):p("",!0)])):p("",!0)]),s("div",ze,["draft"===e.status||"scheduled"===e.status?(h(),r("button",{key:0,onClick:f(t=>{return r=e.id,void(confirm(Qe("marketing.confirm_launch_campaign"))&&w.post(Ne(`/campaigns/${r}/launch`),{},{preserveScroll:!0}));var r},["prevent"]),class:"p-2 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",title:l(Qe)("marketing.launch")},[a(l(M),{class:"w-5 h-5"})],8,$e)):p("",!0),"running"===e.status||"active"===e.status?(h(),r("button",{key:1,onClick:f(t=>{return r=e.id,void(confirm(Qe("marketing.confirm_pause_campaign"))&&w.post(Ne(`/campaigns/${r}/pause`),{},{preserveScroll:!0}));var r},["prevent"]),class:"p-2 text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:l(Qe)("marketing.pause")},[a(l(z),{class:"w-5 h-5"})],8,Ge)):p("",!0),a(l(v),{href:Ne(`/campaigns/${e.id}`),class:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:l(Qe)("common.view")},{default:d(()=>[a(l($),{class:"w-5 h-5"})]),_:1},8,["href","title"]),s("button",{onClick:f(t=>{return r=e.id,void(confirm(Qe("marketing.confirm_delete_campaign"))&&w.delete(Ne(`/campaigns/${r}`),{preserveScroll:!0}));var r},["prevent"]),class:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:l(Qe)("common.delete")},[a(l(L),{class:"w-5 h-5"})],8,Ie)])])]);var t,o,g}),128))]))]),s("div",Oe,[s("div",Te,[t[7]||(t[7]=s("div",{class:"w-10 h-10 bg-white dark:bg-gray-800 rounded-xl flex items-center justify-center shadow-sm mr-4 flex-shrink-0"},[s("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",null,[s("h4",Ae,n(l(Qe)("marketing.about_campaign_types")),1),s("ul",De,[s("li",Fe,[t[4]||(t[4]=s("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-2"},null,-1)),s("strong",Ee,n(l(Qe)("marketing.type_broadcast"))+":",1),i(" "+n(l(Qe)("marketing.type_broadcast_desc")),1)]),s("li",He,[t[5]||(t[5]=s("span",{class:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-2"},null,-1)),s("strong",Ue,n(l(Qe)("marketing.type_drip"))+":",1),i(" "+n(l(Qe)("marketing.type_drip_desc")),1)]),s("li",Ve,[t[6]||(t[6]=s("span",{class:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2"},null,-1)),s("strong",qe,n(l(Qe)("marketing.type_trigger"))+":",1),i(" "+n(l(Qe)("marketing.type_trigger_desc")),1)])])])])])])],64))}};export{Je as _};
