import{r as e,v as r,x as t,y as a,z as l,D as s,L as o,A as d,H as n,C as u,E as p,F as c,G as i,Q as g,I as y,J as m,K as x}from"./chunk-7Urb0kxg.js";import{h as b,r as h}from"./chunk-DKkye6wf.js";import{_ as k}from"./chunk-L0R09JI1.js";import{u as f}from"./app-DFslr8vl.js";import{r as v}from"./chunk-ujXbNZhL.js";import{m as w,e as _}from"./chunk-Dm-LAqtr.js";import{r as j}from"./chunk-iVGhU8RF.js";import{r as C}from"./chunk-iyumQzQd.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const S={class:"space-y-6"},q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},O={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},T={class:"text-sm text-gray-500 dark:text-gray-400"},N={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},U={key:0,class:"p-12 text-center text-gray-500 dark:text-gray-400"},E={key:1,class:"overflow-x-auto"},V={class:"w-full"},F={class:"bg-gray-50 dark:bg-gray-900/50"},K={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},z={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},A={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},J={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},R={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},X={class:"divide-y divide-gray-200 dark:divide-gray-700"},P={class:"px-6 py-4"},D={class:"flex items-center gap-3"},I={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center"},L={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},$={key:0,class:"text-xs text-purple-600 dark:text-purple-400"},G={class:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100"},H={class:"px-6 py-4"},Q={class:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},B={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},M={class:"px-6 py-4"},W={key:0,class:"flex items-center gap-2"},Y=["onClick","title"],Z=["onClick","title"],ee=["onClick","title"],re={key:1,class:"text-gray-400"},te={key:2,class:"p-12 text-center text-gray-500 dark:text-gray-400"},ae={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},le={class:"p-6 border-b border-gray-200 dark:border-gray-700"},se={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},oe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},de=["placeholder"],ne={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},pe={value:""},ce=["value"],ie={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ge=["placeholder"],ye={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},me=["placeholder"],xe={class:"flex justify-end gap-3 pt-4"},be={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},he={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},ke={class:"p-6 border-b border-gray-200 dark:border-gray-700"},fe={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},ve={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},we={value:""},_e=["value"],je={class:"flex justify-end gap-3 pt-4"},Ce={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Se={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},qe={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Oe={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Te={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ne=["placeholder"],Ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ee=["placeholder"],Ve={class:"flex justify-end gap-3 pt-4"},Fe={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Ke={__name:"Index",props:{members:{type:Array,default:()=>[]},departments:{type:Object,default:()=>({})},roles:{type:Object,default:()=>({})}},setup(Ke){const{t:ze}=f(),Ae=Ke,Je=e(Ae.members),Re=e(Ae.departments);e(Ae.roles);const Xe=e(!1),Pe=e(!1),De=e(!1),Ie=e(!1),Le=e(null),$e=e({name:"",phone:"",password:"",password_confirmation:"",department:""}),Ge=e({department:"",role:""}),He=e({password:"",password_confirmation:""}),Qe=()=>{h.reload({only:["members"]})},Be=async()=>{try{const e=await fetch(route("hr.team.invite"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify($e.value)}),r=await e.json();r.success?(Pe.value=!1,$e.value={name:"",phone:"",password:"",password_confirmation:"",department:""},Qe()):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}},Me=async()=>{if(Le.value)try{const e=await fetch(route("hr.team.update",Le.value.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(Ge.value)}),r=await e.json();r.success?(De.value=!1,Le.value=null,Qe()):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}},We=async()=>{if(Le.value)try{const e=await fetch(route("hr.team.reset-password",Le.value.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(He.value)}),r=await e.json();r.success?(Ie.value=!1,Le.value=null,He.value={password:"",password_confirmation:""},alert(ze("hr.password_changed"))):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}};return(e,h)=>(p(),r(k,{title:d(ze)("hr.employees")},{default:t(()=>[a(d(b),{title:d(ze)("hr.employees")},null,8,["title"]),l("div",S,[l("div",q,[l("div",null,[l("h1",O,n(d(ze)("hr.employees")),1),l("p",T,n(d(ze)("hr.manage_team")),1)]),l("button",{onClick:h[0]||(h[0]=e=>Pe.value=!0),class:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2"},[a(d(v),{class:"w-5 h-5"}),u(" "+n(d(ze)("hr.add_employee")),1)])]),l("div",N,[Xe.value?(p(),s("div",U,n(d(ze)("hr.loading")),1)):Je.value.length>0?(p(),s("div",E,[l("table",V,[l("thead",F,[l("tr",null,[l("th",K,n(d(ze)("hr.full_name")),1),l("th",z,n(d(ze)("hr.phone")),1),l("th",A,n(d(ze)("hr.department")),1),l("th",J,n(d(ze)("hr.joined_at")),1),l("th",R,n(d(ze)("hr.actions")),1)])]),l("tbody",X,[(p(!0),s(c,null,i(Je.value,e=>(p(),s("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[l("td",P,[l("div",D,[l("div",I,[a(d(w),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),l("div",null,[l("p",L,n(e.name),1),e.is_owner?(p(),s("p",$,n(d(ze)("hr.business_owner")),1)):o("",!0)])])]),l("td",G,n(e.phone||"N/A"),1),l("td",H,[l("span",Q,n(e.department_label||"N/A"),1)]),l("td",B,n(e.joined_at||e.created_at),1),l("td",M,[e.is_owner?(p(),s("span",re,"-")):(p(),s("div",W,[l("button",{onClick:r=>(e=>{Le.value=e,Ge.value={department:e.department||"",role:e.role||""},De.value=!0})(e),class:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:d(ze)("hr.edit")},[a(d(j),{class:"w-5 h-5"})],8,Y),l("button",{onClick:r=>(e=>{Le.value=e,He.value={password:"",password_confirmation:""},Ie.value=!0})(e),class:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:d(ze)("hr.change_password")},[a(d(C),{class:"w-5 h-5"})],8,Z),l("button",{onClick:r=>(async e=>{if(confirm(`${e.name}${ze("hr.remove_confirm")}`))try{const r=await fetch(route("hr.team.remove",e.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}}),t=await r.json();t.success?Qe():alert(t.error||ze("hr.error_occurred"))}catch(r){alert(ze("hr.error_occurred"))}})(e),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:d(ze)("hr.delete")},[a(d(_),{class:"w-5 h-5"})],8,ee)]))])]))),128))])])])):(p(),s("div",te,[a(d(w),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),l("p",null,n(d(ze)("hr.no_employees")),1)]))])]),Pe.value?(p(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[7]||(h[7]=g(e=>Pe.value=!1,["self"]))},[l("div",ae,[l("div",le,[l("h3",se,n(d(ze)("hr.new_employee")),1)]),l("form",{onSubmit:g(Be,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",oe,n(d(ze)("hr.full_name"))+" *",1),y(l("input",{"onUpdate:modelValue":h[1]||(h[1]=e=>$e.value.name=e),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.name_placeholder")},null,8,de),[[m,$e.value.name]])]),l("div",null,[l("label",ne,n(d(ze)("hr.phone"))+" *",1),y(l("input",{"onUpdate:modelValue":h[2]||(h[2]=e=>$e.value.phone=e),type:"text",required:"",maxlength:"12",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"998901234567"},null,512),[[m,$e.value.phone]])]),l("div",null,[l("label",ue,n(d(ze)("hr.department"))+" *",1),y(l("select",{"onUpdate:modelValue":h[3]||(h[3]=e=>$e.value.department=e),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[l("option",pe,n(d(ze)("hr.select")),1),(p(!0),s(c,null,i(Re.value,(e,r)=>(p(),s("option",{key:r,value:r},n(e),9,ce))),128))],512),[[x,$e.value.department]])]),l("div",null,[l("label",ie,n(d(ze)("hr.password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[4]||(h[4]=e=>$e.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.password_placeholder")},null,8,ge),[[m,$e.value.password]])]),l("div",null,[l("label",ye,n(d(ze)("hr.confirm_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[5]||(h[5]=e=>$e.value.password_confirmation=e),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.reenter_password")},null,8,me),[[m,$e.value.password_confirmation]])]),l("div",xe,[l("button",{type:"button",onClick:h[6]||(h[6]=e=>Pe.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",be,n(d(ze)("hr.add")),1)])],32)])])):o("",!0),De.value?(p(),s("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[10]||(h[10]=g(e=>De.value=!1,["self"]))},[l("div",he,[l("div",ke,[l("h3",fe,n(d(ze)("hr.edit_employee")),1)]),l("form",{onSubmit:g(Me,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",ve,n(d(ze)("hr.department")),1),y(l("select",{"onUpdate:modelValue":h[8]||(h[8]=e=>Ge.value.department=e),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[l("option",we,n(d(ze)("hr.select")),1),(p(!0),s(c,null,i(Re.value,(e,r)=>(p(),s("option",{key:r,value:r},n(e),9,_e))),128))],512),[[x,Ge.value.department]])]),l("div",je,[l("button",{type:"button",onClick:h[9]||(h[9]=e=>De.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",Ce,n(d(ze)("hr.save")),1)])],32)])])):o("",!0),Ie.value?(p(),s("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[14]||(h[14]=g(e=>Ie.value=!1,["self"]))},[l("div",Se,[l("div",qe,[l("h3",Oe,n(d(ze)("hr.change_password")),1)]),l("form",{onSubmit:g(We,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",Te,n(d(ze)("hr.new_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[11]||(h[11]=e=>He.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.password_placeholder")},null,8,Ne),[[m,He.value.password]])]),l("div",null,[l("label",Ue,n(d(ze)("hr.confirm_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[12]||(h[12]=e=>He.value.password_confirmation=e),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.reenter_password")},null,8,Ee),[[m,He.value.password_confirmation]])]),l("div",Ve,[l("button",{type:"button",onClick:h[13]||(h[13]=e=>Ie.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",Fe,n(d(ze)("hr.update")),1)])],32)])])):o("",!0)]),_:1},8,["title"]))}};export{Ke as default};
