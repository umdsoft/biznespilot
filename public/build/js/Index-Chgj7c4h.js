import{b as t,r as e,v as r,x as a,y as s,z as l,A as o,D as d,L as i,C as n,H as g,E as c,F as x,G as p,M as u,I as y,J as m,K as b,B as h}from"./chunk-7Urb0kxg.js";import{h as f,l as k,r as v}from"./chunk-DKkye6wf.js";import{_ as w,b as j}from"./chunk-Dm-LAqtr.js";import{_}from"./chunk-BB8-4400.js";import{_ as T}from"./chunk-k4W8urQJ.js";import{_ as A}from"./chunk-By7haasb.js";import{r as L}from"./chunk-Di_ohWeo.js";import{r as z}from"./chunk-ujXbNZhL.js";import{r as C}from"./chunk-D3xK5Dso.js";import{r as K}from"./chunk-DUcDuGHI.js";import{r as S}from"./chunk-Sfe4u6kO.js";import{r as Y}from"./chunk-BugzYCIx.js";import{r as $}from"./chunk-DFOrpe8W.js";import{r as D}from"./chunk-afst19KZ.js";import{r as F}from"./chunk-COgkU9mi.js";import{r as H}from"./chunk-DR2SDUSg.js";import{r as O}from"./chunk-DS-Zp4Qb.js";import{a as U}from"./chunk-C1ExV0Y3.js";import{r as q}from"./chunk-DVQ2uBdT.js";import{r as B}from"./chunk-COcY4LUF.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-BAC6lhkp.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-D4tA7yBb.js";import"./chunk-DmCyVuil.js";import"./chunk-Be6I8nOg.js";import"./chunk-DpGbuIFK.js";import"./chunk-78n7fhob.js";const I={class:"py-6 min-h-screen bg-gradient-to-br from-gray-50 via-white to-purple-50/30 dark:from-gray-900 dark:via-gray-800 dark:to-purple-900/20"},E={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8"},M={class:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3"},Q={class:"w-12 h-12 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg"},R={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8"},V={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-100 dark:border-gray-700"},Z={class:"flex items-center gap-3"},G={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/50 rounded-lg flex items-center justify-center"},N={class:"text-2xl font-bold text-gray-900 dark:text-white"},P={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-100 dark:border-gray-700"},W={class:"flex items-center gap-3"},X={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},et={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-100 dark:border-gray-700"},rt={class:"flex items-center gap-3"},at={class:"w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},st={class:"text-2xl font-bold text-gray-900 dark:text-white"},lt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-100 dark:border-gray-700"},ot={class:"flex items-center gap-3"},dt={class:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/50 rounded-lg flex items-center justify-center"},it={class:"text-xl font-bold text-gray-900 dark:text-white"},nt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 border border-gray-100 dark:border-gray-700"},gt={class:"flex items-center gap-3"},ct={class:"w-12 h-12 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg flex items-center justify-center"},xt={class:"text-2xl font-bold text-gray-900 dark:text-white"},pt={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},ut={class:"flex items-center gap-3 mb-3"},yt={class:"font-medium text-gray-900 dark:text-white"},mt={class:"flex items-end justify-between"},bt={class:"text-2xl font-bold text-gray-900 dark:text-white"},ht={class:"text-right"},ft={class:"text-lg font-bold text-green-600"},kt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden mb-8"},vt={class:"px-6 py-4 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/30 dark:to-indigo-900/30 border-b border-purple-100 dark:border-purple-800"},wt={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},jt={class:"p-6"},_t={key:0,class:"text-center py-8 text-gray-500"},Tt={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},At={class:"font-bold text-gray-900 dark:text-white mb-2"},Lt={class:"flex items-center justify-between text-sm"},zt={class:"text-gray-500"},Ct={class:"text-green-600 font-semibold"},Kt={class:"mt-3 flex items-center justify-between"},St={class:"text-lg font-bold text-purple-600"},Yt={class:"text-sm text-gray-500"},$t={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden"},Dt={class:"px-6 py-4 bg-gradient-to-r from-gray-50 to-slate-50 dark:from-gray-700/50 dark:to-slate-700/50 border-b border-gray-100 dark:border-gray-700"},Ft={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},Ht={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},Ot={class:"flex items-center gap-3"},Ut={class:"relative"},qt=["value"],Bt={class:"overflow-x-auto"},It={class:"w-full"},Et={class:"divide-y divide-gray-100 dark:divide-gray-700"},Jt={class:"px-6 py-4"},Mt={class:"font-medium text-gray-900 dark:text-white"},Qt={class:"text-sm text-gray-500"},Rt={class:"px-6 py-4"},Vt={class:"font-medium text-gray-900 dark:text-white"},Zt={class:"text-sm text-purple-600"},Gt={class:"px-6 py-4"},Nt={class:"flex items-center gap-2"},Pt={class:"text-sm text-gray-600 dark:text-gray-400"},Wt={class:"px-6 py-4"},Xt={class:"px-6 py-4"},te={class:"flex items-center gap-1 text-sm"},ee={class:"text-gray-600 dark:text-gray-400"},re={class:"px-6 py-4 text-sm text-gray-500"},ae={class:"px-6 py-4"},se={class:"flex items-center justify-end gap-2"},le=["onClick"],oe=["onClick"],de={key:0},ie={colspan:"7",class:"px-6 py-12 text-center text-gray-500"},ne={__name:"Index",props:{panelType:String,offers:Array,recentAssignments:Array,stats:Object,channelStats:Array,statusLabels:Object,channelLabels:Object},setup(ne){const ge=ne,ce=t(()=>({business:_,saleshead:T,operator:A}[ge.panelType]||w)),xe=()=>({saleshead:"sales-head",business:"business",operator:"operator"}[ge.panelType]||ge.panelType),pe=e(""),ue=e(""),ye=t(()=>{let t=ge.recentAssignments;if(pe.value){const e=pe.value.toLowerCase();t=t.filter(t=>t.lead?.name?.toLowerCase().includes(e)||t.offer?.name?.toLowerCase().includes(e))}return ue.value&&(t=t.filter(t=>t.status===ue.value)),t}),me=t=>({telegram:U,sms:B,email:q,whatsapp:U,manual:O}[t]||U),be=t=>t?new Intl.NumberFormat("uz-UZ").format(t):"0";return(t,e)=>(c(),r(u(ce.value),{title:"Taklif Avtomatizatsiya"},{default:a(()=>[s(o(f),{title:"Taklif Avtomatizatsiya"}),l("div",I,[l("div",E,[l("div",J,[l("div",null,[l("h1",M,[l("div",Q,[s(o(L),{class:"w-6 h-6 text-white"})]),e[2]||(e[2]=n(" Taklif Avtomatizatsiya ",-1))]),e[3]||(e[3]=l("p",{class:"text-gray-500 dark:text-gray-400 mt-2"}," Takliflarni avtomatik yuborish va konversiyani kuzatish ",-1))]),s(o(k),{href:t.route(`${xe()}.offer-automation.create`),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg"},{default:a(()=>[s(o(z),{class:"w-5 h-5"}),e[4]||(e[4]=n(" Taklif Yuborish ",-1))]),_:1},8,["href"])]),l("div",R,[l("div",V,[l("div",Z,[l("div",G,[s(o(C),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),l("div",null,[e[5]||(e[5]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol Takliflar",-1)),l("p",N,g(ne.stats.total_offers),1)])])]),l("div",P,[l("div",W,[l("div",X,[s(o(L),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),l("div",null,[e[6]||(e[6]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yuborildi",-1)),l("p",tt,g(ne.stats.total_sent),1)])])]),l("div",et,[l("div",rt,[l("div",at,[s(o(K),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),l("div",null,[e[7]||(e[7]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Konversiya",-1)),l("p",st,g(ne.stats.total_conversions),1)])])]),l("div",lt,[l("div",ot,[l("div",dt,[s(o(S),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),l("div",null,[e[8]||(e[8]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami Daromad",-1)),l("p",it,g(be(ne.stats.total_revenue)),1)])])]),l("div",nt,[l("div",gt,[l("div",ct,[s(o(Y),{class:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})]),l("div",null,[e[9]||(e[9]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha CR",-1)),l("p",xt,g(ne.stats.avg_conversion_rate?.toFixed(1))+"%",1)])])])]),ne.channelStats.length>0?(c(),d("div",pt,[(c(!0),d(x,null,p(ne.channelStats,t=>(c(),d("div",{key:t.channel,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-4 border border-gray-100 dark:border-gray-700"},[l("div",ut,[(c(),r(u(me(t.channel)),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})),l("span",yt,g(t.label),1)]),l("div",mt,[l("div",null,[l("p",bt,g(t.total),1),e[10]||(e[10]=l("p",{class:"text-xs text-gray-500"},"yuborildi",-1))]),l("div",ht,[l("p",ft,g(t.conversion_rate)+"%",1),e[11]||(e[11]=l("p",{class:"text-xs text-gray-500"},"konversiya",-1))])])]))),128))])):i("",!0),l("div",kt,[l("div",vt,[l("h2",wt,[s(o($),{class:"w-5 h-5 text-purple-600"}),e[12]||(e[12]=n(" Eng Yaxshi Takliflar ",-1))])]),l("div",jt,[0===ne.offers.length?(c(),d("div",_t," Hozircha faol takliflar yo'q ")):(c(),d("div",Tt,[(c(!0),d(x,null,p(ne.offers.slice(0,6),t=>(c(),d("div",{key:t.id,class:"p-4 border-2 border-gray-100 dark:border-gray-700 rounded-xl hover:border-purple-300 dark:hover:border-purple-600 transition-all"},[l("h3",At,g(t.name),1),l("div",Lt,[l("span",zt,"Yuborildi: "+g(t.total_sent),1),l("span",Ct,g(t.conversion_rate)+"% CR",1)]),l("div",Kt,[l("span",St,g(be(t.pricing))+" so'm",1),l("span",Yt,g(t.conversions)+" sotildi",1)])]))),128))]))])]),l("div",$t,[l("div",Dt,[l("div",Ft,[l("h2",Ht,[s(o(D),{class:"w-5 h-5 text-gray-600"}),e[13]||(e[13]=n(" So'nggi Yuborilganlar ",-1))]),l("div",Ot,[l("div",Ut,[s(o(F),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),y(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>pe.value=t),type:"text",placeholder:"Qidirish...",class:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm w-48"},null,512),[[m,pe.value]])]),y(l("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>ue.value=t),class:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[e[14]||(e[14]=l("option",{value:""},"Barcha holatlar",-1)),(c(!0),d(x,null,p(ne.statusLabels,(t,e)=>(c(),d("option",{key:e,value:e},g(t),9,qt))),128))],512),[[b,ue.value]])])])]),l("div",Bt,[l("table",It,[e[16]||(e[16]=l("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Lead"),l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Taklif"),l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Kanal"),l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Holat"),l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Ko'rildi"),l("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Sana"),l("th",{class:"px-6 py-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase"},"Amallar")])],-1)),l("tbody",Et,[(c(!0),d(x,null,p(ye.value,e=>{return c(),d("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[l("td",Jt,[l("div",Mt,g(e.lead?.name||"-"),1),l("div",Qt,g(e.lead?.phone),1)]),l("td",Rt,[l("div",Vt,g(e.offer?.name),1),l("div",Zt,g(be(e.offered_price))+" so'm",1)]),l("td",Gt,[l("div",Nt,[(c(),r(u(me(e.channel)),{class:"w-4 h-4 text-gray-500"})),l("span",Pt,g(ne.channelLabels[e.channel]),1)])]),l("td",Wt,[l("span",{class:h([(x=e.status,{pending:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",delivered:"bg-indigo-100 text-indigo-700",viewed:"bg-purple-100 text-purple-700",clicked:"bg-pink-100 text-pink-700",interested:"bg-yellow-100 text-yellow-700",converted:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",expired:"bg-gray-100 text-gray-500"}[x]||"bg-gray-100 text-gray-700"),"px-2.5 py-1 rounded-full text-xs font-semibold"])},g(ne.statusLabels[e.status]),3)]),l("td",Xt,[l("div",te,[s(o(H),{class:"w-4 h-4 text-gray-400"}),l("span",ee,g(e.view_count),1)])]),l("td",re,g((n=e.sent_at||e.created_at,n?new Date(n).toLocaleDateString("uz-UZ",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}):"-")),1),l("td",ae,[l("div",se,[s(o(k),{href:t.route(`${xe()}.offer-automation.show`,e.id),class:"p-2 text-gray-400 hover:text-purple-600 transition-colors",title:"Ko'rish"},{default:a(()=>[s(o(H),{class:"w-5 h-5"})]),_:1},8,["href"]),["converted","rejected","expired"].includes(e.status)?i("",!0):(c(),d("button",{key:0,onClick:t=>{return r=e.id,void v.post(route(`${xe()}.offer-automation.resend`,r));var r},class:"p-2 text-gray-400 hover:text-blue-600 transition-colors",title:"Qayta yuborish"},[s(o(j),{class:"w-5 h-5"})],8,le)),["converted","rejected","expired"].includes(e.status)?i("",!0):(c(),d("button",{key:1,onClick:t=>{return r=e.id,void(confirm("Konversiya sifatida belgilaysizmi?")&&v.post(route(`${xe()}.offer-automation.convert`,r)));var r},class:"p-2 text-gray-400 hover:text-green-600 transition-colors",title:"Konversiya"},[s(o(K),{class:"w-5 h-5"})],8,oe))])])]);var n,x}),128)),0===ye.value.length?(c(),d("tr",de,[l("td",ie,[s(o(L),{class:"w-12 h-12 mx-auto text-gray-300 mb-4"}),e[15]||(e[15]=l("p",null,"Hozircha yuborilgan takliflar yo'q",-1))])])):i("",!0)])])])])])])]),_:1}))}};export{ne as default};
