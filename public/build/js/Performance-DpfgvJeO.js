import{C as e,y as t,D as r,r as a,v as s,x as l,L as o,A as d,B as n,z as x,F as y,G as g,E as c,J as i,K as p,I as b,V as u}from"./chunk-CpmtkKLp.js";import{h as m,l as f}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-DbFbpSR2.js";import{u as h}from"./app-C-ZlocOh.js";import{r as w}from"./chunk-C2r_KHf6.js";import{r as v}from"./chunk-dqIIyBTR.js";import{r as _}from"./chunk-a909mUNd.js";import{r as j}from"./chunk-DNKDGYPp.js";import{r as C}from"./chunk-CDwIUdYJ.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";function R(a,s){return r(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})])}const L={class:"py-12"},O={class:"max-w-8xl mx-auto px-4 sm:px-6 lg:px-8"},T={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4"},S={class:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-3"},A={class:"mt-2 text-gray-600 dark:text-gray-400"},E={class:"flex gap-2"},U={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8"},z={class:"flex flex-wrap items-end gap-4"},D={class:"flex-1 min-w-[200px]"},F={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},I={class:"flex-1 min-w-[200px]"},V={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},M={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md mb-8"},N={class:"border-b border-gray-200 dark:border-gray-700"},P={class:"flex -mb-px"},B={class:"flex items-center justify-center gap-2"},G={class:"flex items-center justify-center gap-2"},W={class:"flex items-center justify-center gap-2"},Z={class:"p-6"},J={key:0},K={class:"overflow-x-auto"},q={class:"w-full"},H={class:"py-4 px-4"},X={class:"flex items-center gap-2"},$={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},Q={class:"font-medium text-gray-900 dark:text-gray-100"},Y={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},ee={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},te={class:"py-4 px-4 text-right"},re={class:"font-semibold text-purple-600 dark:text-purple-400"},ae={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},se={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},le={class:"py-4 px-4 text-center"},oe={key:1,class:"text-center py-12"},de={class:"mt-4 text-gray-500 dark:text-gray-400"},ne={class:"p-6"},xe={key:0},ye={class:"overflow-x-auto"},ge={class:"w-full"},ce={class:"py-4 px-4"},ie={class:"flex items-center gap-2"},pe={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},be={class:"font-medium text-gray-900 dark:text-gray-100"},ue={class:"py-4 px-4 text-center"},me={class:"inline-block px-3 py-1 bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-300 rounded-full text-sm font-bold"},fe={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},ke={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},he={class:"py-4 px-4 text-right"},we={class:"font-semibold text-purple-600 dark:text-purple-400"},ve={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},_e={class:"py-4 px-4 text-right"},je={key:1,class:"text-center py-12"},Ce={class:"mt-4 text-gray-500 dark:text-gray-400"},Re={class:"p-6"},Le={key:0},Oe={class:"overflow-x-auto"},Te={class:"w-full"},Se={class:"py-4 px-4"},Ae={class:"flex items-center gap-2"},Ee={key:0,class:"w-6 h-6 bg-yellow-100 dark:bg-yellow-900/50 rounded-full flex items-center justify-center"},Ue={class:"font-medium text-gray-900 dark:text-gray-100"},ze={class:"py-4 px-4 text-center"},De={class:"inline-block px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-xs font-medium"},Fe={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},Ie={class:"py-4 px-4 text-right font-semibold text-green-600 dark:text-green-400"},Ve={class:"py-4 px-4 text-right"},Me={class:"font-semibold text-purple-600 dark:text-purple-400"},Ne={class:"py-4 px-4 text-right font-semibold text-blue-600 dark:text-blue-400"},Pe={class:"py-4 px-4 text-right text-gray-700 dark:text-gray-300"},Be={class:"py-4 px-4 text-right"},Ge={class:"py-4 px-4 text-right"},We={class:"font-semibold text-orange-600 dark:text-orange-400"},Ze={key:1,class:"text-center py-12"},Je={class:"mt-4 text-gray-500 dark:text-gray-400"},Ke={__name:"Performance",props:{dream_buyer_performance:{type:Array,default:()=>[]},offer_performance:{type:Array,default:()=>[]},source_analysis:{type:Array,default:()=>[]},filters:Object},setup(Ke){const{t:qe}=h(),He=Ke,Xe=a(He.filters?.date_from||""),$e=a(He.filters?.date_to||""),Qe=a("dream-buyers"),Ye=e=>new Intl.NumberFormat("uz-UZ").format(e)+" so'm",et=e=>e?.toFixed(1)||"0",tt=e=>e>=30?{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",label:"Excellent"}:e>=20?{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-300",label:"Good"}:e>=10?{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-300",label:"Average"}:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",label:"Poor"},rt=e=>e>=200?{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-300",label:"Excellent"}:e>=100?{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-300",label:"Good"}:e>=0?{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-300",label:"Break Even"}:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-300",label:"Loss"},at=()=>{window.location.href=route("business.analytics.performance",{date_from:Xe.value,date_to:$e.value})},st=()=>{Xe.value="",$e.value="",window.location.href=route("business.analytics.performance")};a(!1);const lt=a(!1),ot=async()=>{lt.value=!0;try{const e=await fetch(route("business.analytics.export.excel"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({report_type:"performance",date_from:Xe.value,date_to:$e.value})});if(e.ok){const t=await e.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="performance_report.xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}else alert(qe("common.error"))}catch(e){alert(qe("common.error"))}finally{lt.value=!1}};return(a,h)=>(r(),s(k,{title:d(qe)("analytics.performance_reports")},{default:l(()=>[o(d(m),{title:d(qe)("analytics.performance_reports")},null,8,["title"]),t("div",L,[t("div",O,[t("div",T,[t("div",null,[t("h1",S,[o(d(w),{class:"w-10 h-10 text-yellow-600 dark:text-yellow-400"}),n(" "+x(d(qe)("analytics.performance_reports")),1)]),t("p",A,x(d(qe)("analytics.performance_desc")),1)]),t("div",E,[o(d(f),{href:a.route("business.analytics.index"),class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors gap-2"},{default:l(()=>[o(d(v),{class:"w-4 h-4"}),h[5]||(h[5]=n(" Dashboard ",-1))]),_:1},8,["href"]),t("button",{onClick:ot,class:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors gap-2"},[o(d(_),{class:"w-4 h-4"}),h[6]||(h[6]=n(" Excel ",-1))])])]),t("div",U,[t("div",z,[t("div",D,[t("label",F,x(d(qe)("reports.filter.start_date")),1),y(t("input",{"onUpdate:modelValue":h[0]||(h[0]=e=>Xe.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"},null,512),[[g,Xe.value]])]),t("div",I,[t("label",V,x(d(qe)("reports.filter.end_date")),1),y(t("input",{"onUpdate:modelValue":h[1]||(h[1]=e=>$e.value=e),type:"date",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-yellow-500 focus:border-transparent"},null,512),[[g,$e.value]])]),t("button",{onClick:at,class:"px-6 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-medium rounded-lg transition-colors"},x(d(qe)("common.filter")),1),t("button",{onClick:st,class:"px-6 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg transition-colors"},x(d(qe)("reports.filter.reset")),1)])]),t("div",M,[t("div",N,[t("nav",P,[t("button",{onClick:h[2]||(h[2]=e=>Qe.value="dream-buyers"),class:c(["dream-buyers"===Qe.value?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",B,[o(d(j),{class:"w-5 h-5"}),t("span",null,x(d(qe)("dashboard.ideal_customers")),1)])],2),t("button",{onClick:h[3]||(h[3]=e=>Qe.value="offers"),class:c(["offers"===Qe.value?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",G,[o(d(C),{class:"w-5 h-5"}),h[7]||(h[7]=t("span",null,"Offers",-1))])],2),t("button",{onClick:h[4]||(h[4]=e=>Qe.value="sources"),class:c(["sources"===Qe.value?"border-yellow-600 text-yellow-600 dark:text-yellow-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300","flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors"])},[t("div",W,[o(d(R),{class:"w-5 h-5"}),h[8]||(h[8]=t("span",null,"Lead Sources",-1))])],2)])]),y(t("div",Z,[Ke.dream_buyer_performance&&Ke.dream_buyer_performance.length>0?(r(),e("div",J,[t("div",K,[t("table",q,[h[9]||(h[9]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Ideal Mijoz"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Avg Deal Size"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Performance")])],-1)),t("tbody",null,[(r(!0),e(i,null,p(Ke.dream_buyer_performance,(a,s)=>(r(),e("tr",{key:a.dream_buyer_id,class:c([s%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",H,[t("div",X,[0===s?(r(),e("div",$,[o(d(w),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):b("",!0),t("span",Q,x(a.dream_buyer_name),1)])]),t("td",Y,x(a.total_leads),1),t("td",ee,x(a.won_leads),1),t("td",te,[t("span",re,x(et(a.conversion_rate))+"%",1)]),t("td",ae,x(Ye(a.total_revenue)),1),t("td",se,x(Ye(a.avg_deal_size)),1),t("td",le,[t("span",{class:c([tt(a.conversion_rate).bg,tt(a.conversion_rate).text,"inline-block px-3 py-1 rounded-full text-xs font-semibold"])},x(tt(a.conversion_rate).label),3)])],2))),128))])])])])):(r(),e("div",oe,[o(d(j),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",de,x(d(qe)("reports.no_data")),1)]))],512),[[u,"dream-buyers"===Qe.value]]),y(t("div",ne,[Ke.offer_performance&&Ke.offer_performance.length>0?(r(),e("div",xe,[t("div",ye,[t("table",ge,[h[10]||(h[10]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Offer"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Value Score"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROI")])],-1)),t("tbody",null,[(r(!0),e(i,null,p(Ke.offer_performance,(a,s)=>(r(),e("tr",{key:a.offer_id,class:c([s%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",ce,[t("div",ie,[0===s?(r(),e("div",pe,[o(d(w),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):b("",!0),t("span",be,x(a.offer_name),1)])]),t("td",ue,[t("span",me,x(a.value_score||"N/A"),1)]),t("td",fe,x(a.total_leads),1),t("td",ke,x(a.won_leads),1),t("td",he,[t("span",we,x(et(a.conversion_rate))+"%",1)]),t("td",ve,x(Ye(a.total_revenue)),1),t("td",_e,[t("span",{class:c([rt(a.roi).text,"font-semibold"])},x(et(a.roi))+"% ",3)])],2))),128))])])])])):(r(),e("div",je,[o(d(C),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",Ce,x(d(qe)("reports.no_data")),1)]))],512),[[u,"offers"===Qe.value]]),y(t("div",Re,[Ke.source_analysis&&Ke.source_analysis.length>0?(r(),e("div",Le,[t("div",Oe,[t("table",Te,[h[11]||(h[11]=t("thead",null,[t("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[t("th",{class:"text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Source"),t("th",{class:"text-center py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Type"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Leads"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Won Deals"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Conversion Rate"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Total Revenue"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"Cost per Lead"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROI"),t("th",{class:"text-right py-3 px-4 font-semibold text-gray-700 dark:text-gray-300"},"ROAS")])],-1)),t("tbody",null,[(r(!0),e(i,null,p(Ke.source_analysis,(a,s)=>(r(),e("tr",{key:a.source_id,class:c([s%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700/50","hover:bg-yellow-50 dark:hover:bg-yellow-900/20 transition-colors"])},[t("td",Se,[t("div",Ae,[0===s?(r(),e("div",Ee,[o(d(w),{class:"w-4 h-4 text-yellow-600 dark:text-yellow-400"})])):b("",!0),t("span",Ue,x(a.source_name),1)])]),t("td",ze,[t("span",De,x(a.channel_type),1)]),t("td",Fe,x(a.total_leads),1),t("td",Ie,x(a.won_leads),1),t("td",Ve,[t("span",Me,x(et(a.conversion_rate))+"%",1)]),t("td",Ne,x(Ye(a.total_revenue)),1),t("td",Pe,x(Ye(a.cost_per_lead)),1),t("td",Be,[t("span",{class:c([rt(a.roi).text,"font-semibold"])},x(et(a.roi))+"% ",3)]),t("td",Ge,[t("span",We,x(a.roas?.toFixed(2)||"0.00")+"x",1)])],2))),128))])])])])):(r(),e("div",Ze,[o(d(R),{class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),t("p",Je,x(d(qe)("reports.no_data")),1)]))],512),[[u,"sources"===Qe.value]])])])])]),_:1},8,["title"]))}};export{Ke as default};
