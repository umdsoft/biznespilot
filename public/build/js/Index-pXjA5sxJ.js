import{_ as t}from"./chunk-By7haasb.js";import{u as e}from"./app-DFslr8vl.js";import{D as a,E as r,z as s,L as l,B as o,v as i,M as n,H as d,S as c,A as u,F as p,G as g,y as m,x as y}from"./chunk-7Urb0kxg.js";import{a as k}from"./chunk-9PkX4iPz.js";import{r as x}from"./chunk-DS-Zp4Qb.js";import{r as b}from"./chunk-CoFofPT-.js";import{r as f}from"./chunk-afst19KZ.js";import{r as h}from"./chunk-DUcDuGHI.js";import{r as v}from"./chunk-DncpFozA.js";import{h as _}from"./chunk-DKkye6wf.js";import"./chunk-Dm-LAqtr.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-D4tA7yBb.js";import"./chunk-DmCyVuil.js";import"./chunk-Be6I8nOg.js";import"./chunk-DpGbuIFK.js";import"./chunk-78n7fhob.js";import"./chunk-Di7Oc7TS.js";const w={class:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 hover:shadow-lg transition-shadow"},j={class:"flex items-center justify-between mb-4"},S={class:"text-3xl font-bold text-gray-900 dark:text-white"},C={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},$={key:0,class:"text-xs text-gray-400 mt-1"},A={key:1,class:"mt-3"},F={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2"},I={class:"text-xs text-gray-400 mt-1"},M={__name:"KPICard",props:{title:{type:String,required:!0},value:{type:[String,Number],required:!0},target:{type:[String,Number],default:null},badge:{type:String,default:null},badgeType:{type:String,default:"neutral"},icon:{type:[Object,Function],default:null},iconBgColor:{type:String,default:"blue"},suffix:{type:String,default:""},showProgress:{type:Boolean,default:!0},subtitle:{type:String,default:null}},setup(t){const{t:p}=e(),g=t,m={green:"from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30",blue:"from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30",purple:"from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30",orange:"from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30",red:"from-red-100 to-rose-100 dark:from-red-900/30 dark:to-rose-900/30",indigo:"from-indigo-100 to-violet-100 dark:from-indigo-900/30 dark:to-violet-900/30",emerald:"from-emerald-100 to-teal-100 dark:from-emerald-900/30 dark:to-teal-900/30"},y={green:"text-green-600 dark:text-green-400",blue:"text-blue-600 dark:text-blue-400",purple:"text-purple-600 dark:text-purple-400",orange:"text-orange-600 dark:text-orange-400",red:"text-red-600 dark:text-red-400",indigo:"text-indigo-600 dark:text-indigo-400",emerald:"text-emerald-600 dark:text-emerald-400"},k={success:"text-green-600 dark:text-green-400",warning:"text-yellow-600 dark:text-yellow-400",danger:"text-red-600 dark:text-red-400",neutral:"text-gray-500 dark:text-gray-400"},x=()=>g.target?Math.min(100,Math.round(Number(g.value)/Number(g.target)*100)):0,b=()=>{const t=x();return t>=100?"bg-green-500":t>=70?"bg-yellow-500":"bg-red-500"};return(e,g)=>(r(),a("div",w,[s("div",j,[t.icon?(r(),a("div",{key:0,class:o(["w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center",m[t.iconBgColor]||m.blue])},[(r(),i(n(t.icon),{class:o(["w-6 h-6",y[t.iconBgColor]||y.blue])},null,8,["class"]))],2)):l("",!0),t.badge?(r(),a("span",{key:1,class:o(["text-sm font-medium",k[t.badgeType]||k.neutral])},d(t.badge),3)):l("",!0)]),s("p",S,d(t.value)+d(t.suffix),1),s("p",C,d(t.title),1),t.subtitle?(r(),a("p",$,d(t.subtitle),1)):l("",!0),t.showProgress&&t.target?(r(),a("div",A,[s("div",F,[s("div",{class:o(["h-2 rounded-full transition-all",b()]),style:c({width:x()+"%"})},null,6)]),s("p",I,d(u(p)("kpi.target"))+": "+d(t.target)+d(t.suffix),1)])):l("",!0)]))}},B={class:"space-y-3"},N={key:0,class:"text-center py-6 text-gray-500"},P={class:"flex items-center gap-3"},z={class:"font-medium text-gray-900"},O={key:0,class:"text-xs text-gray-500"},q={class:"text-right"},K={class:"text-lg font-bold text-gray-900"},D={key:0,class:"text-xs text-gray-500"},T={__name:"KPIStatsList",props:{stats:{type:Array,default:()=>[]}},setup(t){const{t:i}=e(),n=(t,e)=>"currency"===e?new Intl.NumberFormat("uz-UZ").format(t||0)+" so'm":"percent"===e?(t||0)+"%":new Intl.NumberFormat("uz-UZ").format(t||0);return(e,c)=>(r(),a("div",B,[0===t.stats.length?(r(),a("div",N,d(u(i)("kpi.no_statistics")),1)):l("",!0),(r(!0),a(p,null,g(t.stats,(t,e)=>(r(),a("div",{key:t.id||e,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[s("div",P,[s("div",{class:o([t.iconBg||"bg-indigo-100","w-10 h-10 rounded-lg flex items-center justify-center"])},[(r(),a("svg",{class:o([t.iconColor||"text-indigo-600","w-5 h-5"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...c[0]||(c[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])],2))],2),s("div",null,[s("p",z,d(t.label),1),t.description?(r(),a("p",O,d(t.description),1)):l("",!0)])]),s("div",q,[s("p",K,d(n(t.value,t.format)),1),t.target?(r(),a("p",D,d(u(i)("kpi.target"))+": "+d(n(t.target,t.format)),1)):l("",!0)])]))),128))]))}},U={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-gray-200"},H={class:"bg-gray-50"},J={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},L={class:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},V={class:"bg-white divide-y divide-gray-200"},E={class:"px-4 py-3 whitespace-nowrap"},G={class:"font-medium text-gray-900"},W={class:"px-4 py-3 text-right whitespace-nowrap"},Y={class:"font-semibold text-gray-900"},Q={key:0,class:"text-center py-8 text-gray-500"},R={__name:"KPIWeeklyTable",props:{data:{type:Array,default:()=>[]},weekDays:{type:Array,default:()=>["Dush","Sesh","Chor","Pay","Jum","Shan","Yak"]}},setup(t){const{t:i}=e(),n=(t,e)=>"currency"===e?t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(0)+"K":new Intl.NumberFormat("uz-UZ").format(t||0):"percent"===e?(t||0)+"%":t||0,c=(t,e)=>{if(!e)return"text-gray-900";const a=t/e*100;return a>=100?"text-green-600 font-medium":a>=70?"text-yellow-600":"text-red-600"};return(e,m)=>(r(),a("div",U,[s("table",Z,[s("thead",H,[s("tr",null,[s("th",J,d(u(i)("kpi.indicator")),1),(r(!0),a(p,null,g(t.weekDays,t=>(r(),a("th",{key:t,class:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},d(t),1))),128)),s("th",L,d(u(i)("kpi.total")),1)])]),s("tbody",V,[(r(!0),a(p,null,g(t.data,(t,e)=>{return r(),a("tr",{key:t.id||e,class:"hover:bg-gray-50"},[s("td",E,[s("span",G,d(t.label),1)]),(r(!0),a(p,null,g(t.values,(e,l)=>(r(),a("td",{key:l,class:"px-3 py-3 text-center whitespace-nowrap"},[s("span",{class:o(c(e,t.target))},d(n(e,t.format)),3)]))),128)),s("td",W,[s("span",Y,d(n((l=t.values,l&&Array.isArray(l)?l.reduce((t,e)=>t+(e||0),0):0),t.format)),1)])]);var l}),128))])]),0===t.data.length?(r(),a("div",Q,d(u(i)("kpi.no_data")),1)):l("",!0)]))}},X={class:"space-y-6"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},et={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},at={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},rt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},st={__name:"OperatorKPI",props:{stats:{type:Object,default:()=>({})},dailyStats:{type:Array,default:()=>[]},weeklyStats:{type:Array,default:()=>[]},targets:{type:Object,default:()=>({})},panelType:{type:String,default:"operator",validator:t=>["operator","business"].includes(t)}},setup(t){const{t:l}=e(),o=t,i=t=>t?t<60?`${t} ${l("kpi.minutes")}`:`${Math.floor(t/60)} ${l("kpi.hours")} ${t%60} ${l("kpi.minutes")}`:`0 ${l("kpi.minutes")}`,n=(t,e)=>e?Math.min(100,Math.round(t/e*100)):0,c=()=>[{icon:h,iconColor:"text-green-600",label:l("kpi.answered"),key:"answered_calls"},{icon:v,iconColor:"text-red-600",label:l("kpi.not_answered"),key:"missed_calls"},{icon:f,iconColor:"text-yellow-600",label:l("kpi.callback"),key:"callback_scheduled"},{icon:k,iconColor:"text-blue-600",label:l("kpi.avg_duration"),key:"avg_call_duration",format:"time",highlight:!0}].map(t=>({...t,value:"time"===t.format?i(o.stats?.[t.key]):o.stats?.[t.key]||0})),p=()=>[{dotColor:"bg-blue-500",label:l("kpi.new"),key:"leads_new"},{dotColor:"bg-yellow-500",label:l("kpi.contacted"),key:"leads_contacted"},{dotColor:"bg-green-500",label:l("kpi.qualified"),key:"leads_qualified"},{dotColor:"bg-red-500",label:l("kpi.lost"),key:"leads_lost"}].map(t=>({...t,value:o.stats?.[t.key]||0})),g=()=>{const t=o.stats?.conversion_rate||0,e=o.targets?.conversion_rate||0,a=(t-e).toFixed(1);return t>=e?`+${a}%`:`${a}%`},y=()=>{const t=o.stats?.avg_response_time||0,e=o.targets?.max_response_time||60;return l(t<=e?"kpi.good":"kpi.slow")};return(e,h)=>(r(),a("div",X,[s("div",null,[s("h1",tt,d(u(l)("kpi.my_kpi_indicators")),1),s("p",et,d(u(l)("kpi.your_performance")),1)]),s("div",at,[m(M,{title:u(l)("kpi.todays_calls"),value:t.stats?.calls_today||0,target:t.targets?.daily_calls,badge:`${n(t.stats?.calls_today,t.targets?.daily_calls)}%`,"badge-type":"neutral",icon:u(k),"icon-bg-color":"green"},null,8,["title","value","target","badge","icon"]),m(M,{title:u(l)("kpi.contacted_leads"),value:t.stats?.leads_contacted||0,target:t.targets?.daily_leads,badge:`${n(t.stats?.leads_contacted,t.targets?.daily_leads)}%`,"badge-type":"neutral",icon:u(x),"icon-bg-color":"blue"},null,8,["title","value","target","badge","icon"]),m(M,{title:u(l)("kpi.conversion_rate"),value:t.stats?.conversion_rate||0,suffix:"%",target:t.targets?.conversion_rate,badge:g(),"badge-type":(o.stats?.conversion_rate||0)>=(o.targets?.conversion_rate||0)?"success":"danger",icon:u(b),"icon-bg-color":"purple"},null,8,["title","value","target","badge","badge-type","icon"]),m(M,{title:u(l)("kpi.avg_response_time"),value:i(t.stats?.avg_response_time),badge:y(),"badge-type":(o.stats?.avg_response_time||0)<=(o.targets?.max_response_time||60)?"success":"danger",icon:u(f),"icon-bg-color":"orange","show-progress":!1,subtitle:`${u(l)("kpi.target")}: ${i(t.targets?.max_response_time)} ${u(l)("kpi.within")}`},null,8,["title","value","badge","badge-type","icon","subtitle"])]),s("div",rt,[m(T,{title:u(l)("kpi.call_statistics"),items:c()},null,8,["title","items"]),m(T,{title:u(l)("kpi.lead_statistics"),items:p()},null,8,["title","items"])]),m(R,{data:t.weeklyStats,"conversion-target":t.targets?.conversion_rate||0},null,8,["data","conversion-target"])]))}},lt={__name:"Index",props:{stats:Object,dailyStats:Array,weeklyStats:Array,targets:Object},setup(a){const{t:s}=e();return(e,l)=>(r(),i(t,{title:u(s)("nav.kpi")},{default:y(()=>[m(u(_),{title:u(s)("nav.kpi")},null,8,["title"]),m(st,{stats:a.stats,"daily-stats":a.dailyStats,"weekly-stats":a.weeklyStats,targets:a.targets,"panel-type":"operator"},null,8,["stats","daily-stats","weekly-stats","targets"])]),_:1},8,["title"]))}};export{lt as default};
