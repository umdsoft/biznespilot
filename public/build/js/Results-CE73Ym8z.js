import{h as e,l as a,a as r}from"./chunk-DKkye6wf.js";import{_ as t}from"./chunk-L0R09JI1.js";import{r as s}from"./chunk-D4tA7yBb.js";import{b as l}from"./chunk-Dm-LAqtr.js";import{r as d}from"./chunk-C05WCdFB.js";import{r as i}from"./chunk-C3XJH04c.js";import{r as o,w as g,o as n,v as u,x as y,y as x,z as c,A as b,D as p,L as m,H as k,C as v,B as h,E as f,F as w,G as j,M as _,S as q}from"./chunk-7Urb0kxg.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";const B={class:"space-y-6"},I={class:"flex items-center justify-between"},z={class:"flex items-center gap-4"},$={class:"text-2xl font-bold text-gray-900 dark:text-white"},H=["disabled"],C={class:"border-b border-gray-200 dark:border-gray-700"},J={class:"flex space-x-8"},M=["onClick"],N={key:0,class:"space-y-6"},O={key:0,class:"flex items-center justify-center py-12"},Q={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700"},S={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},D={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},F={class:"flex items-center gap-3"},Y={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},K={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},P={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},R={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},X={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},A={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},E={class:"text-2xl font-bold text-red-600 dark:text-red-400"},G={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},T={class:"flex items-center justify-between mb-2"},U={class:"text-sm text-gray-600 dark:text-gray-300"},V={class:"bg-gray-200 dark:bg-gray-600 rounded-full h-2"},W={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Z={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ae={class:"divide-y divide-gray-200 dark:divide-gray-700"},re={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"px-6 py-4 whitespace-nowrap"},le={key:1,class:"space-y-6"},de={key:0,class:"flex items-center justify-center py-12"},ie={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700"},oe={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ge={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ne={class:"text-2xl font-bold text-gray-900 dark:text-white"},ue={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-red-500"},ye={class:"text-2xl font-bold text-red-600 dark:text-red-400"},xe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-orange-500"},ce={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},be={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-yellow-500"},pe={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},me={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-green-500"},ke={class:"text-2xl font-bold text-green-600 dark:text-green-400"},ve={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},he={class:"overflow-x-auto"},fe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},we={class:"divide-y divide-gray-200 dark:divide-gray-700"},je={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},_e={class:"px-6 py-4 whitespace-nowrap"},qe={class:"px-6 py-4 whitespace-nowrap"},Be={__name:"Results",props:{currentBusiness:Object,surveyId:String},setup(Be){const Ie=Be,ze=o(!0),$e=o(null),He=o(""),Ce=o("engagement"),Je=o(null),Me=o(null),Ne=o(!1),Oe=o(!1),Qe=[{id:"engagement",label:"Ishga Qiziqish",icon:d},{id:"flightrisk",label:"Ketish Xavfi",icon:i}],Se=async()=>{if(!Ie.currentBusiness?.id||!Ie.surveyId)return He.value="Biznes yoki so'rovnoma tanlanmagan",void(ze.value=!1);ze.value=!0,He.value="";try{const e=await r.get(`/api/v1/businesses/${Ie.currentBusiness.id}/hr/surveys/${Ie.surveyId}/results`);$e.value=e.data.data}catch(e){He.value=e.response?.data?.message||"Natijalarni yuklashda xatolik"}finally{ze.value=!1}},De=async()=>{if(Ie.currentBusiness?.id&&Ie.surveyId){Ne.value=!0;try{const e=await r.get(`/api/v1/businesses/${Ie.currentBusiness.id}/hr/surveys/${Ie.surveyId}/engagement`);Je.value=e.data.data}catch(e){Je.value=null}finally{Ne.value=!1}}};g(Ce,e=>{"engagement"!==e||Je.value||Ne.value||De(),"flightrisk"!==e||Me.value||Oe.value||(async()=>{if(Ie.currentBusiness?.id&&Ie.surveyId){Oe.value=!0;try{const e=await r.get(`/api/v1/businesses/${Ie.currentBusiness.id}/hr/surveys/${Ie.surveyId}/flight-risk`);Me.value=e.data.data}catch(e){Me.value=null}finally{Oe.value=!1}}})()});const Fe=e=>e>=80?"text-emerald-500":e>=65?"text-blue-500":e>=50?"text-amber-500":"text-red-500",Ye=e=>e>=80?"bg-emerald-500":e>=65?"bg-blue-500":e>=50?"bg-amber-500":"bg-red-500",Ke=e=>({highly_engaged:"Juda qiziqgan",engaged:"Qiziqgan",neutral:"Neytral",disengaged:"Qiziqmagan"}[e]||e),Pe=e=>({work_satisfaction:"Ish qoniqishi",team_collaboration:"Jamoa hamkorligi",growth_opportunities:"O'sish imkoniyatlari",recognition_frequency:"Tan olinish",manager_support:"Menejer qo'llab-quvvatlashi",work_life_balance:"Ish-hayot balansi",purpose_clarity:"Maqsad aniqligi",resources_adequacy:"Resurslar yetarliligi"}[e]||e),Re=e=>({critical:"Juda yuqori xavf",high:"Yuqori xavf",medium:"O'rtacha xavf",low:"Past xavf"}[e]||e);return n(()=>{Se(),De()}),(r,o)=>(f(),u(t,{title:"So'rovnoma natijalari"},{default:y(()=>[x(b(e),{title:$e.value?.survey?.title?`${$e.value.survey.title} - Natijalar`:"Natijalar"},null,8,["title"]),c("div",B,[c("div",I,[c("div",z,[x(b(a),{href:`/hr/surveys/${Be.surveyId}`,class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},{default:y(()=>[x(b(s),{class:"w-5 h-5 text-gray-500"})]),_:1},8,["href"]),c("div",null,[c("h1",$,k($e.value?.survey?.title||"So'rovnoma"),1),o[0]||(o[0]=c("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Hodimlar javoblarining tahlili ",-1))])]),c("button",{onClick:Se,disabled:ze.value,class:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"},[x(b(l),{class:h(["w-5 h-5",ze.value?"animate-spin":""])},null,8,["class"]),o[1]||(o[1]=v(" Yangilash ",-1))],8,H)]),c("div",C,[c("nav",J,[(f(),p(w,null,j(Qe,e=>c("button",{key:e.id,onClick:a=>Ce.value=e.id,class:h(["flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors",Ce.value===e.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(f(),u(_(e.icon),{class:"w-5 h-5"})),v(" "+k(e.label),1)],10,M)),64))])]),"engagement"===Ce.value?(f(),p("div",N,[Ne.value?(f(),p("div",O,[x(b(l),{class:"w-8 h-8 animate-spin text-purple-600"})])):Je.value?(f(),p(w,{key:2},[c("div",S,[c("div",D,[c("div",F,[c("div",Y,[x(b(d),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),c("div",null,[o[4]||(o[4]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha ball",-1)),c("p",{class:h(["text-2xl font-bold",Fe(Je.value.avg_score||0)])},k((Je.value.avg_score||0).toFixed(1)),3)])])]),c("div",K,[o[5]||(o[5]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Qiziqgan",-1)),c("p",P,k((Je.value.distribution?.highly_engaged?.count||0)+(Je.value.distribution?.engaged?.count||0)),1)]),c("div",R,[o[6]||(o[6]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Neytral",-1)),c("p",X,k(Je.value.distribution?.neutral?.count||0),1)]),c("div",A,[o[7]||(o[7]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Qiziqmagan",-1)),c("p",E,k(Je.value.distribution?.disengaged?.count||0),1)])]),Je.value.components?(f(),p("div",G,[o[8]||(o[8]=c("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Komponent bo'yicha balllar ",-1)),c("div",L,[(f(!0),p(w,null,j(Je.value.components,(e,a)=>(f(),p("div",{key:a,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[c("div",T,[c("span",U,k(Pe(a)),1),c("span",{class:h(["text-lg font-bold",Fe(e)])},k(e),3)]),c("div",V,[c("div",{class:h(["h-2 rounded-full",Ye(e)]),style:q({width:`${e}%`})},null,6)])]))),128))])])):m("",!0),Je.value.employees?.length>0?(f(),p("div",W,[o[10]||(o[10]=c("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[c("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Hodimlar ro'yxati")],-1)),c("div",Z,[c("table",ee,[o[9]||(o[9]=c("thead",{class:"bg-gray-50 dark:bg-gray-700"},[c("tr",null,[c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Hodim"),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Ball"),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Daraja")])],-1)),c("tbody",ae,[(f(!0),p(w,null,j(Je.value.employees,e=>{return f(),p("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[c("td",re,k(e.name),1),c("td",te,[c("span",{class:h(["text-lg font-bold",Fe(e.overall_score)])},k(e.overall_score?.toFixed(1)),3)]),c("td",se,[c("span",{class:h(["px-3 py-1 text-xs font-medium rounded-full",(a=e.engagement_level,{highly_engaged:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",engaged:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",neutral:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",disengaged:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[a]||"bg-gray-100 text-gray-800")])},k(Ke(e.engagement_level)),3)])]);var a}),128))])])])])):m("",!0)],64)):(f(),p("div",Q,[x(b(d),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),o[2]||(o[2]=c("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Ma'lumot yo'q",-1)),o[3]||(o[3]=c("p",{class:"text-gray-500 dark:text-gray-400"}," Bu so'rovnoma uchun ishga qiziqish ma'lumotlari mavjud emas ",-1))]))])):"flightrisk"===Ce.value?(f(),p("div",le,[Oe.value?(f(),p("div",de,[x(b(l),{class:"w-8 h-8 animate-spin text-purple-600"})])):Me.value?(f(),p(w,{key:2},[c("div",oe,[c("div",ge,[o[13]||(o[13]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami hodimlar",-1)),c("p",ne,k(Me.value.total_employees||0),1)]),c("div",ue,[o[14]||(o[14]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Juda yuqori",-1)),c("p",ye,k(Me.value.risk_distribution?.critical?.count||0),1)]),c("div",xe,[o[15]||(o[15]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yuqori",-1)),c("p",ce,k(Me.value.risk_distribution?.high?.count||0),1)]),c("div",be,[o[16]||(o[16]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha",-1)),c("p",pe,k(Me.value.risk_distribution?.medium?.count||0),1)]),c("div",me,[o[17]||(o[17]=c("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Past",-1)),c("p",ke,k(Me.value.risk_distribution?.low?.count||0),1)])]),Me.value.employees?.length>0?(f(),p("div",ve,[o[19]||(o[19]=c("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[c("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Hodimlar ro'yxati")],-1)),c("div",he,[c("table",fe,[o[18]||(o[18]=c("thead",{class:"bg-gray-50 dark:bg-gray-700"},[c("tr",null,[c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Hodim"),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Xavf balli"),c("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Daraja")])],-1)),c("tbody",we,[(f(!0),p(w,null,j(Me.value.employees,e=>{return f(),p("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[c("td",je,k(e.name),1),c("td",_e,[c("span",{class:h(["text-lg font-bold",(r=e.risk_score,r>=70?"text-red-500":r>=50?"text-orange-500":r>=30?"text-yellow-500":"text-green-500")])},k(e.risk_score)+"% ",3)]),c("td",qe,[c("span",{class:h(["px-3 py-1 text-xs font-medium rounded-full",(a=e.risk_level,{critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}[a]||"bg-gray-100 text-gray-800")])},k(Re(e.risk_level)),3)])]);var a,r}),128))])])])])):m("",!0)],64)):(f(),p("div",ie,[x(b(i),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),o[11]||(o[11]=c("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Ma'lumot yo'q",-1)),o[12]||(o[12]=c("p",{class:"text-gray-500 dark:text-gray-400"}," Bu so'rovnoma uchun ketish xavfi ma'lumotlari mavjud emas ",-1))]))])):m("",!0)])]),_:1}))}};export{Be as default};
