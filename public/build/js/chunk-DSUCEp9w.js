import{r as b,b as h,D as i,y as l,z as e,A as s,H as o,x as _,C as c,I as ee,J as te,F as j,G as D,B as k,L as m,v as re,M as se,S as ae,Q as $,E as d}from"./chunk-BcTZxe-J.js";import{h as oe,l as y,r as S}from"./chunk-BYRtWSr0.js";import{u as ne}from"./app-CPufef6f.js";import{r as F}from"./chunk-gCWBLgcy.js";import{l as I}from"./chunk-D6nU8-nU.js";import{r as v}from"./chunk-EvWs7tbK.js";import{r as le}from"./chunk-B4yz7jSC.js";import{r as N}from"./chunk-BqueMrU7.js";import{r as de}from"./chunk-CQoMtUf7.js";import{r as V}from"./chunk-NJ5HWRnA.js";import{r as ie}from"./chunk-CZvmWwN5.js";import{r as M}from"./chunk-CnrLL2pV.js";import{r as ge}from"./chunk-Rs1WNzbn.js";const ce={class:"space-y-6"},ue={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},me={class:"text-2xl font-bold text-gray-900 dark:text-white"},pe={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},xe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},he={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},be={class:"flex items-center justify-between"},ke={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},fe={class:"text-3xl font-bold text-gray-900 dark:text-white mt-1"},_e={class:"w-12 h-12 bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded-xl flex items-center justify-center"},ye={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},ve={class:"flex items-center justify-between"},we={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Ce={class:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mt-1"},je={class:"w-12 h-12 bg-gradient-to-br from-emerald-100 to-green-100 dark:from-emerald-900/40 dark:to-green-900/40 rounded-xl flex items-center justify-center"},$e={class:"mt-3 flex items-center text-xs text-emerald-600 dark:text-emerald-400"},Se={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},Me={class:"flex items-center justify-between"},Be={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Le={class:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-1"},Te={class:"bg-white dark:bg-gray-800 rounded-2xl p-5 border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-shadow duration-200"},ze={class:"flex items-center justify-between"},De={class:"text-sm font-medium text-gray-500 dark:text-gray-400"},Fe={class:"text-3xl font-bold text-amber-600 dark:text-amber-400 mt-1"},Ie={class:"space-y-4"},Ne={class:"relative max-w-md"},Ve=["placeholder"],Ae={class:"flex flex-wrap gap-2"},Oe=["onClick"],Ee={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-100 dark:border-gray-700 overflow-hidden"},Ge={key:0,class:"p-12 text-center"},He={class:"w-20 h-20 mx-auto bg-gradient-to-br from-purple-100 to-indigo-100 dark:from-purple-900/40 dark:to-indigo-900/40 rounded-2xl flex items-center justify-center mb-4"},qe={class:"text-lg font-semibold text-gray-900 dark:text-white"},Qe={class:"mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-sm mx-auto"},Ue={class:"mt-6"},Je={key:1,class:"divide-y divide-gray-100 dark:divide-gray-700"},Pe={class:"flex items-start gap-4"},Re={class:"text-white text-sm font-bold"},Ze={class:"flex-1 min-w-0"},Ke={class:"flex items-center gap-3 mb-1 flex-wrap"},We={class:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 flex-wrap"},Xe={key:0,class:"flex items-center gap-1"},Ye={key:0,class:"mt-3 flex items-center gap-6"},et={key:0,class:"flex items-center gap-2"},tt={class:"text-xs text-gray-500 dark:text-gray-400"},rt={class:"text-sm font-medium text-gray-900 dark:text-white"},st={class:"text-xs font-medium text-emerald-600 dark:text-emerald-400"},at={key:1,class:"flex-1 max-w-[200px]"},ot={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-1"},nt={class:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden"},lt={class:"flex items-center gap-2 flex-shrink-0"},dt=["onClick","title"],it=["onClick","title"],gt=["onClick","title"],ct={class:"bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20 rounded-2xl p-6 border border-purple-100 dark:border-purple-800/30"},ut={class:"flex items-start"},mt={class:"text-sm font-semibold text-gray-900 dark:text-white"},pt={class:"mt-2 space-y-1.5 text-sm text-gray-600 dark:text-gray-400"},xt={class:"flex items-center"},ht={class:"text-gray-700 dark:text-gray-300"},bt={class:"flex items-center"},kt={class:"text-gray-700 dark:text-gray-300"},ft={class:"flex items-center"},_t={class:"text-gray-700 dark:text-gray-300"},Ft={__name:"MarketingCampaignsIndex",props:{panelType:{type:String,required:!0,validator:f=>["business","marketing"].includes(f)},campaigns:{type:Array,default:()=>[]},stats:Object,filters:Object,currentBusiness:Object},setup(f){const g=f,p=t=>(g.panelType==="business"?"/business/marketing":"/marketing")+t,{t:r}=ne(),x=b(g.filters?.search||"");b(g.filters?.status||""),b(g.filters?.type||""),b(!1);const u=b("all"),B=h(()=>g.campaigns.filter(t=>t.status==="running"||t.status==="active").length),L=h(()=>g.campaigns.filter(t=>t.status==="scheduled").length),A=h(()=>g.campaigns.reduce((t,n)=>t+(n.sent_count||0),0)),O=h(()=>[{value:"all",label:r("common.all"),count:g.campaigns.length},{value:"running",label:r("marketing.status_active"),count:B.value},{value:"scheduled",label:r("marketing.status_scheduled"),count:L.value},{value:"draft",label:r("marketing.status_draft"),count:g.campaigns.filter(t=>t.status==="draft").length},{value:"completed",label:r("marketing.status_completed"),count:g.campaigns.filter(t=>t.status==="completed").length}]),T=h(()=>{let t=g.campaigns;if(u.value!=="all"&&(t=t.filter(n=>n.status===u.value||u.value==="running"&&n.status==="active")),x.value){const n=x.value.toLowerCase();t=t.filter(a=>a.name.toLowerCase().includes(n))}return t}),w=h(()=>x.value||u.value!=="all"),E=t=>t?new Date(t).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric"}):"-",G=t=>({active:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",running:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",completed:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",paused:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400",draft:"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",scheduled:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",failed:"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-300"})[t]||"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400",H=t=>({active:r("marketing.status_active"),running:r("marketing.status_active"),completed:r("marketing.status_completed"),paused:r("marketing.status_paused"),draft:r("marketing.status_draft"),scheduled:r("marketing.status_scheduled"),failed:r("marketing.status_failed")})[t]||t,q=t=>({active:v,running:v,completed:ge,paused:V,draft:M,scheduled:M})[t]||M,Q=t=>({broadcast:r("marketing.type_broadcast"),drip:r("marketing.type_drip"),trigger:r("marketing.type_trigger"),promotion:r("marketing.campaign_type_promotion"),branding:r("marketing.campaign_type_branding")})[t]||t,U=t=>({broadcast:"bg-blue-100 text-blue-700 dark:bg-blue-900/40 dark:text-blue-300",drip:"bg-purple-100 text-purple-700 dark:bg-purple-900/40 dark:text-purple-300",trigger:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300",promotion:"bg-pink-100 text-pink-700 dark:bg-pink-900/40 dark:text-pink-300",branding:"bg-orange-100 text-orange-700 dark:bg-orange-900/40 dark:text-orange-300"})[t]||"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300",J=t=>({instagram:"Instagram",telegram:"Telegram",facebook:"Facebook",email:"Email",sms:"SMS",all:r("marketing.all_channels")})[t]||t,P=t=>({instagram:"IG",facebook:"FB",telegram:"TG",email:"@",sms:"SMS",all:"ALL"})[t?.toLowerCase()]||"?",R=t=>({instagram:"bg-gradient-to-br from-purple-500 to-pink-500",facebook:"bg-blue-600",telegram:"bg-sky-500",email:"bg-teal-500",sms:"bg-orange-500",all:"bg-gray-700"})[t?.toLowerCase()]||"bg-gray-500",Z=t=>{const n=(t.sent_count||0)+(t.failed_count||0);return n===0?0:Math.round((t.sent_count||0)/n*100)},z=t=>!t.budget||t.budget===0?0:Math.min(100,Math.round(t.spent/t.budget*100)),K=t=>{confirm(r("marketing.confirm_launch_campaign"))&&S.post(p(`/campaigns/${t}/launch`),{},{preserveScroll:!0})},W=t=>{confirm(r("marketing.confirm_pause_campaign"))&&S.post(p(`/campaigns/${t}/pause`),{},{preserveScroll:!0})},X=t=>{confirm(r("marketing.confirm_delete_campaign"))&&S.delete(p(`/campaigns/${t}`),{preserveScroll:!0})},Y=()=>{x.value="",u.value="all"};return(t,n)=>(d(),i(j,null,[l(s(oe),{title:s(r)("marketing.campaigns")},null,8,["title"]),e("div",ce,[e("div",ue,[e("div",null,[e("h1",me,o(s(r)("marketing.campaigns")),1),e("p",pe,o(s(r)("marketing.campaigns_description")),1)]),l(s(y),{href:p("/campaigns/create"),class:"inline-flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-medium rounded-xl shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transition-all duration-200"},{default:_(()=>[l(s(F),{class:"w-5 h-5 mr-2"}),c(" "+o(s(r)("marketing.new_campaign")),1)]),_:1},8,["href"])]),e("div",xe,[e("div",he,[e("div",be,[e("div",null,[e("p",ke,o(s(r)("marketing.total_campaigns")),1),e("p",fe,o(f.campaigns.length),1)]),e("div",_e,[l(s(I),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})])])]),e("div",ye,[e("div",ve,[e("div",null,[e("p",we,o(s(r)("marketing.active_campaigns")),1),e("p",Ce,o(B.value),1)]),e("div",je,[l(s(v),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})])]),e("div",$e,[n[1]||(n[1]=e("span",{class:"w-2 h-2 bg-emerald-500 rounded-full mr-2 animate-pulse"},null,-1)),c(" "+o(s(r)("marketing.currently_running")),1)])]),e("div",Se,[e("div",Me,[e("div",null,[e("p",Be,o(s(r)("marketing.sent_messages")),1),e("p",Le,o(A.value),1)]),n[2]||(n[2]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/40 dark:to-cyan-900/40 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1))])]),e("div",Te,[e("div",ze,[e("div",null,[e("p",De,o(s(r)("marketing.status_scheduled")),1),e("p",Fe,o(L.value),1)]),n[3]||(n[3]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-900/40 dark:to-orange-900/40 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]),e("div",Ie,[e("div",Ne,[l(s(le),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),ee(e("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>x.value=a),type:"text",placeholder:s(r)("marketing.search_campaign"),class:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},null,8,Ve),[[te,x.value]])]),e("div",Ae,[(d(!0),i(j,null,D(O.value,a=>(d(),i("button",{key:a.value,onClick:C=>u.value=a.value,class:k(["px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200",u.value===a.value?"bg-purple-600 text-white shadow-lg shadow-purple-500/25":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-600"])},[c(o(a.label)+" ",1),a.count>0?(d(),i("span",{key:0,class:k(["ml-1.5 px-1.5 py-0.5 text-xs rounded-full",u.value===a.value?"bg-white/20":"bg-gray-100 dark:bg-gray-700"])},o(a.count),3)):m("",!0)],10,Oe))),128))])]),e("div",Ee,[T.value.length===0?(d(),i("div",Ge,[e("div",He,[l(s(I),{class:"w-10 h-10 text-purple-600 dark:text-purple-400"})]),e("h3",qe,o(w.value?s(r)("marketing.no_results"):s(r)("marketing.no_campaigns")),1),e("p",Qe,o(w.value?s(r)("marketing.try_changing_filters"):s(r)("marketing.no_campaigns_desc")),1),e("div",Ue,[w.value?(d(),i("button",{key:0,onClick:Y,class:"inline-flex items-center px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors mr-3"},[l(s(N),{class:"w-5 h-5 mr-2"}),c(" "+o(s(r)("marketing.clear_filters")),1)])):m("",!0),l(s(y),{href:p("/campaigns/create"),class:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-medium rounded-xl shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transition-all duration-200"},{default:_(()=>[l(s(F),{class:"w-5 h-5 mr-2"}),c(" "+o(s(r)("marketing.create_first_campaign")),1)]),_:1},8,["href"])])])):(d(),i("div",Je,[(d(!0),i(j,null,D(T.value,a=>(d(),i("div",{key:a.id,class:"p-4 sm:p-6 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors group"},[e("div",Pe,[e("div",{class:k(["w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",R(a.channel)])},[e("span",Re,o(P(a.channel)),1)],2),e("div",Ze,[e("div",Ke,[l(s(y),{href:p(`/campaigns/${a.id}`),class:"text-lg font-semibold text-gray-900 dark:text-white truncate group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"},{default:_(()=>[c(o(a.name),1)]),_:2},1032,["href"]),e("span",{class:k(["px-2.5 py-1 text-xs font-medium rounded-full flex items-center gap-1",G(a.status)])},[(d(),re(se(q(a.status)),{class:"w-3 h-3"})),c(" "+o(H(a.status)),1)],2),e("span",{class:k(["px-2.5 py-1 text-xs font-medium rounded-lg",U(a.type)])},o(Q(a.type)),3)]),e("div",We,[e("span",null,o(J(a.channel)),1),e("span",null,o(E(a.created_at)),1),a.leads?(d(),i("span",Xe,[l(s(de),{class:"w-4 h-4"}),c(" "+o(a.leads)+" lead ",1)])):m("",!0)]),a.sent_count||a.budget?(d(),i("div",Ye,[a.sent_count?(d(),i("div",et,[e("span",tt,o(s(r)("marketing.sent"))+":",1),e("span",rt,o(a.sent_count||0),1),e("span",st,o(Z(a))+"% ",1)])):m("",!0),a.budget>0?(d(),i("div",at,[e("div",ot,[e("span",null,o(s(r)("marketing.budget")),1),e("span",null,o(z(a))+"%",1)]),e("div",nt,[e("div",{class:"h-full bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full transition-all duration-500",style:ae({width:z(a)+"%"})},null,4)])])):m("",!0)])):m("",!0)]),e("div",lt,[a.status==="draft"||a.status==="scheduled"?(d(),i("button",{key:0,onClick:$(C=>K(a.id),["prevent"]),class:"p-2 text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 rounded-lg transition-colors",title:s(r)("marketing.launch")},[l(s(v),{class:"w-5 h-5"})],8,dt)):m("",!0),a.status==="running"||a.status==="active"?(d(),i("button",{key:1,onClick:$(C=>W(a.id),["prevent"]),class:"p-2 text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 rounded-lg transition-colors",title:s(r)("marketing.pause")},[l(s(V),{class:"w-5 h-5"})],8,it)):m("",!0),l(s(y),{href:p(`/campaigns/${a.id}`),class:"p-2 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:s(r)("common.view")},{default:_(()=>[l(s(ie),{class:"w-5 h-5"})]),_:1},8,["href","title"]),e("button",{onClick:$(C=>X(a.id),["prevent"]),class:"p-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:s(r)("common.delete")},[l(s(N),{class:"w-5 h-5"})],8,gt)])])]))),128))]))]),e("div",ct,[e("div",ut,[n[7]||(n[7]=e("div",{class:"w-10 h-10 bg-white dark:bg-gray-800 rounded-xl flex items-center justify-center shadow-sm mr-4 flex-shrink-0"},[e("svg",{class:"w-5 h-5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[e("h4",mt,o(s(r)("marketing.about_campaign_types")),1),e("ul",pt,[e("li",xt,[n[4]||(n[4]=e("span",{class:"w-1.5 h-1.5 bg-blue-500 rounded-full mr-2"},null,-1)),e("strong",ht,o(s(r)("marketing.type_broadcast"))+":",1),c(" "+o(s(r)("marketing.type_broadcast_desc")),1)]),e("li",bt,[n[5]||(n[5]=e("span",{class:"w-1.5 h-1.5 bg-purple-500 rounded-full mr-2"},null,-1)),e("strong",kt,o(s(r)("marketing.type_drip"))+":",1),c(" "+o(s(r)("marketing.type_drip_desc")),1)]),e("li",ft,[n[6]||(n[6]=e("span",{class:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-2"},null,-1)),e("strong",_t,o(s(r)("marketing.type_trigger"))+":",1),c(" "+o(s(r)("marketing.type_trigger_desc")),1)])])])])])])],64))}};export{Ft as _};
