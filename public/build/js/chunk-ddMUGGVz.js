import{r as e,a as t,o as a,D as r,z as s,y as o,x as i,A as l,H as n,C as d,N as c,Q as u,L as p,S as g,F as b,G as v,B as h,v as x,M as y,I as f,J as m,K as k,h as _,E as w}from"./chunk-7Urb0kxg.js";import{l as M,a as j}from"./chunk-DKkye6wf.js";import{_ as z}from"./chunk-BCo6x5W8.js";const C={class:"h-[calc(100vh-8rem)] flex flex-col bg-gray-100 dark:bg-gray-900 -m-6 -mt-4"},B={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between"},q={class:"flex items-center gap-4"},$={class:"text-lg font-bold text-gray-900 dark:text-white"},V={class:"flex items-center gap-2"},T={class:"flex items-center gap-1 bg-gray-100 dark:bg-gray-700 rounded-lg p-1"},H={class:"text-xs font-medium w-12 text-center"},L=["disabled"],D={key:0,class:"animate-spin w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24"},K={key:1,class:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},X={class:"flex-1 flex overflow-hidden"},I={class:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col"},W={class:"flex-1 overflow-y-auto p-3 space-y-2"},A={class:"mb-3"},F=["d","stroke","marker-end","onClick"],O=["x","y","fill"],S=["d","stroke"],Y=["onMousedown","onClick"],R={class:"flex items-center gap-2"},Q={class:"font-medium text-sm truncate"},E=["onClick"],U={class:"bg-white dark:bg-gray-800 rounded-b-xl p-3"},J={key:0,class:"text-xs space-y-1"},P={class:"flex items-center gap-1 text-purple-600 dark:text-purple-400"},N={key:0},G={key:1,class:"truncate"},Z={key:2,class:"text-gray-400 italic"},ee={key:0,class:"text-gray-500 pl-4"},te={key:0,class:"text-xs text-gray-600 dark:text-gray-400 line-clamp-2"},ae={key:1,class:"text-xs text-gray-400 dark:text-gray-500 italic"},re={key:2,class:"text-xs space-y-1"},se={class:"flex items-center gap-1 text-yellow-600 dark:text-yellow-400"},oe={key:0},ie={key:1,class:"text-gray-400 italic"},le={key:0,class:"text-gray-600 dark:text-gray-400 pl-4"},ne={key:0,class:"font-medium text-gray-800 dark:text-gray-200"},de={key:3,class:"text-xs space-y-1"},ce={class:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400"},ue={key:0},pe={key:1,class:"text-gray-400 italic"},ge={key:4,class:"text-xs space-y-1"},be={class:"flex items-center gap-1 text-indigo-600 dark:text-indigo-400"},ve={key:0,class:"truncate"},he={key:1,class:"text-gray-400 italic"},xe={class:"text-gray-500 pl-4"},ye={key:5,class:"text-xs space-y-1"},fe={class:"flex items-center gap-1 text-amber-600 dark:text-amber-400"},me={class:"flex gap-1 flex-wrap pl-4"},ke={key:6,class:"text-xs space-y-1"},_e={class:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400"},we={class:"flex gap-1 flex-wrap pl-4"},Me={key:0,class:"text-gray-400 italic"},je={key:7,class:"mt-2 flex items-center gap-1 text-xs text-purple-600"},ze={key:8,class:"mt-2 flex items-center gap-1 text-xs text-red-600"},Ce={key:9,class:"mt-2 flex items-center gap-1 text-xs text-gray-600"},Be={key:10,class:"flex justify-between mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},qe=["onMouseup"],$e={key:1,class:"w-6"},Ve=["onMousedown"],Te={key:11,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},He={class:"flex justify-center mb-3"},Le=["onMouseup"],De={class:"flex justify-between items-center"},Ke={class:"flex flex-col items-center gap-1"},Xe=["onMousedown"],Ie={class:"flex flex-col items-center gap-1"},We=["onMousedown"],Ae={key:12,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},Fe={class:"flex justify-center mb-3"},Oe=["onMouseup"],Se={class:"flex justify-between items-center"},Ye={class:"flex flex-col items-center gap-1"},Re=["onMousedown"],Qe={class:"flex flex-col items-center gap-1"},Ee=["onMousedown"],Ue={key:13,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},Je={class:"flex justify-center mb-3"},Pe=["onMouseup"],Ne={class:"flex flex-wrap justify-center gap-2"},Ge=["onMousedown","title"],Ze={class:"text-[10px] font-medium text-indigo-600 dark:text-indigo-400 max-w-[40px] truncate"},et={key:14,class:"mt-3 pt-3 border-t border-gray-100 dark:border-gray-700"},tt={class:"flex justify-center mb-3"},at=["onMouseup"],rt={class:"flex justify-center gap-3"},st=["onMousedown","title"],ot={class:"text-[10px] font-medium text-amber-600 dark:text-amber-400"},it={key:0,class:"absolute inset-0 flex items-center justify-center pointer-events-none"},lt={class:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 flex flex-col"},nt={class:"p-4 border-b border-gray-200 dark:border-gray-700"},dt={class:"font-semibold text-gray-900 dark:text-white text-sm"},ct={key:0,class:"flex-1 flex items-center justify-center p-4"},ut={key:1,class:"flex-1 overflow-y-auto p-4 space-y-4"},pt={key:0,class:"space-y-3"},gt={class:"flex items-center justify-between"},bt={key:0},vt={key:1},ht={key:1},xt={class:"grid grid-cols-4 gap-1"},yt=["onClick"],ft={class:"flex flex-col items-center gap-1"},mt=["innerHTML"],kt={class:"text-[10px]"},_t={key:2},wt={key:3},Mt={key:4},jt={key:5},zt=["value"],Ct={class:"pt-4 border-t border-gray-200 dark:border-gray-700"},Bt=z({__name:"TelegramFunnelBuilder",props:{bot:Object,funnel:Object,steps:{type:Array,default:()=>[]},panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)}},setup(z){const Bt=z,qt=(e,t=null)=>{const a="business"===Bt.panelType?"business.":"marketing.";return t?route(a+e,t):route(a+e)},$t=e(null),Vt=e(null),Tt=e(1),Ht=t({x:100,y:100}),Lt=e(!1),Dt=t({x:0,y:0}),Kt=e([]),Xt=e(null),It=e([]),Wt=e(null),At=t({x:0,y:0}),Ft=e(null),Ot=t({x:0,y:0}),St=e(!1),Yt=e(!1);a(()=>{Bt.steps.length>0&&(Kt.value=Bt.steps.map((e,t)=>({...e,type:e.step_type,x:e.position_x??100+t%3*280,y:e.position_y??100+200*Math.floor(t/3),content:e.content||{type:"text",text:""},keyboard:e.keyboard||{type:"inline",buttons:[]},condition:e.condition||{field:"",operator:"",value:"",custom_field:""},condition_true_step_id:e.condition_true_step_id||null,condition_false_step_id:e.condition_false_step_id||null})),Kt.value.forEach(e=>{"condition"===e.type?(e.condition_true_step_id&&It.value.push({from:e.id,to:e.condition_true_step_id,type:"true"}),e.condition_false_step_id&&It.value.push({from:e.id,to:e.condition_false_step_id,type:"false"})):e.next_step_id&&It.value.push({from:e.id,to:e.next_step_id,type:"default"})}))});const Rt=()=>{Tt.value=Math.min(2,Tt.value+.1)},Qt=()=>{Tt.value=Math.max(.25,Tt.value-.1)},Et=()=>{Tt.value=1,Ht.x=100,Ht.y=100},Ut=e=>{e.preventDefault(),e.deltaY<0?Rt():Qt()},Jt=e=>{e.target!==$t.value&&"svg"!==e.target.tagName||(Lt.value=!0,Dt.x=e.clientX-Ht.x,Dt.y=e.clientY-Ht.y)},Pt=e=>{if(Ot.x=(e.clientX-Ht.x)/Tt.value,Ot.y=(e.clientY-$t.value?.getBoundingClientRect().top-Ht.y)/Tt.value,Lt.value&&(Ht.x=e.clientX-Dt.x,Ht.y=e.clientY-Dt.y),Wt.value){const t=$t.value.getBoundingClientRect();Wt.value.x=(e.clientX-t.left-Ht.x)/Tt.value-At.x,Wt.value.y=(e.clientY-t.top-Ht.y)/Tt.value-At.y}},Nt=()=>{Lt.value=!1,Wt.value=null},Gt=(e,t)=>{e.dataTransfer.setData("nodeType",t)},Zt=e=>{const t=e.dataTransfer.getData("nodeType");if(!t)return;const a=$t.value.getBoundingClientRect(),r=(e.clientX-a.left-Ht.x)/Tt.value,s=(e.clientY-a.top-Ht.y)/Tt.value,o={id:`temp-${Date.now()}`,name:ga(t),type:"start"===t?"message":t,step_type:"start"===t?"message":t,x:r,y:s,content:{type:"text",text:"start"===t?"Assalomu alaykum! Botga xush kelibsiz.":""},keyboard:{type:"inline",buttons:[]},input_type:"input"===t?"text":"none",input_field:null,action_type:"none",delay_seconds:"delay"===t?5:null,next_step_id:null,order:Kt.value.length,is_first:"start"===t||"trigger_keyword"===t||0===Kt.value.length,condition:"condition"===t?{field:"",operator:"",value:"",custom_field:""}:null,condition_true_step_id:null,condition_false_step_id:null,subscribe_check:"subscribe_check"===t?{channel_id:"",channel_username:"",not_subscribed_message:"Kanalga obuna bo'lishingiz kerak!",subscribe_button_text:"Obuna bo'lish"}:null,subscribe_true_step_id:null,subscribe_false_step_id:null,quiz:"quiz"===t?{question:"",options:[{text:"",next_step_id:null},{text:"",next_step_id:null}],allow_multiple:!1,save_answer_to:""}:null,ab_test:"ab_test"===t?{variants:[{name:"A",percentage:50,next_step_id:null},{name:"B",percentage:50,next_step_id:null}]}:null,tag:"tag"===t?{action:"add",tags:[],new_tag:""}:null,trigger:"trigger_keyword"===t?{keywords:"",match_type:"contains",is_all_messages:!1}:null};Kt.value.push(o),Xt.value=o},ea=e=>{if(!confirm("Bu qadamni o'chirishni xohlaysizmi?"))return;const t=Kt.value.findIndex(t=>t.id===e);t>-1&&(Kt.value.splice(t,1),It.value=It.value.filter(t=>t.from!==e&&t.to!==e),Xt.value?.id===e&&(Xt.value=null))},ta=(e,t,a="default")=>{t.preventDefault(),t.stopPropagation(),St.value=!0,Ft.value={from:e,type:a}},aa=e=>{if(Ft.value&&Ft.value.from!==e){const t=Kt.value.find(e=>e.id===Ft.value.from),a=Ft.value.type||"default";"true"===a||"false"===a?(It.value=It.value.filter(e=>!(e.from===Ft.value.from&&e.type===a)),It.value.push({from:Ft.value.from,to:e,type:a}),t&&("true"===a?t.condition_true_step_id=e:t.condition_false_step_id=e)):(It.value=It.value.filter(e=>!(e.from===Ft.value.from&&(!e.type||"default"===e.type))),It.value.push({from:Ft.value.from,to:e,type:"default"}),t&&(t.next_step_id=e))}ra()},ra=()=>{Ft.value=null,St.value=!1},sa=e=>{if(!Ft.value)return;const t=$t.value?.getBoundingClientRect();t&&(Ot.x=(e.clientX-t.left-Ht.x)/Tt.value,Ot.y=(e.clientY-t.top-Ht.y)/Tt.value)},oa=()=>{Xt.value&&(It.value=It.value.filter(e=>!(e.from===Xt.value.id&&(!e.type||"default"===e.type))),Xt.value.next_step_id&&It.value.push({from:Xt.value.id,to:Xt.value.next_step_id,type:"default"}))},ia=e=>{const t=Kt.value.find(t=>t.id===e.from),a=Kt.value.find(t=>t.id===e.to);if(!t||!a)return"";let r,s;if("condition"===t.type)"true"===e.type?(r=t.x+35,s=t.y+160):"false"===e.type?(r=t.x+185,s=t.y+160):(r=t.x+110,s=t.y+150);else if("subscribe_check"===t.type)"subscribed"===e.type?(r=t.x+35,s=t.y+140):"not_subscribed"===e.type?(r=t.x+185,s=t.y+140):(r=t.x+110,s=t.y+130);else if("quiz"===t.type){const a=t.quiz?.options?.length||2;if(e.type?.startsWith("option_")){const o=parseInt(e.type.split("_")[1]),i=180/(a+1);r=t.x+30+i*(o+1),s=t.y+160}else r=t.x+110,s=t.y+150}else if("ab_test"===t.type){const a=t.ab_test?.variants?.length||2;if(e.type?.startsWith("variant_")){const o=parseInt(e.type.split("_")[1]),i=180/(a+1);r=t.x+30+i*(o+1),s=t.y+140}else r=t.x+110,s=t.y+130}else r=t.x+110,s=t.y+120;const o=a.x+110,i=a.y+10,l=Math.abs(i-s),n=Math.min(.5*l,80);return`M ${r} ${s} C ${r} ${s+n}, ${o} ${i-n}, ${o} ${i}`},la=()=>{if(!Ft.value)return"";const e=Kt.value.find(e=>e.id===Ft.value.from);if(!e)return"";let t,a;if("condition"===e.type)"true"===Ft.value.type?(t=e.x+35,a=e.y+160):"false"===Ft.value.type?(t=e.x+185,a=e.y+160):(t=e.x+110,a=e.y+150);else if("subscribe_check"===e.type)"subscribed"===Ft.value.type?(t=e.x+35,a=e.y+140):"not_subscribed"===Ft.value.type?(t=e.x+185,a=e.y+140):(t=e.x+110,a=e.y+130);else if("quiz"===e.type){const r=e.quiz?.options?.length||2;if(Ft.value.type?.startsWith("option_")){const s=parseInt(Ft.value.type.split("_")[1]),o=180/(r+1);t=e.x+30+o*(s+1),a=e.y+160}else t=e.x+110,a=e.y+150}else if("ab_test"===e.type){const r=e.ab_test?.variants?.length||2;if(Ft.value.type?.startsWith("variant_")){const s=parseInt(Ft.value.type.split("_")[1]),o=180/(r+1);t=e.x+30+o*(s+1),a=e.y+140}else t=e.x+110,a=e.y+130}else t=e.x+110,a=e.y+120;const r=Math.abs(Ot.y-a),s=Math.min(.4*r,60);return`M ${t} ${a} C ${t} ${a+s}, ${Ot.x} ${Ot.y-s}, ${Ot.x} ${Ot.y}`},na=e=>"true"===e.type||"subscribed"===e.type?"#22c55e":"false"===e.type||"not_subscribed"===e.type?"#ef4444":e.type?.startsWith("option_")?"#6366f1":e.type?.startsWith("variant_")?"#f59e0b":"#6366f1",da=e=>"true"===e.type||"subscribed"===e.type?"arrowhead-green":"false"===e.type||"not_subscribed"===e.type?"arrowhead-red":"arrowhead",ca=e=>{const t=Kt.value.find(t=>t.id===e.from),a=Kt.value.find(t=>t.id===e.to);if(!t||!a)return{x:0,y:0};let r;r="condition"===t.type?"true"===e.type?t.x+35:"false"===e.type?t.x+185:t.x+110:t.x+110;const s="condition"===t.type?t.y+160:t.y+120;return{x:(r+(a.x+110))/2-10,y:(s+(a.y+10))/2}},ua=[{value:"text",label:"Matn",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6h16M4 12h16M4 18h10"/></svg>'},{value:"photo",label:"Rasm",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/></svg>'},{value:"video",label:"Video",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M10 9l5 3-5 3V9z"/></svg>'},{value:"voice",label:"Ovoz",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1v10M8 5v6M4 7v2M16 5v6M20 7v2"/><path d="M12 15a4 4 0 004-4V5a4 4 0 00-8 0v6a4 4 0 004 4z"/><path d="M17 11a5 5 0 01-10 0"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>'},{value:"video_note",label:"Aylana",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M10 9l5 3-5 3V9z"/></svg>'},{value:"document",label:"Fayl",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><path d="M14 2v6h6"/></svg>'}],pa=e=>{const t={start:"bg-gradient-to-r from-green-500 to-green-600 text-white",trigger_keyword:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white",message:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",input:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",condition:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white",action:"bg-gradient-to-r from-red-500 to-pink-500 text-white",delay:"bg-gradient-to-r from-gray-500 to-gray-600 text-white",end:"bg-gradient-to-r from-gray-700 to-gray-800 text-white",subscribe_check:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white",quiz:"bg-gradient-to-r from-indigo-500 to-violet-500 text-white",ab_test:"bg-gradient-to-r from-amber-500 to-yellow-500 text-white",tag:"bg-gradient-to-r from-emerald-500 to-green-500 text-white"};return t[e]||t.message},ga=e=>({start:"Boshlash",trigger_keyword:"Kalit so'z",message:"Xabar",input:"Ma'lumot",condition:"Shart",action:"Amal",delay:"Kutish",end:"Tugatish",subscribe_check:"Obuna tekshir",quiz:"Savol/Quiz",ab_test:"A/B Test",tag:"Teg"}[e]||e),ba=e=>({none:"Hech biri",text:"Matn",email:"Email",phone:"Telefon",number:"Raqam",location:"Lokatsiya",photo:"Rasm",any:"Istalgan"}[e]||e),va=e=>({none:"Hech narsa",create_lead:"Lid yaratish",update_user:"Foydalanuvchi yangilash",handoff:"Operatorga",send_notification:"Xabarnoma",webhook:"Webhook"}[e]||e),ha=e=>({exact:"To'liq mos",contains:"Ichida bor",starts_with:"Bilan boshlanadi",ends_with:"Bilan tugaydi",regex:"Regex"}[e]||e),xa=async()=>{Yt.value=!0;try{const e=Kt.value.filter(e=>"end"!==e.type).map((e,t)=>({id:String(e.id).startsWith("temp-")?null:e.id,name:e.name,step_type:e.step_type||e.type,content:e.content,keyboard:e.keyboard,input_type:e.input_type||"none",input_field:e.input_field,action_type:e.action_type||"none",action_config:e.action_config,next_step_id:["condition","subscribe_check","quiz","ab_test"].includes(e.type)?null:e.next_step_id,delay_seconds:e.delay_seconds,order:t,position_x:Math.round(e.x),position_y:Math.round(e.y),condition:"condition"===e.type?e.condition:null,condition_true_step_id:e.condition_true_step_id||null,condition_false_step_id:e.condition_false_step_id||null,subscribe_check:"subscribe_check"===e.type?e.subscribe_check:null,subscribe_true_step_id:e.subscribe_true_step_id||null,subscribe_false_step_id:e.subscribe_false_step_id||null,quiz:"quiz"===e.type?e.quiz:null,ab_test:"ab_test"===e.type?e.ab_test:null,tag:"tag"===e.type?e.tag:null,trigger:"trigger_keyword"===e.type?e.trigger:null})),t=Kt.value.find(e=>e.is_first)||Kt.value[0],a=await j.post(qt("telegram-funnels.funnels.save-steps",[Bt.bot.id,Bt.funnel.id]),{steps:e,first_step_id:t?.id});if(a.data.success){const e=a.data;if(e.steps){const t=Kt.value.filter(e=>"end"===e.type);Kt.value=e.steps.map(e=>({...e,type:e.step_type,x:e.position_x??100,y:e.position_y??100,content:e.content||{type:"text",text:""},keyboard:e.keyboard||{type:"inline",buttons:[]},condition:e.condition||{field:"",operator:"",value:"",custom_field:""},condition_true_step_id:e.condition_true_step_id||null,condition_false_step_id:e.condition_false_step_id||null,subscribe_check:e.subscribe_check||{channel_id:"",channel_username:"",not_subscribed_message:"",subscribe_button_text:""},subscribe_true_step_id:e.subscribe_true_step_id||null,subscribe_false_step_id:e.subscribe_false_step_id||null,quiz:e.quiz||{question:"",options:[],allow_multiple:!1,save_answer_to:""},ab_test:e.ab_test||{variants:[]},tag:e.tag||{action:"add",tags:[],new_tag:""},trigger:e.trigger||{keywords:"",match_type:"contains",is_all_messages:!1}})),Kt.value.push(...t),It.value=[],Kt.value.forEach(e=>{"condition"===e.type?(e.condition_true_step_id&&It.value.push({from:e.id,to:e.condition_true_step_id,type:"true"}),e.condition_false_step_id&&It.value.push({from:e.id,to:e.condition_false_step_id,type:"false"})):"subscribe_check"===e.type?(e.subscribe_true_step_id&&It.value.push({from:e.id,to:e.subscribe_true_step_id,type:"subscribed"}),e.subscribe_false_step_id&&It.value.push({from:e.id,to:e.subscribe_false_step_id,type:"not_subscribed"})):"quiz"===e.type&&e.quiz?.options?e.quiz.options.forEach((t,a)=>{t.next_step_id&&It.value.push({from:e.id,to:t.next_step_id,type:`option_${a}`})}):"ab_test"===e.type&&e.ab_test?.variants?e.ab_test.variants.forEach((t,a)=>{t.next_step_id&&It.value.push({from:e.id,to:t.next_step_id,type:`variant_${a}`})}):e.next_step_id&&It.value.push({from:e.id,to:e.next_step_id,type:"default"})})}alert("Funnel saqlandi!")}else alert(a.data.message||"Xatolik yuz berdi")}catch(e){419===e.response?.status?alert("Sessiya tugagan. Sahifani yangilang."):alert(e.response?.data?.message||"Saqlashda xatolik")}finally{Yt.value=!1}};return(e,t)=>(w(),r("div",C,[s("div",B,[s("div",q,[o(l(M),{href:qt("telegram-funnels.funnels.index",z.bot.id),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},{default:i(()=>[...t[23]||(t[23]=[s("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),s("div",null,[s("h1",$,n(z.funnel.name),1),t[24]||(t[24]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Visual Funnel Builder",-1))])]),s("div",V,[s("div",T,[s("button",{onClick:Qt,class:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"},[...t[25]||(t[25]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])]),s("span",H,n(Math.round(100*Tt.value))+"%",1),s("button",{onClick:Rt,class:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"},[...t[26]||(t[26]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])]),s("button",{onClick:Et,class:"p-1.5 hover:bg-gray-200 dark:hover:bg-gray-600 rounded"},[...t[27]||(t[27]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)])])]),t[30]||(t[30]=s("div",{class:"h-6 w-px bg-gray-300 dark:bg-gray-600"},null,-1)),s("button",{onClick:xa,disabled:Yt.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-sm font-medium rounded-lg transition-colors"},[Yt.value?(w(),r("svg",D,[...t[28]||(t[28]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):(w(),r("svg",K,[...t[29]||(t[29]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),d(" "+n(Yt.value?"Saqlanmoqda...":"Saqlash"),1)],8,L)])]),s("div",X,[s("div",I,[t[45]||(t[45]=s("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700"},[s("h3",{class:"font-semibold text-gray-900 dark:text-white text-sm"},"Elementlar"),s("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Canvas'ga tortib tashlang")],-1)),s("div",W,[s("div",A,[t[33]||(t[33]=s("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2 px-1"},"Triggerlar",-1)),s("div",{draggable:"true",onDragstart:t[0]||(t[0]=e=>Gt(e,"start")),class:"p-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow mb-2"},[...t[31]||(t[31]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Boshlash</p><p class="text-xs opacity-80" data-v-2b54bc78>Funnel boshi</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[1]||(t[1]=e=>Gt(e,"trigger_keyword")),class:"p-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg cursor-move hover:shadow-lg hover:shadow-purple-500/20 transition-all"},[...t[32]||(t[32]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Kalit so&#39;z</p><p class="text-xs opacity-80" data-v-2b54bc78>Xabarda topilganda</p></div></div>',1)])],32)]),t[44]||(t[44]=s("div",{class:"mb-3"},[s("p",{class:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2 px-1"},"Xabarlar")],-1)),s("div",{draggable:"true",onDragstart:t[2]||(t[2]=e=>Gt(e,"message")),class:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[34]||(t[34]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Xabar</p><p class="text-xs opacity-80" data-v-2b54bc78>Matn yuborish</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[3]||(t[3]=e=>Gt(e,"input")),class:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[35]||(t[35]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Ma&#39;lumot</p><p class="text-xs opacity-80" data-v-2b54bc78>Foydalanuvchidan so&#39;rash</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[4]||(t[4]=e=>Gt(e,"condition")),class:"p-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[36]||(t[36]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Shart</p><p class="text-xs opacity-80" data-v-2b54bc78>Shartli o&#39;tish</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[5]||(t[5]=e=>Gt(e,"action")),class:"p-3 bg-gradient-to-r from-red-500 to-pink-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[37]||(t[37]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Amal</p><p class="text-xs opacity-80" data-v-2b54bc78>Lid yaratish, webhook</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[6]||(t[6]=e=>Gt(e,"subscribe_check")),class:"p-3 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[38]||(t[38]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Obuna tekshir</p><p class="text-xs opacity-80" data-v-2b54bc78>Kanal a&#39;zoligini</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[7]||(t[7]=e=>Gt(e,"quiz")),class:"p-3 bg-gradient-to-r from-indigo-500 to-violet-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[39]||(t[39]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Savol/Quiz</p><p class="text-xs opacity-80" data-v-2b54bc78>Tanlov berish</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[8]||(t[8]=e=>Gt(e,"ab_test")),class:"p-3 bg-gradient-to-r from-amber-500 to-yellow-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[40]||(t[40]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>A/B Test</p><p class="text-xs opacity-80" data-v-2b54bc78>Tasodifiy bo&#39;lish</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[9]||(t[9]=e=>Gt(e,"tag")),class:"p-3 bg-gradient-to-r from-emerald-500 to-green-500 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[41]||(t[41]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Teg</p><p class="text-xs opacity-80" data-v-2b54bc78>Foydalanuvchini belgilash</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[10]||(t[10]=e=>Gt(e,"delay")),class:"p-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[42]||(t[42]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Kutish</p><p class="text-xs opacity-80" data-v-2b54bc78>Vaqt kechiktirish</p></div></div>',1)])],32),s("div",{draggable:"true",onDragstart:t[11]||(t[11]=e=>Gt(e,"end")),class:"p-3 bg-gradient-to-r from-gray-700 to-gray-800 text-white rounded-lg cursor-move hover:shadow-lg transition-shadow"},[...t[43]||(t[43]=[c('<div class="flex items-center gap-2" data-v-2b54bc78><div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center" data-v-2b54bc78><svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b54bc78></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z" data-v-2b54bc78></path></svg></div><div data-v-2b54bc78><p class="font-medium text-sm" data-v-2b54bc78>Tugatish</p><p class="text-xs opacity-80" data-v-2b54bc78>Funnel tugashi</p></div></div>',1)])],32)])]),s("div",{ref_key:"canvasContainer",ref:$t,class:"flex-1 overflow-hidden relative bg-gray-50 dark:bg-gray-900",onDragover:t[12]||(t[12]=u(()=>{},["prevent"])),onDrop:Zt,onMousedown:Jt,onMousemove:Pt,onMouseup:Nt,onMouseleave:Nt,onWheel:Ut},[s("div",{class:"absolute inset-0 pointer-events-none",style:g({backgroundImage:"radial-gradient(circle, #d1d5db 1px, transparent 1px)",backgroundSize:`${20*Tt.value}px ${20*Tt.value}px`,backgroundPosition:`${Ht.x}px ${Ht.y}px`})},null,4),s("div",{ref_key:"canvas",ref:Vt,class:"absolute",style:g({transform:`translate(${Ht.x}px, ${Ht.y}px) scale(${Tt.value})`,transformOrigin:"0 0"})},[(w(),r("svg",{class:"absolute top-0 left-0 w-[5000px] h-[5000px]",onMouseup:ra,onMousemove:sa},[t[46]||(t[46]=c('<defs data-v-2b54bc78><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" data-v-2b54bc78><polygon points="0 0, 10 3.5, 0 7" fill="#6366f1" data-v-2b54bc78></polygon></marker><marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" data-v-2b54bc78><polygon points="0 0, 10 3.5, 0 7" fill="#22c55e" data-v-2b54bc78></polygon></marker><marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" data-v-2b54bc78><polygon points="0 0, 10 3.5, 0 7" fill="#ef4444" data-v-2b54bc78></polygon></marker></defs>',1)),(w(!0),r(b,null,v(It.value,e=>(w(),r("g",{key:`${e.from}-${e.to}-${e.type||"default"}`},[s("path",{d:ia(e),fill:"none",stroke:na(e),"stroke-width":"2.5","marker-end":`url(#${da(e)})`,class:"transition-all duration-200 cursor-pointer hover:stroke-opacity-70",onClick:u(t=>(e=>{if(!confirm("Bu bog'lanishni o'chirishni xohlaysizmi?"))return;const t=Kt.value.find(t=>t.id===e.from);if("true"===e.type&&t)t.condition_true_step_id=null;else if("false"===e.type&&t)t.condition_false_step_id=null;else if("subscribed"===e.type&&t)t.subscribe_true_step_id=null;else if("not_subscribed"===e.type&&t)t.subscribe_false_step_id=null;else if(e.type?.startsWith("option_")&&t){const a=parseInt(e.type.split("_")[1]);t.quiz?.options?.[a]&&(t.quiz.options[a].next_step_id=null)}else if(e.type?.startsWith("variant_")&&t){const a=parseInt(e.type.split("_")[1]);t.ab_test?.variants?.[a]&&(t.ab_test.variants[a].next_step_id=null)}else t&&(t.next_step_id=null);It.value=It.value.filter(t=>!(t.from===e.from&&t.to===e.to&&t.type===e.type))})(e),["stop"])},null,8,F),"true"===e.type||"false"===e.type?(w(),r("text",{key:0,x:ca(e).x,y:ca(e).y,fill:"true"===e.type?"#22c55e":"#ef4444","font-size":"11","font-weight":"600",class:"pointer-events-none select-none"},n("true"===e.type?"Ha":"Yo'q"),9,O)):p("",!0)]))),128)),Ft.value?(w(),r("path",{key:0,d:la(),fill:"none",stroke:Ft.value?"true"===Ft.value.type||"subscribed"===Ft.value.type?"#22c55e":"false"===Ft.value.type||"not_subscribed"===Ft.value.type?"#ef4444":Ft.value.type?.startsWith("option_")?"#6366f1":Ft.value.type?.startsWith("variant_")?"#f59e0b":"#6366f1":"#6366f1","stroke-width":"2.5","stroke-dasharray":"8,4",class:"animate-pulse"},null,8,S)):p("",!0)],32)),(w(!0),r(b,null,v(Kt.value,e=>{return w(),r("div",{key:e.id,style:g({position:"absolute",left:`${e.x}px`,top:`${e.y}px`,width:"220px"}),onMousedown:u(t=>((e,t)=>{const a=$t.value.getBoundingClientRect();At.x=(e.clientX-a.left-Ht.x)/Tt.value-t.x,At.y=(e.clientY-a.top-Ht.y)/Tt.value-t.y,Wt.value=t})(t,e),["stop"]),onClick:u(t=>(e=>{Xt.value=e})(e),["stop"]),class:h(["rounded-xl shadow-lg transition-all cursor-move",Xt.value?.id===e.id?"ring-2 ring-blue-500 ring-offset-2":""])},[s("div",{class:h(["rounded-t-xl px-4 py-3 flex items-center justify-between",pa(e.type)])},[s("div",R,[(w(),x(y((i=e.type,{render(){const e={start:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})]),trigger_keyword:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),message:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})]),input:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),condition:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),action:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),delay:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),end:_("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),_("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 10a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"})])};return e[i]||e.message}})),{class:"w-5 h-5"})),s("span",Q,n(e.name||ga(e.type)),1)]),s("button",{onClick:u(t=>ea(e.id),["stop"]),class:"p-1 hover:bg-white/20 rounded opacity-0 group-hover:opacity-100 transition-opacity"},[...t[47]||(t[47]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,E)],2),s("div",U,["trigger_keyword"===e.type?(w(),r("div",J,[s("div",P,[t[48]||(t[48]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),e.trigger?.is_all_messages?(w(),r("span",N,"Barcha xabarlar")):e.trigger?.keywords?(w(),r("span",G,n(e.trigger.keywords),1)):(w(),r("span",Z,"Kalit so'z kiriting"))]),e.trigger?.match_type&&!e.trigger?.is_all_messages?(w(),r("div",ee,n(ha(e.trigger.match_type)),1)):p("",!0)])):p("",!0),["condition","subscribe_check","quiz","ab_test","tag","trigger_keyword"].includes(e.type)?p("",!0):(w(),r(b,{key:1},[e.content?.text?(w(),r("p",te,n(e.content.text),1)):(w(),r("p",ae," Matn kiriting... "))],64)),"condition"===e.type?(w(),r("div",re,[s("div",se,[t[49]||(t[49]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e.condition?.field?(w(),r("span",oe,n((o=e.condition.field,{first_name:"Ism",last_name:"Familiya",username:"Username",phone:"Telefon",email:"Email",language_code:"Til kodi",is_premium:"Premium",user_id:"Telegram ID",custom_field:"Maxsus maydon",has_tag:"Teg mavjudligi",quiz_answer:"Quiz javobi",interaction_count:"Interaksiya soni",last_message_date:"Oxirgi xabar",funnel_step:"Joriy qadam"}[o]||o)),1)):(w(),r("span",ie,"Maydon tanlang"))]),e.condition?.operator?(w(),r("div",le,[d(n((a=e.condition.operator,{equals:"teng",not_equals:"teng emas",contains:"o'z ichiga oladi",not_contains:"o'z ichiga olmaydi",starts_with:"bilan boshlanadi",ends_with:"bilan tugaydi",is_set:"mavjud",is_empty:"bo'sh",greater_than:"katta",less_than:"kichik",greater_or_equal:"katta yoki teng",less_or_equal:"kichik yoki teng",is_true:"ha (true)",is_false:"yo'q (false)"}[a]||a))+" ",1),e.condition.value?(w(),r("span",ne,'"'+n(e.condition.value)+'"',1)):p("",!0)])):p("",!0)])):p("",!0),"subscribe_check"===e.type?(w(),r("div",de,[s("div",ce,[t[50]||(t[50]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.subscribe_check?.channel_username?(w(),r("span",ue,"@"+n(e.subscribe_check.channel_username),1)):(w(),r("span",pe,"Kanal tanlang"))])])):p("",!0),"quiz"===e.type?(w(),r("div",ge,[s("div",be,[t[51]||(t[51]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e.quiz?.question?(w(),r("span",ve,n(e.quiz.question),1)):(w(),r("span",he,"Savol kiriting"))]),s("div",xe,n(e.quiz?.options?.length||0)+" ta variant ",1)])):p("",!0),"ab_test"===e.type?(w(),r("div",ye,[s("div",fe,[t[52]||(t[52]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)),s("span",null,n(e.ab_test?.variants?.length||2)+" ta variant",1)]),s("div",me,[(w(!0),r(b,null,v(e.ab_test?.variants||[],(e,t)=>(w(),r("span",{key:t,class:"px-1.5 py-0.5 bg-amber-100 dark:bg-amber-900 text-amber-700 dark:text-amber-300 rounded text-[10px]"},n(e.name)+": "+n(e.percentage)+"% ",1))),128))])])):p("",!0),"tag"===e.type?(w(),r("div",ke,[s("div",_e,[t[53]||(t[53]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),s("span",null,n("add"===e.tag?.action?"Qo'shish":"O'chirish"),1)]),s("div",we,[(w(!0),r(b,null,v(e.tag?.tags||[],(e,t)=>(w(),r("span",{key:t,class:"px-1.5 py-0.5 bg-emerald-100 dark:bg-emerald-900 text-emerald-700 dark:text-emerald-300 rounded text-[10px]"}," #"+n(e),1))),128)),e.tag?.tags?.length?p("",!0):(w(),r("span",Me,"Teg tanlang"))])])):p("",!0),"input"===e.type?(w(),r("div",je,[t[54]||(t[54]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)),d(" "+n(ba(e.input_type)),1)])):p("",!0),"action"===e.type?(w(),r("div",ze,[t[55]||(t[55]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),d(" "+n(va(e.action_type)),1)])):p("",!0),"delay"===e.type?(w(),r("div",Ce,[t[56]||(t[56]=s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" "+n(e.delay_seconds||5)+" soniya ",1)])):p("",!0),["condition","subscribe_check","quiz","ab_test"].includes(e.type)?p("",!0):(w(),r("div",Be,["start"!==e.type?(w(),r("div",{key:0,class:h(["w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 hover:text-white transition-colors",{"ring-2 ring-blue-400 ring-offset-1":Ft.value&&Ft.value.from!==e.id}]),onMouseup:u(t=>aa(e.id),["stop"]),title:"Kirish nuqtasi"},[...t[57]||(t[57]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],42,qe)):(w(),r("div",$e)),"end"!==e.type?(w(),r("div",{key:2,class:"w-6 h-6 bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors",onMousedown:u(t=>ta(e.id,t,"default"),["stop"]),title:"Chiqish nuqtasi - tortib tashlang"},[...t[58]||(t[58]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)])],40,Ve)):p("",!0)])),"condition"===e.type?(w(),r("div",Te,[s("div",He,[s("div",{class:h(["w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 hover:text-white transition-colors",{"ring-2 ring-blue-400 ring-offset-1":Ft.value&&Ft.value.from!==e.id}]),onMouseup:u(t=>aa(e.id),["stop"]),title:"Kirish nuqtasi"},[...t[59]||(t[59]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],42,Le)]),s("div",De,[s("div",Ke,[s("div",{class:"w-7 h-7 bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-green-500 hover:text-white transition-colors font-bold text-xs",onMousedown:u(t=>ta(e.id,t,"true"),["stop"]),title:"Ha - shart bajarilsa"}," checkmark ",40,Xe),t[60]||(t[60]=s("span",{class:"text-[10px] font-medium text-green-600 dark:text-green-400"},"Ha",-1))]),s("div",Ie,[s("div",{class:"w-7 h-7 bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-red-500 hover:text-white transition-colors font-bold text-xs",onMousedown:u(t=>ta(e.id,t,"false"),["stop"]),title:"Yo'q - shart bajarilmasa"}," x ",40,We),t[61]||(t[61]=s("span",{class:"text-[10px] font-medium text-red-600 dark:text-red-400"},"Yo'q",-1))])])])):p("",!0),"subscribe_check"===e.type?(w(),r("div",Ae,[s("div",Fe,[s("div",{class:h(["w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 hover:text-white transition-colors",{"ring-2 ring-blue-400 ring-offset-1":Ft.value&&Ft.value.from!==e.id}]),onMouseup:u(t=>aa(e.id),["stop"]),title:"Kirish nuqtasi"},[...t[62]||(t[62]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],42,Oe)]),s("div",Se,[s("div",Ye,[s("div",{class:"w-7 h-7 bg-cyan-100 dark:bg-cyan-900 text-cyan-600 dark:text-cyan-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-cyan-500 hover:text-white transition-colors font-bold text-xs",onMousedown:u(t=>ta(e.id,t,"subscribed"),["stop"]),title:"Obuna bo'lgan"}," checkmark ",40,Re),t[63]||(t[63]=s("span",{class:"text-[10px] font-medium text-cyan-600 dark:text-cyan-400"},"Obuna",-1))]),s("div",Qe,[s("div",{class:"w-7 h-7 bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-red-500 hover:text-white transition-colors font-bold text-xs",onMousedown:u(t=>ta(e.id,t,"not_subscribed"),["stop"]),title:"Obuna bo'lmagan"}," x ",40,Ee),t[64]||(t[64]=s("span",{class:"text-[10px] font-medium text-red-600 dark:text-red-400"},"Yo'q",-1))])])])):p("",!0),"quiz"===e.type?(w(),r("div",Ue,[s("div",Je,[s("div",{class:h(["w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 hover:text-white transition-colors",{"ring-2 ring-blue-400 ring-offset-1":Ft.value&&Ft.value.from!==e.id}]),onMouseup:u(t=>aa(e.id),["stop"]),title:"Kirish nuqtasi"},[...t[65]||(t[65]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],42,Pe)]),s("div",Ne,[(w(!0),r(b,null,v(e.quiz?.options||[],(t,a)=>(w(),r("div",{key:a,class:"flex flex-col items-center gap-1"},[s("div",{class:"w-6 h-6 bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-indigo-500 hover:text-white transition-colors font-bold text-[10px]",onMousedown:u(t=>ta(e.id,t,`option_${a}`),["stop"]),title:`Javob: ${t.text||a+1}`},n(a+1),41,Ge),s("span",Ze,n(t.text||`#${a+1}`),1)]))),128))])])):p("",!0),"ab_test"===e.type?(w(),r("div",et,[s("div",tt,[s("div",{class:h(["w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-500 hover:text-white transition-colors",{"ring-2 ring-blue-400 ring-offset-1":Ft.value&&Ft.value.from!==e.id}]),onMouseup:u(t=>aa(e.id),["stop"]),title:"Kirish nuqtasi"},[...t[66]||(t[66]=[s("svg",{class:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})],-1)])],42,at)]),s("div",rt,[(w(!0),r(b,null,v(e.ab_test?.variants||[],(t,a)=>(w(),r("div",{key:a,class:"flex flex-col items-center gap-1"},[s("div",{class:"w-7 h-7 bg-amber-100 dark:bg-amber-900 text-amber-600 dark:text-amber-400 rounded-full flex items-center justify-center cursor-pointer hover:bg-amber-500 hover:text-white transition-colors font-bold text-xs",onMousedown:u(t=>ta(e.id,t,`variant_${a}`),["stop"]),title:`${t.name}: ${t.percentage}%`},n(t.name),41,st),s("span",ot,n(t.percentage)+"%",1)]))),128))])])):p("",!0)])],46,Y);var a,o,i}),128))],4),0===Kt.value.length?(w(),r("div",it,[...t[67]||(t[67]=[c('<div class="text-center" data-v-2b54bc78><div class="w-20 h-20 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4" data-v-2b54bc78><svg class="w-10 h-10 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" data-v-2b54bc78></path></svg></div><h3 class="text-lg font-medium text-gray-900 dark:text-white mb-2" data-v-2b54bc78>Funnel bo&#39;sh</h3><p class="text-gray-500 dark:text-gray-400 text-sm" data-v-2b54bc78>Chap paneldan elementlarni tortib tashlang</p></div>',1)])])):p("",!0)],544),s("div",lt,[s("div",nt,[s("h3",dt,n(Xt.value?"Qadam tahrirlash":"Qadam tanlang"),1)]),Xt.value?(w(),r("div",ut,[s("div",null,[t[69]||(t[69]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Qadam nomi",-1)),f(s("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>Xt.value.name=e),type:"text",class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Qadam nomini kiriting..."},null,512),[[m,Xt.value.name]])]),"trigger_keyword"===Xt.value.type?(w(),r("div",pt,[t[75]||(t[75]=c('<div class="p-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg" data-v-2b54bc78><div class="flex items-center gap-2 text-purple-700 dark:text-purple-400 mb-2" data-v-2b54bc78><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-2b54bc78><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-2b54bc78></path></svg><span class="text-xs font-medium" data-v-2b54bc78>Kalit so&#39;z triggeri</span></div><p class="text-xs text-purple-600 dark:text-purple-400" data-v-2b54bc78> Foydalanuvchi xabarida kalit so&#39;z topilganda bu trigger ishga tushadi. </p></div>',1)),s("div",gt,[t[70]||(t[70]=s("label",{class:"text-xs font-medium text-gray-700 dark:text-gray-300"},"Barcha xabarlar uchun",-1)),s("button",{onClick:t[14]||(t[14]=e=>Xt.value.trigger.is_all_messages=!Xt.value.trigger.is_all_messages),class:h(["relative w-11 h-6 rounded-full transition-colors",Xt.value.trigger?.is_all_messages?"bg-purple-500":"bg-gray-300 dark:bg-gray-600"])},[s("span",{class:h(["absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform",Xt.value.trigger?.is_all_messages?"translate-x-5":"translate-x-0"])},null,2)],2)]),Xt.value.trigger?.is_all_messages?p("",!0):(w(),r("div",bt,[t[71]||(t[71]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kalit so'zlar",-1)),f(s("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>Xt.value.trigger.keywords=e),type:"text",class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"narx, price, baho"},null,512),[[m,Xt.value.trigger.keywords]]),t[72]||(t[72]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Vergul bilan ajrating: narx, price, baho",-1))])),Xt.value.trigger?.is_all_messages?p("",!0):(w(),r("div",vt,[t[74]||(t[74]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mos kelish turi",-1)),f(s("select",{"onUpdate:modelValue":t[16]||(t[16]=e=>Xt.value.trigger.match_type=e),class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"},[...t[73]||(t[73]=[c('<option value="contains" data-v-2b54bc78>Ichida bor (tavsiya etiladi)</option><option value="exact" data-v-2b54bc78>To&#39;liq mos</option><option value="starts_with" data-v-2b54bc78>Bilan boshlanadi</option><option value="ends_with" data-v-2b54bc78>Bilan tugaydi</option><option value="regex" data-v-2b54bc78>Regex (ilg&#39;or)</option>',5)])],512),[[k,Xt.value.trigger.match_type]])]))])):p("",!0),["message","input","start"].includes(Xt.value.type)?(w(),r("div",ht,[t[76]||(t[76]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kontent turi",-1)),s("div",xt,[(w(),r(b,null,v(ua,e=>s("button",{key:e.value,onClick:t=>(e=>{if(!Xt.value)return;const t=Xt.value.content?.text||Xt.value.content?.caption||"";Xt.value.content={type:e,text:"text"===e?t:"",caption:"text"!==e?t:"",file_id:Xt.value.content?.file_id||"",url:Xt.value.content?.url||"",duration:Xt.value.content?.duration||null}})(e.value),class:h(["p-2 rounded-lg text-center transition-colors",(Xt.value.content?.type||"text")===e.value?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 ring-1 ring-blue-500":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"])},[s("div",ft,[s("span",{innerHTML:e.icon,class:"w-5 h-5"},null,8,mt),s("span",kt,n(e.label),1)])],10,yt)),64))])])):p("",!0),["message","input","start"].includes(Xt.value.type)&&"text"===(Xt.value.content?.type||"text")?(w(),r("div",_t,[t[77]||(t[77]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Xabar matni",-1)),f(s("textarea",{"onUpdate:modelValue":t[17]||(t[17]=e=>Xt.value.content.text=e),rows:"4",class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Xabar matni kiriting..."},null,512),[[m,Xt.value.content.text]]),t[78]||(t[78]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"}," O'zgaruvchilar: {first_name}, {last_name}, {phone}, {username} ",-1))])):p("",!0),"input"===Xt.value.type?(w(),r("div",wt,[t[80]||(t[80]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kutilayotgan ma'lumot turi",-1)),f(s("select",{"onUpdate:modelValue":t[18]||(t[18]=e=>Xt.value.input_type=e),class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[79]||(t[79]=[c('<option value="none" data-v-2b54bc78>Hech biri</option><option value="text" data-v-2b54bc78>Matn</option><option value="email" data-v-2b54bc78>Email</option><option value="phone" data-v-2b54bc78>Telefon raqam</option><option value="number" data-v-2b54bc78>Raqam</option><option value="location" data-v-2b54bc78>Lokatsiya</option><option value="photo" data-v-2b54bc78>Rasm</option><option value="any" data-v-2b54bc78>Istalgan</option>',8)])],512),[[k,Xt.value.input_type]])])):p("",!0),"action"===Xt.value.type?(w(),r("div",Mt,[t[82]||(t[82]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Amal turi",-1)),f(s("select",{"onUpdate:modelValue":t[19]||(t[19]=e=>Xt.value.action_type=e),class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[...t[81]||(t[81]=[c('<option value="none" data-v-2b54bc78>Hech narsa</option><option value="create_lead" data-v-2b54bc78>Lid yaratish</option><option value="update_user" data-v-2b54bc78>Foydalanuvchini yangilash</option><option value="handoff" data-v-2b54bc78>Operatorga uzatish</option><option value="send_notification" data-v-2b54bc78>Xabarnoma yuborish</option><option value="webhook" data-v-2b54bc78>Webhook</option>',6)])],512),[[k,Xt.value.action_type]])])):p("",!0),"delay"===Xt.value.type?(w(),r("div",jt,[t[83]||(t[83]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kutish vaqti (soniya)",-1)),f(s("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>Xt.value.delay_seconds=e),type:"number",min:"1",class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400 dark:placeholder-gray-500",placeholder:"5"},null,512),[[m,Xt.value.delay_seconds,void 0,{number:!0}]])])):p("",!0),s("div",null,[t[85]||(t[85]=s("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Keyingi qadam (avtomatik)",-1)),f(s("select",{"onUpdate:modelValue":t[21]||(t[21]=e=>Xt.value.next_step_id=e),onChange:oa,class:"w-full px-3 py-2 text-sm text-gray-900 dark:text-white bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[t[84]||(t[84]=s("option",{value:null},"Funnelni tugatish",-1)),(w(!0),r(b,null,v(Kt.value.filter(e=>e.id!==Xt.value.id),e=>(w(),r("option",{key:e.id,value:e.id},n(e.name||ga(e.type)),9,zt))),128))],544),[[k,Xt.value.next_step_id]]),t[86]||(t[86]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Tugma bosilmasa avtomatik o'tiladi",-1))]),s("div",Ct,[s("button",{onClick:t[22]||(t[22]=e=>ea(Xt.value.id)),class:"w-full px-4 py-2 bg-red-50 hover:bg-red-100 dark:bg-red-900/20 dark:hover:bg-red-900/30 text-red-600 dark:text-red-400 text-sm font-medium rounded-lg transition-colors flex items-center justify-center gap-2"},[...t[87]||(t[87]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),d(" Qadamni o'chirish ",-1)])])])])):(w(),r("div",ct,[...t[68]||(t[68]=[s("div",{class:"text-center text-gray-500 dark:text-gray-400"},[s("svg",{class:"w-12 h-12 mx-auto mb-3 opacity-50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})]),s("p",{class:"text-sm"},"Canvas'dan qadam tanlang")],-1)])]))])])]))}},[["__scopeId","data-v-2b54bc78"]]);export{Bt as T};
