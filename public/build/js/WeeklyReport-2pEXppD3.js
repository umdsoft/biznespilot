import{r as e,o as t,w as s,b as a,v as l,x as r,y as o,z as n,A as d,D as i,E as c,H as x,F as u,L as g,I as p,G as m,K as v,B as y,C as b,W as h,S as f}from"./chunk-7Urb0kxg.js";import{h as k,a as w}from"./chunk-DKkye6wf.js";import{_}from"./chunk-BB8-4400.js";import"./chunk-Dm-LAqtr.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const j={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},M={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-red-800"},z={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},q={class:"mt-4 md:mt-0"},H=["value"],C={key:0,class:"flex justify-center py-12"},B={class:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg shadow-lg p-6 mb-8 text-white"},A={class:"flex items-center justify-between"},Y={class:"text-2xl font-bold"},S={class:"text-indigo-200 text-sm mt-1"},V={class:"text-right"},L={class:"text-3xl font-bold"},E={class:"border-b border-gray-200 mb-6"},K={class:"flex -mb-px overflow-x-auto"},I=["onClick"],T={class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},W=["d"],O={key:0,class:"ml-1 flex h-2 w-2"},D={class:"space-y-6"},U={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},J={class:"bg-white rounded-lg shadow p-4"},$={class:"text-2xl font-bold text-gray-900"},F={class:"bg-white rounded-lg shadow p-4"},G={class:"text-2xl font-bold text-green-600"},N={class:"bg-white rounded-lg shadow p-4"},R={class:"text-2xl font-bold text-red-600"},Z={class:"bg-white rounded-lg shadow p-4"},P={class:"text-2xl font-bold text-indigo-600"},Q={class:"bg-white rounded-lg shadow p-4"},X={class:"text-2xl font-bold text-gray-900"},ee={key:0,class:"bg-white rounded-lg shadow p-6"},te={class:"grid grid-cols-4 gap-4"},se={class:"text-sm text-gray-500 mb-2"},ae={class:"space-y-2"},le={class:"text-lg font-bold text-gray-900"},re={class:"text-lg font-bold text-indigo-600"},oe={class:"text-sm font-medium text-green-600"},ne={class:"space-y-6"},de={class:"bg-white rounded-lg shadow overflow-hidden"},ie={class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},xe={class:"bg-white divide-y divide-gray-200"},ue={class:"px-6 py-4 whitespace-nowrap"},ge={class:"font-medium text-gray-900"},pe={class:"text-xs text-gray-500"},me={class:"px-6 py-4 text-center text-sm text-gray-900"},ve={class:"px-6 py-4 text-center text-sm text-green-600 font-medium"},ye={class:"px-6 py-4 text-center text-sm text-red-600 font-medium"},be={class:"px-6 py-4 text-center"},he={class:"px-6 py-4 text-right text-sm font-medium text-gray-900"},fe={key:0,class:"bg-white rounded-lg shadow p-6"},ke={class:"space-y-4"},we={class:"font-medium text-gray-700 mb-2"},_e={class:"flex flex-wrap gap-2"},je={class:"space-y-6"},Me={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ze={class:"bg-green-50 rounded-lg p-6 border border-green-200"},qe={class:"space-y-3"},He={class:"flex items-center gap-3"},Ce={class:"w-6 h-6 flex items-center justify-center rounded-full bg-green-200 text-green-800 text-sm font-bold"},Be={class:"font-medium"},Ae={class:"text-xs text-gray-500"},Ye={class:"text-right"},Se={class:"text-green-600 font-bold"},Ve={class:"text-xs text-gray-500"},Le={key:0,class:"bg-red-50 rounded-lg p-6 border border-red-200"},Ee={class:"space-y-3"},Ke={class:"flex items-center gap-3"},Ie={class:"w-6 h-6 flex items-center justify-center rounded-full bg-red-200 text-red-800 text-sm font-bold"},Te={class:"font-medium"},We={class:"text-right"},Oe={class:"text-red-600 font-bold"},De={class:"text-xs text-gray-500"},Ue={key:1,class:"bg-gray-50 rounded-lg p-6 text-center text-gray-500"},Je={class:"bg-white rounded-lg shadow overflow-hidden"},$e={class:"overflow-x-auto"},Fe={class:"min-w-full divide-y divide-gray-200"},Ge={class:"bg-white divide-y divide-gray-200"},Ne={class:"px-6 py-4 whitespace-nowrap"},Re={class:"flex items-center"},Ze={class:"h-10 w-10 flex-shrink-0 rounded-full bg-indigo-100 flex items-center justify-center"},Pe={class:"text-indigo-600 font-medium"},Qe={class:"ml-4"},Xe={class:"text-sm font-medium text-gray-900"},et={class:"px-6 py-4 text-center text-sm text-gray-900"},tt={class:"px-6 py-4 text-center text-sm text-green-600 font-medium"},st={class:"px-6 py-4 text-center"},at={class:"px-6 py-4 text-right text-sm font-medium text-gray-900"},lt={class:"px-6 py-4 text-center text-sm text-gray-500"},rt={class:"px-6 py-4 text-sm text-gray-900"},ot={class:"space-y-6"},nt={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},dt={class:"bg-red-50 rounded-lg p-6 border border-red-200"},it={class:"text-3xl font-bold text-red-700"},ct={class:"bg-orange-50 rounded-lg p-6 border border-orange-200"},xt={class:"text-3xl font-bold text-orange-700"},ut={class:"bg-yellow-50 rounded-lg p-6 border border-yellow-200"},gt={class:"text-xl font-bold text-yellow-700"},pt={class:"text-xs text-yellow-500"},mt={class:"bg-white rounded-lg shadow p-6"},vt={class:"space-y-4"},yt={class:"flex justify-between items-center mb-2"},bt={class:"font-medium text-gray-900"},ht={class:"text-right"},ft={class:"text-sm text-gray-500"},kt={class:"w-full bg-gray-200 rounded-full h-3"},wt={class:"mt-2 text-sm text-gray-600"},_t={class:"space-y-6"},jt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Mt={class:"bg-green-50 rounded-lg p-4 border border-green-200"},zt={class:"text-lg font-bold text-green-800"},qt={class:"bg-red-50 rounded-lg p-4 border border-red-200"},Ht={class:"text-lg font-bold text-red-800"},Ct={class:"bg-green-50 rounded-lg p-4 border border-green-200"},Bt={class:"text-lg font-bold text-green-800"},At={class:"bg-red-50 rounded-lg p-4 border border-red-200"},Yt={class:"text-lg font-bold text-red-800"},St={class:"bg-white rounded-lg shadow p-6"},Vt={class:"grid grid-cols-7 gap-2"},Lt={class:"text-sm font-medium text-gray-700"},Et={class:"text-lg font-bold text-gray-900"},Kt={class:"bg-white rounded-lg shadow p-6"},It={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Tt={class:"text-sm font-medium text-gray-700"},Wt={class:"text-2xl font-bold text-gray-900"},Ot={class:"text-xs text-gray-500"},Dt={class:"space-y-6"},Ut={key:0,class:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-8 text-center border border-purple-200"},Jt=["disabled"],$t={key:0,class:"flex items-center gap-2"},Ft={key:1},Gt={class:"text-sm text-gray-500 mb-4"},Nt={class:"bg-green-50 rounded-lg p-6 border border-green-200"},Rt={class:"space-y-2"},Zt={class:"bg-red-50 rounded-lg p-6 border border-red-200"},Pt={class:"space-y-2"},Qt={class:"bg-blue-50 rounded-lg p-6 border border-blue-200"},Xt={class:"space-y-2 list-decimal list-inside"},es={class:"bg-purple-50 rounded-lg p-6 border border-purple-200"},ts={class:"text-purple-800 text-lg"},ss={__name:"WeeklyReport",props:{weeks:{type:Array,default:()=>[]},currentWeekStart:{type:String,default:()=>(new Date).toISOString().split("T")[0]},error:{type:String,default:null}},setup(ss){const as=ss,ls=e(!0),rs=e(!1),os=e(null),ns=e(as.currentWeekStart),ds=e("summary"),is=[{key:"summary",label:"Umumiy",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{key:"channels",label:"Kanallar",icon:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"},{key:"operators",label:"Operatorlar",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{key:"lost",label:"Yo'qotilgan",icon:"M6 18L18 6M6 6l12 12"},{key:"time",label:"Vaqt",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{key:"ai",label:"AI Tahlil",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"}],cs=async()=>{ls.value=!0;try{const e=ns.value?route("business.analytics.api.weekly-report",{weekStart:ns.value}):route("business.analytics.api.weekly-report"),t=await w.get(e);os.value=t.data}catch(e){os.value=null}finally{ls.value=!1}},xs=async()=>{if(os.value?.id&&!rs.value){rs.value=!0;try{const e=await w.post(route("business.analytics.api.weekly-report.ai",{id:os.value.id}));e.data.success&&(os.value.ai=e.data.ai)}catch(e){}finally{rs.value=!1}}};t(()=>{cs()}),s(ns,()=>{cs()});const us=e=>e?new Intl.NumberFormat("uz-UZ").format(e):"0",gs=e=>{if(!e)return"-";if(e<60)return`${e} daqiqa`;return`${Math.floor(e/60)}s ${e%60}d`},ps=e=>e?"string"==typeof e?e.startsWith("+")?"text-green-600":e.startsWith("-")?"text-red-600":"text-gray-500":e>0?"text-green-600":e<0?"text-red-600":"text-gray-500":"text-gray-500",ms=(e,t)=>t?e>=1.2*t?"text-green-600 bg-green-50":e>=t?"text-blue-600 bg-blue-50":e>=.8*t?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50":"text-gray-600 bg-gray-50",vs=a(()=>os.value?.summary?.conversion_rate||0),ys=a(()=>os.value?.operators?.length?os.value.operators.slice(0,3):[]),bs=a(()=>os.value?.operators?.length?os.value.operators.length<=3?[]:[...os.value.operators].reverse().slice(0,3):[]);return(e,t)=>(c(),l(_,{title:"Haftalik Hisobot"},{default:r(()=>[o(d(k),{title:"Haftalik Hisobot"}),n("div",j,[ss.error?(c(),i("div",M,x(ss.error),1)):(c(),i(u,{key:1},[n("div",z,[t[1]||(t[1]=n("div",null,[n("h1",{class:"text-2xl font-bold text-gray-900"},"Haftalik Hisobot"),n("p",{class:"mt-1 text-sm text-gray-500"},"Biznesingizning haftalik natijalarini ko'ring")],-1)),n("div",q,[p(n("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>ns.value=e),class:"block w-full md:w-auto rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[(c(!0),i(u,null,m(ss.weeks,e=>(c(),i("option",{key:e.week_start,value:e.week_start},x(e.week_label)+" "+x(e.has_ai?"(AI)":""),9,H))),128))],512),[[v,ns.value]])])]),ls.value?(c(),i("div",C,[...t[2]||(t[2]=[n("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):os.value?(c(),i(u,{key:1},[n("div",B,[n("div",A,[n("div",null,[t[3]||(t[3]=n("p",{class:"text-indigo-200 text-sm"},"Hafta",-1)),n("h2",Y,x(os.value.week_label),1),n("p",S,x(os.value.week_start)+" - "+x(os.value.week_end),1)]),n("div",V,[t[4]||(t[4]=n("p",{class:"text-indigo-200 text-sm"},"Umumiy daromad",-1)),n("p",L,x(us(os.value.summary?.total_revenue)),1),n("p",{class:y(["text-sm",ps(os.value.summary?.vs_last_week?.revenue)])},x(os.value.summary?.vs_last_week?.revenue)+" o'tgan haftaga nisbatan ",3)])])]),n("div",E,[n("nav",K,[(c(),i(u,null,m(is,e=>n("button",{key:e.key,onClick:t=>ds.value=e.key,class:y(["flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap transition-colors",ds.value===e.key?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(c(),i("svg",T,[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:e.icon},null,8,W)])),b(" "+x(e.label)+" ",1),"ai"===e.key&&os.value.ai?.has_analysis?(c(),i("span",O,[...t[5]||(t[5]=[n("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-green-500"},null,-1)])])):g("",!0)],10,I)),64))])]),p(n("div",D,[n("div",U,[n("div",J,[t[6]||(t[6]=n("p",{class:"text-sm text-gray-500"},"Jami lidlar",-1)),n("p",$,x(os.value.summary?.total_leads),1),n("p",{class:y(["text-xs",ps(os.value.summary?.vs_last_week?.leads)])},x(os.value.summary?.vs_last_week?.leads),3)]),n("div",F,[t[7]||(t[7]=n("p",{class:"text-sm text-gray-500"},"Yutilgan",-1)),n("p",G,x(os.value.summary?.won),1)]),n("div",N,[t[8]||(t[8]=n("p",{class:"text-sm text-gray-500"},"Yo'qotilgan",-1)),n("p",R,x(os.value.summary?.lost),1)]),n("div",Z,[t[9]||(t[9]=n("p",{class:"text-sm text-gray-500"},"Konversiya",-1)),n("p",P,x(os.value.summary?.conversion_rate)+"%",1),n("p",{class:y(["text-xs",ps(os.value.summary?.vs_last_week?.conversion)])},x(os.value.summary?.vs_last_week?.conversion>0?"+":"")+x(os.value.summary?.vs_last_week?.conversion)+"% ",3)]),n("div",Q,[t[10]||(t[10]=n("p",{class:"text-sm text-gray-500"},"O'rtacha chek",-1)),n("p",X,x(us(os.value.summary?.avg_deal_value)),1)])]),os.value.trends?.weeks?.length?(c(),i("div",ee,[t[14]||(t[14]=n("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"4 haftalik trend",-1)),n("div",te,[(c(!0),i(u,null,m(os.value.trends.weeks,(e,s)=>(c(),i("div",{key:e,class:"text-center"},[n("p",se,x(e),1),n("div",ae,[n("div",null,[n("p",le,x(os.value.trends.leads[s]),1),t[11]||(t[11]=n("p",{class:"text-xs text-gray-500"},"lid",-1))]),n("div",null,[n("p",re,x(os.value.trends.conversion[s])+"%",1),t[12]||(t[12]=n("p",{class:"text-xs text-gray-500"},"konversiya",-1))]),n("div",null,[n("p",oe,x(us(os.value.trends.revenue[s])),1),t[13]||(t[13]=n("p",{class:"text-xs text-gray-500"},"so'm",-1))])])]))),128))])])):g("",!0)],512),[[h,"summary"===ds.value]]),p(n("div",ne,[n("div",de,[t[16]||(t[16]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Marketing kanallar")],-1)),n("div",ie,[n("table",ce,[t[15]||(t[15]=n("thead",{class:"bg-gray-50"},[n("tr",null,[n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Kanal"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Lidlar"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yutilgan"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yo'qotilgan"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Konversiya"),n("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Daromad"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"vs o'tgan hafta")])],-1)),n("tbody",xe,[(c(!0),i(u,null,m(os.value.channels,e=>(c(),i("tr",{key:e.id,class:"hover:bg-gray-50"},[n("td",ue,[n("div",ge,x(e.name),1),n("div",pe,x(e.type),1)]),n("td",me,x(e.leads),1),n("td",ve,x(e.won),1),n("td",ye,x(e.lost),1),n("td",be,[n("span",{class:y(["px-2 py-1 text-sm font-bold rounded",ms(e.conversion,vs.value)])},x(e.conversion)+"% ",3)]),n("td",he,x(us(e.revenue)),1),n("td",{class:y(["px-6 py-4 text-center text-sm",ps(e.vs_last_week)])},x(e.vs_last_week>0?"+":"")+x(e.vs_last_week)+"% ",3)]))),128))])])])]),os.value.channels?.length?(c(),i("div",fe,[t[17]||(t[17]=n("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Kanal bo'yicha yo'qotish sabablari",-1)),n("div",ke,[(c(!0),i(u,null,m(os.value.channels?.filter(e=>Object.keys(e.lost_reasons||{}).length),e=>(c(),i("div",{key:e.id},[n("p",we,x(e.name),1),n("div",_e,[(c(!0),i(u,null,m(e.lost_reasons,(e,t)=>(c(),i("span",{key:t,class:"px-2 py-1 text-xs bg-red-50 text-red-700 rounded"},x(t)+": "+x(e),1))),128))])]))),128))])])):g("",!0)],512),[[h,"channels"===ds.value]]),p(n("div",je,[os.value.operators?.length>0?(c(),i("div",Me,[n("div",ze,[t[18]||(t[18]=n("h3",{class:"text-lg font-semibold text-green-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})]),b(" Eng yaxshilar ")],-1)),n("div",qe,[(c(!0),i(u,null,m(ys.value,(e,t)=>(c(),i("div",{key:e.id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[n("div",He,[n("span",Ce,x(t+1),1),n("div",null,[n("span",Be,x(e.name),1),n("p",Ae,"Eng yaxshi kanal: "+x(e.best_channel||"-"),1)])]),n("div",Ye,[n("span",Se,x(e.conversion)+"%",1),n("p",Ve,x(us(e.revenue))+" so'm",1)])]))),128))])]),bs.value.length>0?(c(),i("div",Le,[t[19]||(t[19]=n("h3",{class:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),b(" Yordam kerak ")],-1)),n("div",Ee,[(c(!0),i(u,null,m(bs.value,(e,t)=>(c(),i("div",{key:e.id,class:"flex items-center justify-between bg-white rounded-lg p-3"},[n("div",Ke,[n("span",Ie,x(t+1),1),n("span",Te,x(e.name),1)]),n("div",We,[n("span",Oe,x(e.conversion)+"%",1),n("p",De,x(e.lost)+" yo'qotilgan",1)])]))),128))])])):g("",!0)])):(c(),i("div",Ue," Bu hafta uchun operator ma'lumotlari mavjud emas ")),n("div",Je,[t[21]||(t[21]=n("div",{class:"px-6 py-4 border-b border-gray-200"},[n("h3",{class:"text-lg font-medium text-gray-900"},"Barcha operatorlar")],-1)),n("div",$e,[n("table",Fe,[t[20]||(t[20]=n("thead",{class:"bg-gray-50"},[n("tr",null,[n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Operator"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Lidlar"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Yutilgan"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Konversiya"),n("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Daromad"),n("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase"},"Javob vaqti"),n("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Eng yaxshi kanal")])],-1)),n("tbody",Ge,[(c(!0),i(u,null,m(os.value.operators,e=>(c(),i("tr",{key:e.id,class:"hover:bg-gray-50"},[n("td",Ne,[n("div",Re,[n("div",Ze,[n("span",Pe,x(e.name?.charAt(0)),1)]),n("div",Qe,[n("div",Xe,x(e.name),1)])])]),n("td",et,x(e.leads),1),n("td",tt,x(e.won),1),n("td",st,[n("span",{class:y(["px-2 py-1 text-sm font-bold rounded",ms(e.conversion,vs.value)])},x(e.conversion)+"% ",3)]),n("td",at,x(us(e.revenue)),1),n("td",lt,x(gs(e.avg_response_minutes)),1),n("td",rt,x(e.best_channel||"-"),1)]))),128))])])])])],512),[[h,"operators"===ds.value]]),p(n("div",ot,[n("div",nt,[n("div",dt,[t[22]||(t[22]=n("p",{class:"text-sm font-medium text-red-600"},"Jami yo'qotilgan",-1)),n("p",it,x(os.value.lost_reasons?.total_lost),1)]),n("div",ct,[t[23]||(t[23]=n("p",{class:"text-sm font-medium text-orange-600"},"Yo'qotilgan qiymat",-1)),n("p",xt,x(us(os.value.lost_reasons?.total_value_lost)),1),t[24]||(t[24]=n("p",{class:"text-xs text-orange-500"},"so'm",-1))]),n("div",ut,[t[25]||(t[25]=n("p",{class:"text-sm font-medium text-yellow-600"},"Asosiy sabab",-1)),n("p",gt,x(os.value.lost_reasons?.reasons?.[0]?.label||"-"),1),n("p",pt,x(os.value.lost_reasons?.reasons?.[0]?.percentage)+"%",1)])]),n("div",mt,[t[26]||(t[26]=n("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Yo'qotish sabablari",-1)),n("div",vt,[(c(!0),i(u,null,m(os.value.lost_reasons?.reasons,e=>(c(),i("div",{key:e.reason,class:"p-4 bg-gray-50 rounded-lg"},[n("div",yt,[n("h4",bt,x(e.label),1),n("div",ht,[n("span",ft,x(e.count)+" lid ("+x(e.percentage)+"%)",1),n("span",{class:y(["ml-2 text-xs",ps(e.vs_last_week)])},x(e.vs_last_week>0?"+":"")+x(e.vs_last_week)+"% ",3)])]),n("div",kt,[n("div",{class:"bg-red-500 h-3 rounded-full transition-all",style:f({width:e.percentage+"%"})},null,4)]),n("p",wt,"Yo'qotilgan qiymat: "+x(us(e.value_lost))+" so'm",1)]))),128))])])],512),[[h,"lost"===ds.value]]),p(n("div",_t,[n("div",jt,[n("div",Mt,[t[27]||(t[27]=n("p",{class:"text-xs text-green-600 uppercase"},"Eng yaxshi kun",-1)),n("p",zt,x(os.value.time_stats?.by_day?.[os.value.time_stats?.best_day]?.label),1)]),n("div",qt,[t[28]||(t[28]=n("p",{class:"text-xs text-red-600 uppercase"},"Eng yomon kun",-1)),n("p",Ht,x(os.value.time_stats?.by_day?.[os.value.time_stats?.worst_day]?.label),1)]),n("div",Ct,[t[29]||(t[29]=n("p",{class:"text-xs text-green-600 uppercase"},"Eng yaxshi vaqt",-1)),n("p",Bt,x(os.value.time_stats?.by_hour?.[os.value.time_stats?.best_hour]?.label),1)]),n("div",At,[t[30]||(t[30]=n("p",{class:"text-xs text-red-600 uppercase"},"Eng yomon vaqt",-1)),n("p",Yt,x(os.value.time_stats?.by_hour?.[os.value.time_stats?.worst_hour]?.label),1)])]),n("div",St,[t[32]||(t[32]=n("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Hafta kunlari bo'yicha",-1)),n("div",Vt,[(c(!0),i(u,null,m(os.value.time_stats?.by_day,(e,s)=>(c(),i("div",{key:s,class:y(["text-center p-3 rounded-lg",s===os.value.time_stats?.best_day?"bg-green-50 border-2 border-green-300":"bg-gray-50"])},[n("p",Lt,x(e.label),1),n("p",Et,x(e.leads),1),t[31]||(t[31]=n("p",{class:"text-xs text-gray-500"},"lid",-1)),n("p",{class:y(["text-sm font-bold",e.conversion>=vs.value?"text-green-600":"text-red-600"])},x(e.conversion)+"%",3)],2))),128))])]),n("div",Kt,[t[34]||(t[34]=n("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Soatlar bo'yicha",-1)),n("div",It,[(c(!0),i(u,null,m(os.value.time_stats?.by_hour,(e,s)=>(c(),i("div",{key:s,class:y(["text-center p-4 rounded-lg",s===os.value.time_stats?.best_hour?"bg-green-50 border-2 border-green-300":"bg-gray-50"])},[n("p",Tt,x(e.label),1),n("p",Wt,x(e.leads),1),t[33]||(t[33]=n("p",{class:"text-xs text-gray-500"},"lid",-1)),n("p",{class:y(["text-lg font-bold",e.conversion>=vs.value?"text-green-600":"text-red-600"])},x(e.conversion)+"%",3),n("p",Ot,x(e.won)+" yutilgan",1)],2))),128))])])],512),[[h,"time"===ds.value]]),p(n("div",Dt,[os.value.ai?.has_analysis?(c(),i(u,{key:1},[n("div",Gt," Yaratilgan: "+x(os.value.ai.generated_at)+" | Tokenlar: "+x(os.value.ai.tokens_used),1),n("div",Nt,[t[39]||(t[39]=n("h3",{class:"text-lg font-semibold text-green-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),b(" Yaxshi natijalar ")],-1)),n("ul",Rt,[(c(!0),i(u,null,m(os.value.ai.good_results,(e,t)=>(c(),i("li",{key:t,class:"text-green-800"},x(e),1))),128))])]),n("div",Zt,[t[40]||(t[40]=n("h3",{class:"text-lg font-semibold text-red-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),b(" Muammolar ")],-1)),n("ul",Pt,[(c(!0),i(u,null,m(os.value.ai.problems,(e,t)=>(c(),i("li",{key:t,class:"text-red-800"},x(e),1))),128))])]),n("div",Qt,[t[41]||(t[41]=n("h3",{class:"text-lg font-semibold text-blue-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{d:"M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"})]),b(" Tavsiyalar ")],-1)),n("ol",Xt,[(c(!0),i(u,null,m(os.value.ai.recommendations,(e,t)=>(c(),i("li",{key:t,class:"text-blue-800"},x(e),1))),128))])]),n("div",es,[t[42]||(t[42]=n("h3",{class:"text-lg font-semibold text-purple-800 mb-4 flex items-center gap-2"},[n("svg",{class:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20"},[n("path",{"fill-rule":"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),b(" Keyingi hafta maqsadi ")],-1)),n("p",ts,x(os.value.ai.next_week_goal),1)])],64)):(c(),i("div",Ut,[t[36]||(t[36]=n("svg",{class:"mx-auto h-16 w-16 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})],-1)),t[37]||(t[37]=n("h3",{class:"mt-4 text-xl font-semibold text-gray-900"},"AI Tahlil",-1)),t[38]||(t[38]=n("p",{class:"mt-2 text-gray-600"},"Sun'iy intellekt yordamida haftalik natijalarni tahlil qiling",-1)),n("button",{onClick:xs,disabled:rs.value,class:"mt-6 px-6 py-3 bg-purple-600 text-white font-medium rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[rs.value?(c(),i("span",$t,[...t[35]||(t[35]=[n("svg",{class:"animate-spin h-5 w-5",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Tahlil qilinmoqda... ",-1)])])):(c(),i("span",Ft,"AI Tahlil yaratish"))],8,Jt)]))],512),[[h,"ai"===ds.value]])],64)):g("",!0)],64))])]),_:1}))}};export{ss as default};
