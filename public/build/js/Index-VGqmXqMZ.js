import{r as e,v as r,x as t,L as a,y as l,C as s,I as o,A as d,z as n,B as u,D as p,J as c,K as i,N as g,F as y,G as m,H as x}from"./chunk-CpmtkKLp.js";import{h as b,r as h}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-BDBDdGhv.js";import{u as f}from"./app-C-ZlocOh.js";import{r as v}from"./chunk-BiBvtcLb.js";import{n as w,d as _}from"./chunk-D7SyfRoT.js";import{r as j}from"./chunk-BaJGWy5z.js";import{r as C}from"./chunk-2IBKNSOp.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const S={class:"space-y-6"},q={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},O={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},T={class:"text-sm text-gray-500 dark:text-gray-400"},N={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},U={key:0,class:"p-12 text-center text-gray-500 dark:text-gray-400"},V={key:1,class:"overflow-x-auto"},E={class:"w-full"},F={class:"bg-gray-50 dark:bg-gray-900/50"},K={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},z={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},A={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},J={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},R={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},X={class:"divide-y divide-gray-200 dark:divide-gray-700"},P={class:"px-6 py-4"},$={class:"flex items-center gap-3"},D={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center"},I={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},L={key:0,class:"text-xs text-purple-600 dark:text-purple-400"},B={class:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100"},G={class:"px-6 py-4"},H={class:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},W={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},Z={class:"px-6 py-4"},M={key:0,class:"flex items-center gap-2"},Q=["onClick","title"],Y=["onClick","title"],ee=["onClick","title"],re={key:1,class:"text-gray-400"},te={key:2,class:"p-12 text-center text-gray-500 dark:text-gray-400"},ae={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},le={class:"p-6 border-b border-gray-200 dark:border-gray-700"},se={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},oe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},de=["placeholder"],ne={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},pe={value:""},ce=["value"],ie={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ge=["placeholder"],ye={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},me=["placeholder"],xe={class:"flex justify-end gap-3 pt-4"},be={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},he={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},ke={class:"p-6 border-b border-gray-200 dark:border-gray-700"},fe={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},ve={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},we={value:""},_e=["value"],je={class:"flex justify-end gap-3 pt-4"},Ce={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Se={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},qe={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Oe={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Te={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ne=["placeholder"],Ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ve=["placeholder"],Ee={class:"flex justify-end gap-3 pt-4"},Fe={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Ke={__name:"Index",props:{members:{type:Array,default:()=>[]},departments:{type:Object,default:()=>({})},roles:{type:Object,default:()=>({})}},setup(Ke){const{t:ze}=f(),Ae=Ke,Je=e(Ae.members),Re=e(Ae.departments);e(Ae.roles);const Xe=e(!1),Pe=e(!1),$e=e(!1),De=e(!1),Ie=e(null),Le=e({name:"",phone:"",password:"",password_confirmation:"",department:""}),Be=e({department:"",role:""}),Ge=e({password:"",password_confirmation:""}),He=()=>{h.reload({only:["members"]})},We=async()=>{try{const e=await fetch(route("hr.team.invite"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(Le.value)}),r=await e.json();r.success?(Pe.value=!1,Le.value={name:"",phone:"",password:"",password_confirmation:"",department:""},He()):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}},Ze=async()=>{if(Ie.value)try{const e=await fetch(route("hr.team.update",Ie.value.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(Be.value)}),r=await e.json();r.success?($e.value=!1,Ie.value=null,He()):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}},Me=async()=>{if(Ie.value)try{const e=await fetch(route("hr.team.reset-password",Ie.value.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(Ge.value)}),r=await e.json();r.success?(De.value=!1,Ie.value=null,Ge.value={password:"",password_confirmation:""},alert(ze("hr.password_changed"))):alert(r.error||ze("hr.error_occurred"))}catch(e){alert(ze("hr.error_occurred"))}};return(e,h)=>(p(),r(k,{title:d(ze)("hr.employees")},{default:t(()=>[a(d(b),{title:d(ze)("hr.employees")},null,8,["title"]),l("div",S,[l("div",q,[l("div",null,[l("h1",O,n(d(ze)("hr.employees")),1),l("p",T,n(d(ze)("hr.manage_team")),1)]),l("button",{onClick:h[0]||(h[0]=e=>Pe.value=!0),class:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2"},[a(d(v),{class:"w-5 h-5"}),u(" "+n(d(ze)("hr.add_employee")),1)])]),l("div",N,[Xe.value?(p(),s("div",U,n(d(ze)("hr.loading")),1)):Je.value.length>0?(p(),s("div",V,[l("table",E,[l("thead",F,[l("tr",null,[l("th",K,n(d(ze)("hr.full_name")),1),l("th",z,n(d(ze)("hr.phone")),1),l("th",A,n(d(ze)("hr.department")),1),l("th",J,n(d(ze)("hr.joined_at")),1),l("th",R,n(d(ze)("hr.actions")),1)])]),l("tbody",X,[(p(!0),s(c,null,i(Je.value,e=>(p(),s("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[l("td",P,[l("div",$,[l("div",D,[a(d(w),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),l("div",null,[l("p",I,n(e.name),1),e.is_owner?(p(),s("p",L,n(d(ze)("hr.business_owner")),1)):o("",!0)])])]),l("td",B,n(e.phone||"N/A"),1),l("td",G,[l("span",H,n(e.department_label||"N/A"),1)]),l("td",W,n(e.joined_at||e.created_at),1),l("td",Z,[e.is_owner?(p(),s("span",re,"-")):(p(),s("div",M,[l("button",{onClick:r=>(e=>{Ie.value=e,Be.value={department:e.department||"",role:e.role||""},$e.value=!0})(e),class:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:d(ze)("hr.edit")},[a(d(j),{class:"w-5 h-5"})],8,Q),l("button",{onClick:r=>(e=>{Ie.value=e,Ge.value={password:"",password_confirmation:""},De.value=!0})(e),class:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:d(ze)("hr.change_password")},[a(d(C),{class:"w-5 h-5"})],8,Y),l("button",{onClick:r=>(async e=>{if(confirm(`${e.name}${ze("hr.remove_confirm")}`))try{const r=await fetch(route("hr.team.remove",e.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}}),t=await r.json();t.success?He():alert(t.error||ze("hr.error_occurred"))}catch(r){alert(ze("hr.error_occurred"))}})(e),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:d(ze)("hr.delete")},[a(d(_),{class:"w-5 h-5"})],8,ee)]))])]))),128))])])])):(p(),s("div",te,[a(d(w),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),l("p",null,n(d(ze)("hr.no_employees")),1)]))])]),Pe.value?(p(),s("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[7]||(h[7]=g(e=>Pe.value=!1,["self"]))},[l("div",ae,[l("div",le,[l("h3",se,n(d(ze)("hr.new_employee")),1)]),l("form",{onSubmit:g(We,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",oe,n(d(ze)("hr.full_name"))+" *",1),y(l("input",{"onUpdate:modelValue":h[1]||(h[1]=e=>Le.value.name=e),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.name_placeholder")},null,8,de),[[m,Le.value.name]])]),l("div",null,[l("label",ne,n(d(ze)("hr.phone"))+" *",1),y(l("input",{"onUpdate:modelValue":h[2]||(h[2]=e=>Le.value.phone=e),type:"text",required:"",maxlength:"12",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"998901234567"},null,512),[[m,Le.value.phone]])]),l("div",null,[l("label",ue,n(d(ze)("hr.department"))+" *",1),y(l("select",{"onUpdate:modelValue":h[3]||(h[3]=e=>Le.value.department=e),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[l("option",pe,n(d(ze)("hr.select")),1),(p(!0),s(c,null,i(Re.value,(e,r)=>(p(),s("option",{key:r,value:r},n(e),9,ce))),128))],512),[[x,Le.value.department]])]),l("div",null,[l("label",ie,n(d(ze)("hr.password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[4]||(h[4]=e=>Le.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.password_placeholder")},null,8,ge),[[m,Le.value.password]])]),l("div",null,[l("label",ye,n(d(ze)("hr.confirm_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[5]||(h[5]=e=>Le.value.password_confirmation=e),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.reenter_password")},null,8,me),[[m,Le.value.password_confirmation]])]),l("div",xe,[l("button",{type:"button",onClick:h[6]||(h[6]=e=>Pe.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",be,n(d(ze)("hr.add")),1)])],32)])])):o("",!0),$e.value?(p(),s("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[10]||(h[10]=g(e=>$e.value=!1,["self"]))},[l("div",he,[l("div",ke,[l("h3",fe,n(d(ze)("hr.edit_employee")),1)]),l("form",{onSubmit:g(Ze,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",ve,n(d(ze)("hr.department")),1),y(l("select",{"onUpdate:modelValue":h[8]||(h[8]=e=>Be.value.department=e),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[l("option",we,n(d(ze)("hr.select")),1),(p(!0),s(c,null,i(Re.value,(e,r)=>(p(),s("option",{key:r,value:r},n(e),9,_e))),128))],512),[[x,Be.value.department]])]),l("div",je,[l("button",{type:"button",onClick:h[9]||(h[9]=e=>$e.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",Ce,n(d(ze)("hr.save")),1)])],32)])])):o("",!0),De.value?(p(),s("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:h[14]||(h[14]=g(e=>De.value=!1,["self"]))},[l("div",Se,[l("div",qe,[l("h3",Oe,n(d(ze)("hr.change_password")),1)]),l("form",{onSubmit:g(Me,["prevent"]),class:"p-6 space-y-4"},[l("div",null,[l("label",Te,n(d(ze)("hr.new_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[11]||(h[11]=e=>Ge.value.password=e),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.password_placeholder")},null,8,Ne),[[m,Ge.value.password]])]),l("div",null,[l("label",Ue,n(d(ze)("hr.confirm_password"))+" *",1),y(l("input",{"onUpdate:modelValue":h[12]||(h[12]=e=>Ge.value.password_confirmation=e),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:d(ze)("hr.reenter_password")},null,8,Ve),[[m,Ge.value.password_confirmation]])]),l("div",Ee,[l("button",{type:"button",onClick:h[13]||(h[13]=e=>De.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},n(d(ze)("hr.cancel")),1),l("button",Fe,n(d(ze)("hr.update")),1)])],32)])])):o("",!0)]),_:1},8,["title"]))}};export{Ke as default};
