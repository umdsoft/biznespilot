import{r as A,v,x as h,y as g,z as r,A as _,C as l,F as n,G as x,I as y,B as d,M,H as f,Q as V,T as D,D as u}from"./chunk-KPSVwAyv.js";import{h as E,l as F,r as N}from"./chunk-BVrjkT6E.js";import{_ as Q}from"./chunk-Cy19HSui.js";import{_ as G}from"./chunk-DlAUqK2U.js";import{r as H}from"./chunk-J14gS6og.js";import{r as J}from"./chunk-CmNfLjGq.js";import{a as L}from"./chunk-Dfha1x8d.js";import{r as P}from"./chunk-Db7_HC3e.js";import{a as k}from"./chunk-D-7B8ZCD.js";import{r as Y}from"./chunk-BgOPVSvg.js";import{r as R}from"./chunk-D59q4lxq.js";import{r as U}from"./chunk-CPI6G2q3.js";import{q as W,s as X}from"./chunk-S7b6IQvx.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";import"./app-906_W7J6.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";const Z={class:"py-6"},K={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},T={class:"mb-6"},ee={class:"flex items-center gap-3"},re={class:"space-y-4"},se=["onClick"],te={class:"flex items-center gap-3"},ae={class:"font-medium text-white"},oe={class:"text-sm text-gray-400"},ne={class:"flex items-center gap-3"},le=["onClick"],ie={key:0,class:"border-t border-gray-700 p-4 space-y-4"},de={class:"flex flex-wrap gap-2"},ue=["onClick"],ce=["value","onChange"],me=["value"],ge={key:0},be=["value","onChange"],pe={key:1},_e={class:"space-y-3"},fe={key:0,class:"grid grid-cols-2 gap-4"},he=["value","onChange"],xe={key:1,class:"grid grid-cols-2 gap-4"},ye=["value","onChange"],ve=["value","onChange"],ke={key:2,class:"grid grid-cols-2 gap-4"},we=["value","onChange"],Ce={__name:"Settings",props:{settings:{type:Object,default:()=>({})},alertTypes:{type:Object,default:()=>({})},channels:{type:Object,default:()=>({})},frequencies:{type:Object,default:()=>({})}},setup(c){const b=A(null),w=a=>{b.value=b.value===a?null:a},C={lead_followup:U,kpi_warning:R,target_reminder:k,penalty_warning:Y,daily_summary:k,achievement:P,streak_warning:L,leaderboard_change:J},$=a=>C[a]||W,I=a=>({lead_followup:"bg-purple-500/20",kpi_warning:"bg-orange-500/20",target_reminder:"bg-blue-500/20",penalty_warning:"bg-red-500/20",daily_summary:"bg-green-500/20",achievement:"bg-yellow-500/20",streak_warning:"bg-orange-500/20",leaderboard_change:"bg-blue-500/20"})[a]||"bg-gray-500/20",q=a=>({lead_followup:"text-purple-400",kpi_warning:"text-orange-400",target_reminder:"text-blue-400",penalty_warning:"text-red-400",daily_summary:"text-green-400",achievement:"text-yellow-400",streak_warning:"text-orange-400",leaderboard_change:"text-blue-400"})[a]||"text-gray-400",z=a=>["lead_followup","kpi_warning","leaderboard_change"].includes(a),m=(a,e)=>{N.post(route("sales-head.alerts.settings.update"),{alert_type:a,is_enabled:e.is_enabled,conditions:e.conditions,recipients:e.recipients,channels:e.channels,frequency:e.frequency,schedule_time:e.schedule_time},{preserveScroll:!0,preserveState:!0})},B=(a,e)=>{e.is_enabled=!e.is_enabled,m(a,e)},S=(a,e,s)=>{e.channels||(e.channels=[]);const t=e.channels.indexOf(s);t>-1?e.channels.splice(t,1):e.channels.push(s),m(a,e)},j=(a,e,s)=>{e.frequency=s,m(a,e)},O=(a,e,s)=>{e.schedule_time=s,m(a,e)},p=(a,e,s,t)=>{e.conditions||(e.conditions={}),e.conditions[s]=t,m(a,e)};return(a,e)=>(n(),v(Q,null,{default:h(()=>[g(_(E),{title:"Alert sozlamalari"}),r("div",Z,[r("div",K,[r("div",T,[r("div",ee,[g(_(F),{href:a.route("sales-head.alerts.index"),class:"p-2 rounded-lg hover:bg-gray-700 text-gray-400 transition-colors"},{default:h(()=>[g(_(H),{class:"w-5 h-5"})]),_:1},8,["href"]),e[0]||(e[0]=r("div",null,[r("h1",{class:"text-2xl font-bold text-white"},"Alert sozlamalari"),r("p",{class:"text-gray-400 mt-1"}," Bildirishnoma turlarini sozlash ")],-1))])]),r("div",re,[(n(!0),l(x,null,y(c.settings,(s,t)=>(n(),l("div",{key:t,class:"bg-gray-800 rounded-xl overflow-hidden"},[r("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:o=>w(t)},[r("div",te,[r("div",{class:d(["w-10 h-10 rounded-full flex items-center justify-center",I(t)])},[(n(),v(M($(t)),{class:d(["w-5 h-5",q(t)])},null,8,["class"]))],2),r("div",null,[r("h3",ae,f(c.alertTypes[t]?.name||t),1),r("p",oe,f(c.alertTypes[t]?.description||""),1)])]),r("div",ne,[r("button",{onClick:V(o=>B(t,s),["stop"]),class:d(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.is_enabled?"bg-blue-600":"bg-gray-600"])},[r("span",{class:d(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.is_enabled?"translate-x-6":"translate-x-1"])},null,2)],10,le),g(_(X),{class:d(["w-5 h-5 text-gray-400 transition-transform",{"rotate-180":b.value===t}])},null,8,["class"])])],8,se),g(D,{name:"expand"},{default:h(()=>[b.value===t?(n(),l("div",ie,[r("div",null,[e[1]||(e[1]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Yuborish kanallari ",-1)),r("div",de,[(n(!0),l(x,null,y(c.channels,(o,i)=>(n(),l("button",{key:i,onClick:$e=>S(t,s,i),class:d(["px-3 py-1.5 text-sm rounded-lg border transition-colors",s.channels?.includes(i)?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-gray-700 border-gray-600 text-gray-400 hover:border-gray-500"])},f(o),11,ue))),128))])]),r("div",null,[e[2]||(e[2]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Chastotasi ",-1)),r("select",{value:s.frequency,onChange:o=>j(t,s,o.target.value),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[(n(!0),l(x,null,y(c.frequencies,(o,i)=>(n(),l("option",{key:i,value:i},f(o),9,me))),128))],40,ce)]),s.frequency==="daily"?(n(),l("div",ge,[e[3]||(e[3]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Vaqti ",-1)),r("input",{type:"time",value:s.schedule_time,onChange:o=>O(t,s,o.target.value),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,40,be)])):u("",!0),z(t)?(n(),l("div",pe,[e[8]||(e[8]=r("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Qoidalar ",-1)),r("div",_e,[t==="lead_followup"?(n(),l("div",fe,[r("div",null,[e[4]||(e[4]=r("label",{class:"block text-xs text-gray-400 mb-1"}," Jarimadan necha soat oldin ogohlantirish ",-1)),r("input",{type:"number",value:s.conditions?.hours_before_penalty||4,onChange:o=>p(t,s,"hours_before_penalty",parseInt(o.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"24"},null,40,he)])])):u("",!0),t==="kpi_warning"?(n(),l("div",xe,[r("div",null,[e[5]||(e[5]=r("label",{class:"block text-xs text-gray-400 mb-1"}," KPI chegarasi (%) ",-1)),r("input",{type:"number",value:s.conditions?.kpi_threshold||50,onChange:o=>p(t,s,"kpi_threshold",parseInt(o.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"},null,40,ye)]),r("div",null,[e[6]||(e[6]=r("label",{class:"block text-xs text-gray-400 mb-1"}," Ketma-ket kunlar ",-1)),r("input",{type:"number",value:s.conditions?.consecutive_days||3,onChange:o=>p(t,s,"consecutive_days",parseInt(o.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"7"},null,40,ve)])])):u("",!0),t==="leaderboard_change"?(n(),l("div",ke,[r("div",null,[e[7]||(e[7]=r("label",{class:"block text-xs text-gray-400 mb-1"}," Minimal pozitsiya o'zgarishi ",-1)),r("input",{type:"number",value:s.conditions?.min_position_change||3,onChange:o=>p(t,s,"min_position_change",parseInt(o.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"10"},null,40,we)])])):u("",!0)])])):u("",!0)])):u("",!0)]),_:2},1024)]))),128))])])])]),_:1}))}},sr=G(Ce,[["__scopeId","data-v-01cafb2d"]]);export{sr as default};
