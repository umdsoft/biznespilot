import{b as t,C as e,y as s,E as i,I as a,z as r,A as n,D as l,d as o,a as g,r as d,v as c,x as u,L as h,J as p,K as m,F as y,H as x,B as b,P as v,G as k}from"./chunk-CpmtkKLp.js";import{r as f}from"./chunk-BhZp3z4u.js";import{_ as w}from"./chunk-DQR5_hTm.js";import{u as j}from"./app-C-ZlocOh.js";import{t as _,a as C}from"./chunk-D7SyfRoT.js";import{_ as V}from"./chunk-ByPLW4uC.js";import{a as M}from"./chunk-CouA7u-j.js";import"./chunk-BWiubfpN.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const B={class:"flex items-start gap-4"},S={class:"flex-1 min-w-0"},z={class:"flex items-center gap-2 mb-1"},U={key:0,class:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium"},$={class:"font-semibold text-gray-900"},A={class:"text-sm text-gray-600 mt-1 line-clamp-2"},H={key:0,class:"mt-2"},I={class:"text-sm text-gray-500 ml-2"},D={key:1,class:"mt-3"},F={class:"text-sm font-medium text-indigo-600 hover:text-indigo-800"},O={__name:"InsightCard",props:{insight:{type:Object,required:!0},clickable:{type:Boolean,default:!0}},emits:["click"],setup(o){const{t:g}=j(),d=o,c=t(()=>({growth:"bg-green-100",decline:"bg-red-100",opportunity:"bg-yellow-100",info:"bg-blue-100"}[d.insight.type]||"bg-gray-100")),u=t(()=>({growth:"text-green-600",decline:"text-red-600",opportunity:"text-yellow-600",info:"text-blue-600"}[d.insight.type]||"text-gray-600")),h=t(()=>({growth:"bg-green-100 text-green-700",decline:"bg-red-100 text-red-700",opportunity:"bg-yellow-100 text-yellow-700",info:"bg-blue-100 text-blue-700"}[d.insight.type]||"bg-gray-100 text-gray-700")),p=t(()=>{const t=d.insight.type;return{growth:g("dashboard.insight.type_growth"),decline:g("dashboard.insight.type_decline"),opportunity:g("dashboard.insight.type_opportunity"),info:g("dashboard.insight.type_info")}[t]||t}),m=t(()=>{const t=d.insight.metric_change;return t>0?"text-green-600":t<0?"text-red-600":"text-gray-600"});return(t,d)=>(l(),e("div",{class:i(["bg-white rounded-lg border p-5 hover:shadow-md transition-shadow",{"cursor-pointer":o.clickable}]),onClick:d[0]||(d[0]=e=>o.clickable&&t.$emit("click",o.insight))},[s("div",B,[s("div",{class:i([c.value,"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0"])},["growth"===o.insight.type?(l(),e("svg",{key:0,class:i(["w-6 h-6",u.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[1]||(d[1]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)])],2)):"decline"===o.insight.type?(l(),e("svg",{key:1,class:i(["w-6 h-6",u.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[2]||(d[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)])],2)):"opportunity"===o.insight.type?(l(),e("svg",{key:2,class:i(["w-6 h-6",u.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[3]||(d[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"},null,-1)])],2)):(l(),e("svg",{key:3,class:i(["w-6 h-6",u.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...d[4]||(d[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},null,-1)])],2))],2),s("div",S,[s("div",z,[s("span",{class:i([h.value,"px-2 py-0.5 rounded-full text-xs font-medium"])},r(p.value),3),"high"===o.insight.priority?(l(),e("span",U,r(n(g)("dashboard.insight.important")),1)):a("",!0)]),s("h3",$,r(o.insight.title),1),s("p",A,r(o.insight.description),1),o.insight.metric_value?(l(),e("div",H,[s("span",{class:i(["text-lg font-bold",m.value])},r(o.insight.metric_change>0?"+":"")+r(o.insight.metric_change)+"% ",3),s("span",I,r(o.insight.metric_label),1)])):a("",!0),o.insight.action_text?(l(),e("div",D,[s("button",F,r(o.insight.action_text)+" â†’ ",1)])):a("",!0)])])],2))}},P={class:"flex items-center justify-between"},q={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},E=["disabled"],G={class:"py-6"},J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},L={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},N={class:"text-sm text-gray-500 dark:text-gray-400"},Q={class:"text-2xl font-bold text-gray-900 dark:text-white"},R={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-blue-200 dark:border-blue-800"},T={class:"text-sm text-blue-600 dark:text-blue-400"},W={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},X={class:"text-sm text-gray-500 dark:text-gray-400 capitalize"},Y={class:"text-2xl font-bold text-gray-900 dark:text-white"},Z={class:"flex flex-wrap gap-4 mb-6"},tt={value:"all"},et={value:"trend"},st={value:"anomaly"},it={value:"recommendation"},at={value:"opportunity"},rt={value:"warning"},nt={value:"celebration"},lt={value:"all"},ot={value:"revenue"},gt={value:"leads"},dt={value:"marketing"},ct={value:"advertising"},ut={value:"sales"},ht={class:"inline-flex items-center text-sm text-gray-700 dark:text-gray-300"},pt={class:"space-y-4"},mt={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},yt={class:"text-gray-500 dark:text-gray-400"},xt={key:0,class:"mt-6"},bt={class:"p-6"},vt={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},kt={class:"mb-4"},ft={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},wt=["placeholder"],jt={class:"flex justify-end space-x-3"},_t=o({__name:"Index",props:{insights:{},stats:{},filters:{}},setup(o){const{t:B}=j(),S=o,z=t(()=>({trend:B("insights.filter.trend"),anomaly:B("insights.filter.anomaly"),recommendation:B("insights.filter.recommendation"),opportunity:B("insights.filter.opportunity"),warning:B("insights.filter.warning"),celebration:B("insights.filter.celebration")})),U=g({...S.filters}),$=d(!1),A=d(!1),H=d(null),I=d("");function D(){f.get("/business/insights",{type:"all"!==U.type?U.type:void 0,category:"all"!==U.category?U.category:void 0,active_only:U.active_only},{preserveState:!0,preserveScroll:!0})}async function F(){$.value=!0,f.post("/business/insights/regenerate",{},{preserveScroll:!0,onFinish:()=>{$.value=!1}})}function _t(t){H.value=t,I.value="",A.value=!0}async function Ct(){H.value&&f.post(`/business/insights/${H.value}/acted`,{action_taken:I.value},{preserveScroll:!0,onSuccess:()=>{A.value=!1,H.value=null}})}async function Vt(t){confirm(B("insights.dismiss.confirm"))&&f.post(`/business/insights/${t}/dismiss`,{},{preserveScroll:!0})}return(t,g)=>(l(),c(w,{title:n(B)("insights.title")},{header:u(()=>[s("div",P,[s("h2",q,r(n(B)("insights.title")),1),s("button",{onClick:F,disabled:$.value,class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium disabled:opacity-50"},[h(n(C),{class:i(["w-4 h-4 mr-2",$.value?"animate-spin":""])},null,8,["class"]),b(" "+r($.value?n(B)("insights.regenerating"):n(B)("insights.regenerate")),1)],8,E)])]),default:u(()=>[s("div",G,[s("div",J,[s("div",K,[s("div",L,[s("p",N,r(n(B)("insights.stats.total")),1),s("p",Q,r(o.stats.total),1)]),s("div",R,[s("p",T,r(n(B)("insights.stats.active")),1),s("p",W,r(o.stats.active),1)]),(l(!0),e(p,null,m(o.stats.by_type,(t,i)=>(l(),e("div",{key:i,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},[s("p",X,r(z.value[i]||i),1),s("p",Y,r(t),1)]))),128))]),s("div",Z,[y(s("select",{"onUpdate:modelValue":g[0]||(g[0]=t=>U.type=t),onChange:D,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[s("option",tt,r(n(B)("insights.filter.all_types")),1),s("option",et,r(n(B)("insights.filter.trend")),1),s("option",st,r(n(B)("insights.filter.anomaly")),1),s("option",it,r(n(B)("insights.filter.recommendation")),1),s("option",at,r(n(B)("insights.filter.opportunity")),1),s("option",rt,r(n(B)("insights.filter.warning")),1),s("option",nt,r(n(B)("insights.filter.celebration")),1)],544),[[x,U.type]]),y(s("select",{"onUpdate:modelValue":g[1]||(g[1]=t=>U.category=t),onChange:D,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[s("option",lt,r(n(B)("insights.filter.all_categories")),1),s("option",ot,r(n(B)("insights.filter.revenue")),1),s("option",gt,r(n(B)("insights.filter.leads")),1),s("option",dt,r(n(B)("insights.filter.marketing")),1),s("option",ct,r(n(B)("insights.filter.advertising")),1),s("option",ut,r(n(B)("insights.filter.sales")),1)],544),[[x,U.category]]),s("label",ht,[y(s("input",{"onUpdate:modelValue":g[2]||(g[2]=t=>U.active_only=t),type:"checkbox",onChange:D,class:"rounded border-gray-300 dark:border-gray-600 text-blue-600 mr-2"},null,544),[[v,U.active_only]]),b(" "+r(n(B)("insights.filter.active_only")),1)])]),s("div",pt,[(l(!0),e(p,null,m(o.insights.data,t=>(l(),c(O,{key:t.id,insight:t,onAct:_t,onDismiss:Vt},null,8,["insight"]))),128)),0===o.insights.data.length?(l(),e("div",mt,[h(n(M),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),s("p",yt,r(n(B)("insights.empty")),1),s("button",{onClick:F,class:"mt-4 text-blue-600 hover:text-blue-700 text-sm font-medium"},r(n(B)("insights.empty.regenerate")),1)])):a("",!0)]),o.insights.last_page>1?(l(),e("div",xt,[h(V,{links:o.insights.links},null,8,["links"])])):a("",!0)])]),h(_,{show:A.value,onClose:g[5]||(g[5]=t=>A.value=!1)},{default:u(()=>[s("div",bt,[s("h3",vt,r(n(B)("insights.action.title")),1),s("div",kt,[s("label",ft,r(n(B)("insights.action.label")),1),y(s("textarea",{"onUpdate:modelValue":g[3]||(g[3]=t=>I.value=t),rows:"3",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",placeholder:n(B)("insights.action.placeholder")},null,8,wt),[[k,I.value]])]),s("div",jt,[s("button",{onClick:g[4]||(g[4]=t=>A.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},r(n(B)("common.cancel")),1),s("button",{onClick:Ct,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg"},r(n(B)("insights.action.save")),1)])])]),_:1},8,["show"])]),_:1},8,["title"]))}});export{_t as default};
