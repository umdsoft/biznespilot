import{h as Y,l as K,a as B}from"./chunk-BYRtWSr0.js";import{_ as P}from"./chunk-CvbzrQjU.js";import{r as T}from"./chunk-BHX0ueEB.js";import{b as j}from"./chunk-D6nU8-nU.js";import{r as C}from"./chunk-BaCQBAcd.js";import{r as I}from"./chunk-CJsSO8V8.js";import{r as y,w as X,o as A,v as D,x as L,y as g,z as e,A as u,D as l,L as k,H as o,C as N,B as x,E as s,F as c,G as f,M as G,S as U}from"./chunk-BcTZxe-J.js";import"./app-CPufef6f.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";const W={class:"space-y-6"},Z={class:"flex items-center justify-between"},ee={class:"flex items-center gap-4"},te={class:"text-2xl font-bold text-gray-900 dark:text-white"},re=["disabled"],ae={class:"border-b border-gray-200 dark:border-gray-700"},se={class:"flex space-x-8"},oe=["onClick"],le={key:0,class:"space-y-6"},de={key:0,class:"flex items-center justify-center py-12"},ie={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700"},ne={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ge={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ue={class:"flex items-center gap-3"},xe={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},ye={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ce={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},be={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},me={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},pe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ve={class:"text-2xl font-bold text-red-600 dark:text-red-400"},he={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},ke={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},fe={class:"flex items-center justify-between mb-2"},_e={class:"text-sm text-gray-600 dark:text-gray-300"},we={class:"bg-gray-200 dark:bg-gray-600 rounded-full h-2"},qe={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Be={class:"overflow-x-auto"},je={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ce={class:"divide-y divide-gray-200 dark:divide-gray-700"},$e={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},ze={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"px-6 py-4 whitespace-nowrap"},Ie={key:1,class:"space-y-6"},De={key:0,class:"flex items-center justify-center py-12"},Le={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center border border-gray-200 dark:border-gray-700"},Ne={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},Re={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},Se={class:"text-2xl font-bold text-gray-900 dark:text-white"},Me={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-red-500"},Fe={class:"text-2xl font-bold text-red-600 dark:text-red-400"},He={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-orange-500"},Je={class:"text-2xl font-bold text-orange-600 dark:text-orange-400"},Oe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-yellow-500"},Qe={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},Ve={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border-l-4 border-green-500"},Ye={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Ke={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Pe={class:"overflow-x-auto"},Te={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Xe={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white"},Ge={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap"},ft={__name:"Results",props:{currentBusiness:Object,surveyId:String},setup($){const i=$,b=y(!0),p=y(null),_=y(""),m=y("engagement"),d=y(null),n=y(null),v=y(!1),h=y(!1),R=[{id:"engagement",label:"Ishga Qiziqish",icon:C},{id:"flightrisk",label:"Ketish Xavfi",icon:I}],z=async()=>{if(!i.currentBusiness?.id||!i.surveyId){_.value="Biznes yoki so'rovnoma tanlanmagan",b.value=!1;return}b.value=!0,_.value="";try{const r=await B.get(`/api/v1/businesses/${i.currentBusiness.id}/hr/surveys/${i.surveyId}/results`);p.value=r.data.data}catch(r){console.error("Error fetching results:",r),_.value=r.response?.data?.message||"Natijalarni yuklashda xatolik"}finally{b.value=!1}},E=async()=>{if(!(!i.currentBusiness?.id||!i.surveyId)){v.value=!0;try{const r=await B.get(`/api/v1/businesses/${i.currentBusiness.id}/hr/surveys/${i.surveyId}/engagement`);d.value=r.data.data}catch(r){console.error("Error fetching engagement data:",r),d.value=null}finally{v.value=!1}}},S=async()=>{if(!(!i.currentBusiness?.id||!i.surveyId)){h.value=!0;try{const r=await B.get(`/api/v1/businesses/${i.currentBusiness.id}/hr/surveys/${i.surveyId}/flight-risk`);n.value=r.data.data}catch(r){console.error("Error fetching flight risk data:",r),n.value=null}finally{h.value=!1}}};X(m,r=>{r==="engagement"&&!d.value&&!v.value&&E(),r==="flightrisk"&&!n.value&&!h.value&&S()});const w=r=>r>=80?"text-emerald-500":r>=65?"text-blue-500":r>=50?"text-amber-500":"text-red-500",M=r=>r>=80?"bg-emerald-500":r>=65?"bg-blue-500":r>=50?"bg-amber-500":"bg-red-500",F=r=>({highly_engaged:"Juda qiziqgan",engaged:"Qiziqgan",neutral:"Neytral",disengaged:"Qiziqmagan"})[r]||r,H=r=>({highly_engaged:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",engaged:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",neutral:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",disengaged:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[r]||"bg-gray-100 text-gray-800",J=r=>({work_satisfaction:"Ish qoniqishi",team_collaboration:"Jamoa hamkorligi",growth_opportunities:"O'sish imkoniyatlari",recognition_frequency:"Tan olinish",manager_support:"Menejer qo'llab-quvvatlashi",work_life_balance:"Ish-hayot balansi",purpose_clarity:"Maqsad aniqligi",resources_adequacy:"Resurslar yetarliligi"})[r]||r,O=r=>({critical:"Juda yuqori xavf",high:"Yuqori xavf",medium:"O'rtacha xavf",low:"Past xavf"})[r]||r,Q=r=>({critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"})[r]||"bg-gray-100 text-gray-800",V=r=>r>=70?"text-red-500":r>=50?"text-orange-500":r>=30?"text-yellow-500":"text-green-500";return A(()=>{z(),E()}),(r,t)=>(s(),D(P,{title:"So'rovnoma natijalari"},{default:L(()=>[g(u(Y),{title:p.value?.survey?.title?`${p.value.survey.title} - Natijalar`:"Natijalar"},null,8,["title"]),e("div",W,[e("div",Z,[e("div",ee,[g(u(K),{href:`/hr/surveys/${$.surveyId}`,class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},{default:L(()=>[g(u(T),{class:"w-5 h-5 text-gray-500"})]),_:1},8,["href"]),e("div",null,[e("h1",te,o(p.value?.survey?.title||"So'rovnoma"),1),t[0]||(t[0]=e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Hodimlar javoblarining tahlili ",-1))])]),e("button",{onClick:z,disabled:b.value,class:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"},[g(u(j),{class:x(["w-5 h-5",b.value?"animate-spin":""])},null,8,["class"]),t[1]||(t[1]=N(" Yangilash ",-1))],8,re)]),e("div",ae,[e("nav",se,[(s(),l(c,null,f(R,a=>e("button",{key:a.id,onClick:q=>m.value=a.id,class:x(["flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors",m.value===a.id?"border-purple-500 text-purple-600 dark:text-purple-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"])},[(s(),D(G(a.icon),{class:"w-5 h-5"})),N(" "+o(a.label),1)],10,oe)),64))])]),m.value==="engagement"?(s(),l("div",le,[v.value?(s(),l("div",de,[g(u(j),{class:"w-8 h-8 animate-spin text-purple-600"})])):d.value?(s(),l(c,{key:2},[e("div",ne,[e("div",ge,[e("div",ue,[e("div",xe,[g(u(C),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha ball",-1)),e("p",{class:x(["text-2xl font-bold",w(d.value.avg_score||0)])},o((d.value.avg_score||0).toFixed(1)),3)])])]),e("div",ye,[t[5]||(t[5]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Qiziqgan",-1)),e("p",ce,o((d.value.distribution?.highly_engaged?.count||0)+(d.value.distribution?.engaged?.count||0)),1)]),e("div",be,[t[6]||(t[6]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Neytral",-1)),e("p",me,o(d.value.distribution?.neutral?.count||0),1)]),e("div",pe,[t[7]||(t[7]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Qiziqmagan",-1)),e("p",ve,o(d.value.distribution?.disengaged?.count||0),1)])]),d.value.components?(s(),l("div",he,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Komponent bo'yicha balllar ",-1)),e("div",ke,[(s(!0),l(c,null,f(d.value.components,(a,q)=>(s(),l("div",{key:q,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[e("div",fe,[e("span",_e,o(J(q)),1),e("span",{class:x(["text-lg font-bold",w(a)])},o(a),3)]),e("div",we,[e("div",{class:x(["h-2 rounded-full",M(a)]),style:U({width:`${a}%`})},null,6)])]))),128))])])):k("",!0),d.value.employees?.length>0?(s(),l("div",qe,[t[10]||(t[10]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Hodimlar ro'yxati")],-1)),e("div",Be,[e("table",je,[t[9]||(t[9]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Hodim"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Ball"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Daraja")])],-1)),e("tbody",Ce,[(s(!0),l(c,null,f(d.value.employees,a=>(s(),l("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",$e,o(a.name),1),e("td",ze,[e("span",{class:x(["text-lg font-bold",w(a.overall_score)])},o(a.overall_score?.toFixed(1)),3)]),e("td",Ee,[e("span",{class:x(["px-3 py-1 text-xs font-medium rounded-full",H(a.engagement_level)])},o(F(a.engagement_level)),3)])]))),128))])])])])):k("",!0)],64)):(s(),l("div",ie,[g(u(C),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t[2]||(t[2]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Ma'lumot yo'q",-1)),t[3]||(t[3]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Bu so'rovnoma uchun ishga qiziqish ma'lumotlari mavjud emas ",-1))]))])):m.value==="flightrisk"?(s(),l("div",Ie,[h.value?(s(),l("div",De,[g(u(j),{class:"w-8 h-8 animate-spin text-purple-600"})])):n.value?(s(),l(c,{key:2},[e("div",Ne,[e("div",Re,[t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami hodimlar",-1)),e("p",Se,o(n.value.total_employees||0),1)]),e("div",Me,[t[14]||(t[14]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Juda yuqori",-1)),e("p",Fe,o(n.value.risk_distribution?.critical?.count||0),1)]),e("div",He,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yuqori",-1)),e("p",Je,o(n.value.risk_distribution?.high?.count||0),1)]),e("div",Oe,[t[16]||(t[16]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha",-1)),e("p",Qe,o(n.value.risk_distribution?.medium?.count||0),1)]),e("div",Ve,[t[17]||(t[17]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Past",-1)),e("p",Ye,o(n.value.risk_distribution?.low?.count||0),1)])]),n.value.employees?.length>0?(s(),l("div",Ke,[t[19]||(t[19]=e("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Hodimlar ro'yxati")],-1)),e("div",Pe,[e("table",Te,[t[18]||(t[18]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Hodim"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Xavf balli"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},"Daraja")])],-1)),e("tbody",Xe,[(s(!0),l(c,null,f(n.value.employees,a=>(s(),l("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",Ae,o(a.name),1),e("td",Ge,[e("span",{class:x(["text-lg font-bold",V(a.risk_score)])},o(a.risk_score)+"% ",3)]),e("td",Ue,[e("span",{class:x(["px-3 py-1 text-xs font-medium rounded-full",Q(a.risk_level)])},o(O(a.risk_level)),3)])]))),128))])])])])):k("",!0)],64)):(s(),l("div",Le,[g(u(I),{class:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4"}),t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Ma'lumot yo'q",-1)),t[12]||(t[12]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Bu so'rovnoma uchun ketish xavfi ma'lumotlari mavjud emas ",-1))]))])):k("",!0)])]),_:1}))}};export{ft as default};
