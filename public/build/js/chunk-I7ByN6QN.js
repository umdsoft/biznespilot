import{h as B,l as F}from"./chunk-BYRtWSr0.js";import{C as w,r as H}from"./chunk-CHxAOWeL.js";import{u as M}from"./app-BC9IivQF.js";import{r as $}from"./chunk-BHX0ueEB.js";import{r as f}from"./chunk-I93QdGKi.js";import{r as j}from"./chunk-0u38oAjG.js";import{D as l,z as t,E as n,r as A,o as I,e as V,y as h,A as a,x as Z,C as S,H as s,B as b,v as U,F as v,G as C,L as g}from"./chunk-BcTZxe-J.js";import{r as O}from"./chunk-aL39oRCf.js";function P(e,o){return n(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})])}const T={class:"mb-6 flex items-center justify-between"},L={class:"flex items-center space-x-4"},q={class:"flex items-center space-x-3"},E={key:0,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},G={key:1,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},R={key:2,class:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"currentColor"},J={class:"font-semibold text-xl text-gray-800 leading-tight"},K={class:"text-sm text-gray-600"},Q={class:"flex items-center space-x-2"},W={class:"text-sm text-gray-600"},X=["value"],Y=["value"],tt={class:"max-w-8xl mx-auto"},et={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},st={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},at={class:"p-6"},ot={class:"flex items-center"},nt={class:"flex-shrink-0"},lt={class:"ml-4 flex-1"},rt={class:"text-sm font-medium text-gray-500 truncate"},it={class:"text-2xl font-bold text-gray-900"},ct={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},dt={class:"p-6"},gt={class:"flex items-center"},mt={class:"flex-shrink-0"},ht={class:"ml-4 flex-1"},xt={class:"text-sm font-medium text-gray-500 truncate"},ut={class:"text-2xl font-bold text-gray-900"},yt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_t={class:"p-6"},ft={class:"flex items-center"},vt={class:"flex-shrink-0"},pt={class:"ml-4 flex-1"},kt={class:"text-sm font-medium text-gray-500 truncate"},wt={class:"text-2xl font-bold text-gray-900"},bt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Ct={class:"p-6"},Dt={class:"flex items-center"},Nt={class:"flex-shrink-0"},zt={class:"ml-4 flex-1"},Bt={class:"text-sm font-medium text-gray-500 truncate"},Ft={class:"text-2xl font-bold text-gray-900"},Ht={key:0},Mt={key:1},$t={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},jt={class:"p-6"},At={class:"text-lg font-semibold text-gray-900 mb-4"},It={key:0,style:{height:"400px"}},Vt={key:1,class:"text-center py-12 text-gray-500"},Zt={key:0,class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-8"},St={class:"p-6"},Ut={class:"text-lg font-semibold text-gray-900 mb-4"},Ot={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Pt={class:"border-l-4 border-red-500 pl-4"},Tt={class:"text-sm text-gray-600"},Lt={class:"text-2xl font-bold text-gray-900"},qt={class:"border-l-4 border-green-500 pl-4"},Et={class:"text-sm text-gray-600"},Gt={class:"text-2xl font-bold text-gray-900"},Rt={class:"border-l-4 border-blue-500 pl-4"},Jt={class:"text-sm text-gray-600"},Kt={class:"text-2xl font-bold text-gray-900"},Qt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Wt={class:"p-6"},Xt={class:"text-lg font-semibold text-gray-900 mb-4"},Yt={key:0,class:"overflow-x-auto"},te={class:"min-w-full divide-y divide-gray-200"},ee={class:"bg-gray-50"},se={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ae={key:0,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},oe={key:1,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ne={key:2,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},le={key:3,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},re={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ie={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ce={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},de={class:"bg-white divide-y divide-gray-200"},ge={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},me={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},he={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},xe={key:2,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ue={key:3,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},_e={key:0},fe={key:1},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ke={key:0},we={key:1},be={key:1,class:"text-center py-8 text-gray-500"},$e={__name:"MarketingChannelDetail",props:{panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)},channel:{type:Object,required:!0},metrics:{type:Array,default:()=>[]},chartData:{type:Object,default:()=>({labels:[],datasets:[]})},summary:{type:Object,default:()=>({})},period:{type:Number,default:30}},setup(e){const{t:o}=M();w.register(...H);const x=e,p=i=>(x.panelType==="business"?"/business/marketing":"/marketing")+i,y=A(null);let _=null;const c=i=>!i&&i!==0?"0":new Intl.NumberFormat("uz-UZ").format(i),u=i=>i?Number(i).toFixed(2):"0.00",k=i=>{if(!i)return"0";const d=i/100;return new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(d)},D=()=>({instagram:"Instagram",telegram:"Telegram",facebook:"Facebook",google_ads:"Google Ads"})[x.channel.type]||x.channel.type,m=()=>({instagram:"instagram",telegram:"telegram",facebook:"facebook",google_ads:"google_ads"})[x.channel.type]||"default";I(()=>{if(y.value&&x.chartData.labels.length>0){const i=y.value.getContext("2d");_=new w(i,{type:"line",data:x.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(d){return c(d)}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}}})}}),V(()=>{_&&_.destroy()});const N=[{value:7,label:o("marketing.days_7")},{value:14,label:o("marketing.days_14")},{value:30,label:o("marketing.days_30")},{value:60,label:o("marketing.days_60")},{value:90,label:o("marketing.days_90")}],z=i=>{window.location.href=`${p("/channels/"+x.channel.id)}?period=${i}`};return(i,d)=>(n(),l(v,null,[h(a(B),{title:`${e.channel.name} - Analytics`},null,8,["title"]),t("div",null,[t("div",T,[t("div",L,[h(a(F),{href:p("/channels"),class:"inline-flex items-center text-gray-600 hover:text-gray-900"},{default:Z(()=>[h(a($),{class:"w-5 h-5 mr-2"}),S(" "+s(a(o)("common.back")),1)]),_:1},8,["href"]),t("div",null,[t("div",q,[t("div",{class:b(["w-12 h-12 rounded-lg flex items-center justify-center",{"bg-gradient-to-br from-pink-500 to-purple-600":m()==="instagram","bg-gradient-to-br from-blue-400 to-blue-600":m()==="telegram","bg-blue-600":m()==="facebook","bg-gradient-to-br from-red-500 to-yellow-500":m()==="google_ads","bg-gray-500":m()==="default"}])},[m()==="instagram"?(n(),l("svg",E,[...d[1]||(d[1]=[t("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069z"},null,-1)])])):m()==="telegram"?(n(),l("svg",G,[...d[2]||(d[2]=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"},null,-1)])])):m()==="facebook"?(n(),l("svg",R,[...d[3]||(d[3]=[t("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"},null,-1)])])):(n(),U(a(f),{key:3,class:"w-6 h-6 text-white"}))],2),t("div",null,[t("h2",J,s(e.channel.name),1),t("p",K,s(D()),1)])])])]),t("div",Q,[t("span",W,s(a(o)("marketing.period"))+":",1),t("select",{onChange:d[0]||(d[0]=r=>z(r.target.value)),value:e.period,class:"rounded-md border-gray-300 text-sm focus:border-indigo-500 focus:ring-indigo-500"},[(n(),l(v,null,C(N,r=>t("option",{key:r.value,value:r.value},s(r.label),9,Y)),64))],40,X)])]),t("div",tt,[t("div",et,[t("div",st,[t("div",at,[t("div",ot,[t("div",nt,[h(a(j),{class:"h-10 w-10 text-blue-600"})]),t("div",lt,[t("p",rt,s(e.channel.type==="google_ads"?a(o)("marketing.total_impressions"):a(o)("marketing.total_reach")),1),t("p",it,s(c(e.summary.total_reach||e.summary.total_impressions||0)),1)])])])]),t("div",ct,[t("div",dt,[t("div",gt,[t("div",mt,[h(a(P),{class:"h-10 w-10 text-green-600"})]),t("div",ht,[t("p",xt,s(e.channel.type==="google_ads"?a(o)("marketing.total_clicks"):a(o)("marketing.total_engagement")),1),t("p",ut,s(c(e.summary.total_engagement||e.summary.total_clicks||0)),1)])])])]),t("div",yt,[t("div",_t,[t("div",ft,[t("div",vt,[h(a(f),{class:"h-10 w-10 text-purple-600"})]),t("div",pt,[t("p",kt,s(e.channel.type==="google_ads"?a(o)("marketing.avg_ctr"):a(o)("marketing.avg_engagement")),1),t("p",wt,s(u(e.summary.avg_engagement_rate||e.summary.avg_ctr||0))+"% ",1)])])])]),t("div",bt,[t("div",Ct,[t("div",Dt,[t("div",Nt,[h(a(O),{class:b(["h-10 w-10",(e.summary.growth||0)>=0?"text-green-600":"text-red-600"])},null,8,["class"])]),t("div",zt,[t("p",Bt,s(e.channel.type==="google_ads"?a(o)("marketing.avg_roas"):a(o)("marketing.growth")),1),t("p",Ft,[e.channel.type==="google_ads"?(n(),l("span",Ht,s(u(e.summary.avg_roas||0)),1)):(n(),l("span",Mt,s((e.summary.growth||0)>=0?"+":"")+s(c(e.summary.growth||0)),1))])])])])])]),t("div",$t,[t("div",jt,[t("h3",At,s(a(o)("marketing.performance_chart"))+" ("+s(e.period)+" "+s(a(o)("marketing.days"))+") ",1),e.chartData.labels.length>0?(n(),l("div",It,[t("canvas",{ref_key:"chartCanvas",ref:y},null,512)])):(n(),l("div",Vt,[h(a(f),{class:"mx-auto h-12 w-12 text-gray-400 mb-2"}),t("p",null,s(a(o)("marketing.no_data_for_period")),1)]))])]),e.channel.type==="google_ads"&&e.summary.total_cost?(n(),l("div",Zt,[t("div",St,[t("h3",Ut,s(a(o)("marketing.cost_and_conversion")),1),t("div",Ot,[t("div",Pt,[t("p",Tt,s(a(o)("marketing.total_cost")),1),t("p",Lt,s(k(e.summary.total_cost)),1)]),t("div",qt,[t("p",Et,s(a(o)("marketing.total_conversions")),1),t("p",Gt,s(c(e.summary.total_conversions||0)),1)]),t("div",Rt,[t("p",Jt,s(a(o)("marketing.avg_cpa")),1),t("p",Kt,s(e.summary.total_conversions>0?k(e.summary.total_cost/e.summary.total_conversions*100):"0"),1)])])])])):g("",!0),t("div",Qt,[t("div",Wt,[t("h3",Xt,s(a(o)("marketing.recent_data")),1),e.metrics.length>0?(n(),l("div",Yt,[t("table",te,[t("thead",ee,[t("tr",null,[t("th",se,s(a(o)("common.date")),1),e.channel.type==="instagram"?(n(),l("th",ae,s(a(o)("marketing.followers")),1)):g("",!0),e.channel.type==="telegram"?(n(),l("th",oe,s(a(o)("marketing.members")),1)):g("",!0),e.channel.type==="facebook"?(n(),l("th",ne,s(a(o)("marketing.page_followers")),1)):g("",!0),e.channel.type==="google_ads"?(n(),l("th",le,s(a(o)("marketing.impressions")),1)):g("",!0),t("th",re,s(e.channel.type==="google_ads"?a(o)("marketing.clicks"):a(o)("marketing.reach")),1),t("th",ie,s(e.channel.type==="google_ads"?a(o)("marketing.conversions"):a(o)("marketing.engagement")),1),t("th",ce,s(e.channel.type==="google_ads"?a(o)("marketing.ctr")+" %":a(o)("marketing.engagement_rate")+" %"),1)])]),t("tbody",de,[(n(!0),l(v,null,C(e.metrics.slice(0,10),r=>(n(),l("tr",{key:r.id},[t("td",ge,s(new Date(r.metric_date).toLocaleDateString("uz-UZ")),1),e.channel.type==="instagram"?(n(),l("td",me,s(c(r.followers_count)),1)):g("",!0),e.channel.type==="telegram"?(n(),l("td",he,s(c(r.members_count)),1)):g("",!0),e.channel.type==="facebook"?(n(),l("td",xe,s(c(r.page_followers)),1)):g("",!0),e.channel.type==="google_ads"?(n(),l("td",ue,s(c(r.impressions)),1)):g("",!0),t("td",ye,[e.channel.type==="google_ads"?(n(),l("span",_e,s(c(r.clicks)),1)):(n(),l("span",fe,s(c(r.reach||r.total_views)),1))]),t("td",ve,s(e.channel.type==="google_ads"?c(r.conversions):c(r.likes+r.comments+(r.shares||0))),1),t("td",pe,[e.channel.type==="google_ads"?(n(),l("span",ke,s(u(r.ctr))+"%",1)):(n(),l("span",we,s(u(r.engagement_rate))+"%",1))])]))),128))])])])):(n(),l("div",be,s(a(o)("common.no_data")),1))])])])])],64))}};export{$e as _};
