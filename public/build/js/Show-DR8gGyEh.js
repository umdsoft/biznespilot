import{r as p,b as y,C as r,y as u,z as t,A as d,x as m,B as h,H as n,E as w,S as O,G as b,I as x,v as V,D as A,Q as tt,J as _,K as q,L as et,F as o}from"./chunk-KPSVwAyv.js";import{h as st,l as B,r as k}from"./chunk-BVrjkT6E.js";import{_ as lt}from"./chunk-C6lyqyb1.js";import{r as at}from"./chunk-J14gS6og.js";import{r as nt}from"./chunk-BL-22xYA.js";import{r as ot}from"./chunk-D5sR6A8B.js";import{r as rt,a as it}from"./chunk-D-7B8ZCD.js";import{r as dt}from"./chunk-oYlgEh2e.js";import{r as $}from"./chunk-Tj_a7zxz.js";import{r as ut}from"./chunk-Qe-_4ASA.js";import{r as ct}from"./chunk-BgOPVSvg.js";import{Y as gt,h as D,G as mt,V as bt,S as yt}from"./chunk-CViO97f5.js";import"./app-Bx12lrZQ.js";import"./chunk-BvkwlYlD.js";const xt={class:"py-6"},pt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},vt={class:"flex items-center justify-between mb-6"},ft={class:"flex items-center space-x-4"},ht={class:"flex items-center space-x-2"},wt={class:"text-2xl font-bold text-gray-900"},_t={class:"text-gray-500"},kt={class:"flex items-center space-x-3"},jt={class:"bg-white rounded-lg border p-6 mb-6"},qt={class:"flex items-center justify-between mb-4"},$t={class:"text-2xl font-bold text-indigo-600"},Mt={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},Ct={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},St={class:"bg-white rounded-lg border p-4"},Ft={class:"flex items-center justify-between"},Ot={class:"text-2xl font-bold text-gray-900 mt-1"},Vt={class:"bg-white rounded-lg border p-4"},At={class:"flex items-center justify-between"},Bt={class:"text-2xl font-bold text-gray-900 mt-1"},Dt={class:"bg-white rounded-lg border p-4"},Qt={class:"flex items-center justify-between"},Yt={class:"text-2xl font-bold text-gray-900 mt-1"},zt={class:"bg-white rounded-lg border p-4"},It={class:"flex items-center justify-between"},Nt={class:"text-2xl font-bold text-gray-900 mt-1"},Tt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},Lt={class:"lg:col-span-2 space-y-6"},Rt={class:"bg-white rounded-lg border p-6"},Ut={class:"flex items-center justify-between mb-4"},Kt={key:0,class:"space-y-3"},Et={key:1,class:"text-center py-8 text-gray-500"},Gt={class:"bg-white rounded-lg border p-6"},Pt={class:"flex items-center justify-between mb-4"},Ht={key:0,class:"space-y-3"},Jt={class:"flex items-start justify-between"},Xt={class:"font-medium text-gray-900"},Wt={class:"text-sm text-gray-600 mt-1"},Zt=["onClick"],te={class:"flex items-center space-x-4 mt-3 text-sm"},ee={key:1,class:"text-center py-8 text-gray-500"},se={class:"bg-white rounded-lg border p-6"},le={class:"flex items-center justify-between mb-4"},ae={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ne={class:"flex items-center justify-between mb-2"},oe={class:"font-semibold text-gray-900"},re={class:"text-sm text-gray-600 mb-2"},ie={class:"flex items-center justify-between text-sm"},de={class:"text-gray-500"},ue={class:"font-medium text-indigo-600"},ce={class:"h-1.5 bg-gray-200 rounded-full overflow-hidden mt-2"},ge=["onClick"],me={class:"text-center"},be={class:"text-gray-400 font-medium"},ye={class:"space-y-6"},xe={class:"bg-white rounded-lg border p-6"},pe={class:"flex items-center justify-between mb-4"},ve={key:0,class:"space-y-3"},fe={class:"font-medium text-gray-900"},he={class:"text-sm text-gray-600 mt-1"},we={class:"flex items-center justify-between mt-2 text-xs text-gray-500"},_e={key:1,class:"text-center py-4 text-gray-500 text-sm"},ke={class:"bg-white rounded-lg border p-6"},je={key:0,class:"space-y-3"},qe={class:"flex-1"},$e={class:"text-sm font-medium text-gray-900"},Me={class:"text-xs text-gray-500"},Ce={key:1,class:"text-center py-4 text-gray-500 text-sm"},Se={key:0,class:"bg-red-50 rounded-lg border border-red-200 p-6"},Fe={class:"flex items-center mb-4"},Oe={class:"space-y-2"},Ve={class:"fixed inset-0 overflow-y-auto"},Ae={class:"flex min-h-full items-center justify-center p-4"},Be={class:"grid grid-cols-2 gap-4"},De={class:"flex justify-end space-x-3 pt-4"},Qe=["disabled"],Xe={__name:"Show",props:{plan:Object,annual:Object,months:Array},setup(a){const i=a,v=p(!1),Q=p(!1),Y=p(!1),z=p(!1),j=p(!1),g=p({title:i.plan.title||"",theme:i.plan.theme||"",revenue_target:i.plan.revenue_target,budget:i.plan.budget,status:i.plan.status}),I=y(()=>({1:"bg-blue-100 text-blue-700",2:"bg-green-100 text-green-700",3:"bg-amber-100 text-amber-700",4:"bg-purple-100 text-purple-700"})[i.plan.quarter]||"bg-gray-100 text-gray-700"),N=y(()=>{const l=i.plan.year,e=i.plan.quarter,s=(e-1)*3+1,c=e*3,f=["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"];return`${f[s]} - ${f[c]} ${l}`}),T=y(()=>({draft:"bg-gray-100 text-gray-700",planning:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-indigo-100 text-indigo-700"})[i.plan.status]||"bg-gray-100 text-gray-700"),L=y(()=>({draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"})[i.plan.status]||i.plan.status),R=y(()=>{const e=(i.plan.quarter-1)*3+1;return[e,e+1,e+2]}),U=y(()=>i.months?.map(l=>l.month)||[]),C=y(()=>R.value.filter(l=>!U.value.includes(l)));function M(l){return l?l>=1e6?`${(l/1e6).toFixed(1)}M`:l>=1e3?`${(l/1e3).toFixed(0)}K`:l.toLocaleString():"-"}function S(l){return["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"][l]||""}function K(l){return{draft:"bg-gray-100 text-gray-600",planning:"bg-blue-100 text-blue-600",active:"bg-green-100 text-green-600",completed:"bg-indigo-100 text-indigo-600"}[l]||"bg-gray-100 text-gray-600"}function E(l){return{draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[l]||l}function G(l){return{high:"bg-red-100 text-red-700",medium:"bg-yellow-100 text-yellow-700",low:"bg-green-100 text-green-700"}[l]||"bg-gray-100 text-gray-700"}function P(l){return{high:"Yuqori",medium:"O'rta",low:"Past"}[l]||l}function H(l){const e=[...i.plan.quarterly_objectives||[]];e[l].completed=!e[l].completed,k.put(`/business/strategy/quarterly/${i.plan.id}`,{quarterly_objectives:e},{preserveScroll:!0})}function J(l){if(!confirm("Bu maqsadni o'chirmoqchimisiz?"))return;const e=[...i.plan.quarterly_objectives||[]];e.splice(l,1),k.put(`/business/strategy/quarterly/${i.plan.id}`,{quarterly_objectives:e},{preserveScroll:!0})}function X(l){if(!confirm("Bu tashabbusni o'chirmoqchimisiz?"))return;const e=[...i.plan.key_initiatives||[]];e.splice(l,1),k.put(`/business/strategy/quarterly/${i.plan.id}`,{key_initiatives:e},{preserveScroll:!0})}function W(){const l=C.value[0];l&&F(l)}function F(l){k.post("/business/strategy/monthly",{quarterly_plan_id:i.plan.id,month:l,year:i.plan.year})}function Z(){j.value=!0,k.put(`/business/strategy/quarterly/${i.plan.id}`,g.value,{preserveScroll:!0,onSuccess:()=>{v.value=!1},onFinish:()=>{j.value=!1}})}return(l,e)=>(o(),r(b,null,[u(d(st),{title:`Q${a.plan.quarter} - ${a.plan.year}`},null,8,["title"]),t("div",xt,[t("div",pt,[t("div",vt,[t("div",ft,[u(d(B),{href:a.annual?`/business/strategy/annual/${a.annual.id}`:"/business/strategy",class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"},{default:m(()=>[u(d(at),{class:"w-5 h-5"})]),_:1},8,["href"]),t("div",null,[t("div",ht,[t("span",{class:h(["px-2 py-0.5 rounded text-xs font-medium",I.value])}," Q"+n(a.plan.quarter),3),t("h1",wt,n(a.plan.title||a.plan.theme),1)]),t("p",_t,n(N.value),1)])]),t("div",kt,[t("span",{class:h(["px-3 py-1 rounded-full text-sm font-medium",T.value])},n(L.value),3),t("button",{onClick:e[0]||(e[0]=s=>v.value=!0),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"},[u(d(nt),{class:"w-4 h-4 inline mr-1"}),e[11]||(e[11]=w(" Tahrirlash ",-1))])])]),t("div",jt,[t("div",qt,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Chorak progressi",-1)),t("span",$t,n(a.plan.completion_percent||0)+"%",1)]),t("div",Mt,[t("div",{class:"h-full bg-indigo-600 rounded-full transition-all duration-500",style:O({width:`${a.plan.completion_percent||0}%`})},null,4)])]),t("div",Ct,[t("div",St,[t("div",Ft,[e[13]||(e[13]=t("span",{class:"text-sm text-gray-500"},"Maqsadli daromad",-1)),u(d(ot),{class:"w-5 h-5 text-green-500"})]),t("p",Ot,n(M(a.plan.revenue_target)),1)]),t("div",Vt,[t("div",At,[e[14]||(e[14]=t("span",{class:"text-sm text-gray-500"},"Byudjet",-1)),u(d(rt),{class:"w-5 h-5 text-purple-500"})]),t("p",Bt,n(M(a.plan.budget)),1)]),t("div",Dt,[t("div",Qt,[e[15]||(e[15]=t("span",{class:"text-sm text-gray-500"},"Maqsadlar",-1)),u(d(dt),{class:"w-5 h-5 text-blue-500"})]),t("p",Yt,n(a.plan.quarterly_objectives?.length||0),1)]),t("div",zt,[t("div",It,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500"},"Oylar",-1)),u(d(it),{class:"w-5 h-5 text-amber-500"})]),t("p",Nt,n(a.months.length)+" / 3",1)])]),t("div",Tt,[t("div",Lt,[t("div",Rt,[t("div",Ut,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Chorak maqsadlari",-1)),t("button",{onClick:e[1]||(e[1]=s=>Q.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(d($),{class:"w-4 h-4 inline mr-1"}),e[17]||(e[17]=w(" Qo'shish ",-1))])]),a.plan.quarterly_objectives?.length?(o(),r("div",Kt,[(o(!0),r(b,null,x(a.plan.quarterly_objectives,(s,c)=>(o(),V(lt,{key:c,goal:s,index:c,onToggle:f=>H(c),onDelete:f=>J(c)},null,8,["goal","index","onToggle","onDelete"]))),128))])):(o(),r("div",Et," Hali chorak maqsadlari yo'q "))]),t("div",Gt,[t("div",Pt,[e[20]||(e[20]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Asosiy tashabbuslar",-1)),t("button",{onClick:e[2]||(e[2]=s=>Y.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(d($),{class:"w-4 h-4 inline mr-1"}),e[19]||(e[19]=w(" Qo'shish ",-1))])]),a.plan.key_initiatives?.length?(o(),r("div",Ht,[(o(!0),r(b,null,x(a.plan.key_initiatives,(s,c)=>(o(),r("div",{key:c,class:"p-4 bg-gray-50 rounded-lg"},[t("div",Jt,[t("div",null,[t("h4",Xt,n(s.title),1),t("p",Wt,n(s.description),1)]),t("button",{onClick:f=>X(c),class:"text-gray-400 hover:text-red-500"},[u(d(ut),{class:"w-4 h-4"})],8,Zt)]),t("div",te,[e[21]||(e[21]=t("span",{class:"text-gray-500"},"Prioritet:",-1)),t("span",{class:h(["px-2 py-0.5 rounded text-xs font-medium",G(s.priority)])},n(P(s.priority)),3)])]))),128))])):(o(),r("div",ee," Tashabbuslar yo'q "))]),t("div",se,[t("div",le,[e[23]||(e[23]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Oylik rejalar",-1)),a.months.length<3?(o(),r("button",{key:0,onClick:W,class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(d($),{class:"w-4 h-4 inline mr-1"}),e[22]||(e[22]=w(" Oy qo'shish ",-1))])):A("",!0)]),t("div",ae,[(o(!0),r(b,null,x(a.months,s=>(o(),V(d(B),{key:s.id,href:`/business/strategy/monthly/${s.id}`,class:"block p-4 rounded-lg border hover:shadow-md transition-shadow"},{default:m(()=>[t("div",ne,[t("span",oe,n(S(s.month)),1),t("span",{class:h(["px-2 py-0.5 rounded-full text-xs",K(s.status)])},n(E(s.status)),3)]),t("p",re,n(s.focus_area||"Reja mavjud"),1),t("div",ie,[t("span",de,n(s.posts_target||0)+" post",1),t("span",ue,n(s.completion_percent||0)+"%",1)]),t("div",ce,[t("div",{class:"h-full bg-indigo-500 rounded-full",style:O({width:`${s.completion_percent||0}%`})},null,4)])]),_:2},1032,["href"]))),128)),(o(!0),r(b,null,x(C.value,s=>(o(),r("div",{key:`empty-${s}`,class:"p-4 rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center cursor-pointer hover:border-indigo-300 hover:bg-indigo-50 transition-colors",onClick:c=>F(s)},[t("div",me,[t("span",be,n(S(s)),1),e[24]||(e[24]=t("p",{class:"text-xs text-gray-400 mt-1"},"Reja yarating",-1))])],8,ge))),128))])])]),t("div",ye,[t("div",xe,[t("div",pe,[e[25]||(e[25]=t("h2",{class:"text-lg font-semibold text-gray-900"},"Kampaniyalar",-1)),t("button",{onClick:e[3]||(e[3]=s=>z.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[u(d($),{class:"w-4 h-4 inline"})])]),a.plan.campaigns?.length?(o(),r("div",ve,[(o(!0),r(b,null,x(a.plan.campaigns,(s,c)=>(o(),r("div",{key:c,class:"p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-100"},[t("h4",fe,n(s.name),1),t("p",he,n(s.goal),1),t("div",we,[t("span",null,n(M(s.budget)),1),t("span",null,n(s.channel),1)])]))),128))])):(o(),r("div",_e," Kampaniyalar yo'q "))]),t("div",ke,[e[26]||(e[26]=t("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Muhim sanalar",-1)),a.plan.milestones?.length?(o(),r("div",je,[(o(!0),r(b,null,x(a.plan.milestones,(s,c)=>(o(),r("div",{key:c,class:"flex items-start space-x-3"},[t("div",{class:h(["w-3 h-3 rounded-full mt-1.5",s.completed?"bg-green-500":"bg-gray-300"])},null,2),t("div",qe,[t("p",$e,n(s.title),1),t("p",Me,n(s.date),1)])]))),128))])):(o(),r("div",Ce," Muhim sanalar belgilanmagan "))]),a.plan.risks?.length?(o(),r("div",Se,[t("div",Fe,[u(d(ct),{class:"w-5 h-5 text-red-500 mr-2"}),e[27]||(e[27]=t("h2",{class:"text-lg font-semibold text-red-900"},"Xavflar",-1))]),t("ul",Oe,[(o(!0),r(b,null,x(a.plan.risks,(s,c)=>(o(),r("li",{key:c,class:"text-sm text-red-800"},n(s),1))),128))])])):A("",!0)])])])]),u(d(yt),{appear:"",show:v.value,as:"template"},{default:m(()=>[u(d(gt),{as:"div",class:"relative z-50",onClose:e[10]||(e[10]=s=>v.value=!1)},{default:m(()=>[u(d(D),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:m(()=>[...e[28]||(e[28]=[t("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),t("div",Ve,[t("div",Ae,[u(d(D),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[u(d(mt),{class:"w-full max-w-2xl bg-white rounded-xl shadow-xl p-6"},{default:m(()=>[u(d(bt),{class:"text-lg font-semibold text-gray-900 mb-4"},{default:m(()=>[...e[29]||(e[29]=[w(" Chorak rejasini tahrirlash ",-1)])]),_:1}),t("form",{onSubmit:tt(Z,["prevent"]),class:"space-y-4"},[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sarlavha",-1)),_(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>g.value.title=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[q,g.value.title]])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mavzu (Theme)",-1)),_(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>g.value.theme=s),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[q,g.value.theme]])]),t("div",Be,[t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maqsadli daromad",-1)),_(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>g.value.revenue_target=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[q,g.value.revenue_target,void 0,{number:!0}]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Byudjet",-1)),_(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>g.value.budget=s),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[q,g.value.budget,void 0,{number:!0}]])])]),t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),_(t("select",{"onUpdate:modelValue":e[8]||(e[8]=s=>g.value.status=s),class:"w-full rounded-lg border-gray-300"},[...e[34]||(e[34]=[t("option",{value:"draft"},"Qoralama",-1),t("option",{value:"planning"},"Rejalashtirish",-1),t("option",{value:"active"},"Faol",-1),t("option",{value:"completed"},"Yakunlangan",-1)])],512),[[et,g.value.status]])]),t("div",De,[t("button",{type:"button",onClick:e[9]||(e[9]=s=>v.value=!1),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"}," Bekor qilish "),t("button",{type:"submit",disabled:j.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},n(j.value?"Saqlanmoqda...":"Saqlash"),9,Qe)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}};export{Xe as default};
