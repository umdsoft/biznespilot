import{r as m,b as w,v as C,x as u,y as l,z as t,A as e,H as s,J as y,K as L,L as D,C as g,F as i,G as $,I as j,B}from"./chunk-KPSVwAyv.js";import{h as S,l as z}from"./chunk-BVrjkT6E.js";import{_ as F}from"./chunk-Cy19HSui.js";import{u as I}from"./app-906_W7J6.js";import{r as p}from"./chunk-D5sR6A8B.js";import{r as U}from"./chunk-Dfha1x8d.js";import{r as V}from"./chunk-CYw1XsNK.js";import{r as N}from"./chunk-uNG5YCqx.js";import{r as A}from"./chunk-BeK6HK_O.js";import"./chunk-S7b6IQvx.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-qku2UxUN.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";import"./chunk-BvkwlYlD.js";const M={class:"space-y-6"},Z={class:"text-2xl font-bold text-gray-900 dark:text-white"},q={class:"text-sm text-gray-500 dark:text-gray-400"},E={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},G={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},H={class:"flex items-center gap-3"},J={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},K={class:"text-sm text-gray-500 dark:text-gray-400"},O={class:"text-xl font-bold text-gray-900 dark:text-white"},Q={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},T={class:"flex items-center gap-3"},P={class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},R={class:"text-sm text-gray-500 dark:text-gray-400"},W={class:"text-xl font-bold text-green-600 dark:text-green-400"},X={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Y={class:"flex items-center gap-3"},tt={class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},et={class:"text-sm text-gray-500 dark:text-gray-400"},st={class:"text-xl font-bold text-red-600 dark:text-red-400"},at={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},rt={class:"flex items-center gap-3"},ot={class:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center"},dt={class:"text-sm text-gray-500 dark:text-gray-400"},lt={class:"text-xl font-bold text-emerald-600 dark:text-emerald-400"},nt={class:"flex flex-col sm:flex-row gap-4"},it={class:"relative flex-1"},ct=["placeholder"],xt={value:""},gt={value:"won"},pt={value:"lost"},_t={value:"pending"},ht={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},mt={key:0,class:"p-12 text-center"},ut={class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},yt={class:"text-gray-500 dark:text-gray-400"},bt={key:1,class:"w-full"},ft={class:"bg-gray-50 dark:bg-gray-900/50"},kt={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},vt={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},wt={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},Ct={class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},Lt={class:"px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase"},Dt={class:"divide-y divide-gray-200 dark:divide-gray-700"},$t={class:"px-6 py-4 font-medium text-gray-900 dark:text-white"},jt={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},Bt={class:"px-6 py-4 font-semibold text-emerald-600 dark:text-emerald-400"},St={class:"px-6 py-4"},zt={class:"px-6 py-4 text-gray-600 dark:text-gray-400"},Ft={class:"px-6 py-4 text-right"},le={__name:"Index",props:{deals:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,won:0,lost:0,total_value:0})}},setup(n){const{t:a}=I(),b=n,c=m(""),x=m(""),_=w(()=>{let r=b.deals;if(c.value){const d=c.value.toLowerCase();r=r.filter(o=>o.name?.toLowerCase().includes(d)||o.lead?.name?.toLowerCase().includes(d))}return x.value&&(r=r.filter(d=>d.status===x.value)),r}),h=r=>r?new Intl.NumberFormat("uz-UZ").format(r)+" so'm":"0 so'm",f=r=>r?new Date(r).toLocaleDateString("uz-UZ"):"-",k=r=>({won:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",lost:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400",pending:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400"})[r]||"bg-gray-100 text-gray-700",v=r=>({won:a("saleshead.deal_won"),lost:a("saleshead.deal_lost"),pending:a("tasks.pending")})[r]||r;return(r,d)=>(i(),C(F,{title:e(a)("sales.deals")},{default:u(()=>[l(e(S),{title:e(a)("sales.deals")},null,8,["title"]),t("div",M,[t("div",null,[t("h1",Z,s(e(a)("sales.deals")),1),t("p",q,s(e(a)("saleshead.deals_subtitle")),1)]),t("div",E,[t("div",G,[t("div",H,[t("div",J,[l(e(p),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",null,[t("p",K,s(e(a)("saleshead.total_deals")),1),t("p",O,s(n.stats.total),1)])])]),t("div",Q,[t("div",T,[t("div",P,[l(e(U),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[t("p",R,s(e(a)("saleshead.deal_won")),1),t("p",W,s(n.stats.won),1)])])]),t("div",X,[t("div",Y,[t("div",tt,[l(e(V),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t("div",null,[t("p",et,s(e(a)("saleshead.deal_lost")),1),t("p",st,s(n.stats.lost),1)])])]),t("div",at,[t("div",rt,[t("div",ot,[l(e(p),{class:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})]),t("div",null,[t("p",dt,s(e(a)("common.total"))+" "+s(e(a)("saleshead.amount")),1),t("p",lt,s(h(n.stats.total_value)),1)])])])]),t("div",nt,[t("div",it,[l(e(N),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),y(t("input",{"onUpdate:modelValue":d[0]||(d[0]=o=>c.value=o),type:"text",placeholder:e(a)("saleshead.search_deal"),class:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},null,8,ct),[[L,c.value]])]),y(t("select",{"onUpdate:modelValue":d[1]||(d[1]=o=>x.value=o),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg text-gray-900 dark:text-white"},[t("option",xt,s(e(a)("saleshead.all_statuses")),1),t("option",gt,s(e(a)("saleshead.deal_won")),1),t("option",pt,s(e(a)("saleshead.deal_lost")),1),t("option",_t,s(e(a)("tasks.pending")),1)],512),[[D,x.value]])]),t("div",ht,[_.value.length===0?(i(),g("div",mt,[l(e(p),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),t("h3",ut,s(e(a)("saleshead.deal_not_found")),1),t("p",yt,s(e(a)("saleshead.no_deals_yet")),1)])):(i(),g("table",bt,[t("thead",ft,[t("tr",null,[t("th",kt,s(e(a)("saleshead.deal")),1),d[2]||(d[2]=t("th",{class:"px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase"},"Lead",-1)),t("th",vt,s(e(a)("saleshead.amount")),1),t("th",wt,s(e(a)("common.status")),1),t("th",Ct,s(e(a)("common.date")),1),t("th",Lt,s(e(a)("common.actions")),1)])]),t("tbody",Dt,[(i(!0),g($,null,j(_.value,o=>(i(),g("tr",{key:o.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",$t,s(o.name),1),t("td",jt,s(o.lead?.name||"-"),1),t("td",Bt,s(h(o.value)),1),t("td",St,[t("span",{class:B([k(o.status),"px-2.5 py-1 rounded-full text-xs font-medium"])},s(v(o.status)),3)]),t("td",zt,s(f(o.closed_at)),1),t("td",Ft,[l(e(z),{href:`/sales-head/deals/${o.id}`,class:"p-2 text-gray-400 hover:text-emerald-600 inline-block"},{default:u(()=>[l(e(A),{class:"w-5 h-5"})]),_:1},8,["href"])])]))),128))])]))])])]),_:1},8,["title"]))}};export{le as default};
