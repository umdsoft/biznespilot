import{b as e,r as a,D as r,z as t,y as l,x as s,C as d,H as i,A as o,Q as n,I as p,L as g,J as c,B as u,F as m,G as b,O as y,K as x,_ as k,E as h}from"./chunk-7Urb0kxg.js";import{u as v,l as f,a as w}from"./chunk-DKkye6wf.js";import{u as _}from"./app-DFslr8vl.js";const j={class:"py-12"},C={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},U={class:"mb-8"},V={class:"text-3xl font-bold text-gray-900 dark:text-white mt-2"},B={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},z={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},M={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},L=["placeholder"],T={key:0,class:"mt-1 text-sm text-red-600"},q={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},F={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},I={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},O={class:"flex items-center justify-between mb-2"},A={class:"font-semibold text-gray-900 dark:text-white"},E={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},K={class:"text-sm text-gray-600 dark:text-gray-400"},S={class:"flex items-center justify-between mb-2"},D={class:"font-semibold text-gray-900 dark:text-white"},G={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},H={class:"text-sm text-gray-600 dark:text-gray-400"},J={class:"flex items-center justify-between mb-2"},Q={class:"font-semibold text-gray-900 dark:text-white"},N={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},P={class:"text-sm text-gray-600 dark:text-gray-400"},R={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},W={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},X={class:"grid grid-cols-2 md:grid-cols-5 gap-3"},Y=["onClick"],Z={class:"text-2xl mb-1"},$={class:"text-sm font-medium text-gray-900 dark:text-white"},ee={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ae={class:"flex items-center justify-between mb-4"},re={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},te=["disabled"],le={key:0},se={key:1},de={key:0,class:"mb-4"},ie=["placeholder"],oe=["disabled"],ne=["placeholder"],pe={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},ge={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ce={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},ue={value:"all"},me={value:"active"},be={value:"recent"},ye={value:"unconverted"},xe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ke={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},he={class:"space-y-3"},ve={class:"flex items-center"},fe={class:"ml-3 text-sm text-gray-900 dark:text-white"},we={class:"flex items-center"},_e={class:"ml-3 text-sm text-gray-900 dark:text-white"},je={key:0,class:"mt-4"},Ce={class:"flex justify-end space-x-3"},Ue=["disabled"],Ve={__name:"MarketingCampaignCreate",props:{panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)},currentBusiness:Object,errors:Object},setup(Ve){const{t:Be}=_(),ze=Ve,Me=e=>("business"===ze.panelType?"/business/marketing":"/marketing")+e,Le=e=>("business"===ze.panelType?"/business/marketing":"/marketing")+e,Te=v({name:"",type:"broadcast",channel:"telegram",message_template:"",target_audience:"all",schedule_type:"immediate",scheduled_at:null,settings:{}}),qe=e(()=>[{value:"instagram",label:"Instagram",icon:""},{value:"telegram",label:"Telegram",icon:""},{value:"facebook",label:"Facebook",icon:""},{value:"email",label:"Email",icon:""},{value:"all",label:Be("marketing.all_channels"),icon:""}]),Fe=a(!1),Ie=a(!1),Oe=a(!1),Ae=a(""),Ee=()=>{Oe.value=!Oe.value},Ke=async()=>{if(Ae.value){Ie.value=!0;try{const e=await w.post(Le("/campaigns/generate-ai"),{campaign_goal:Ae.value});e.data.success&&(Te.message_template=e.data.message,Oe.value=!1,Ae.value="")}catch(e){alert("AI xabar yaratishda xatolik yuz berdi")}finally{Ie.value=!1}}},Se=()=>{Fe.value=!0,Te.post(Le("/campaigns"),{onFinish:()=>{Fe.value=!1}})};return(e,a)=>(h(),r("div",j,[t("div",C,[t("div",U,[l(o(f),{href:Me("/campaigns"),class:"text-purple-600 hover:text-purple-700 mb-4 inline-flex items-center"},{default:s(()=>[a[10]||(a[10]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),d(" "+i(o(Be)("common.back")),1)]),_:1},8,["href"]),t("h2",V,i(o(Be)("marketing.new_marketing_campaign")),1),t("p",B,i(o(Be)("marketing.campaign_create_desc")),1)]),t("form",{onSubmit:n(Se,["prevent"]),class:"space-y-6"},[t("div",z,[t("label",M,i(o(Be)("marketing.campaign_name"))+" * ",1),p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>o(Te).name=e),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:o(Be)("marketing.campaign_name_placeholder")},null,8,L),[[c,o(Te).name]]),Ve.errors.name?(h(),r("p",T,i(Ve.errors.name),1)):g("",!0)]),t("div",q,[t("label",F,i(o(Be)("marketing.campaign_type"))+" * ",1),t("div",I,[t("div",{onClick:a[1]||(a[1]=e=>o(Te).type="broadcast"),class:u(["cursor-pointer border-2 rounded-lg p-4 transition-all","broadcast"===o(Te).type?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[t("div",O,[t("h4",A,i(o(Be)("marketing.type_broadcast")),1),"broadcast"===o(Te).type?(h(),r("div",E,[...a[11]||(a[11]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),t("p",K,i(o(Be)("marketing.type_broadcast_desc")),1)],2),t("div",{onClick:a[2]||(a[2]=e=>o(Te).type="drip"),class:u(["cursor-pointer border-2 rounded-lg p-4 transition-all","drip"===o(Te).type?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[t("div",S,[t("h4",D,i(o(Be)("marketing.type_drip")),1),"drip"===o(Te).type?(h(),r("div",G,[...a[12]||(a[12]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),t("p",H,i(o(Be)("marketing.type_drip_desc")),1)],2),t("div",{onClick:a[3]||(a[3]=e=>o(Te).type="trigger"),class:u(["cursor-pointer border-2 rounded-lg p-4 transition-all","trigger"===o(Te).type?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[t("div",J,[t("h4",Q,i(o(Be)("marketing.type_trigger")),1),"trigger"===o(Te).type?(h(),r("div",N,[...a[13]||(a[13]=[t("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),t("p",P,i(o(Be)("marketing.type_trigger_desc")),1)],2)])]),t("div",R,[t("label",W,i(o(Be)("marketing.channel"))+" * ",1),t("div",X,[(h(!0),r(m,null,b(qe.value,e=>(h(),r("div",{key:e.value,onClick:a=>o(Te).channel=e.value,class:u(["cursor-pointer border-2 rounded-lg p-3 text-center transition-all",o(Te).channel===e.value?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[t("div",Z,i(e.icon),1),t("div",$,i(e.label),1)],10,Y))),128))])]),t("div",ee,[t("div",ae,[t("label",re,i(o(Be)("marketing.message_text"))+" * ",1),t("button",{type:"button",onClick:Ee,disabled:Ie.value,class:"text-sm px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 disabled:opacity-50"},[Ie.value?(h(),r("span",se,i(o(Be)("marketing.generating")),1)):(h(),r("span",le,i(o(Be)("marketing.generate_with_ai")),1))],8,te)]),Oe.value?(h(),r("div",de,[p(t("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>Ae.value=e),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:o(Be)("marketing.ai_goal_placeholder"),onKeyup:y(Ke,["enter"])},null,40,ie),[[c,Ae.value]]),t("button",{onClick:Ke,disabled:!Ae.value||Ie.value,class:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},i(o(Be)("common.create")),9,oe)])):g("",!0),p(t("textarea",{"onUpdate:modelValue":a[5]||(a[5]=e=>o(Te).message_template=e),rows:"6",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:o(Be)("marketing.message_placeholder")},null,8,ne),[[c,o(Te).message_template]]),t("p",pe,[t("strong",null,i(o(Be)("marketing.placeholders"))+":",1),a[14]||(a[14]=d(" {customer_name}, {business_name}, {offer_name}, {offer_price} ",-1))])]),t("div",ge,[t("label",ce,i(o(Be)("marketing.target_audience")),1),p(t("select",{"onUpdate:modelValue":a[6]||(a[6]=e=>o(Te).target_audience=e),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[t("option",ue,i(o(Be)("marketing.audience_all")),1),t("option",me,i(o(Be)("marketing.audience_active")),1),t("option",be,i(o(Be)("marketing.audience_recent")),1),t("option",ye,i(o(Be)("marketing.audience_unconverted")),1)],512),[[x,o(Te).target_audience]])]),t("div",xe,[t("label",ke,i(o(Be)("marketing.send_time")),1),t("div",he,[t("label",ve,[p(t("input",{"onUpdate:modelValue":a[7]||(a[7]=e=>o(Te).schedule_type=e),type:"radio",value:"immediate",class:"w-4 h-4 text-purple-600 focus:ring-purple-500"},null,512),[[k,o(Te).schedule_type]]),t("span",fe,i(o(Be)("marketing.send_immediately")),1)]),t("label",we,[p(t("input",{"onUpdate:modelValue":a[8]||(a[8]=e=>o(Te).schedule_type=e),type:"radio",value:"scheduled",class:"w-4 h-4 text-purple-600 focus:ring-purple-500"},null,512),[[k,o(Te).schedule_type]]),t("span",_e,i(o(Be)("marketing.send_scheduled")),1)])]),"scheduled"===o(Te).schedule_type?(h(),r("div",je,[p(t("input",{"onUpdate:modelValue":a[9]||(a[9]=e=>o(Te).scheduled_at=e),type:"datetime-local",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[c,o(Te).scheduled_at]])])):g("",!0)]),t("div",Ce,[l(o(f),{href:Me("/campaigns"),class:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:s(()=>[d(i(o(Be)("common.cancel")),1)]),_:1},8,["href"]),t("button",{type:"submit",disabled:Fe.value,class:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},i(Fe.value?o(Be)("common.saving")+"...":o(Be)("marketing.create_campaign")),9,Ue)])],32)])]))}};export{Ve as _};
