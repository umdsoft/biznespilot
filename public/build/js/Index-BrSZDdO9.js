import{r as p,b as z,C as n,y as l,z as t,A as d,H as r,B as y,E as w,D as j,J as B,K as A,G as b,I as _,L as O,v as C,F as o}from"./chunk-KPSVwAyv.js";import{h as T,r as V}from"./chunk-BVrjkT6E.js";import{_ as I}from"./chunk-8G5YrASG.js";import{u as U}from"./app-DMGwzSHW.js";import{c as q,r as S,a as $}from"./chunk-C_PbB7ed.js";import{r as E}from"./chunk-BmwLUXPG.js";import{r as D}from"./chunk-Dfha1x8d.js";import{r as J}from"./chunk-CYw1XsNK.js";import{r as F}from"./chunk-D-7B8ZCD.js";import{r as M}from"./chunk-uNG5YCqx.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-J14gS6og.js";const H={class:"p-4 lg:p-6 min-h-screen"},K={class:"max-w-[1800px] mx-auto"},Q={class:"flex items-center justify-between mb-6"},R={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},Z={class:"flex items-center gap-2"},G=["disabled"],P={class:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},Y={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-6"},W={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},X={class:"flex items-center gap-3"},tt={class:"w-10 h-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center"},et={class:"text-2xl font-bold text-gray-900 dark:text-white"},at={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},rt={class:"flex items-center gap-3"},st={class:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center"},dt={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},lt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ot={class:"flex items-center gap-3"},it={class:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},nt={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},xt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ct={class:"flex items-center gap-3"},gt={class:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},ut={class:"text-2xl font-bold text-red-600 dark:text-red-400"},mt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},pt={class:"flex items-center gap-3"},yt={class:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center"},bt={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},ht={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},ft={class:"flex items-center gap-3"},kt={class:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center"},_t={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},vt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},wt={class:"p-4 border-b border-gray-200 dark:border-gray-700"},jt={class:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between"},Bt={class:"relative flex-1 max-w-md"},Ct={class:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-900 rounded-lg"},St=["onClick"],$t={class:"ml-1 text-gray-400"},Dt=["value"],Ft={class:"overflow-x-auto"},Lt={class:"w-full"},Nt={class:"divide-y divide-gray-100 dark:divide-gray-700"},zt={class:"px-4 py-3"},At={class:"flex items-center gap-3"},Ot={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0"},Tt={class:"text-xs font-bold text-white"},Vt={class:"min-w-0"},It={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},Ut={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},qt={class:"px-4 py-3"},Et={class:"text-sm text-gray-900 dark:text-white"},Jt={class:"px-4 py-3"},Mt={class:"flex items-center gap-2"},Ht={class:"px-4 py-3 text-right"},Kt={class:"text-sm font-semibold text-gray-900 dark:text-white"},Qt={class:"text-xs text-gray-500 ml-1"},Rt={class:"px-4 py-3"},Zt={class:"text-sm text-gray-600 dark:text-gray-400"},Gt={class:"px-4 py-3"},Pt={class:"text-sm text-gray-600 dark:text-gray-400"},Yt={class:"px-4 py-3"},Wt={class:"text-sm text-gray-600 dark:text-gray-400"},Xt={class:"px-4 py-3 text-center"},te={key:0,class:"py-16 text-center"},ee={class:"w-16 h-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4"},Se=Object.assign({layout:I},{__name:"Index",props:{subscriptions:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,active:0,trial:0,cancelled:0,expired:0,total_revenue:0,mrr:0})},plans:{type:Array,default:()=>[]}},setup(i){U();const x=i,c=p(""),g=p("all"),u=p("all"),m=p(!1),L=[{value:"all",label:"Barchasi",count:x.stats.total},{value:"active",label:"Faol",count:x.stats.active},{value:"trial",label:"Sinov",count:x.stats.trial},{value:"cancelled",label:"Bekor",count:x.stats.cancelled},{value:"expired",label:"Tugagan",count:x.stats.expired}],h=z(()=>{let s=x.subscriptions;if(c.value){const e=c.value.toLowerCase();s=s.filter(a=>a.business?.name?.toLowerCase().includes(e)||a.plan?.name?.toLowerCase().includes(e))}return g.value!=="all"&&(s=s.filter(e=>e.status===g.value)),u.value!=="all"&&(s=s.filter(e=>e.plan_id===u.value)),s}),f=s=>{const e={active:{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-400",label:"Faol"},trial:{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-400",label:"Sinov"},cancelled:{bg:"bg-red-500",text:"text-red-700 dark:text-red-400",label:"Bekor"},expired:{bg:"bg-gray-400",text:"text-gray-600 dark:text-gray-400",label:"Tugagan"},pending:{bg:"bg-amber-500",text:"text-amber-700 dark:text-amber-400",label:"Kutilmoqda"}};return e[s]||e.pending},v=s=>s?new Date(s).toLocaleDateString("uz-UZ",{day:"2-digit",month:"2-digit",year:"numeric"}):"—",k=s=>s?new Intl.NumberFormat("uz-UZ").format(s):"0",N=()=>{m.value=!0,V.reload({onFinish:()=>m.value=!1})};return(s,e)=>(o(),n(b,null,[l(d(T),{title:"Obunalar"}),t("div",H,[t("div",K,[t("div",Q,[t("div",null,[e[2]||(e[2]=t("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Obunalar",-1)),t("p",R,r(h.value.length)+" ta obuna",1)]),t("div",Z,[t("button",{onClick:N,disabled:m.value,class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"},[l(d(q),{class:y(["w-5 h-5",{"animate-spin":m.value}])},null,8,["class"])],8,G),t("button",P,[l(d(E),{class:"w-4 h-4"}),e[3]||(e[3]=w(" Export ",-1))])])]),t("div",Y,[t("div",W,[t("div",X,[t("div",tt,[l(d(S),{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]),t("div",null,[t("p",et,r(i.stats.total),1),e[4]||(e[4]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jami",-1))])])]),t("div",at,[t("div",rt,[t("div",st,[l(d(D),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})]),t("div",null,[t("p",dt,r(i.stats.active),1),e[5]||(e[5]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Faol",-1))])])]),t("div",lt,[t("div",ot,[t("div",it,[l(d(J),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),t("div",null,[t("p",nt,r(i.stats.trial),1),e[6]||(e[6]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Sinov",-1))])])]),t("div",xt,[t("div",ct,[t("div",gt,[l(d($),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),t("div",null,[t("p",ut,r(i.stats.cancelled),1),e[7]||(e[7]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Bekor",-1))])])]),t("div",mt,[t("div",pt,[t("div",yt,[l(d(F),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})]),t("div",null,[t("p",bt,r(k(i.stats.mrr)),1),e[8]||(e[8]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"MRR",-1))])])]),t("div",ht,[t("div",ft,[t("div",kt,[l(d(F),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),t("div",null,[t("p",_t,r(k(i.stats.total_revenue)),1),e[9]||(e[9]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jami daromad",-1))])])])]),t("div",vt,[t("div",wt,[t("div",jt,[t("div",Bt,[l(d(M),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),B(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),type:"text",placeholder:"Qidirish...",class:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[A,c.value]])]),t("div",Ct,[(o(),n(b,null,_(L,a=>t("button",{key:a.value,onClick:ae=>g.value=a.value,class:y(["px-3 py-1.5 text-xs font-medium rounded-md transition-all",g.value===a.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])},[w(r(a.label)+" ",1),t("span",$t,r(a.count),1)],10,St)),64))]),i.plans.length>0?B((o(),n("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),class:"px-3 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500"},[e[10]||(e[10]=t("option",{value:"all"},"Barcha tariflar",-1)),(o(!0),n(b,null,_(i.plans,a=>(o(),n("option",{key:a.id,value:a.id},r(a.name),9,Dt))),128))],512)),[[O,u.value]]):j("",!0)])]),t("div",Ft,[t("table",Lt,[e[11]||(e[11]=t("thead",null,[t("tr",{class:"bg-gray-50 dark:bg-gray-900/50"},[t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Biznes"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Tarif"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),t("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Narx"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Davr"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Boshlanish"),t("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Tugash"),t("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Auto")])],-1)),t("tbody",Nt,[(o(!0),n(b,null,_(h.value,a=>(o(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors"},[t("td",zt,[t("div",At,[t("div",Ot,[t("span",Tt,r(a.business?.name?.charAt(0)||"?"),1)]),t("div",Vt,[t("p",It,r(a.business?.name||"N/A"),1),t("p",Ut,r(a.business?.owner?.email||""),1)])])]),t("td",qt,[t("span",Et,r(a.plan?.name||"—"),1)]),t("td",Jt,[t("div",Mt,[t("span",{class:y(["w-2 h-2 rounded-full",f(a.status).bg])},null,2),t("span",{class:y(["text-sm font-medium",f(a.status).text])},r(f(a.status).label),3)])]),t("td",Ht,[t("span",Kt,r(k(a.amount)),1),t("span",Qt,r(a.currency),1)]),t("td",Rt,[t("span",Zt,r(a.billing_cycle==="monthly"?"Oylik":"Yillik"),1)]),t("td",Gt,[t("span",Pt,r(v(a.starts_at)),1)]),t("td",Yt,[t("span",Wt,r(v(a.ends_at)),1)]),t("td",Xt,[a.auto_renew?(o(),C(d(D),{key:0,class:"w-5 h-5 text-emerald-500 mx-auto"})):(o(),C(d($),{key:1,class:"w-5 h-5 text-gray-300 dark:text-gray-600 mx-auto"}))])]))),128))])])]),h.value.length===0?(o(),n("div",te,[t("div",ee,[l(d(S),{class:"w-8 h-8 text-gray-400"})]),e[12]||(e[12]=t("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-1"},"Obunalar topilmadi",-1)),e[13]||(e[13]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Hozircha hech qanday obuna mavjud emas",-1))])):j("",!0)])])])],64))}});export{Se as default};
