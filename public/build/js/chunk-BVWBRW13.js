import{C as o,z as e,F as s,b as ne,r as m,w as Y,o as de,e as ie,E as p,D as g,H as n,B as l,y as b,A as c,v as k,M as C,J as U,K as J,G as P,I as K,Q as ue,h as v,p as X}from"./chunk-KPSVwAyv.js";import{r as Q,a as V}from"./chunk-BVrjkT6E.js";import{a as R}from"./chunk-Ch0Q6XPl.js";import{r as ge}from"./chunk-CYw1XsNK.js";import{r as ce}from"./chunk-Cwn-ie4q.js";import{r as be}from"./chunk-CXygRKxK.js";import{r as xe}from"./chunk-CmNfLjGq.js";import{p as me,b as G,e as he}from"./chunk-C_PbB7ed.js";import{r as ve}from"./chunk-uNG5YCqx.js";import{r as ye}from"./chunk-Cs44MF5c.js";import{r as fe}from"./chunk-C1aowSOa.js";function pe(j,h){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"})])}const ke={class:"space-y-6"},we={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},_e={class:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3"},Ce={key:0,class:"inline-flex items-center justify-center px-2.5 py-1 text-sm font-bold bg-red-500 text-white rounded-full animate-pulse"},je=["disabled"],Be={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4"},Ie={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all cursor-pointer group"},Se={class:"flex items-center justify-between"},Me={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center group-hover:scale-110 transition-transform"},ze={class:"mt-3"},$e={class:"text-2xl font-bold text-gray-900 dark:text-white"},Te={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-green-300 dark:hover:border-green-600 transition-all cursor-pointer group"},Pe={class:"flex items-center justify-between"},Ve={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-100 to-emerald-200 dark:from-green-900/30 dark:to-emerald-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},He={class:"mt-3"},qe={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Ae={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-amber-300 dark:hover:border-amber-600 transition-all cursor-pointer group"},Fe={class:"flex items-center justify-between"},De={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-100 to-orange-200 dark:from-amber-900/30 dark:to-orange-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},Ee={class:"mt-3"},Ne={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},Oe={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all cursor-pointer group"},Le={class:"flex items-center justify-between"},Ye={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-100 to-slate-200 dark:from-gray-700 dark:to-slate-600 flex items-center justify-center group-hover:scale-110 transition-transform"},Ue={class:"mt-3"},Je={class:"text-2xl font-bold text-gray-600 dark:text-gray-400"},Ke={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-red-300 dark:hover:border-red-600 transition-all cursor-pointer group"},Xe={class:"flex items-center justify-between"},Qe={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-100 to-rose-200 dark:from-red-900/30 dark:to-rose-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},Re={class:"mt-3"},Ge={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Ze={class:"flex items-center justify-between"},We={class:"mt-3"},et={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},tt={class:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-sm",style:{height:"700px"}},rt={class:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3 bg-gray-50/50 dark:bg-gray-800/50"},at={class:"flex flex-wrap gap-2"},st={class:"relative"},ot={class:"flex-1 overflow-y-auto"},lt=["onClick"],nt={key:0,class:"absolute top-4 right-4 w-3 h-3 bg-blue-500 rounded-full animate-pulse ring-4 ring-blue-500/20"},dt={class:"flex items-start gap-3"},it={class:"relative flex-shrink-0"},ut={key:0,class:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"},gt={class:"flex-1 min-w-0"},ct={class:"flex items-center justify-between gap-2"},bt={class:"text-sm font-semibold text-gray-900 dark:text-white truncate"},xt={class:"flex-shrink-0 text-xs text-gray-400 dark:text-gray-500"},mt={key:0,class:"text-xs text-gray-400 dark:text-gray-500 truncate"},ht={class:"flex items-center gap-2 mt-2"},vt={key:0,class:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-bold bg-blue-500 text-white rounded-full"},yt={class:"text-xs text-gray-400 dark:text-gray-500"},ft={key:0,class:"flex flex-col items-center justify-center h-full p-8 text-center"},pt={class:"relative w-20 h-20 mb-4"},kt={class:"relative w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center"},wt={class:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-sm",style:{height:"700px"}},_t={key:0,class:"flex-1 flex flex-col items-center justify-center text-center p-8"},Ct={class:"relative w-24 h-24 mb-6"},jt={key:0,class:"flex-1 flex items-center justify-center"},Bt={class:"flex flex-col items-center gap-3"},It={class:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-gray-100/50 dark:from-gray-800/50 dark:to-gray-900/30"},St={key:0,class:"flex items-center justify-between"},Mt={class:"flex items-center gap-4"},zt={class:"relative"},$t={key:0,class:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"},Tt={class:"text-lg font-bold text-gray-900 dark:text-white"},Pt={class:"flex items-center gap-2 mt-0.5"},Vt={key:0,class:"text-sm text-blue-500 dark:text-blue-400"},Ht={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},qt={class:"text-sm text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1"},At={class:"flex items-center gap-3"},Ft={class:"p-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},Dt={class:"text-sm leading-relaxed whitespace-pre-wrap"},Et={key:0,class:"flex flex-col items-center justify-center h-full text-center"},Nt={class:"flex-shrink-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},Ot={type:"button",class:"p-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},Lt=["disabled"],Yt={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},ar={__name:"InboxIndex",props:{conversations:Array,stats:Object,filters:Object,currentBusiness:Object,panelType:{type:String,default:"business",validator:j=>["business","saleshead","operator"].includes(j)}},setup(j){const h=j,d=ne(()=>({business:{routePrefix:"business",buttonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30",filterActiveClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30",statsBorderHover:"hover:border-blue-300 dark:hover:border-blue-600",statsIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",statsIconColor:"text-blue-600 dark:text-blue-400",statsValueColor:"text-blue-600 dark:text-blue-400",emptyStatePulseBg:"bg-blue-500/20",emptyStateIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",emptyStateIconColor:"text-blue-500 dark:text-blue-400",loadingSpinnerColor:"text-blue-500",outboundMessageClass:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-br-md",outboundTimeClass:"text-blue-200",sendButtonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30"},saleshead:{routePrefix:"sales-head",buttonClass:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-emerald-500/30",filterActiveClass:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg shadow-emerald-500/30",statsBorderHover:"hover:border-emerald-300 dark:hover:border-emerald-600",statsIconBg:"bg-gradient-to-br from-emerald-100 to-teal-200 dark:from-emerald-900/30 dark:to-teal-800/30",statsIconColor:"text-emerald-600 dark:text-emerald-400",statsValueColor:"text-emerald-600 dark:text-emerald-400",emptyStatePulseBg:"bg-emerald-500/20",emptyStateIconBg:"bg-gradient-to-br from-emerald-100 to-teal-200 dark:from-emerald-900/30 dark:to-teal-800/30",emptyStateIconColor:"text-emerald-500 dark:text-emerald-400",loadingSpinnerColor:"text-emerald-500",outboundMessageClass:"bg-gradient-to-br from-emerald-600 to-teal-600 text-white rounded-br-md",outboundTimeClass:"text-emerald-200",sendButtonClass:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-emerald-500/30"},operator:{routePrefix:"operator",buttonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30",filterActiveClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30",statsBorderHover:"hover:border-blue-300 dark:hover:border-blue-600",statsIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",statsIconColor:"text-blue-600 dark:text-blue-400",statsValueColor:"text-blue-600 dark:text-blue-400",emptyStatePulseBg:"bg-blue-500/20",emptyStateIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",emptyStateIconColor:"text-blue-500 dark:text-blue-400",loadingSpinnerColor:"text-blue-500",outboundMessageClass:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-br-md",outboundTimeClass:"text-blue-200",sendButtonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30"}})[h.panelType]),y=m(null),i=m(null),f=m(""),w=m(!1),B=m(!1),I=m(!1),H=m(h.filters?.search||""),x=m({...h.filters}),S=m(null),M=m(h.conversations||[]),u=m(h.stats||{});let z=null,$=null,_=null;Y(()=>h.conversations,r=>{M.value=r||[]}),Y(()=>h.stats,r=>{u.value=r||{}});const A={render(){return v("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[v("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})])}},F={render(){return v("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[v("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})])}},Z={render(){return v("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[v("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})])}},W={render(){return v("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])}},q=r=>({instagram:A,telegram:F,facebook:Z})[r]||W,D=r=>({instagram:"bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400",telegram:"bg-gradient-to-br from-sky-400 to-blue-500",facebook:"bg-gradient-to-br from-blue-500 to-blue-600"})[r]||"bg-gradient-to-br from-gray-400 to-gray-500",E=r=>{const t={open:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",active:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",pending:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",closed:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400"};return t[r]||t.closed},N=r=>({open:"Ochiq",active:"Faol",pending:"Kutilmoqda",closed:"Yopilgan"})[r]||r,ee=()=>{B.value=!0,Q.reload({onFinish:()=>{B.value=!1}})},te=()=>{clearTimeout(_),_=setTimeout(()=>{T("search",H.value)},500)},T=(r,t)=>{x.value[r]=t,Q.get(route(`${d.value.routePrefix}.inbox.index`),x.value,{preserveState:!0,preserveScroll:!0})},O=async r=>{y.value=r,I.value=!0;try{const t=await V.get(route(`${d.value.routePrefix}.inbox.show`,r));i.value=t.data.conversation,await X(),L()}catch(t){console.error("Error loading conversation:",t)}finally{I.value=!1}},re=async()=>{if(!(!f.value.trim()||w.value)){w.value=!0;try{(await V.post(route(`${d.value.routePrefix}.inbox.send`,y.value),{message:f.value})).data.success&&(f.value="",await O(y.value))}catch(r){console.error("Error sending message:",r)}finally{w.value=!1}}},L=()=>{S.value&&(S.value.scrollTop=S.value.scrollHeight)},ae=async()=>{try{const r=new URLSearchParams;x.value.channel&&r.append("channel",x.value.channel),x.value.search&&r.append("search",x.value.search);const t=await V.get(route(`${d.value.routePrefix}.inbox.index`)+"?"+r.toString(),{headers:{Accept:"application/json"}});t.data.conversations&&(M.value=t.data.conversations),t.data.stats&&(u.value=t.data.stats)}catch(r){console.error("Error fetching conversations:",r)}},se=async()=>{if(!(!y.value||I.value))try{const r=await V.get(route(`${d.value.routePrefix}.inbox.show`,y.value));if(r.data.conversation){const t=i.value?.messages?.length||0,a=r.data.conversation.messages?.length||0;i.value=r.data.conversation,a>t&&(await X(),L())}}catch(r){console.error("Error fetching messages:",r)}},oe=()=>{z=setInterval(ae,5e3),$=setInterval(se,3e3)},le=()=>{z&&(clearInterval(z),z=null),$&&(clearInterval($),$=null)};return de(()=>{oe()}),ie(()=>{le(),_&&(clearTimeout(_),_=null)}),(r,t)=>(s(),o("div",ke,[e("div",we,[e("div",null,[e("h1",_e,[t[5]||(t[5]=p(" Yagona Inbox ",-1)),u.value.unread?.total>0?(s(),o("span",Ce,n(u.value.unread.total),1)):g("",!0)]),t[6]||(t[6]=e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Barcha kanallardan kelgan xabarlarni bir joyda boshqaring ",-1))]),e("button",{onClick:ee,disabled:B.value,class:l(["inline-flex items-center px-4 py-2.5 text-white text-sm font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50",d.value.buttonClass])},[(s(),o("svg",{class:l(["w-4 h-4 mr-2",B.value?"animate-spin":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),t[8]||(t[8]=p(" Yangilash ",-1))],10,je)]),e("div",Be,[e("div",Ie,[e("div",Se,[e("div",Me,[b(c(R),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})])]),e("div",ze,[e("p",$e,n(u.value.total),1),t[9]||(t[9]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Jami suhbatlar",-1))])]),e("div",Te,[e("div",Pe,[e("div",Ve,[b(c(pe),{class:"w-5 h-5 text-green-600 dark:text-green-400"})])]),e("div",He,[e("p",qe,n(u.value.open),1),t[10]||(t[10]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Ochiq",-1))])]),e("div",Ae,[e("div",Fe,[e("div",De,[b(c(ge),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})])]),e("div",Ee,[e("p",Ne,n(u.value.pending),1),t[11]||(t[11]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Kutilmoqda",-1))])]),e("div",Oe,[e("div",Le,[e("div",Ye,[b(c(ce),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})])]),e("div",Ue,[e("p",Je,n(u.value.closed),1),t[12]||(t[12]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Yopilgan",-1))])]),e("div",Ke,[e("div",Xe,[e("div",Qe,[b(c(be),{class:"w-5 h-5 text-red-600 dark:text-red-400"})])]),e("div",Re,[e("p",Ge,n(u.value.unread?.total||0),1),t[13]||(t[13]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"O'qilmagan",-1))])]),e("div",{class:l(["bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all cursor-pointer group",d.value.statsBorderHover])},[e("div",Ze,[e("div",{class:l(["w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",d.value.statsIconBg])},[b(c(xe),{class:l(["w-5 h-5",d.value.statsIconColor])},null,8,["class"])],2)]),e("div",We,[e("p",{class:l(["text-2xl font-bold",d.value.statsValueColor])},n(u.value.response_rate?.toFixed(1)||0)+"%",3),t[14]||(t[14]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Javob darajasi",-1))])],2)]),e("div",et,[e("div",tt,[e("div",rt,[e("div",at,[e("button",{onClick:t[0]||(t[0]=a=>T("channel",null)),class:l(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all",x.value.channel?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600":d.value.filterActiveClass])},[b(c(me),{class:"w-4 h-4 mr-1.5"}),t[15]||(t[15]=p(" Barchasi ",-1)),u.value.unread?.total>0?(s(),o("span",{key:0,class:l(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full",x.value.channel?"bg-red-500 text-white":"bg-white/20 text-white"])},n(u.value.unread.total),3)):g("",!0)],2),e("button",{onClick:t[1]||(t[1]=a=>T("channel","instagram")),class:l(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all",x.value.channel==="instagram"?"bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 text-white shadow-lg shadow-pink-500/30":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"])},[(s(),k(C(A),{class:"w-4 h-4 mr-1.5"})),t[16]||(t[16]=p(" Instagram ",-1)),(u.value.unread?.instagram||0)>0?(s(),o("span",{key:0,class:l(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full",x.value.channel==="instagram"?"bg-white/20 text-white":"bg-gradient-to-r from-purple-500 to-pink-500 text-white"])},n(u.value.unread.instagram),3)):g("",!0)],2),e("button",{onClick:t[2]||(t[2]=a=>T("channel","telegram")),class:l(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all",x.value.channel==="telegram"?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-500/30":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"])},[(s(),k(C(F),{class:"w-4 h-4 mr-1.5"})),t[17]||(t[17]=p(" Telegram ",-1)),(u.value.unread?.telegram||0)>0?(s(),o("span",{key:0,class:l(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full",x.value.channel==="telegram"?"bg-white/20 text-white":"bg-sky-500 text-white"])},n(u.value.unread.telegram),3)):g("",!0)],2)]),e("div",st,[b(c(ve),{class:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),U(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>H.value=a),onInput:te,type:"text",placeholder:"Mijoz nomi yoki telefon...",class:"w-full pl-10 pr-4 py-2.5 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:text-white dark:placeholder-gray-400 transition-all"},null,544),[[J,H.value]])])]),e("div",ot,[(s(!0),o(P,null,K(M.value,a=>(s(),o("div",{key:a.id,onClick:Ut=>O(a.id),class:l(["relative p-4 border-b border-gray-100 dark:border-gray-700/50 cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-gray-700/50",{"bg-blue-50/70 dark:bg-blue-900/20 border-l-4 border-l-blue-500":y.value===a.id}])},[a.is_unread?(s(),o("div",nt)):g("",!0),e("div",dt,[e("div",it,[e("div",{class:l(["w-12 h-12 rounded-full flex items-center justify-center shadow-md",D(a.channel)])},[(s(),k(C(q(a.channel)),{class:"w-6 h-6 text-white"}))],2),a.status==="open"?(s(),o("div",ut)):g("",!0)]),e("div",gt,[e("div",ct,[e("h4",bt,n(a.customer_name||"Noma'lum"),1),e("span",xt,n(a.last_message_time),1)]),a.customer_username?(s(),o("p",mt," @"+n(a.customer_username),1)):g("",!0),e("p",{class:l(["text-sm text-gray-600 dark:text-gray-400 truncate mt-1",{"font-medium text-gray-900 dark:text-white":a.is_unread}])},n(a.last_message||"Xabar yo'q"),3),e("div",ht,[e("span",{class:l(["inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full",E(a.status)])},n(N(a.status)),3),a.unread_count>0?(s(),o("span",vt,n(a.unread_count),1)):g("",!0),e("span",yt,n(a.message_count)+" xabar ",1)])])])],10,lt))),128)),M.value.length===0?(s(),o("div",ft,[e("div",pt,[t[18]||(t[18]=e("div",{class:"absolute inset-0 bg-gray-500/20 rounded-full animate-ping"},null,-1)),e("div",kt,[b(c(R),{class:"w-10 h-10 text-gray-400"})])]),t[19]||(t[19]=e("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"Suhbat topilmadi",-1)),t[20]||(t[20]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Hozircha hech qanday suhbat yo'q",-1))])):g("",!0)])]),e("div",wt,[y.value?(s(),o(P,{key:1},[I.value?(s(),o("div",jt,[e("div",Bt,[(s(),o("svg",{class:l(["w-8 h-8 animate-spin",d.value.loadingSpinnerColor]),fill:"none",viewBox:"0 0 24 24"},[...t[23]||(t[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],2)),t[24]||(t[24]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yuklanmoqda...",-1))])])):(s(),o(P,{key:1},[e("div",It,[i.value?(s(),o("div",St,[e("div",Mt,[e("div",zt,[e("div",{class:l(["w-14 h-14 rounded-full flex items-center justify-center shadow-lg",D(i.value.channel)])},[(s(),k(C(q(i.value.channel)),{class:"w-7 h-7 text-white"}))],2),i.value.status==="open"?(s(),o("div",$t)):g("",!0)]),e("div",null,[e("h3",Tt,n(i.value.customer?.name||"Noma'lum mijoz"),1),e("div",Pt,[i.value.customer?.username?(s(),o("span",Vt," @"+n(i.value.customer.username),1)):g("",!0),i.value.customer?.phone?(s(),o("span",Ht,n(i.value.customer.phone),1)):g("",!0),t[25]||(t[25]=e("span",{class:"text-gray-300 dark:text-gray-600"},"â€¢",-1)),e("span",qt,[(s(),k(C(q(i.value.channel)),{class:"w-3.5 h-3.5 text-gray-500"})),p(" "+n(i.value.channel),1)])])])]),e("div",At,[e("span",{class:l(["inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-full",E(i.value.status)])},n(N(i.value.status)),3),e("button",Ft,[b(c(ye),{class:"w-5 h-5"})])])])):g("",!0)]),e("div",{ref_key:"messagesContainer",ref:S,class:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900/50 dark:to-gray-800/50"},[(s(!0),o(P,null,K(i.value?.messages||[],a=>(s(),o("div",{key:a.id,class:l(["flex",a.direction==="outbound"?"justify-end":"justify-start"])},[e("div",{class:l(["max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-sm",a.direction==="outbound"?d.value.outboundMessageClass:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-bl-md shadow-md"])},[e("p",Dt,n(a.content),1),e("p",{class:l(["text-xs mt-1.5",a.direction==="outbound"?d.value.outboundTimeClass:"text-gray-400"])},n(a.human_time),3)],2)],2))),128)),i.value?.messages?.length?g("",!0):(s(),o("div",Et,[b(c(G),{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-3"}),t[26]||(t[26]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Xabarlar yo'q",-1))]))],512),e("div",Nt,[e("form",{onSubmit:ue(re,["prevent"]),class:"flex items-center gap-3"},[e("button",Ot,[b(c(he),{class:"w-5 h-5"})]),U(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>f.value=a),type:"text",placeholder:"Xabar yozish...",class:"flex-1 px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:text-white dark:placeholder-gray-400 text-sm transition-all"},null,512),[[J,f.value]]),e("button",{type:"submit",disabled:!f.value.trim()||w.value,class:l(["inline-flex items-center justify-center w-12 h-12 text-white rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",d.value.sendButtonClass])},[w.value?(s(),o("svg",Yt,[...t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),k(c(fe),{key:0,class:"w-5 h-5"}))],10,Lt)],32)])],64))],64)):(s(),o("div",_t,[e("div",Ct,[e("div",{class:l(["absolute inset-0 rounded-full animate-pulse",d.value.emptyStatePulseBg])},null,2),e("div",{class:l(["relative w-24 h-24 rounded-full flex items-center justify-center",d.value.emptyStateIconBg])},[b(c(G),{class:l(["w-12 h-12",d.value.emptyStateIconColor])},null,8,["class"])],2)]),t[21]||(t[21]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Suhbatni tanlang",-1)),t[22]||(t[22]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2 max-w-sm"}," Chap tarafdagi ro'yxatdan suhbatni tanlab, mijoz bilan muloqotni davom ettiring ",-1))]))])])]))}};export{ar as _};
