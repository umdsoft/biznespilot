import{r as e,b as t,v as a,x as r,z as s,D as l,L as d,y as o,A as n,H as i,I as g,K as u,J as c,E as y,F as p,G as x,B as b,M as k,C as m}from"./chunk-7Urb0kxg.js";import{l as h}from"./chunk-DKkye6wf.js";import{_ as v}from"./chunk-Dz-Ig_wG.js";import{r as f}from"./chunk-D4tA7yBb.js";import{r as w}from"./chunk-DncpFozA.js";import{r as _}from"./chunk-Di_ohWeo.js";import{r as j}from"./chunk-DUcDuGHI.js";import{r as C}from"./chunk-ab1b1Fp4.js";import{r as q}from"./chunk-afst19KZ.js";import{r as D}from"./chunk-DT9sT3ha.js";import{o as V}from"./chunk-Dm-LAqtr.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";const F={class:"mb-8"},H={class:"flex items-center justify-between flex-wrap gap-4"},L={class:"flex items-center gap-3"},M={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},T={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},U={class:"text-2xl font-bold text-gray-900 dark:text-white"},B={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},S={class:"text-2xl font-bold text-green-600"},J={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},K={class:"text-2xl font-bold text-blue-600"},N={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},R={class:"text-2xl font-bold text-amber-600"},z={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 mb-6"},G={class:"flex flex-wrap gap-4"},I={class:"flex items-center gap-2"},O={class:"flex-1 min-w-[200px]"},A={key:0,class:"space-y-4"},E={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},P={class:"flex items-center gap-3"},Y={class:"font-medium text-gray-900 dark:text-white"},$={class:"flex items-center gap-2 mt-1"},X={class:"text-xs text-gray-500 dark:text-gray-400"},Z={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},Q={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},W={class:"flex items-center gap-4"},ee={key:0,class:"flex items-center gap-1"},te={class:"text-right"},ae={class:"text-sm font-medium text-gray-900 dark:text-white"},re={class:"text-xs text-gray-500"},se=["onClick"],le={key:0,class:"p-4 bg-gray-50 dark:bg-gray-900/50"},de={key:0,class:"mb-4"},oe={class:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},ne={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ie={key:1,class:"mb-4"},ge={class:"space-y-2"},ue={class:"text-xs font-medium text-purple-600 mb-1"},ce={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},ye={key:2,class:"mb-4"},pe={class:"flex flex-wrap gap-2"},xe={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},be={class:"flex gap-2"},ke=["onClick"],me=["onClick"],he={class:"flex items-center gap-2"},ve={class:"flex gap-1"},fe=["onClick"],we={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center"},_e={key:2,class:"mt-6 flex justify-center"},je={class:"flex gap-1"},Ce={__name:"History",props:{generations:{type:Object,default:()=>({data:[]})},stats:{type:Object,default:()=>({total:0,published:0,total_tokens:0,total_cost:0})}},setup(Ce){const qe=Ce,De=e([]),Ve=e({status:"",content_type:"",date_from:"",date_to:"",search:""}),Fe={pending:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",generating:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",published:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",failed:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"},He={pending:q,generating:C,completed:j,published:_,failed:w},Le={post:"Post",story:"Story",reel:"Reel",ad:"Reklama",carousel:"Carousel",article:"Maqola"},Me={engage:"Faollashtirish",sell:"Sotish",educate:"Ta'lim",inspire:"Ilhomlantirish",announce:"E'lon",entertain:"Ko'ngil ochar"},Te=t(()=>{let e=[...qe.generations.data||[]];if(Ve.value.status&&(e=e.filter(e=>e.status===Ve.value.status)),Ve.value.content_type&&(e=e.filter(e=>e.content_type===Ve.value.content_type)),Ve.value.search){const t=Ve.value.search.toLowerCase();e=e.filter(e=>e.topic.toLowerCase().includes(t))}return Ve.value.date_from&&(e=e.filter(e=>new Date(e.created_at)>=new Date(Ve.value.date_from))),Ve.value.date_to&&(e=e.filter(e=>new Date(e.created_at)<=new Date(Ve.value.date_to))),e}),Ue=e=>e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e?.toString()||"0";return(e,t)=>(y(),a(v,{title:"Generatsiya Tarixi"},{default:r(()=>[s("div",F,[s("div",H,[s("div",null,[s("div",L,[o(n(h),{href:e.route("business.marketing.content-ai.index"),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all"},{default:r(()=>[o(n(f),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})]),_:1},8,["href"]),t[5]||(t[5]=s("div",null,[s("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"}," Generatsiya Tarixi "),s("p",{class:"mt-1 text-gray-600 dark:text-gray-400"}," Barcha yaratilgan kontentlar ")],-1))])])])]),s("div",M,[s("div",T,[t[6]||(t[6]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami generatsiya",-1)),s("p",U,i(Ce.stats.total),1)]),s("div",B,[t[7]||(t[7]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nashr qilingan",-1)),s("p",S,i(Ce.stats.published),1)]),s("div",J,[t[8]||(t[8]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami tokenlar",-1)),s("p",K,i(Ue(Ce.stats.total_tokens)),1)]),s("div",N,[t[9]||(t[9]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami xarajat",-1)),s("p",R,"$"+i(Ce.stats.total_cost?.toFixed(2)||"0.00"),1)])]),s("div",z,[s("div",G,[s("div",null,[g(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>Ve.value.status=e),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...t[10]||(t[10]=[s("option",{value:""},"Barcha holatlar",-1),s("option",{value:"completed"},"Yaratilgan",-1),s("option",{value:"published"},"Nashr qilingan",-1),s("option",{value:"failed"},"Xatolik",-1)])],512),[[u,Ve.value.status]])]),s("div",null,[g(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Ve.value.content_type=e),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...t[11]||(t[11]=[s("option",{value:""},"Barcha turlar",-1),s("option",{value:"post"},"Post",-1),s("option",{value:"story"},"Story",-1),s("option",{value:"reel"},"Reel",-1),s("option",{value:"ad"},"Reklama",-1)])],512),[[u,Ve.value.content_type]])]),s("div",I,[g(s("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>Ve.value.date_from=e),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[c,Ve.value.date_from]]),t[12]||(t[12]=s("span",{class:"text-gray-500"},"â€”",-1)),g(s("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>Ve.value.date_to=e),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[c,Ve.value.date_to]])]),s("div",O,[g(s("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>Ve.value.search=e),placeholder:"Mavzu bo'yicha qidirish...",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[c,Ve.value.search]])])])]),Te.value.length?(y(),l("div",A,[(y(!0),l(p,null,x(Te.value,e=>{return y(),l("div",{key:e.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},[s("div",E,[s("div",P,[s("div",{class:b(["w-10 h-10 rounded-lg flex items-center justify-center",Fe[e.status]])},[(y(),a(k(He[e.status]),{class:"w-5 h-5"}))],2),s("div",null,[s("h4",Y,i(e.topic),1),s("div",$,[s("span",X,i((r=e.created_at,new Date(r).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1),s("span",Z,i(Le[e.content_type]),1),s("span",Q,i(Me[e.purpose]),1)])])]),s("div",W,[e.rating?(y(),l("div",ee,[(y(),l(p,null,x(5,t=>o(n(D),{key:t,class:b(["w-4 h-4",t<=e.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))])):d("",!0),s("div",te,[s("p",ae,i(Ue(e.input_tokens+e.output_tokens))+" tokens ",1),s("p",re,"$"+i(e.cost_usd?.toFixed(4)||"0.0000"),1)]),s("button",{onClick:t=>(e=>{const t=De.value.indexOf(e);-1===t?De.value.push(e):De.value.splice(t,1)})(e.id),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all"},[o(n(V),{class:b(["w-5 h-5 text-gray-400 transition-transform",De.value.includes(e.id)?"rotate-180":""])},null,8,["class"])],8,se)])]),De.value.includes(e.id)?(y(),l("div",le,[e.generated_content?(y(),l("div",de,[t[13]||(t[13]=s("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Yaratilgan kontent:",-1)),s("div",oe,[s("p",ne,i(e.generated_content),1)])])):d("",!0),e.generated_variations?.length>1?(y(),l("div",ie,[t[14]||(t[14]=s("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Variantlar:",-1)),s("div",ge,[(y(!0),l(p,null,x(e.generated_variations,(e,t)=>(y(),l("div",{key:t,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},[s("p",ue,"Variant "+i(t+1),1),s("p",ce,i(e),1)]))),128))])])):d("",!0),e.generated_hashtags?.length?(y(),l("div",ye,[t[15]||(t[15]=s("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Hashtaglar:",-1)),s("div",pe,[(y(!0),l(p,null,x(e.generated_hashtags,e=>(y(),l("span",{key:e,class:"px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full"}," #"+i(e),1))),128))])])):d("",!0),s("div",xe,[s("div",be,[s("button",{onClick:t=>{return a=e.generated_content,void navigator.clipboard.writeText(a);var a},class:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"}," Nusxalash ",8,ke),"published"!==e.status?(y(),l("button",{key:0,onClick:t=>(async e=>{try{await axios.post(route("business.marketing.content-ai.history.rate",e.id),{status:"published"}),e.status="published"}catch(t){}})(e),class:"px-3 py-1.5 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-all"}," Nashr qilindi ",8,me)):d("",!0)]),s("div",he,[t[16]||(t[16]=s("span",{class:"text-sm text-gray-500"},"Baholash:",-1)),s("div",ve,[(y(),l(p,null,x(5,t=>s("button",{key:t,onClick:a=>(async(e,t)=>{try{await axios.post(route("business.marketing.content-ai.history.rate",e.id),{rating:t}),e.rating=t}catch(a){}})(e,t),class:"p-0.5 hover:scale-110 transition-transform"},[o(n(D),{class:b(["w-5 h-5",t<=(e.rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["class"])],8,fe)),64))])])])])):d("",!0)]);var r}),128))])):(y(),l("div",we,[o(n(q),{class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),t[18]||(t[18]=s("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Hali generatsiya yo'q",-1)),t[19]||(t[19]=s("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," Content AI orqali yangi kontent yarating va tarix shu yerda ko'rinadi. ",-1)),o(n(h),{href:e.route("business.marketing.content-ai.index"),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all"},{default:r(()=>[o(n(C),{class:"w-5 h-5"}),t[17]||(t[17]=m(" Kontent yaratish ",-1))]),_:1},8,["href"])])),Ce.generations.links?.length>3?(y(),l("div",_e,[s("nav",je,[(y(!0),l(p,null,x(Ce.generations.links,e=>(y(),a(n(h),{key:e.label,href:e.url||"#",class:b(["px-4 py-2 rounded-lg text-sm font-medium transition-all",e.active?"bg-purple-600 text-white":e.url?"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])):d("",!0)]),_:1}))}};export{Ce as default};
