import{b as e,D as t,z as r,B as a,L as s,H as l,A as o,E as d,d as n,a as i,r as u,v as c,x as g,y as m,I as p,K as v,F as y,G as x,J as k,C as b}from"./chunk-7Urb0kxg.js";import{l as h,r as f}from"./chunk-DKkye6wf.js";import{_ as w}from"./chunk-Bl8CqWc3.js";import{u as j}from"./app-DFslr8vl.js";import{_}from"./chunk-D2XW56yD.js";import{_ as z}from"./chunk-CxMKIFrN.js";import{r as C}from"./chunk-7wemFjG6.js";import{s as S}from"./chunk-Dm-LAqtr.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const M={class:"flex items-start gap-3"},B={class:"flex-1 min-w-0"},D={class:"flex items-center justify-between"},U={class:"font-semibold text-gray-900 truncate"},$={key:0,class:"text-xs text-gray-400"},L={class:"text-sm text-gray-600 mt-1 line-clamp-2"},V={class:"flex items-center gap-3 mt-2 text-xs text-gray-500"},q={key:0},A={key:1,class:"px-2 py-0.5 bg-gray-100 rounded"},I={__name:"AlertCard",props:{alert:{type:Object,required:!0}},emits:["click"],setup(n){const{t:i}=j(),u=n,c=e(()=>({warning:"border-yellow-200",error:"border-red-200",success:"border-green-200",info:"border-blue-200"}[u.alert.type]||"border-gray-200")),g=e(()=>({warning:"bg-yellow-100",error:"bg-red-100",success:"bg-green-100",info:"bg-blue-100"}[u.alert.type]||"bg-gray-100")),m=e(()=>({warning:"text-yellow-600",error:"text-red-600",success:"text-green-600",info:"text-blue-600"}[u.alert.type]||"text-gray-600")),p=e=>{if(!e)return"";const t=new Date(e),r=new Date-t,a=Math.floor(r/6e4),s=Math.floor(a/60),l=Math.floor(s/24);return a<1?i("dashboard.time.now"):a<60?i("dashboard.time.minutes_ago",{count:a}):s<24?i("dashboard.time.hours_ago",{count:s}):l<7?i("dashboard.time.days_ago",{count:l}):t.toLocaleDateString("uz-UZ")};return(e,u)=>(d(),t("div",{class:a(["bg-white rounded-lg border p-4 hover:shadow-md transition-shadow cursor-pointer",c.value]),onClick:u[0]||(u[0]=t=>e.$emit("click",n.alert))},[r("div",M,[r("div",{class:a([g.value,"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0"])},["warning"===n.alert.type?(d(),t("svg",{key:0,class:a(["w-5 h-5",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[1]||(u[1]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)])],2)):"error"===n.alert.type?(d(),t("svg",{key:1,class:a(["w-5 h-5",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[2]||(u[2]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)):"success"===n.alert.type?(d(),t("svg",{key:2,class:a(["w-5 h-5",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[3]||(u[3]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)):(d(),t("svg",{key:3,class:a(["w-5 h-5",m.value]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...u[4]||(u[4]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2))],2),r("div",B,[r("div",D,[r("h3",U,l(n.alert.title),1),n.alert.is_read?(d(),t("span",$,l(o(i)("dashboard.alert.read")),1)):s("",!0)]),r("p",L,l(n.alert.message),1),r("div",V,[n.alert.created_at?(d(),t("span",q,l(p(n.alert.created_at)),1)):s("",!0),n.alert.category?(d(),t("span",A,l(n.alert.category),1)):s("",!0)])])])],2))}},E={class:"flex items-center justify-between"},F={class:"text-xl font-semibold text-gray-800 dark:text-gray-200"},G={class:"py-6"},H={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},J={class:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6"},K={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},O={class:"text-sm text-gray-500 dark:text-gray-400"},R={class:"text-2xl font-bold text-gray-900 dark:text-white"},Z={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-red-200 dark:border-red-800"},N={class:"text-sm text-red-600 dark:text-red-400"},P={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Q={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-yellow-200 dark:border-yellow-800"},T={class:"text-sm text-yellow-600 dark:text-yellow-400"},W={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},X={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-green-200 dark:border-green-800"},Y={class:"text-sm text-green-600 dark:text-green-400"},ee={class:"text-2xl font-bold text-green-600 dark:text-green-400"},te={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 border border-gray-200 dark:border-gray-700"},re={class:"text-sm text-gray-500 dark:text-gray-400"},ae={class:"text-2xl font-bold text-gray-900 dark:text-white"},se={class:"flex flex-wrap gap-4 mb-6"},le={value:"all"},oe={value:"active"},de={value:"acknowledged"},ne={value:"resolved"},ie={value:"snoozed"},ue={value:"dismissed"},ce={value:"all"},ge={value:"critical"},me={value:"high"},pe={value:"medium"},ve={value:"low"},ye={value:"info"},xe={class:"space-y-4"},ke={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},be={class:"text-gray-500 dark:text-gray-400"},he={key:0,class:"mt-6"},fe={class:"p-6"},we={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},je={class:"mb-4"},_e={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},ze=["placeholder"],Ce={class:"flex justify-end space-x-3"},Se={class:"p-6"},Me={class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},Be={class:"mb-4"},De={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ue={value:1},$e={value:4},Le={value:24},Ve={value:72},qe={value:168},Ae={class:"flex justify-end space-x-3"},Ie=n({__name:"Index",props:{alerts:{},stats:{},filters:{}},setup(e){const{t:a}=j(),n=i({...e.filters}),M=u(!1),B=u(!1),D=u(null),U=u(""),$=u(24);function L(){f.get("/business/alerts",{status:"all"!==n.status?n.status:void 0,severity:"all"!==n.severity?n.severity:void 0},{preserveState:!0,preserveScroll:!0})}async function V(e){f.post(`/business/alerts/${e}/acknowledge`,{},{preserveScroll:!0})}function q(e){D.value=e,U.value="",M.value=!0}async function A(){D.value&&f.post(`/business/alerts/${D.value}/resolve`,{resolution:U.value},{preserveScroll:!0,onSuccess:()=>{M.value=!1,D.value=null}})}function Ie(e){D.value=e,$.value=24,B.value=!0}async function Ee(){D.value&&f.post(`/business/alerts/${D.value}/snooze`,{hours:$.value},{preserveScroll:!0,onSuccess:()=>{B.value=!1,D.value=null}})}async function Fe(e){confirm(a("alerts.dismiss.confirm"))&&f.post(`/business/alerts/${e}/dismiss`,{},{preserveScroll:!0})}return(i,u)=>(d(),c(w,{title:o(a)("alerts.title")},{header:g(()=>[r("div",E,[r("h2",F,l(o(a)("alerts.title")),1),m(o(h),{href:"/business/alerts/rules",class:"inline-flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:g(()=>[m(o(S),{class:"w-4 h-4 mr-2"}),b(" "+l(o(a)("alerts.rules")),1)]),_:1})])]),default:g(()=>[r("div",G,[r("div",H,[r("div",J,[r("div",K,[r("p",O,l(o(a)("alerts.stats.total")),1),r("p",R,l(e.stats.total),1)]),r("div",Z,[r("p",N,l(o(a)("alerts.stats.active")),1),r("p",P,l(e.stats.active),1)]),r("div",Q,[r("p",T,l(o(a)("alerts.stats.acknowledged")),1),r("p",W,l(e.stats.acknowledged),1)]),r("div",X,[r("p",Y,l(o(a)("alerts.stats.resolved")),1),r("p",ee,l(e.stats.resolved),1)]),r("div",te,[r("p",re,l(o(a)("alerts.stats.avg_time")),1),r("p",ae,l(e.stats.avg_resolution_time?e.stats.avg_resolution_time+" daq":"-"),1)])]),r("div",se,[p(r("select",{"onUpdate:modelValue":u[0]||(u[0]=e=>n.status=e),onChange:L,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[r("option",le,l(o(a)("alerts.filter.all_statuses")),1),r("option",oe,l(o(a)("alerts.filter.active")),1),r("option",de,l(o(a)("alerts.filter.acknowledged")),1),r("option",ne,l(o(a)("alerts.filter.resolved")),1),r("option",ie,l(o(a)("alerts.filter.snoozed")),1),r("option",ue,l(o(a)("alerts.filter.dismissed")),1)],544),[[v,n.status]]),p(r("select",{"onUpdate:modelValue":u[1]||(u[1]=e=>n.severity=e),onChange:L,class:"rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 text-sm"},[r("option",ce,l(o(a)("alerts.filter.all_severities")),1),r("option",ge,l(o(a)("alerts.filter.critical")),1),r("option",me,l(o(a)("alerts.filter.high")),1),r("option",pe,l(o(a)("alerts.filter.medium")),1),r("option",ve,l(o(a)("alerts.filter.low")),1),r("option",ye,l(o(a)("alerts.filter.info")),1)],544),[[v,n.severity]])]),r("div",xe,[(d(!0),t(y,null,x(e.alerts.data,e=>(d(),c(I,{key:e.id,alert:e,onAcknowledge:V,onResolve:q,onSnooze:Ie,onDismiss:Fe},null,8,["alert"]))),128)),0===e.alerts.data.length?(d(),t("div",ke,[m(o(C),{class:"w-12 h-12 mx-auto text-gray-400 mb-4"}),r("p",be,l(o(a)("alerts.empty")),1)])):s("",!0)]),e.alerts.last_page>1?(d(),t("div",he,[m(z,{links:e.alerts.links},null,8,["links"])])):s("",!0)])]),m(_,{show:M.value,onClose:u[4]||(u[4]=e=>M.value=!1)},{default:g(()=>[r("div",fe,[r("h3",we,l(o(a)("alerts.resolve.title")),1),r("div",je,[r("label",_e,l(o(a)("alerts.resolve.desc_label")),1),p(r("textarea",{"onUpdate:modelValue":u[2]||(u[2]=e=>U.value=e),rows:"3",class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300",placeholder:o(a)("alerts.resolve.placeholder")},null,8,ze),[[k,U.value]])]),r("div",Ce,[r("button",{onClick:u[3]||(u[3]=e=>M.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},l(o(a)("common.cancel")),1),r("button",{onClick:A,class:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg"},l(o(a)("alerts.resolve.submit")),1)])])]),_:1},8,["show"]),m(_,{show:B.value,onClose:u[7]||(u[7]=e=>B.value=!1)},{default:g(()=>[r("div",Se,[r("h3",Me,l(o(a)("alerts.snooze.title")),1),r("div",Be,[r("label",De,l(o(a)("alerts.snooze.duration")),1),p(r("select",{"onUpdate:modelValue":u[5]||(u[5]=e=>$.value=e),class:"w-full rounded-lg border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300"},[r("option",Ue,l(o(a)("alerts.snooze.1h")),1),r("option",$e,l(o(a)("alerts.snooze.4h")),1),r("option",Le,l(o(a)("alerts.snooze.1d")),1),r("option",Ve,l(o(a)("alerts.snooze.3d")),1),r("option",qe,l(o(a)("alerts.snooze.1w")),1)],512),[[v,$.value]])]),r("div",Ae,[r("button",{onClick:u[6]||(u[6]=e=>B.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},l(o(a)("common.cancel")),1),r("button",{onClick:Ee,class:"px-4 py-2 text-sm font-medium text-white bg-yellow-600 hover:bg-yellow-700 rounded-lg"},l(o(a)("alerts.snooze.submit")),1)])])]),_:1},8,["show"])]),_:1},8,["title"]))}});export{Ie as default};
