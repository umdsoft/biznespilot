import{r as m,v as Q,x as E,z as e,C as n,D as p,E as U,B as S,F as s,G as j,I as K,H as d,Q as $,J as o,K as g,L as b,R as _}from"./chunk-KPSVwAyv.js";import{r as x}from"./chunk-BVrjkT6E.js";import{_ as G}from"./chunk-Cy19HSui.js";import"./chunk-S7b6IQvx.js";import"./app-906_W7J6.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";const Z={class:"mb-8"},W={class:"flex items-center justify-between flex-wrap gap-4"},X={class:"border-b border-gray-200 dark:border-gray-700 mb-6"},ee={class:"flex gap-8"},te={key:0,class:"space-y-6"},ae={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},re={class:"overflow-x-auto"},le={class:"w-full"},oe={class:"divide-y divide-gray-200 dark:divide-gray-700"},se={class:"px-6 py-4"},ne={class:"font-medium text-gray-900 dark:text-white"},ie={class:"text-sm text-gray-500"},de={class:"px-6 py-4"},ue={class:"px-6 py-4 text-center font-medium"},pe={class:"px-6 py-4 text-center"},ge={class:"text-emerald-600 font-medium"},me={class:"px-6 py-4 text-center"},ye={class:"px-6 py-4 text-center"},be={class:"flex items-center justify-center gap-2"},xe=["onClick"],ve=["onClick"],ke={key:0},ce={key:1,class:"space-y-6"},fe={class:"flex justify-end mb-4"},_e={class:"grid gap-4"},we={class:"flex items-start justify-between"},he={class:"font-bold text-gray-900 dark:text-white"},qe={class:"text-sm text-gray-500 mt-1"},Ce={class:"mt-3 flex flex-wrap gap-2"},Ve={class:"px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-sm"},Se={class:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm"},ze={class:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-sm"},Be={class:"flex gap-2"},Me=["onClick"],Ue=["onClick"],je={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center text-gray-500 border border-gray-200 dark:border-gray-700"},Ke={key:2,class:"space-y-6"},$e={class:"flex justify-end mb-4"},Pe={class:"grid gap-4"},Ie={class:"flex items-start justify-between"},He={class:"flex items-center gap-2"},Le={class:"font-bold text-gray-900 dark:text-white"},Te={key:0,class:"px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded text-xs"},Fe={key:1,class:"px-2 py-0.5 bg-gray-100 text-gray-500 rounded text-xs"},Ae={class:"text-sm text-gray-500 mt-1"},De={class:"mt-3 flex flex-wrap gap-2"},Ne={class:"px-2 py-1 bg-red-100 text-red-700 rounded text-sm"},Je={class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm"},Oe={key:0,class:"px-2 py-1 bg-orange-100 text-orange-700 rounded text-sm"},Re={key:1,class:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm"},Ye={class:"flex gap-2"},Qe=["onClick"],Ee=["onClick"],Ge={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center text-gray-500 border border-gray-200 dark:border-gray-700"},Ze={key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},We={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},Xe={class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},et={class:"grid grid-cols-2 gap-4"},tt={class:"grid grid-cols-3 gap-4"},at={class:"flex items-center gap-2"},rt={class:"flex justify-end gap-3 pt-4"},lt={key:4,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},ot={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},st={class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},nt={class:"grid grid-cols-2 gap-4"},it={class:"grid grid-cols-2 gap-4"},dt={class:"grid grid-cols-2 gap-4"},ut={class:"flex items-end gap-4"},pt={class:"flex items-center gap-2"},gt={class:"flex items-center gap-2"},mt={class:"flex justify-end gap-3 pt-4"},yt={key:5,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},bt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},xt={class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},vt={class:"grid grid-cols-2 gap-4"},kt={class:"grid grid-cols-2 gap-4"},ct={key:0},ft={key:1},_t={class:"grid grid-cols-2 gap-4"},wt={class:"flex items-center gap-2"},ht={key:0},qt={class:"flex items-center gap-4"},Ct={class:"flex items-center gap-2"},Vt={class:"flex items-center gap-2"},St={class:"flex justify-end gap-3 pt-4"},zt={key:6,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Bt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-sm w-full p-6"},Mt={class:"text-gray-600 dark:text-gray-400 mb-6"},Ut={class:"flex justify-end gap-3"},la={__name:"Settings",props:{kpiSettings:Array,bonusSettings:Array,penaltyRules:Array,panelType:String},setup(v){const y=m("kpi"),k=m(!1),c=m(!1),f=m(!1),z=m(!1),w=m(null),h=m(null),q=m(null),C=m(null),P=m(""),u=m({name:"",description:"",kpi_type:"leads_converted",period_type:"monthly",target_min:0,measurement_unit:"count",weight:10,is_active:!0}),i=m({name:"",description:"",bonus_type:"fixed",base_amount:0,calculation_period:"monthly",min_kpi_score:80,min_working_days:20,requires_approval:!0,is_active:!0}),l=m({name:"",description:"",category:"performance",penalty_type:"fixed",penalty_amount:0,penalty_percentage:0,trigger_event:"",warning_before_penalty:!1,warnings_before_penalty:1,is_active:!0,allow_appeal:!0}),I=r=>r?new Intl.NumberFormat("uz-UZ").format(r)+" so'm":"0 so'm",H=r=>({leads_converted:"px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700",revenue:"px-2 py-1 rounded text-xs font-medium bg-blue-100 text-blue-700",deals_count:"px-2 py-1 rounded text-xs font-medium bg-purple-100 text-purple-700",calls_made:"px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-700",tasks_completed:"px-2 py-1 rounded text-xs font-medium bg-indigo-100 text-indigo-700",conversion_rate:"px-2 py-1 rounded text-xs font-medium bg-teal-100 text-teal-700",response_time:"px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700"})[r]||"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-700",L=r=>({leads_converted:"Konversiya",revenue:"Sotuv",deals_count:"Deallar",calls_made:"Qo'ng'iroqlar",tasks_completed:"Vazifalar",conversion_rate:"Konversiya %",response_time:"Javob vaqti"})[r]||r,T=r=>({crm_discipline:"CRM intizomi",performance:"Samaradorlik",attendance:"Davomat",customer_service:"Mijozlarga xizmat"})[r]||r,F=r=>r.penalty_type==="fixed"?I(r.penalty_amount):r.penalty_type==="percentage_of_bonus"?r.penalty_percentage+"% (bonus)":"Ogohlantirish",B=r=>{r==="kpi"?(w.value=null,u.value={name:"",description:"",kpi_type:"leads_converted",period_type:"monthly",target_min:0,measurement_unit:"count",weight:10,is_active:!0},k.value=!0):r==="bonus"?(h.value=null,i.value={name:"",description:"",bonus_type:"fixed",base_amount:0,calculation_period:"monthly",min_kpi_score:80,min_working_days:20,requires_approval:!0,is_active:!0},c.value=!0):r==="penalty"&&(q.value=null,l.value={name:"",description:"",category:"performance",penalty_type:"fixed",penalty_amount:0,penalty_percentage:0,trigger_event:"",warning_before_penalty:!1,warnings_before_penalty:1,is_active:!0,allow_appeal:!0},f.value=!0)},A=r=>{w.value=r,u.value={...r},k.value=!0},D=()=>{w.value?x.put(`/sales-head/sales-kpi/settings/${w.value.id}`,u.value,{onSuccess:()=>{k.value=!1}}):x.post("/sales-head/sales-kpi/settings/kpi",u.value,{onSuccess:()=>{k.value=!1}})},M=(r,t)=>{P.value=r,C.value=t,z.value=!0},N=()=>{const r={kpi:`/sales-head/sales-kpi/settings/${C.value.id}`,bonus:`/sales-head/sales-kpi/bonus-settings/${C.value.id}`,penalty:`/sales-head/sales-kpi/penalty-rules/${C.value.id}`};x.delete(r[P.value],{onSuccess:()=>{z.value=!1}})},J=r=>{h.value=r,i.value={...r},c.value=!0},O=()=>{h.value?x.put(`/sales-head/sales-kpi/bonus-settings/${h.value.id}`,i.value,{onSuccess:()=>{c.value=!1}}):x.post("/sales-head/sales-kpi/bonus-settings",i.value,{onSuccess:()=>{c.value=!1}})},R=r=>{q.value=r,l.value={...r},f.value=!0},Y=()=>{q.value?x.put(`/sales-head/sales-kpi/penalty-rules/${q.value.id}`,l.value,{onSuccess:()=>{f.value=!1}}):x.post("/sales-head/sales-kpi/penalty-rules",l.value,{onSuccess:()=>{f.value=!1}})};return(r,t)=>(s(),Q(G,{title:"KPI Sozlamalari"},{default:E(()=>[e("div",Z,[e("div",W,[t[39]||(t[39]=e("div",null,[e("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},"KPI Sozlamalari"),e("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"KPI, Bonus va Jarima qoidalarini sozlash")],-1)),e("button",{onClick:t[0]||(t[0]=a=>B("kpi")),class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2"},[...t[38]||(t[38]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" Yangi KPI qo'shish ",-1)])])])]),e("div",X,[e("nav",ee,[e("button",{onClick:t[1]||(t[1]=a=>y.value="kpi"),class:S(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",y.value==="kpi"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," KPI Sozlamalari ",2),e("button",{onClick:t[2]||(t[2]=a=>y.value="bonus"),class:S(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",y.value==="bonus"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Bonus Sozlamalari ",2),e("button",{onClick:t[3]||(t[3]=a=>y.value="penalty"),class:S(["pb-4 px-1 font-medium text-sm border-b-2 transition-colors",y.value==="penalty"?"border-emerald-500 text-emerald-600":"border-transparent text-gray-500 hover:text-gray-700"])}," Jarima Qoidalari ",2)])]),y.value==="kpi"?(s(),n("div",te,[e("div",ae,[e("div",re,[e("table",le,[t[43]||(t[43]=e("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Nomi"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Turi"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Maqsad"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Vazn"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Holat"),e("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Amal")])],-1)),e("tbody",oe,[(s(!0),n(j,null,K(v.kpiSettings,a=>(s(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[e("td",se,[e("div",ne,d(a.name),1),e("div",ie,d(a.description),1)]),e("td",de,[e("span",{class:S(H(a.kpi_type))},d(L(a.kpi_type)),3)]),e("td",ue,d(a.target_min)+" "+d(a.measurement_unit),1),e("td",pe,[e("span",ge,d(a.weight)+"%",1)]),e("td",me,[e("span",{class:S(a.is_active?"text-green-600":"text-gray-400")},d(a.is_active?"Faol":"Nofaol"),3)]),e("td",ye,[e("div",be,[e("button",{onClick:V=>A(a),class:"p-1 text-blue-600 hover:bg-blue-50 rounded"},[...t[40]||(t[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,xe),e("button",{onClick:V=>M("kpi",a),class:"p-1 text-red-600 hover:bg-red-50 rounded"},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ve)])])]))),128)),v.kpiSettings.length===0?(s(),n("tr",ke,[...t[42]||(t[42]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-gray-500"}," KPI sozlamalari topilmadi. Yangi KPI qo'shing yoki shablon tanlang. ",-1)])])):p("",!0)])])])])])):p("",!0),y.value==="bonus"?(s(),n("div",ce,[e("div",fe,[e("button",{onClick:t[4]||(t[4]=a=>B("bonus")),class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 flex items-center gap-2"},[...t[44]||(t[44]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" Yangi bonus qoidasi ",-1)])])]),e("div",_e,[(s(!0),n(j,null,K(v.bonusSettings,a=>(s(),n("div",{key:a.id,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},[e("div",we,[e("div",null,[e("h3",he,d(a.name),1),e("p",qe,d(a.description),1),e("div",Ce,[e("span",Ve," Min KPI: "+d(a.min_kpi_score)+"% ",1),e("span",Se," Summa: "+d(I(a.base_amount)),1),e("span",ze," Multiplier: "+d(a.multiplier)+"x ",1)])]),e("div",Be,[e("button",{onClick:V=>J(a),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg"},[...t[45]||(t[45]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Me),e("button",{onClick:V=>M("bonus",a),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[46]||(t[46]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ue)])])]))),128)),v.bonusSettings.length===0?(s(),n("div",je," Bonus qoidalari topilmadi. ")):p("",!0)])])):p("",!0),y.value==="penalty"?(s(),n("div",Ke,[e("div",$e,[e("button",{onClick:t[5]||(t[5]=a=>B("penalty")),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2"},[...t[47]||(t[47]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),U(" Yangi jarima qoidasi ",-1)])])]),e("div",Pe,[(s(!0),n(j,null,K(v.penaltyRules,a=>(s(),n("div",{key:a.id,class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},[e("div",Ie,[e("div",null,[e("div",He,[e("h3",Le,d(a.name),1),a.trigger_type==="auto"?(s(),n("span",Te,"Avtomatik")):p("",!0),a.is_active?p("",!0):(s(),n("span",Fe,"Nofaol"))]),e("p",Ae,d(a.description),1),e("div",De,[e("span",Ne,d(F(a)),1),e("span",Je,d(T(a.category)),1),a.warning_before_penalty?(s(),n("span",Oe,d(a.warnings_before_penalty)+" marta ogohlantirish ",1)):p("",!0),a.allow_appeal?(s(),n("span",Re," Shikoyat mumkin ")):p("",!0)])]),e("div",Ye,[e("button",{onClick:V=>R(a),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg"},[...t[48]||(t[48]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Qe),e("button",{onClick:V=>M("penalty",a),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg"},[...t[49]||(t[49]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Ee)])])]))),128)),v.penaltyRules.length===0?(s(),n("div",Ge," Jarima qoidalari topilmadi. ")):p("",!0)])])):p("",!0),k.value?(s(),n("div",Ze,[e("div",We,[e("h3",Xe,d(w.value?"KPI tahrirlash":"Yangi KPI qo'shish"),1),e("form",{onSubmit:$(D,["prevent"]),class:"space-y-4"},[e("div",null,[t[50]||(t[50]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nomi",-1)),o(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>u.value.name=a),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,u.value.name]])]),e("div",null,[t[51]||(t[51]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tavsif",-1)),o(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=a=>u.value.description=a),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,u.value.description]])]),e("div",et,[e("div",null,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"KPI turi",-1)),o(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>u.value.kpi_type=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[52]||(t[52]=[e("option",{value:"leads_converted"},"Sotuvga o'tgan lidlar",-1),e("option",{value:"revenue"},"Umumiy sotuv",-1),e("option",{value:"deals_count"},"Deallar soni",-1),e("option",{value:"calls_made"},"Qo'ng'iroqlar",-1),e("option",{value:"tasks_completed"},"Vazifalar",-1),e("option",{value:"conversion_rate"},"Konversiya %",-1),e("option",{value:"response_time"},"Javob vaqti",-1)])],512),[[b,u.value.kpi_type]])]),e("div",null,[t[55]||(t[55]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Davr",-1)),o(e("select",{"onUpdate:modelValue":t[9]||(t[9]=a=>u.value.period_type=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[54]||(t[54]=[e("option",{value:"daily"},"Kunlik",-1),e("option",{value:"weekly"},"Haftalik",-1),e("option",{value:"monthly"},"Oylik",-1)])],512),[[b,u.value.period_type]])])]),e("div",tt,[e("div",null,[t[56]||(t[56]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Maqsad",-1)),o(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>u.value.target_min=a),type:"number",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,u.value.target_min,void 0,{number:!0}]])]),e("div",null,[t[57]||(t[57]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Birlik",-1)),o(e("input",{"onUpdate:modelValue":t[11]||(t[11]=a=>u.value.measurement_unit=a),type:"text",placeholder:"ta, so'm, %",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,u.value.measurement_unit]])]),e("div",null,[t[58]||(t[58]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Vazn (%)",-1)),o(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>u.value.weight=a),type:"number",min:"1",max:"100",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,u.value.weight,void 0,{number:!0}]])])]),e("div",at,[o(e("input",{"onUpdate:modelValue":t[13]||(t[13]=a=>u.value.is_active=a),type:"checkbox",id:"is_active",class:"rounded"},null,512),[[_,u.value.is_active]]),t[59]||(t[59]=e("label",{for:"is_active",class:"text-sm text-gray-700 dark:text-gray-300"},"Faol",-1))]),e("div",rt,[e("button",{type:"button",onClick:t[14]||(t[14]=a=>k.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),t[60]||(t[60]=e("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Saqlash ",-1))])],32)])])):p("",!0),c.value?(s(),n("div",lt,[e("div",ot,[e("h3",st,d(h.value?"Bonus tahrirlash":"Yangi bonus qoidasi"),1),e("form",{onSubmit:$(O,["prevent"]),class:"space-y-4"},[e("div",null,[t[61]||(t[61]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nomi",-1)),o(e("input",{"onUpdate:modelValue":t[15]||(t[15]=a=>i.value.name=a),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,i.value.name]])]),e("div",null,[t[62]||(t[62]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tavsif",-1)),o(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>i.value.description=a),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,i.value.description]])]),e("div",nt,[e("div",null,[t[64]||(t[64]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Bonus turi",-1)),o(e("select",{"onUpdate:modelValue":t[17]||(t[17]=a=>i.value.bonus_type=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[63]||(t[63]=[e("option",{value:"fixed"},"Belgilangan summa",-1),e("option",{value:"revenue_percentage"},"Daromad foizi",-1),e("option",{value:"kpi_based"},"KPI asosida",-1),e("option",{value:"tiered"},"Bosqichli",-1)])],512),[[b,i.value.bonus_type]])]),e("div",null,[t[66]||(t[66]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Hisoblash davri",-1)),o(e("select",{"onUpdate:modelValue":t[18]||(t[18]=a=>i.value.calculation_period=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[65]||(t[65]=[e("option",{value:"monthly"},"Oylik",-1),e("option",{value:"quarterly"},"Choraklik",-1)])],512),[[b,i.value.calculation_period]])])]),e("div",it,[e("div",null,[t[67]||(t[67]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Asosiy summa",-1)),o(e("input",{"onUpdate:modelValue":t[19]||(t[19]=a=>i.value.base_amount=a),type:"number",min:"0",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,i.value.base_amount,void 0,{number:!0}]])]),e("div",null,[t[68]||(t[68]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Minimal KPI (%)",-1)),o(e("input",{"onUpdate:modelValue":t[20]||(t[20]=a=>i.value.min_kpi_score=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,i.value.min_kpi_score,void 0,{number:!0}]])])]),e("div",dt,[e("div",null,[t[69]||(t[69]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Minimal ish kunlari",-1)),o(e("input",{"onUpdate:modelValue":t[21]||(t[21]=a=>i.value.min_working_days=a),type:"number",min:"0",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,i.value.min_working_days,void 0,{number:!0}]])]),e("div",ut,[e("label",pt,[o(e("input",{"onUpdate:modelValue":t[22]||(t[22]=a=>i.value.requires_approval=a),type:"checkbox",class:"rounded"},null,512),[[_,i.value.requires_approval]]),t[70]||(t[70]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Tasdiqlash kerak",-1))])])]),e("div",gt,[o(e("input",{"onUpdate:modelValue":t[23]||(t[23]=a=>i.value.is_active=a),type:"checkbox",id:"bonus_is_active",class:"rounded"},null,512),[[_,i.value.is_active]]),t[71]||(t[71]=e("label",{for:"bonus_is_active",class:"text-sm text-gray-700 dark:text-gray-300"},"Faol",-1))]),e("div",mt,[e("button",{type:"button",onClick:t[24]||(t[24]=a=>c.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),t[72]||(t[72]=e("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Saqlash ",-1))])],32)])])):p("",!0),f.value?(s(),n("div",yt,[e("div",bt,[e("h3",xt,d(q.value?"Jarima tahrirlash":"Yangi jarima qoidasi"),1),e("form",{onSubmit:$(Y,["prevent"]),class:"space-y-4"},[e("div",null,[t[73]||(t[73]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nomi",-1)),o(e("input",{"onUpdate:modelValue":t[25]||(t[25]=a=>l.value.name=a),type:"text",required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,l.value.name]])]),e("div",null,[t[74]||(t[74]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Tavsif",-1)),o(e("textarea",{"onUpdate:modelValue":t[26]||(t[26]=a=>l.value.description=a),rows:"2",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,l.value.description]])]),e("div",vt,[e("div",null,[t[76]||(t[76]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Kategoriya",-1)),o(e("select",{"onUpdate:modelValue":t[27]||(t[27]=a=>l.value.category=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[75]||(t[75]=[e("option",{value:"crm_discipline"},"CRM intizomi",-1),e("option",{value:"performance"},"Samaradorlik",-1),e("option",{value:"attendance"},"Davomat",-1),e("option",{value:"customer_service"},"Mijozlarga xizmat",-1)])],512),[[b,l.value.category]])]),e("div",null,[t[78]||(t[78]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Jarima turi",-1)),o(e("select",{"onUpdate:modelValue":t[28]||(t[28]=a=>l.value.penalty_type=a),required:"",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[77]||(t[77]=[e("option",{value:"fixed"},"Belgilangan summa",-1),e("option",{value:"percentage_of_bonus"},"Bonus foizi",-1),e("option",{value:"warning_only"},"Faqat ogohlantirish",-1)])],512),[[b,l.value.penalty_type]])])]),e("div",kt,[l.value.penalty_type==="fixed"?(s(),n("div",ct,[t[79]||(t[79]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Summa",-1)),o(e("input",{"onUpdate:modelValue":t[29]||(t[29]=a=>l.value.penalty_amount=a),type:"number",min:"0",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,l.value.penalty_amount,void 0,{number:!0}]])])):p("",!0),l.value.penalty_type==="percentage_of_bonus"?(s(),n("div",ft,[t[80]||(t[80]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Foiz (%)",-1)),o(e("input",{"onUpdate:modelValue":t[30]||(t[30]=a=>l.value.penalty_percentage=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,l.value.penalty_percentage,void 0,{number:!0}]])])):p("",!0),e("div",null,[t[82]||(t[82]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Trigger hodisa",-1)),o(e("select",{"onUpdate:modelValue":t[31]||(t[31]=a=>l.value.trigger_event=a),class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},[...t[81]||(t[81]=[e("option",{value:""},"Qo'lda",-1),e("option",{value:"lead_not_contacted_24h"},"Lid 24 soat ichida kontakt qilinmadi",-1),e("option",{value:"lead_not_contacted_48h"},"Lid 48 soat ichida kontakt qilinmadi",-1),e("option",{value:"crm_not_filled"},"CRM to'ldirilmagan",-1),e("option",{value:"task_overdue"},"Vazifa muddati o'tdi",-1),e("option",{value:"task_overdue_3_days"},"Vazifa 3 kundan ortiq kechiktirildi",-1),e("option",{value:"low_kpi_3_days"},"KPI 3 kun ketma-ket past",-1),e("option",{value:"missed_call"},"O'tkazib yuborilgan qo'ng'iroq",-1),e("option",{value:"no_activity_24h"},"24 soat faoliyat yo'q",-1)])],512),[[b,l.value.trigger_event]])])]),e("div",_t,[e("div",wt,[o(e("input",{"onUpdate:modelValue":t[32]||(t[32]=a=>l.value.warning_before_penalty=a),type:"checkbox",id:"warning_before_penalty",class:"rounded"},null,512),[[_,l.value.warning_before_penalty]]),t[83]||(t[83]=e("label",{for:"warning_before_penalty",class:"text-sm text-gray-700 dark:text-gray-300"},"Avval ogohlantirish",-1))]),l.value.warning_before_penalty?(s(),n("div",ht,[t[84]||(t[84]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Ogohlantirish soni",-1)),o(e("input",{"onUpdate:modelValue":t[33]||(t[33]=a=>l.value.warnings_before_penalty=a),type:"number",min:"1",max:"5",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700"},null,512),[[g,l.value.warnings_before_penalty,void 0,{number:!0}]])])):p("",!0)]),e("div",qt,[e("label",Ct,[o(e("input",{"onUpdate:modelValue":t[34]||(t[34]=a=>l.value.is_active=a),type:"checkbox",class:"rounded"},null,512),[[_,l.value.is_active]]),t[85]||(t[85]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Faol",-1))]),e("label",Vt,[o(e("input",{"onUpdate:modelValue":t[35]||(t[35]=a=>l.value.allow_appeal=a),type:"checkbox",class:"rounded"},null,512),[[_,l.value.allow_appeal]]),t[86]||(t[86]=e("span",{class:"text-sm text-gray-700 dark:text-gray-300"},"Shikoyat qilish mumkin",-1))])]),e("div",St,[e("button",{type:"button",onClick:t[36]||(t[36]=a=>f.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),t[87]||(t[87]=e("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700"}," Saqlash ",-1))])],32)])])):p("",!0),z.value?(s(),n("div",zt,[e("div",Bt,[t[88]||(t[88]=e("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},"O'chirishni tasdiqlang",-1)),e("p",Mt,' "'+d(C.value?.name)+`" ni o'chirishni xohlaysizmi? `,1),e("div",Ut,[e("button",{onClick:t[37]||(t[37]=a=>z.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),e("button",{onClick:N,class:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700"}," O'chirish ")])])])):p("",!0)]),_:1}))}};export{la as default};
