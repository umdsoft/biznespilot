import{r as e,b as a,v as t,x as r,z as l,D as s,L as d,I as i,E as n,F as o,G as g,H as u,K as m,A as p,Q as c,J as x}from"./chunk-7Urb0kxg.js";import{r as b}from"./chunk-DKkye6wf.js";import{_ as y}from"./chunk-k4W8urQJ.js";import"./chunk-Dm-LAqtr.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";import"./chunk-DmCyVuil.js";import"./chunk-Be6I8nOg.js";import"./chunk-DpGbuIFK.js";import"./chunk-78n7fhob.js";const h={class:"mb-8"},v={class:"flex items-center justify-between flex-wrap gap-4"},k={class:"flex items-center gap-3"},f=["value"],w=["value"],j=["value"],_=["value"],S={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8"},q={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},M={class:"text-2xl font-bold text-gray-900 dark:text-white"},A={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},C={class:"text-2xl font-bold text-green-600"},z={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},U={class:"text-2xl font-bold text-yellow-600"},V={class:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700"},J={class:"text-2xl font-bold text-emerald-600"},B={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},D={class:"overflow-x-auto"},F={class:"w-full"},I={class:"bg-gray-50 dark:bg-gray-700/50"},E={class:"divide-y divide-gray-200 dark:divide-gray-700"},H={class:"px-6 py-4 whitespace-nowrap"},N={class:"flex items-center"},O={class:"w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-emerald-700 dark:text-emerald-400 font-medium"},T={class:"ml-3"},K={class:"font-medium text-gray-900 dark:text-white"},Y={class:"text-sm text-gray-500"},G={class:"flex flex-col items-center"},L={class:"font-medium text-gray-900 dark:text-white"},P={class:"text-xs text-gray-500"},Q={class:"px-6 py-4 text-center"},X=["onClick"],$={key:0},R=["colspan"],W={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},Z={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},ee={class:"text-gray-500 mb-4"},ae={class:"flex-1"},te={class:"font-medium text-gray-900 dark:text-white"},re={class:"text-sm text-gray-500"},le={class:"w-32"},se=["onUpdate:modelValue","placeholder"],de={class:"text-sm text-gray-500 w-12"},ie={class:"flex justify-end gap-3 pt-4"},ne={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"},oe={class:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl max-w-lg w-full p-6 max-h-[90vh] overflow-y-auto"},ge={class:"flex-1"},ue={class:"font-medium text-gray-900 dark:text-white"},me={class:"text-sm text-gray-500"},pe={class:"w-32"},ce=["onUpdate:modelValue","placeholder"],xe={class:"text-sm text-gray-500 w-12"},be={class:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"},ye={class:"text-sm text-yellow-700 dark:text-yellow-400"},he={class:"flex justify-end gap-3 pt-4"},ve={__name:"Targets",props:{teamMembers:Array,kpiSettings:Array,targets:Array,month:Number,year:Number,panelType:String},setup(ve){const ke=ve,fe=(new Date).getFullYear(),we=e(ke.month||(new Date).getMonth()+1),je=e(ke.year||fe),_e=e(!1),Se=e(!1),qe=e(null),Me=e({}),Ae=e({}),Ce=a(()=>new Set(ke.targets.map(e=>e.user_id)).size),ze=e=>["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"][e-1],Ue=(e,a)=>ke.targets.find(t=>t.user_id===e&&t.kpi_setting_id===a),Ve=()=>{b.get("/sales-head/sales-kpi/targets",{month:we.value,year:je.value},{preserveState:!0})},Je=()=>{Ae.value={},ke.kpiSettings.forEach(e=>{Ae.value[e.id]=e.target_value}),Se.value=!0},Be=()=>{b.post("/sales-head/sales-kpi/targets",{user_id:qe.value.id,month:we.value,year:je.value,targets:Me.value},{onSuccess:()=>{_e.value=!1}})},De=()=>{b.post("/sales-head/sales-kpi/targets/bulk",{month:we.value,year:je.value,targets:Ae.value},{onSuccess:()=>{Se.value=!1}})};return(e,a)=>(n(),t(y,{title:"Maqsadlar"},{default:r(()=>[l("div",h,[l("div",v,[a[4]||(a[4]=l("div",null,[l("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"},"Maqsadlar"),l("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Jamoa a'zolari uchun individual maqsadlarni belgilash")],-1)),l("div",k,[i(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>we.value=e),onChange:Ve,class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},[(n(),s(o,null,g(12,e=>l("option",{key:e,value:e},u(ze(e)),9,f)),64))],544),[[m,we.value]]),i(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>je.value=e),onChange:Ve,class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800"},[l("option",{value:p(fe)-1},u(p(fe)-1),9,w),l("option",{value:p(fe)},u(p(fe)),9,j),l("option",{value:p(fe)+1},u(p(fe)+1),9,_)],544),[[m,je.value]])])])]),l("div",S,[l("div",q,[a[5]||(a[5]=l("p",{class:"text-sm text-gray-500 mb-1"},"Jami xodimlar",-1)),l("p",M,u(ve.teamMembers.length),1)]),l("div",A,[a[6]||(a[6]=l("p",{class:"text-sm text-gray-500 mb-1"},"Maqsad belgilangan",-1)),l("p",C,u(Ce.value),1)]),l("div",z,[a[7]||(a[7]=l("p",{class:"text-sm text-gray-500 mb-1"},"Maqsad belgilanmagan",-1)),l("p",U,u(ve.teamMembers.length-Ce.value),1)]),l("div",V,[a[8]||(a[8]=l("p",{class:"text-sm text-gray-500 mb-1"},"Faol KPIlar",-1)),l("p",J,u(ve.kpiSettings.length),1)])]),l("div",B,[l("div",{class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},[a[9]||(a[9]=l("h3",{class:"font-semibold text-gray-900 dark:text-white"},"Jamoa maqsadlari",-1)),l("button",{onClick:Je,class:"px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 text-sm"}," Hammaga birdan belgilash ")]),l("div",D,[l("table",F,[l("thead",I,[l("tr",null,[a[10]||(a[10]=l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Xodim",-1)),(n(!0),s(o,null,g(ve.kpiSettings,e=>(n(),s("th",{key:e.id,class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},u(e.name),1))),128)),a[11]||(a[11]=l("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Amal",-1))])]),l("tbody",E,[(n(!0),s(o,null,g(ve.teamMembers,e=>{return n(),s("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("td",H,[l("div",N,[l("div",O,u((a=e.name,a?a.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase():"?")),1),l("div",T,[l("p",K,u(e.name),1),l("p",Y,u(e.position||"Operator"),1)])])]),(n(!0),s(o,null,g(ve.kpiSettings,a=>(n(),s("td",{key:a.id,class:"px-4 py-4 text-center"},[l("div",G,[l("span",L,u(Ue(e.id,a.id)?.target_value||"-"),1),l("span",P,u(a.measurement_unit),1)])]))),128)),l("td",Q,[l("button",{onClick:a=>(e=>{qe.value=e,Me.value={},ke.kpiSettings.forEach(a=>{const t=Ue(e.id,a.id);Me.value[a.id]=t?.target_value||a.target_value}),_e.value=!0})(e),class:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700"}," Tahrirlash ",8,X)])]);var a}),128)),0===ve.teamMembers.length?(n(),s("tr",$,[l("td",{colspan:ve.kpiSettings.length+2,class:"px-6 py-12 text-center text-gray-500"}," Jamoa a'zolari topilmadi ",8,R)])):d("",!0)])])])]),_e.value?(n(),s("div",W,[l("div",Z,[a[13]||(a[13]=l("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},"Maqsadlarni tahrirlash",-1)),l("p",ee,u(qe.value?.name)+" uchun "+u(ze(we.value))+" "+u(je.value),1),l("form",{onSubmit:c(Be,["prevent"]),class:"space-y-4"},[(n(!0),s(o,null,g(ve.kpiSettings,e=>(n(),s("div",{key:e.id,class:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[l("div",ae,[l("p",te,u(e.name),1),l("p",re,"Standart: "+u(e.target_value)+" "+u(e.measurement_unit),1)]),l("div",le,[i(l("input",{"onUpdate:modelValue":a=>Me.value[e.id]=a,type:"number",placeholder:e.target_value,class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-center"},null,8,se),[[x,Me.value[e.id],void 0,{number:!0}]])]),l("span",de,u(e.measurement_unit),1)]))),128)),l("div",ie,[l("button",{type:"button",onClick:a[2]||(a[2]=e=>_e.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),a[12]||(a[12]=l("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Saqlash ",-1))])],32)])])):d("",!0),Se.value?(n(),s("div",ne,[l("div",oe,[a[15]||(a[15]=l("h3",{class:"text-xl font-bold text-gray-900 dark:text-white mb-2"},"Ommaviy maqsad belgilash",-1)),a[16]||(a[16]=l("p",{class:"text-gray-500 mb-4"},"Barcha jamoa a'zolariga bir xil maqsadlarni belgilash",-1)),l("form",{onSubmit:c(De,["prevent"]),class:"space-y-4"},[(n(!0),s(o,null,g(ve.kpiSettings,e=>(n(),s("div",{key:e.id,class:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[l("div",ge,[l("p",ue,u(e.name),1),l("p",me,"Standart: "+u(e.target_value)+" "+u(e.measurement_unit),1)]),l("div",pe,[i(l("input",{"onUpdate:modelValue":a=>Ae.value[e.id]=a,type:"number",placeholder:e.target_value,class:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-center"},null,8,ce),[[x,Ae.value[e.id],void 0,{number:!0}]])]),l("span",xe,u(e.measurement_unit),1)]))),128)),l("div",be,[l("p",ye," Bu amal "+u(ve.teamMembers.length)+" ta xodimning "+u(ze(we.value))+" "+u(je.value)+" uchun maqsadlarini yangilaydi. ",1)]),l("div",he,[l("button",{type:"button",onClick:a[3]||(a[3]=e=>Se.value=!1),class:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}," Bekor qilish "),a[14]||(a[14]=l("button",{type:"submit",class:"px-4 py-2 rounded-lg bg-emerald-600 text-white hover:bg-emerald-700"}," Hammaga belgilash ",-1))])],32)])])):d("",!0)]),_:1}))}};export{ve as default};
