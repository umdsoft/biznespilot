import{h as $,a as m}from"./chunk-BVrjkT6E.js";import{_ as q}from"./chunk-BUfiL3-y.js";import{c as k,o as R,x as y}from"./chunk-S7b6IQvx.js";import{r as f}from"./chunk-CYw1XsNK.js";import{a as _}from"./chunk-D-7B8ZCD.js";import{r as w}from"./chunk-BlCINui_.js";import{a as B}from"./chunk-Dfha1x8d.js";import{r as x,o as z,v as H,x as S,y as a,z as t,A as r,C as i,E as C,B as K,F as l,D as M,H as s}from"./chunk-KPSVwAyv.js";import"./app-906_W7J6.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-J14gS6og.js";const N={class:"space-y-6"},D={class:"flex items-center justify-between"},Q=["disabled"],T={key:0,class:"flex items-center justify-center py-12"},V={key:1,class:"space-y-6"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},O={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},X={class:"flex items-center gap-3"},Y={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},A={class:"text-2xl font-bold text-gray-900 dark:text-white"},F={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},I={class:"flex items-center gap-3"},P={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},J={class:"text-2xl font-bold text-green-600"},G={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},L={class:"flex items-center gap-3"},U={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},W={class:"text-2xl font-bold text-blue-600"},Z={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},tt={class:"flex items-center gap-3"},et={class:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center"},st={class:"text-2xl font-bold text-yellow-600"},at={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},rt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},dt={class:"flex items-center gap-3 mb-4"},lt={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"},ot={key:0,class:"space-y-4"},it={class:"flex items-center justify-between"},nt={class:"text-2xl font-bold text-purple-600"},gt={class:"grid grid-cols-2 gap-3 text-sm"},xt={class:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg"},ct={class:"text-lg font-bold text-green-700 dark:text-green-300"},ut={class:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},pt={class:"text-lg font-bold text-red-700 dark:text-red-300"},mt={key:1,class:"text-gray-500 dark:text-gray-400 text-center py-4"},vt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},bt={class:"flex items-center gap-3 mb-4"},ht={class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"},kt={key:0,class:"space-y-4"},yt={class:"grid grid-cols-2 gap-3 text-sm"},ft={class:"bg-red-50 dark:bg-red-900/20 p-3 rounded-lg"},_t={class:"text-lg font-bold text-red-700 dark:text-red-300"},wt={class:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg"},Bt={class:"text-lg font-bold text-orange-700 dark:text-orange-300"},jt={class:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg"},$t={class:"text-lg font-bold text-yellow-700 dark:text-yellow-300"},qt={class:"bg-green-50 dark:bg-green-900/20 p-3 rounded-lg"},Rt={class:"text-lg font-bold text-green-700 dark:text-green-300"},zt={key:1,class:"text-gray-500 dark:text-gray-400 text-center py-4"},Ht={key:0,class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},St={class:"flex items-center gap-3 mb-4"},Ct={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},Kt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Mt={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},Nt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Dt={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},Qt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Tt={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},Vt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Et={class:"text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},Ot={class:"text-2xl font-bold text-gray-900 dark:text-white"},Xt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},Yt={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},At={href:"/hr/engagement",class:"flex items-center gap-3 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors"},Ft={href:"/hr/flight-risk",class:"flex items-center gap-3 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors"},It={href:"/hr/surveys",class:"flex items-center gap-3 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"},Pt={href:"/hr/attendance",class:"flex items-center gap-3 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors"},be={__name:"Index",props:{currentBusiness:Object},setup(j){const u=j,c=x(!0),o=x(null),v=x(null),p=x(null),n=x(null),g=x(null),b=async()=>{if(u.currentBusiness?.id){c.value=!0;try{const[d,e,h]=await Promise.all([m.get(`/api/v1/businesses/${u.currentBusiness.id}/hr/dashboard`).catch(()=>null),m.get(`/api/v1/businesses/${u.currentBusiness.id}/hr/engagement/statistics`).catch(()=>null),m.get(`/api/v1/businesses/${u.currentBusiness.id}/hr/flight-risk/statistics`).catch(()=>null)]);d?.data&&(o.value=d.data.data?.stats||d.data.stats,v.value=d.data.data?.attendance||d.data.attendance,p.value=d.data.data?.leave||d.data.leave),e?.data&&(n.value=e.data.data),h?.data&&(g.value=h.data.data)}catch(d){console.error("Error fetching report data:",d)}finally{c.value=!1}}};return z(b),(d,e)=>(l(),H(q,{title:"Hisobotlar"},{default:S(()=>[a(r($),{title:"HR Hisobotlar"}),t("div",N,[t("div",D,[e[1]||(e[1]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," HR Hisobotlar "),t("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Kadrlar bo'limi uchun umumiy hisobotlar va statistika ")],-1)),t("button",{onClick:b,disabled:c.value,class:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},[a(r(k),{class:K(["w-5 h-5",c.value?"animate-spin":""])},null,8,["class"]),e[0]||(e[0]=C(" Yangilash ",-1))],8,Q)]),c.value?(l(),i("div",T,[a(r(k),{class:"w-8 h-8 animate-spin text-purple-600"}),e[2]||(e[2]=t("span",{class:"ml-3 text-gray-500"},"Yuklanmoqda...",-1))])):(l(),i("div",V,[t("div",E,[t("div",O,[t("div",X,[t("div",Y,[a(r(R),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",null,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami xodimlar",-1)),t("p",A,s(o.value?.total_employees||0),1)])])]),t("div",F,[t("div",I,[t("div",P,[a(r(f),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[e[4]||(e[4]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bugun kelganlar",-1)),t("p",J,s(v.value?.today_present||0),1)])])]),t("div",G,[t("div",L,[t("div",U,[a(r(_),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Ta'tilda",-1)),t("p",W,s(p.value?.on_leave||0),1)])])]),t("div",Z,[t("div",tt,[t("div",et,[a(r(_),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kutilayotgan so'rovlar",-1)),t("p",st,s(p.value?.pending_requests||0),1)])])])]),t("div",at,[t("div",rt,[t("div",dt,[t("div",lt,[a(r(w),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),e[7]||(e[7]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Xodimlar Qiziqishi ",-1))]),n.value?(l(),i("div",ot,[t("div",it,[e[8]||(e[8]=t("span",{class:"text-gray-600 dark:text-gray-400"},"O'rtacha ball",-1)),t("span",nt,s(n.value.overview?.avg_score?.toFixed(1)||"N/A"),1)]),t("div",gt,[t("div",xt,[e[9]||(e[9]=t("div",{class:"text-green-600 dark:text-green-400 font-medium"},"Qiziqgan",-1)),t("div",ct,s((n.value.distribution?.highly_engaged?.count||0)+(n.value.distribution?.engaged?.count||0)),1)]),t("div",ut,[e[10]||(e[10]=t("div",{class:"text-red-600 dark:text-red-400 font-medium"},"Qiziqmagan",-1)),t("div",pt,s(n.value.distribution?.disengaged?.count||0),1)])])])):(l(),i("div",mt," Ma'lumot mavjud emas ")),e[11]||(e[11]=t("a",{href:"/hr/engagement",class:"mt-4 inline-flex items-center text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400"}," Batafsil ko'rish → ",-1))]),t("div",vt,[t("div",bt,[t("div",ht,[a(r(B),{class:"w-5 h-5 text-orange-600 dark:text-orange-400"})]),e[12]||(e[12]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Ketish Xavfi Tahlili ",-1))]),g.value?(l(),i("div",kt,[t("div",yt,[t("div",ft,[e[13]||(e[13]=t("div",{class:"text-red-600 dark:text-red-400 font-medium"},"Kritik",-1)),t("div",_t,s(g.value.by_level?.critical||0),1)]),t("div",wt,[e[14]||(e[14]=t("div",{class:"text-orange-600 dark:text-orange-400 font-medium"},"Yuqori",-1)),t("div",Bt,s(g.value.by_level?.high||0),1)]),t("div",jt,[e[15]||(e[15]=t("div",{class:"text-yellow-600 dark:text-yellow-400 font-medium"},"O'rtacha",-1)),t("div",$t,s(g.value.by_level?.medium||0),1)]),t("div",qt,[e[16]||(e[16]=t("div",{class:"text-green-600 dark:text-green-400 font-medium"},"Past",-1)),t("div",Rt,s(g.value.by_level?.low||0),1)])])])):(l(),i("div",zt," Ma'lumot mavjud emas ")),e[17]||(e[17]=t("a",{href:"/hr/flight-risk",class:"mt-4 inline-flex items-center text-sm text-orange-600 hover:text-orange-800 dark:text-orange-400"}," Batafsil ko'rish → ",-1))])]),o.value?.departments?(l(),i("div",Ht,[t("div",St,[t("div",Ct,[a(r(y),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),e[18]||(e[18]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"}," Bo'limlar bo'yicha taqsimot ",-1))]),t("div",Kt,[t("div",Mt,[t("div",Nt,s(o.value.departments?.sales||0),1),e[19]||(e[19]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Sotuv",-1))]),t("div",Dt,[t("div",Qt,s(o.value.departments?.marketing||0),1),e[20]||(e[20]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Marketing",-1))]),t("div",Tt,[t("div",Vt,s(o.value.departments?.finance||0),1),e[21]||(e[21]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"Moliya",-1))]),t("div",Et,[t("div",Ot,s(o.value.departments?.hr||0),1),e[22]||(e[22]=t("div",{class:"text-sm text-gray-500 dark:text-gray-400"},"HR",-1))])])])):M("",!0),t("div",Xt,[e[27]||(e[27]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Tezkor havolalar ",-1)),t("div",Yt,[t("a",At,[a(r(w),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"}),e[23]||(e[23]=t("span",{class:"font-medium text-purple-700 dark:text-purple-300"},"Ishga Qiziqish",-1))]),t("a",Ft,[a(r(B),{class:"w-6 h-6 text-orange-600 dark:text-orange-400"}),e[24]||(e[24]=t("span",{class:"font-medium text-orange-700 dark:text-orange-300"},"Ketish Xavfi",-1))]),t("a",It,[a(r(y),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"}),e[25]||(e[25]=t("span",{class:"font-medium text-blue-700 dark:text-blue-300"},"So'rovnomalar",-1))]),t("a",Pt,[a(r(f),{class:"w-6 h-6 text-green-600 dark:text-green-400"}),e[26]||(e[26]=t("span",{class:"font-medium text-green-700 dark:text-green-300"},"Davomat",-1))])])])]))])]),_:1}))}};export{be as default};
