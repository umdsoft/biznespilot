import{r as e,o as a,v as s,x as t,y as l,z as r,A as o,C as i,D as n,L as u,I as c,R as d,E as p,J as m,H as g,F as b,G as f}from"./chunk-7Urb0kxg.js";import{b as h,h as v}from"./chunk-DKkye6wf.js";import{_ as x}from"./chunk-BB8-4400.js";import{u as y}from"./app-DFslr8vl.js";import{r as k}from"./chunk-ab1b1Fp4.js";import{r as _}from"./chunk-IpnqR3t9.js";import{r as w}from"./chunk-DUcDuGHI.js";import{a as j}from"./chunk-C1ExV0Y3.js";import{e as q}from"./chunk-Dm-LAqtr.js";import{r as z}from"./chunk-ujXbNZhL.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const A={class:"py-12"},S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I={class:"mb-8"},T={class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},V={class:"bg-white rounded-xl shadow-md p-6 mb-6"},C={class:"flex items-center gap-3 mb-6"},U={class:"space-y-6"},X={class:"flex items-center justify-between p-4 bg-purple-50 rounded-lg"},B={class:"relative inline-flex items-center cursor-pointer"},J={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},O={class:"relative inline-flex items-center cursor-pointer"},K={key:0},F={class:"block text-sm font-medium text-gray-700 mb-2"},N={class:"border-t pt-6"},W={class:"space-y-3"},D={class:"flex items-center"},E={class:"flex items-center"},R={class:"flex items-center"},Y={class:"border-t pt-6"},$={class:"flex items-center justify-between mb-4"},L={class:"relative inline-flex items-center cursor-pointer"},M={key:0,class:"grid grid-cols-2 gap-4"},P={key:1,class:"mt-4"},Q={class:"mt-6 flex items-center gap-4"},G=["disabled"],H={key:0,class:"flex items-center gap-2 text-green-600"},Z={class:"bg-white rounded-xl shadow-md p-6"},ee={class:"flex items-center gap-3 mb-6"},ae={class:"space-y-3 mb-6"},se={class:"flex-1"},te={class:"text-sm font-medium text-gray-700"},le={class:"text-purple-600"},re={class:"text-sm text-gray-600 mt-1"},oe=["onClick"],ie={class:"border-t pt-6"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},ue={class:"flex gap-4"},ce=["disabled"],de={__name:"WhatsAppAI",setup(de){y();const pe=h(),me=pe.props.currentBusiness||pe.props.auth?.currentBusiness,ge=e({is_active:!0,ai_enabled:!0,auto_greet:!0,greeting_message:"Assalomu alaykum! Bizga xush kelibsiz. Sizga qanday yordam bera olamiz?",fallback_message:"Kechirasiz, savol tushunilmadi. Iltimos, boshqacha so'rang.",outside_hours_message:"Ish vaqti tugadi. Ish kunlari 9:00-18:00 da ishlmaymiz.",business_hours_enabled:!1,business_hours_start:"09:00",business_hours_end:"18:00",lead_auto_create:!0,ai_creativity_level:7,use_dream_buyer_context:!0,use_offer_context:!0}),be=e(!1),fe=e(!1),he=e([{id:1,trigger:"salom",response:"Assalomu alaykum! Sizga qanday yordam bera olamiz?"},{id:2,trigger:"narx",response:"Takliflarimiz haqida ma'lumot olish uchun telefon raqamingizni qoldiring."},{id:3,trigger:"xarid",response:"Xarid uchun operator bilan bog'lanamiz. Bir daqiqa kuting."}]),ve=e({trigger:"",response:""}),xe=async()=>{be.value=!0,fe.value=!1;try{const e=await fetch(`/api/whatsapp/${me.id}/ai-config`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(ge.value)}),a=await e.json();a.success?(fe.value=!0,setTimeout(()=>fe.value=!1,3e3)):alert("Xatolik: "+a.message)}catch(e){alert("Xatolik: "+e.message)}finally{be.value=!1}},ye=()=>{ve.value.trigger&&ve.value.response&&(he.value.push({id:Date.now(),...ve.value}),ve.value={trigger:"",response:""})},ke=async()=>{be.value=!0;try{const e=await fetch(`/api/whatsapp/${me.id}/ai-templates`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({templates:he.value})}),a=await e.json();a.success?alert("Templatelar saqlandi!"):alert("Xatolik: "+a.message)}catch(e){alert("Xatolik: "+e.message)}finally{be.value=!1}};return a(()=>{(async()=>{be.value=!0;try{const e=await fetch(`/api/whatsapp/${me.id}/ai-config`),a=await e.json();a.success&&(ge.value={...ge.value,...a.config},a.templates&&(he.value=a.templates))}catch(e){}finally{be.value=!1}})()}),(e,a)=>(p(),s(x,{title:"WhatsApp AI Settings"},{default:t(()=>[l(o(v),{title:"WhatsApp AI Configuration"}),r("div",A,[r("div",S,[r("div",I,[r("h1",T,[l(o(k),{class:"w-10 h-10 text-purple-600"}),a[14]||(a[14]=i(" WhatsApp AI Chatbot Configuration ",-1))]),a[15]||(a[15]=r("p",{class:"mt-2 text-gray-600"}," AI-powered avtomatik javoblar va mijozlar bilan muloqot sozlamalari ",-1))]),r("div",V,[r("div",C,[l(o(_),{class:"w-6 h-6 text-gray-700"}),a[16]||(a[16]=r("h2",{class:"text-xl font-bold text-gray-900"},"Asosiy Sozlamalar",-1))]),r("div",U,[r("div",X,[a[18]||(a[18]=r("div",null,[r("h3",{class:"font-semibold text-gray-900"},"AI Chatbot Yoqish"),r("p",{class:"text-sm text-gray-600"},"Xabarlarga avtomatik AI javoblar berish")],-1)),r("label",B,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>ge.value.ai_enabled=e),class:"sr-only peer"},null,512),[[d,ge.value.ai_enabled]]),a[17]||(a[17]=r("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),r("div",J,[a[20]||(a[20]=r("div",null,[r("h3",{class:"font-semibold text-gray-900"},"Avtomatik Salomlashish"),r("p",{class:"text-sm text-gray-600"},"Yangi mijozlarga avtomatik salom berish")],-1)),r("label",O,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>ge.value.auto_greet=e),class:"sr-only peer"},null,512),[[d,ge.value.auto_greet]]),a[19]||(a[19]=r("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),ge.value.auto_greet?(p(),n("div",K,[a[21]||(a[21]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Salomlashish Xabari ",-1)),c(r("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>ge.value.greeting_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ge.value.greeting_message]])])):u("",!0),r("div",null,[r("label",F," AI Ijodkorlik Darajasi: "+g(ge.value.ai_creativity_level)+"/10 ",1),c(r("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=e=>ge.value.ai_creativity_level=e),min:"1",max:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"},null,512),[[m,ge.value.ai_creativity_level]]),a[22]||(a[22]=r("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[r("span",null,"Aniq javoblar"),r("span",null,"Ijodiy javoblar")],-1))]),r("div",N,[a[26]||(a[26]=r("h3",{class:"font-semibold text-gray-900 mb-4"},"Kontekst Sozlamalari",-1)),r("div",W,[r("div",D,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>ge.value.use_dream_buyer_context=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,ge.value.use_dream_buyer_context]]),a[23]||(a[23]=r("label",{class:"ml-2 text-sm text-gray-700"}," Ideal Mijoz ma'lumotlaridan foydalanish ",-1))]),r("div",E,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>ge.value.use_offer_context=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,ge.value.use_offer_context]]),a[24]||(a[24]=r("label",{class:"ml-2 text-sm text-gray-700"}," Aktiv Takliflar haqida ma'lumot berish ",-1))]),r("div",R,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>ge.value.lead_auto_create=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,ge.value.lead_auto_create]]),a[25]||(a[25]=r("label",{class:"ml-2 text-sm text-gray-700"}," Avtomatik Lead yaratish (xarid bosqichida) ",-1))])])]),r("div",Y,[r("div",$,[a[28]||(a[28]=r("h3",{class:"font-semibold text-gray-900"},"Ish Vaqti",-1)),r("label",L,[c(r("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=e=>ge.value.business_hours_enabled=e),class:"sr-only peer"},null,512),[[d,ge.value.business_hours_enabled]]),a[27]||(a[27]=r("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),ge.value.business_hours_enabled?(p(),n("div",M,[r("div",null,[a[29]||(a[29]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Boshlanish ",-1)),c(r("input",{type:"time","onUpdate:modelValue":a[8]||(a[8]=e=>ge.value.business_hours_start=e),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ge.value.business_hours_start]])]),r("div",null,[a[30]||(a[30]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tugash ",-1)),c(r("input",{type:"time","onUpdate:modelValue":a[9]||(a[9]=e=>ge.value.business_hours_end=e),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ge.value.business_hours_end]])])])):u("",!0),ge.value.business_hours_enabled?(p(),n("div",P,[a[31]||(a[31]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ish vaqtidan tashqari xabar ",-1)),c(r("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>ge.value.outside_hours_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ge.value.outside_hours_message]])])):u("",!0)]),r("div",null,[a[32]||(a[32]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fallback Xabar (AI javob bera olmasa) ",-1)),c(r("textarea",{"onUpdate:modelValue":a[11]||(a[11]=e=>ge.value.fallback_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ge.value.fallback_message]])])]),r("div",Q,[r("button",{onClick:xe,disabled:be.value,class:"px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-semibold rounded-lg transition-colors"},g(be.value?"Saqlanmoqda...":"Sozlamalarni Saqlash"),9,G),fe.value?(p(),n("div",H,[l(o(w),{class:"w-5 h-5"}),a[33]||(a[33]=r("span",{class:"font-medium"},"Saqlandi!",-1))])):u("",!0)])]),r("div",Z,[r("div",ee,[l(o(j),{class:"w-6 h-6 text-gray-700"}),a[34]||(a[34]=r("h2",{class:"text-xl font-bold text-gray-900"},"Tez Javob Templatelar",-1))]),r("div",ae,[(p(!0),n(b,null,f(he.value,e=>(p(),n("div",{key:e.id,class:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg"},[r("div",se,[r("div",te,[a[35]||(a[35]=i(" Trigger: ",-1)),r("span",le,g(e.trigger),1)]),r("div",re,g(e.response),1)]),r("button",{onClick:a=>{return s=e.id,void(he.value=he.value.filter(e=>e.id!==s));var s},class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[l(o(q),{class:"w-5 h-5"})],8,oe)]))),128))]),r("div",ie,[a[39]||(a[39]=r("h3",{class:"font-semibold text-gray-900 mb-4"},"Yangi Template Qo'shish",-1)),r("div",ne,[r("div",null,[a[36]||(a[36]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Trigger Kalit So'z ",-1)),c(r("input",{"onUpdate:modelValue":a[12]||(a[12]=e=>ve.value.trigger=e),type:"text",placeholder:"masalan: narx, xarid",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ve.value.trigger]])]),r("div",null,[a[37]||(a[37]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Javob Matni ",-1)),c(r("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>ve.value.response=e),type:"text",placeholder:"Javob xabari",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,ve.value.response]])])]),r("div",ue,[r("button",{onClick:ye,class:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors gap-2"},[l(o(z),{class:"w-5 h-5"}),a[38]||(a[38]=i(" Template Qo'shish ",-1))]),r("button",{onClick:ke,disabled:be.value,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-semibold rounded-lg transition-colors"}," Barchasini Saqlash ",8,ce)])])])])])]),_:1}))}};export{de as default};
