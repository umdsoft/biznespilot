import{r as u,D as x,z as e,y as h,x as p,C as _,H as s,A as r,L as f,I as w,J as C,E as b}from"./chunk-BcTZxe-J.js";import{l as y,a as B,r as T}from"./chunk-BYRtWSr0.js";import{u as j}from"./app-DWC75jbx.js";const V={class:"max-w-2xl mx-auto"},z={class:"mb-8"},M={class:"text-3xl font-bold text-gray-900 dark:text-white"},N={class:"mt-2 text-gray-500 dark:text-gray-400"},S={class:"space-y-6"},A={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},I={class:"p-6"},D={class:"flex items-start gap-4"},H={class:"flex-1"},E={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},L={class:"text-gray-600 dark:text-gray-400 mb-4"},U={class:"bg-gray-50 dark:bg-gray-700/50 rounded-xl p-4 space-y-2 text-sm"},q={class:"text-gray-700 dark:text-gray-300"},G={class:"text-gray-700 dark:text-gray-300"},J={class:"text-gray-700 dark:text-gray-300"},O={class:"text-gray-700 dark:text-gray-300"},R={class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},F={class:"p-6"},K={class:"flex items-start gap-4"},P={class:"flex-1"},Q={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},W={class:"text-gray-600 dark:text-gray-400 mb-4"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Y={key:0,class:"mt-2 text-sm text-red-600 dark:text-red-400"},Z={key:0,class:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-2xl border border-green-200 dark:border-green-800 overflow-hidden"},$={class:"p-6"},ee={class:"flex items-center gap-4"},te={class:"text-sm text-green-600 dark:text-green-400 font-medium mb-1"},se={class:"text-xl font-bold text-gray-900 dark:text-white"},re={class:"text-gray-600 dark:text-gray-400"},ae={class:"flex justify-end gap-4"},oe=["disabled"],le={key:0,class:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24"},ce={__name:"TelegramBotCreate",props:{panelType:{type:String,default:"business",validator:m=>["business","marketing"].includes(m)}},setup(m){const{t:a}=j(),k=m,n=u(""),d=u(null),i=u(!1),l=u(""),c=(o,t=null)=>{const g=k.panelType==="business"?"business.":"marketing.";return t?route(g+o,t):route(g+o)},v=async()=>{if(n.value){i.value=!0,l.value="",d.value=null;try{const t=(await B.post(c("telegram-funnels.store"),{bot_token:n.value})).data;t.success?(d.value=t.bot,setTimeout(()=>{T.visit(c("telegram-funnels.show",t.bot.id))},1e3)):l.value=t.message||"Bot tokenini tekshirishda xatolik"}catch(o){o.response?.data?.message?l.value=o.response.data.message:o.response?.status===419?l.value="Sessiya tugagan. Sahifani yangilang.":l.value="Server bilan bog'lanishda xatolik"}finally{i.value=!1}}};return(o,t)=>(b(),x("div",V,[e("div",z,[h(r(y),{href:c("telegram-funnels.index"),class:"inline-flex items-center text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mb-4"},{default:p(()=>[t[1]||(t[1]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),_(" "+s(r(a)("common.back")),1)]),_:1},8,["href"]),e("h1",M,s(r(a)("telegram.bot_create.title")),1),e("p",N,s(r(a)("telegram.bot_create.description")),1)]),e("div",S,[e("div",A,[e("div",I,[e("div",D,[t[2]||(t[2]=e("div",{class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-blue-600 dark:text-blue-400 font-bold"},"1")],-1)),e("div",H,[e("h3",E,s(r(a)("telegram.bot_create.step1_title")),1),e("p",L,s(r(a)("telegram.bot_create.step1_description")),1),e("div",U,[e("p",q,s(r(a)("telegram.bot_create.step1_instruction1")),1),e("p",G,s(r(a)("telegram.bot_create.step1_instruction2")),1),e("p",J,s(r(a)("telegram.bot_create.step1_instruction3")),1),e("p",O,s(r(a)("telegram.bot_create.step1_instruction4")),1)])])])])]),e("div",R,[e("div",F,[e("div",K,[t[3]||(t[3]=e("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center flex-shrink-0"},[e("span",{class:"text-green-600 dark:text-green-400 font-bold"},"2")],-1)),e("div",P,[e("h3",Q,s(r(a)("telegram.bot_create.step2_title")),1),e("p",W,s(r(a)("telegram.bot_create.step2_description")),1),e("div",null,[e("label",X,s(r(a)("telegram.bot_create.bot_token")),1),w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=g=>n.value=g),type:"text",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:text-white transition-all font-mono text-sm",placeholder:"123456789:ABCdefGHIjklMNOpqrsTUVwxyz"},null,512),[[C,n.value]]),l.value?(b(),x("p",Y,s(l.value),1)):f("",!0)])])])])]),d.value?(b(),x("div",Z,[e("div",$,[e("div",ee,[t[4]||(t[4]=e("div",{class:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg shadow-green-500/30"},[e("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[e("p",te,s(r(a)("telegram.bot_create.bot_found")),1),e("h3",se,s(d.value.first_name),1),e("p",re,"@"+s(d.value.username),1)])])])])):f("",!0),e("div",ae,[h(r(y),{href:c("telegram-funnels.index"),class:"px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-medium rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},{default:p(()=>[_(s(r(a)("common.cancel")),1)]),_:1},8,["href"]),e("button",{onClick:v,disabled:!n.value||i.value,class:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl transition-all shadow-lg shadow-blue-500/30 disabled:shadow-none flex items-center gap-2"},[i.value?(b(),x("svg",le,[...t[5]||(t[5]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):f("",!0),_(" "+s(i.value?r(a)("telegram.bot_create.verifying"):r(a)("telegram.bot_create.add_bot")),1)],8,oe)])])]))}};export{ce as _};
