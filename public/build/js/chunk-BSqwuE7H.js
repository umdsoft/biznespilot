import{r as e,C as t,y as r,R as a,I as s,L as o,x as n,A as l,z as d,F as i,H as g,E as c,B as u,J as x,K as f,v as y,D as h}from"./chunk-CpmtkKLp.js";import{l as b,r as k}from"./chunk-BhZp3z4u.js";const v={class:"space-y-6"},p={class:"relative overflow-hidden bg-gradient-to-br from-orange-600 via-orange-700 to-amber-800 dark:from-orange-800 dark:via-orange-900 dark:to-amber-950 rounded-2xl p-6 md:p-8"},m={class:"relative flex flex-col md:flex-row md:items-center md:justify-between gap-4"},w={class:"flex items-center"},j={class:"text-orange-100"},M={key:0,class:"flex items-center px-4 py-2 bg-red-500/20 border border-red-400/30 rounded-xl"},_={class:"text-white font-medium"},C={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},B={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},z={class:"text-2xl font-bold text-gray-900 dark:text-white"},L={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},H={class:"text-2xl font-bold text-green-600 dark:text-green-400"},F={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},O={class:"text-2xl font-bold text-yellow-600 dark:text-yellow-400"},S={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},T={class:"text-2xl font-bold text-red-600 dark:text-red-400"},A={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},U={class:"flex flex-col md:flex-row gap-4"},K={class:"flex-1"},q={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},I={key:0},J={class:"divide-y divide-gray-200 dark:divide-gray-700"},R={class:"flex items-start justify-between"},V={class:"flex items-center"},Y={class:"relative"},D={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center"},E={class:"ml-4"},N={class:"flex items-center gap-2"},G={class:"font-medium text-gray-900 dark:text-white"},P={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Q={key:1,class:"text-sm text-orange-600 dark:text-orange-400 mt-1"},W={class:"text-right"},X={class:"text-sm text-gray-500 dark:text-gray-400"},Z={key:0,class:"text-xs text-blue-600 dark:text-blue-400 mt-1"},$={key:1,class:"flex flex-wrap gap-1 mt-2 justify-end"},ee={key:0,class:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between"},te={class:"text-sm text-gray-500 dark:text-gray-400"},re={class:"flex gap-2"},ae={key:1,class:"p-12 text-center"},se={__name:"TelegramConversationsIndex",props:{bot:Object,conversations:Object,stats:{type:Object,default:()=>({total:0,active:0,handoff:0,unassigned_handoff:0})},filters:{type:Object,default:()=>({})},panelType:{type:String,required:!0,validator:e=>["business","marketing"].includes(e)}},setup(se){const oe=se,ne=(e,t=null)=>{const r="business"===oe.panelType?"business.":"marketing.";return Array.isArray(t)||t?route(r+e,t):route(r+e)},le=e(oe.filters.status||""),de=e("unassigned"===oe.filters.operator_id),ie=e=>{if(!e)return"?";return e.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)},ge=e=>{const t={active:"bg-green-100 dark:bg-green-900/30",handoff:"bg-yellow-100 dark:bg-yellow-900/30",closed:"bg-gray-100 dark:bg-gray-700"};return t[e]||t.active},ce=e=>{const t={active:"text-green-600 dark:text-green-400",handoff:"text-yellow-600 dark:text-yellow-400",closed:"text-gray-600 dark:text-gray-400"};return t[e]||t.active},ue=e=>{const t={active:"px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",handoff:"px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400 animate-pulse",closed:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"};return t[e]||t.active},xe=()=>{k.get(ne("telegram-funnels.conversations.index",oe.bot.id),{status:le.value||void 0,operator_id:de.value?"unassigned":void 0},{preserveState:!0,preserveScroll:!0})},fe=()=>{de.value=!de.value,xe()};return(e,k)=>(h(),t("div",v,[r("div",p,[k[5]||(k[5]=a('<div class="absolute inset-0 opacity-10"><svg class="w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="white" stroke-width="0.5"></path></pattern></defs><rect width="100" height="100" fill="url(#grid)"></rect></svg></div>',1)),r("div",m,[r("div",w,[o(l(b),{href:ne("telegram-funnels.show",se.bot.id),class:"text-white/70 hover:text-white mr-4 transition-colors"},{default:n(()=>[...k[1]||(k[1]=[r("svg",{class:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),k[3]||(k[3]=r("div",{class:"w-14 h-14 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center mr-4"},[r("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1)),r("div",null,[k[2]||(k[2]=r("h1",{class:"text-2xl md:text-3xl font-bold text-white"},"Suhbatlar",-1)),r("p",j,"@"+d(se.bot.username)+" - Live Chat & Handoff",1)])]),se.stats.unassigned_handoff>0?(h(),t("div",M,[k[4]||(k[4]=r("svg",{class:"w-5 h-5 text-red-300 mr-2 animate-pulse",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),r("span",_,d(se.stats.unassigned_handoff)+" ta kutayotgan suhbat",1)])):s("",!0)])]),r("div",C,[r("div",B,[k[6]||(k[6]=r("div",{class:"flex items-center justify-between mb-2"},[r("div",{class:"w-10 h-10 bg-orange-100 dark:bg-orange-900/30 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])])],-1)),r("p",z,d(se.stats.total),1),k[7]||(k[7]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami",-1))]),r("div",L,[k[8]||(k[8]=r("div",{class:"flex items-center justify-between mb-2"},[r("div",{class:"w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])])],-1)),r("p",H,d(se.stats.active),1),k[9]||(k[9]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol",-1))]),r("div",F,[k[10]||(k[10]=r("div",{class:"flex items-center justify-between mb-2"},[r("div",{class:"w-10 h-10 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-5 h-5 text-yellow-600 dark:text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})])])],-1)),r("p",O,d(se.stats.handoff),1),k[11]||(k[11]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Handoff",-1))]),r("div",S,[k[12]||(k[12]=r("div",{class:"flex items-center justify-between mb-2"},[r("div",{class:"w-10 h-10 bg-red-100 dark:bg-red-900/30 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),r("p",T,d(se.stats.unassigned_handoff),1),k[13]||(k[13]=r("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kutayotgan",-1))])]),r("div",A,[r("div",U,[r("div",K,[i(r("select",{"onUpdate:modelValue":k[0]||(k[0]=e=>le.value=e),onChange:xe,class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-gray-900 dark:text-white"},[...k[14]||(k[14]=[r("option",{value:""},"Barcha status",-1),r("option",{value:"active"},"Faol",-1),r("option",{value:"handoff"},"Handoff",-1),r("option",{value:"closed"},"Yopilgan",-1)])],544),[[g,le.value]])]),r("button",{onClick:fe,class:c(["px-4 py-2.5 rounded-xl font-medium transition-colors flex items-center justify-center gap-2",de.value?"bg-orange-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"])},[...k[15]||(k[15]=[r("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),u(" Kutayotganlar ",-1)])],2)])]),r("div",q,[se.conversations.data&&se.conversations.data.length>0?(h(),t("div",I,[r("div",J,[(h(!0),t(x,null,f(se.conversations.data,e=>(h(),y(l(b),{key:e.id,href:ne("telegram-funnels.conversations.show",[se.bot.id,e.id]),class:"block p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},{default:n(()=>{return[r("div",R,[r("div",V,[r("div",Y,[r("div",{class:c(["w-12 h-12 rounded-full flex items-center justify-center",ge(e.status)])},[r("span",{class:c(["text-lg font-semibold",ce(e.status)])},d(ie(e.user?.full_name)),3)],2),e.unread_count>0?(h(),t("span",D,d(e.unread_count>9?"9+":e.unread_count),1)):s("",!0)]),r("div",E,[r("div",N,[r("p",G,d(e.user?.full_name||"Noma'lum"),1),r("span",{class:c(ue(e.status))},d((a=e.status,{active:"Faol",handoff:"Handoff",closed:"Yopilgan"}[a]||a)),3)]),e.user?.username?(h(),t("p",P,"@"+d(e.user.username),1)):s("",!0),e.handoff_reason?(h(),t("p",Q,[k[16]||(k[16]=r("svg",{class:"w-4 h-4 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),u(" "+d(e.handoff_reason),1)])):s("",!0)])]),r("div",W,[r("p",X,d(e.last_message_at),1),e.assigned_operator?(h(),t("p",Z,[k[17]||(k[17]=r("svg",{class:"w-3.5 h-3.5 inline mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),u(" "+d(e.assigned_operator),1)])):s("",!0),e.tags&&e.tags.length>0?(h(),t("div",$,[(h(!0),t(x,null,f(e.tags.slice(0,2),e=>(h(),t("span",{key:e,class:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-full"},d(e),1))),128))])):s("",!0)])])];var a}),_:2},1032,["href"]))),128))]),se.conversations.links&&se.conversations.links.length>3?(h(),t("div",ee,[r("div",te,d(se.conversations.from)+" - "+d(se.conversations.to)+" / "+d(se.conversations.total)+" ta suhbat ",1),r("div",re,[(h(!0),t(x,null,f(se.conversations.links,e=>(h(),y(l(b),{key:e.label,href:e.url||"#",class:c(["px-3 py-1 rounded-lg text-sm font-medium transition-colors",e.active?"bg-orange-600 text-white":e.url?"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600":"bg-gray-50 dark:bg-gray-800 text-gray-400 cursor-not-allowed"]),innerHTML:e.label},null,8,["href","class","innerHTML"]))),128))])])):s("",!0)])):(h(),t("div",ae,[...k[18]||(k[18]=[a('<div class="w-20 h-20 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center mx-auto mb-6"><svg class="w-10 h-10 text-orange-600 dark:text-orange-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div><h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-2">Hali suhbat yo&#39;q</h3><p class="text-gray-500 dark:text-gray-400 max-w-sm mx-auto"> Foydalanuvchilar bot bilan suhbatni boshlaganda bu yerda ko&#39;rinadi. </p>',3)])]))])]))}};export{se as _};
