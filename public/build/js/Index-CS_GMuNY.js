import{h as j,r as _}from"./chunk-BYRtWSr0.js";import{_ as w}from"./chunk-BVg2xI-u.js";import{_ as q}from"./chunk-Dd--AZOj.js";import{_ as B}from"./chunk-BbDodmQc.js";import{A as S}from"./chunk-_hKLhXmr.js";import{b as p,D as o,z as e,H as a,B as g,S as $,E as s,v as x,L as b,A as y,F as f,G as h,x as F,y as m,C as v,M as O}from"./chunk-BcTZxe-J.js";import{r as z}from"./chunk-DMZRHpNi.js";import{r as M}from"./chunk-Ba8J67bG.js";import{r as V,a as L}from"./chunk-Rs1WNzbn.js";import{r as A}from"./chunk-CQoMtUf7.js";import{r as I}from"./chunk-DNp5bQOL.js";import{r as N}from"./chunk-CJsSO8V8.js";import"./chunk-CYarSvys.js";import"./app-DWC75jbx.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CrR1zWIb.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-BHX0ueEB.js";import"./chunk-Dy6aDPCS.js";import"./chunk-CKHdppiT.js";import"./chunk-Sr2jsNPC.js";import"./chunk-Bv_bj7dx.js";import"./chunk-DlAUqK2U.js";const T={class:"bg-gray-800 rounded-xl p-4 border border-gray-700"},D={class:"flex items-center justify-between mb-2"},H={class:"text-sm text-gray-400"},E={class:"flex items-end justify-between"},K={class:"text-2xl font-bold text-white"},P={class:"text-sm text-gray-500"},Q={class:"mt-3 h-2 bg-gray-700 rounded-full overflow-hidden"},G={__name:"TargetCard",props:{target:{type:Object,required:!0}},setup(t){const d=t,i=p(()=>{const l=d.target.percentage;return l>=100?"bg-green-500/20 text-green-400":l>=80?"bg-blue-500/20 text-blue-400":l>=50?"bg-yellow-500/20 text-yellow-400":"bg-red-500/20 text-red-400"}),u=p(()=>{const l=d.target.percentage;return l>=100?"bg-green-500":l>=80?"bg-blue-500":l>=50?"bg-yellow-500":"bg-red-500"}),r=l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l;return(l,n)=>(s(),o("div",T,[e("div",D,[e("span",H,a(t.target.name),1),e("span",{class:g(["text-xs font-medium px-2 py-0.5 rounded-full",i.value])},a(t.target.percentage)+"% ",3)]),e("div",E,[e("div",K,a(r(t.target.current)),1),e("div",P," / "+a(r(t.target.target)),1)]),e("div",Q,[e("div",{class:g(["h-full rounded-full transition-all duration-500",u.value]),style:$({width:`${Math.min(t.target.percentage,100)}%`})},null,6)])]))}},R={class:"flex-1 min-w-0"},U={class:"flex items-center gap-2"},W={class:"font-medium text-white truncate"},J={key:0,class:"px-1.5 py-0.5 text-xs bg-red-500/20 text-red-400 rounded"},X={class:"flex items-center gap-2 text-sm text-gray-400 mt-0.5"},Y={key:0},Z={__name:"TaskItem",props:{task:{type:Object,required:!0}},emits:["complete"],setup(t){const d=t,i=p(()=>({call:"bg-purple-500/20 text-purple-400",meeting:"bg-blue-500/20 text-blue-400",email:"bg-green-500/20 text-green-400",demo:"bg-orange-500/20 text-orange-400",proposal:"bg-yellow-500/20 text-yellow-400"})[d.task.type]||"bg-gray-500/20 text-gray-400"),u=p(()=>({call:"Qo'ng'iroq",meeting:"Uchrashuv",email:"Email",demo:"Demo",proposal:"Taklif"})[d.task.type]||d.task.type);return(r,l)=>(s(),o("div",{class:g(["flex items-center gap-3 p-3 rounded-lg bg-gray-700/50 hover:bg-gray-700 transition-colors cursor-pointer",{"border-l-4 border-red-500":t.task.is_overdue}]),onClick:l[0]||(l[0]=n=>r.$emit("complete",t.task.id))},[e("div",{class:g(["w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors",t.task.status==="completed"?"bg-green-500 border-green-500":"border-gray-500 hover:border-blue-500"])},[t.task.status==="completed"?(s(),x(y(z),{key:0,class:"w-3 h-3 text-white"})):b("",!0)],2),e("div",R,[e("div",U,[e("span",W,a(t.task.title),1),t.task.priority==="high"?(s(),o("span",J," Muhim ")):b("",!0)]),e("div",X,[e("span",null,a(t.task.due_time),1),t.task.lead_name?(s(),o("span",Y,a(t.task.lead_name),1)):b("",!0)])]),e("span",{class:g(["px-2 py-1 text-xs rounded-full",i.value])},a(u.value),3)],2))}},ee={class:"flex-1 min-w-0"},te={class:"font-medium text-white truncate"},se={class:"text-sm text-gray-400 truncate"},re={key:0,class:"text-right"},ae={class:"text-sm font-medium text-green-400"},le={__name:"HotLeadCard",props:{lead:{type:Object,required:!0}},emits:["click"],setup(t){const d=t,i=p(()=>{const r=d.lead.score;return r>=90?"bg-red-500 text-white":r>=80?"bg-orange-500 text-white":"bg-yellow-500 text-black"}),u=r=>r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(0)+"K":r;return(r,l)=>(s(),o("div",{class:"flex items-center gap-3 p-3 rounded-lg bg-gradient-to-r from-red-500/10 to-orange-500/10 border border-red-500/20 hover:border-red-500/40 transition-colors cursor-pointer",onClick:l[0]||(l[0]=n=>r.$emit("click"))},[e("div",{class:g(["w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold",i.value])},a(t.lead.score),3),e("div",ee,[e("div",te,a(t.lead.name),1),e("div",se,a(t.lead.company||t.lead.source||"Manba noma'lum"),1)]),t.lead.estimated_value?(s(),o("div",re,[e("div",ae,a(u(t.lead.estimated_value)),1),l[1]||(l[1]=e("div",{class:"text-xs text-gray-500"},"so'm",-1))])):b("",!0)]))}},oe={class:"text-center p-3 bg-gray-700/50 rounded-lg"},ne={class:"text-2xl font-bold text-white"},ie={class:"text-xs text-gray-400 mt-1"},k={__name:"StatCard",props:{label:{type:String,required:!0},value:{type:[Number,String],default:0},icon:{type:String,default:"chart"}},setup(t){return(d,i)=>(s(),o("div",oe,[e("div",ne,a(t.value),1),e("div",ie,a(t.label),1)]))}},de={class:"flex items-center gap-3"},ce={class:"text-2xl"},ue={class:"font-medium text-white"},ge={class:"text-sm text-gray-400"},me={key:0},xe={key:1},ye={class:"text-right"},be={class:"text-xl font-bold text-white"},fe={__name:"StreakItem",props:{streak:{type:Object,required:!0}},setup(t){return(d,i)=>(s(),o("div",{class:g(["flex items-center justify-between p-3 rounded-lg",t.streak.is_at_risk?"bg-orange-500/10 border border-orange-500/20":"bg-gray-700/50"])},[e("div",de,[e("div",ce,a(t.streak.current>=7?"ðŸ”¥":t.streak.current>=3?"âœ¨":"â­"),1),e("div",null,[e("div",ue,a(t.streak.type_name),1),e("div",ge,[t.streak.next_milestone?(s(),o("span",me,a(t.streak.days_to_milestone)+" kun â†’ "+a(t.streak.next_milestone)+" kun ",1)):(s(),o("span",xe,"Rekord: "+a(t.streak.best)+" kun",1))])])]),e("div",ye,[e("div",be,a(t.streak.current),1),i[0]||(i[0]=e("div",{class:"text-xs text-gray-500"},"kun",-1))])],2))}},he={class:"flex-1 min-w-0"},pe={class:"font-medium text-white truncate"},ve={class:"text-sm text-gray-400 truncate"},ke={class:"text-xs text-gray-500"},_e={__name:"FollowupCard",props:{followup:{type:Object,required:!0}},emits:["click"],setup(t){return(d,i)=>(s(),o("div",{class:"flex items-center gap-3 p-3 rounded-lg bg-gray-800 border border-gray-700 hover:border-orange-500/50 transition-colors cursor-pointer",onClick:i[0]||(i[0]=u=>d.$emit("click"))},[e("div",{class:g(["w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold",t.followup.is_urgent?"bg-red-500 text-white":"bg-orange-500/20 text-orange-400"])},a(t.followup.days_since_contact),3),e("div",he,[e("div",pe,a(t.followup.name),1),e("div",ve,a(t.followup.company||"Kompaniya yo'q"),1)]),e("div",ke,a(t.followup.days_since_contact)+" kun ",1)]))}},we={class:"flex justify-between gap-2"},$e={class:"flex items-center justify-between mt-4 pt-4 border-t border-gray-700"},Ce={__name:"WeeklyProgressBar",props:{progress:{type:Object,default:()=>({days:[],average:0})}},setup(t){const d=i=>({green:"bg-green-500",blue:"bg-blue-500",yellow:"bg-yellow-500",orange:"bg-orange-500",red:"bg-red-500",gray:"bg-gray-600"})[i]||"bg-gray-600";return(i,u)=>(s(),o("div",null,[e("div",we,[(s(!0),o(f,null,h(t.progress.days,r=>(s(),o("div",{key:r.date,class:"flex-1 text-center"},[e("div",{class:g(["text-xs mb-2",r.is_today?"text-blue-400 font-medium":"text-gray-500"])},a(r.day_name),3),e("div",{class:g(["h-24 rounded-lg flex items-end justify-center p-2 transition-all",[r.is_today?"bg-blue-500/20 border-2 border-blue-500":"bg-gray-700",!r.is_past&&!r.is_today?"opacity-50":""]])},[r.score>0?(s(),o("div",{key:0,class:g(["w-full rounded transition-all",d(r.color)]),style:$({height:`${Math.min(r.score,100)}%`})},null,6)):b("",!0)],2),e("div",{class:g(["text-sm mt-2 font-medium",r.is_today?"text-white":"text-gray-400"])},a(r.is_past||r.is_today?`${r.score}%`:"-"),3)]))),128))]),e("div",$e,[u[0]||(u[0]=e("span",{class:"text-sm text-gray-400"},"Haftalik o'rtacha",-1)),e("span",{class:g(["text-lg font-bold",t.progress.average>=80?"text-green-400":t.progress.average>=50?"text-yellow-400":"text-red-400"])},a(t.progress.average)+"% ",3)])]))}},je={class:"py-6"},qe={class:"w-full px-4 sm:px-6 lg:px-8"},Be={class:"mb-6"},Se={class:"text-2xl font-bold text-white"},Fe={class:"text-gray-400"},Oe={class:"mb-6"},ze={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Me={class:"grid lg:grid-cols-3 gap-6"},Ve={class:"lg:col-span-2 space-y-6"},Le={class:"bg-gray-800 rounded-xl p-6"},Ae={class:"flex items-center justify-between mb-4"},Ie={class:"text-lg font-semibold text-white flex items-center gap-2"},Ne={class:"text-sm text-gray-400"},Te={key:0,class:"space-y-3"},De={key:1,class:"text-center py-8 text-gray-500"},He={class:"bg-gray-800 rounded-xl p-6"},Ee={class:"space-y-6"},Ke={class:"bg-gray-800 rounded-xl p-6"},Pe={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Qe={key:0,class:"space-y-3"},Ge={key:1,class:"text-center py-6 text-gray-500"},Re={class:"bg-gray-800 rounded-xl p-6"},Ue={class:"grid grid-cols-2 gap-4"},We={key:0,class:"bg-gray-800 rounded-xl p-6"},Je={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},Xe={class:"space-y-3"},Ye={key:1,class:"mt-6"},Ze={class:"bg-gradient-to-r from-orange-500/10 to-yellow-500/10 rounded-xl p-6 border border-orange-500/20"},et={class:"text-lg font-semibold text-white mb-4 flex items-center gap-2"},tt={class:"grid md:grid-cols-2 lg:grid-cols-3 gap-3"},Vt={__name:"Index",props:{data:{type:Object,default:()=>({})},role:{type:String,default:"sales_operator"},followups:{type:Array,default:()=>[]},schedule:{type:Array,default:()=>[]},weeklyProgress:{type:Object,default:()=>({days:[],average:0})}},setup(t){const d=t,i=p(()=>({owner:q,sales_head:w,sales_operator:B})[d.role]||w),u=l=>{_.visit(route("sales-head.leads.show",l))},r=l=>{_.post(route("sales-head.tasks.complete",l),{},{preserveScroll:!0,preserveState:!0})};return(l,n)=>(s(),x(O(i.value),null,{default:F(()=>[m(y(j),{title:"Bugungi kun"}),e("div",je,[e("div",qe,[e("div",Be,[e("h1",Se,a(t.data.greeting),1),e("p",Fe,a(t.data.date),1)]),t.data.alerts?.length>0?(s(),x(S,{key:0,alerts:t.data.alerts,class:"mb-6"},null,8,["alerts"])):b("",!0),e("div",Oe,[n[0]||(n[0]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Bugungi maqsadlar",-1)),e("div",ze,[(s(!0),o(f,null,h(t.data.targets,c=>(s(),x(G,{key:c.kpi_type,target:c},null,8,["target"]))),128))])]),e("div",Me,[e("div",Ve,[e("div",Le,[e("div",Ae,[e("h2",Ie,[m(y(M),{class:"w-5 h-5 text-blue-400"}),n[1]||(n[1]=v(" Bugungi vazifalar ",-1))]),e("span",Ne,a(t.data.tasks?.length||0)+" ta ",1)]),t.data.tasks?.length>0?(s(),o("div",Te,[(s(!0),o(f,null,h(t.data.tasks,c=>(s(),x(Z,{key:c.id,task:c,onComplete:r},null,8,["task"]))),128))])):(s(),o("div",De,[m(y(V),{class:"w-12 h-12 mx-auto mb-2 opacity-50"}),n[2]||(n[2]=e("p",null,"Bugungi vazifalar yo'q",-1))]))]),e("div",He,[n[3]||(n[3]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Haftalik progress",-1)),m(Ce,{progress:t.weeklyProgress},null,8,["progress"])])]),e("div",Ee,[e("div",Ke,[e("h2",Pe,[m(y(L),{class:"w-5 h-5 text-red-400"}),n[4]||(n[4]=v(" Issiq lidlar ",-1))]),t.data.hot_leads?.length>0?(s(),o("div",Qe,[(s(!0),o(f,null,h(t.data.hot_leads,c=>(s(),x(le,{key:c.id,lead:c,onClick:C=>u(c.id)},null,8,["lead","onClick"]))),128))])):(s(),o("div",Ge,[m(y(A),{class:"w-10 h-10 mx-auto mb-2 opacity-50"}),n[5]||(n[5]=e("p",{class:"text-sm"},"Issiq lidlar yo'q",-1))]))]),e("div",Re,[n[6]||(n[6]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Bugungi natijalar",-1)),e("div",Ue,[m(k,{label:"Qo'ng'iroqlar",value:t.data.stats?.calls_made||0,icon:"phone"},null,8,["value"]),m(k,{label:"Vazifalar",value:t.data.stats?.tasks_completed||0,icon:"check"},null,8,["value"]),m(k,{label:"Lidlar",value:t.data.stats?.leads_contacted||0,icon:"users"},null,8,["value"]),m(k,{label:"Sotuvlar",value:t.data.stats?.deals_closed||0,icon:"currency"},null,8,["value"])])]),t.data.streaks?.length>0?(s(),o("div",We,[e("h2",Je,[m(y(I),{class:"w-5 h-5 text-yellow-400"}),n[7]||(n[7]=v(" Faol streaklaringiz ",-1))]),e("div",Xe,[(s(!0),o(f,null,h(t.data.streaks,c=>(s(),x(fe,{key:c.type,streak:c},null,8,["streak"]))),128))])])):b("",!0)])]),t.followups?.length>0?(s(),o("div",Ye,[e("div",Ze,[e("h2",et,[m(y(N),{class:"w-5 h-5 text-orange-400"}),n[8]||(n[8]=v(" Follow-up kerak ",-1))]),e("div",tt,[(s(!0),o(f,null,h(t.followups,c=>(s(),x(_e,{key:c.id,followup:c,onClick:C=>u(c.id)},null,8,["followup","onClick"]))),128))])])])):b("",!0)])])]),_:1}))}};export{Vt as default};
