import{b as A,r as _,D as d,z as e,y as j,x as V,C as k,H as s,A as t,Q as L,I as p,L as g,J as x,B as h,F as T,G as F,O as N,K as S,_ as M,E as i}from"./chunk-BcTZxe-J.js";import{u as $,l as B,a as q}from"./chunk-BYRtWSr0.js";import{u as D}from"./app-DWC75jbx.js";const E={class:"py-12"},K={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},O={class:"mb-8"},G={class:"text-3xl font-bold text-gray-900 dark:text-white mt-2"},H={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},P={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},J={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Q=["placeholder"],R={key:0,class:"mt-1 text-sm text-red-600"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},X={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},Y={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Z={class:"flex items-center justify-between mb-2"},ee={class:"font-semibold text-gray-900 dark:text-white"},te={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},re={class:"text-sm text-gray-600 dark:text-gray-400"},ae={class:"flex items-center justify-between mb-2"},se={class:"font-semibold text-gray-900 dark:text-white"},oe={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},le={class:"text-sm text-gray-600 dark:text-gray-400"},de={class:"flex items-center justify-between mb-2"},ie={class:"font-semibold text-gray-900 dark:text-white"},ne={key:0,class:"w-5 h-5 bg-purple-600 rounded-full flex items-center justify-center"},pe={class:"text-sm text-gray-600 dark:text-gray-400"},ce={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},ge={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},ue={class:"grid grid-cols-2 md:grid-cols-5 gap-3"},me=["onClick"],be={class:"text-2xl mb-1"},ye={class:"text-sm font-medium text-gray-900 dark:text-white"},_e={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},xe={class:"flex items-center justify-between mb-4"},he={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},ke=["disabled"],ve={key:0},fe={key:1},we={key:0,class:"mb-4"},Ce=["placeholder"],je=["disabled"],Ve=["placeholder"],Me={class:"mt-2 text-xs text-gray-500 dark:text-gray-400"},Be={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Ie={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},Ue={value:"all"},ze={value:"active"},Ae={value:"recent"},Le={value:"unconverted"},Te={class:"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6"},Fe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-4"},Ne={class:"space-y-3"},Se={class:"flex items-center"},$e={class:"ml-3 text-sm text-gray-900 dark:text-white"},qe={class:"flex items-center"},De={class:"ml-3 text-sm text-gray-900 dark:text-white"},Ee={key:0,class:"mt-4"},Ke={class:"flex justify-end space-x-3"},Oe=["disabled"],Qe={__name:"MarketingCampaignCreate",props:{panelType:{type:String,required:!0,validator:u=>["business","marketing"].includes(u)},currentBusiness:Object,errors:Object},setup(u){const{t:r}=D(),v=u,f=n=>(v.panelType==="business"?"/business/marketing":"/marketing")+n,w=n=>(v.panelType==="business"?"/business/marketing":"/marketing")+n,o=$({name:"",type:"broadcast",channel:"telegram",message_template:"",target_audience:"all",schedule_type:"immediate",scheduled_at:null,settings:{}}),I=A(()=>[{value:"instagram",label:"Instagram",icon:""},{value:"telegram",label:"Telegram",icon:""},{value:"facebook",label:"Facebook",icon:""},{value:"email",label:"Email",icon:""},{value:"all",label:r("marketing.all_channels"),icon:""}]),b=_(!1),m=_(!1),y=_(!1),c=_(""),U=()=>{y.value=!y.value},C=async()=>{if(c.value){m.value=!0;try{const n=await q.post(w("/campaigns/generate-ai"),{campaign_goal:c.value});n.data.success&&(o.message_template=n.data.message,y.value=!1,c.value="")}catch{alert("AI xabar yaratishda xatolik yuz berdi")}finally{m.value=!1}}},z=()=>{b.value=!0,o.post(w("/campaigns"),{onFinish:()=>{b.value=!1}})};return(n,a)=>(i(),d("div",E,[e("div",K,[e("div",O,[j(t(B),{href:f("/campaigns"),class:"text-purple-600 hover:text-purple-700 mb-4 inline-flex items-center"},{default:V(()=>[a[10]||(a[10]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),k(" "+s(t(r)("common.back")),1)]),_:1},8,["href"]),e("h2",G,s(t(r)("marketing.new_marketing_campaign")),1),e("p",H,s(t(r)("marketing.campaign_create_desc")),1)]),e("form",{onSubmit:L(z,["prevent"]),class:"space-y-6"},[e("div",P,[e("label",J,s(t(r)("marketing.campaign_name"))+" * ",1),p(e("input",{"onUpdate:modelValue":a[0]||(a[0]=l=>t(o).name=l),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t(r)("marketing.campaign_name_placeholder")},null,8,Q),[[x,t(o).name]]),u.errors.name?(i(),d("p",R,s(u.errors.name),1)):g("",!0)]),e("div",W,[e("label",X,s(t(r)("marketing.campaign_type"))+" * ",1),e("div",Y,[e("div",{onClick:a[1]||(a[1]=l=>t(o).type="broadcast"),class:h(["cursor-pointer border-2 rounded-lg p-4 transition-all",t(o).type==="broadcast"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[e("div",Z,[e("h4",ee,s(t(r)("marketing.type_broadcast")),1),t(o).type==="broadcast"?(i(),d("div",te,[...a[11]||(a[11]=[e("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),e("p",re,s(t(r)("marketing.type_broadcast_desc")),1)],2),e("div",{onClick:a[2]||(a[2]=l=>t(o).type="drip"),class:h(["cursor-pointer border-2 rounded-lg p-4 transition-all",t(o).type==="drip"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[e("div",ae,[e("h4",se,s(t(r)("marketing.type_drip")),1),t(o).type==="drip"?(i(),d("div",oe,[...a[12]||(a[12]=[e("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),e("p",le,s(t(r)("marketing.type_drip_desc")),1)],2),e("div",{onClick:a[3]||(a[3]=l=>t(o).type="trigger"),class:h(["cursor-pointer border-2 rounded-lg p-4 transition-all",t(o).type==="trigger"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[e("div",de,[e("h4",ie,s(t(r)("marketing.type_trigger")),1),t(o).type==="trigger"?(i(),d("div",ne,[...a[13]||(a[13]=[e("svg",{class:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"})],-1)])])):g("",!0)]),e("p",pe,s(t(r)("marketing.type_trigger_desc")),1)],2)])]),e("div",ce,[e("label",ge,s(t(r)("marketing.channel"))+" * ",1),e("div",ue,[(i(!0),d(T,null,F(I.value,l=>(i(),d("div",{key:l.value,onClick:Ge=>t(o).channel=l.value,class:h(["cursor-pointer border-2 rounded-lg p-3 text-center transition-all",t(o).channel===l.value?"border-purple-500 bg-purple-50 dark:bg-purple-900/30":"border-gray-200 dark:border-gray-600 hover:border-purple-300"])},[e("div",be,s(l.icon),1),e("div",ye,s(l.label),1)],10,me))),128))])]),e("div",_e,[e("div",xe,[e("label",he,s(t(r)("marketing.message_text"))+" * ",1),e("button",{type:"button",onClick:U,disabled:m.value,class:"text-sm px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:from-purple-600 hover:to-pink-600 disabled:opacity-50"},[m.value?(i(),d("span",fe,s(t(r)("marketing.generating")),1)):(i(),d("span",ve,s(t(r)("marketing.generate_with_ai")),1))],8,ke)]),y.value?(i(),d("div",we,[p(e("input",{"onUpdate:modelValue":a[4]||(a[4]=l=>c.value=l),type:"text",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t(r)("marketing.ai_goal_placeholder"),onKeyup:N(C,["enter"])},null,40,Ce),[[x,c.value]]),e("button",{onClick:C,disabled:!c.value||m.value,class:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},s(t(r)("common.create")),9,je)])):g("",!0),p(e("textarea",{"onUpdate:modelValue":a[5]||(a[5]=l=>t(o).message_template=l),rows:"6",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t(r)("marketing.message_placeholder")},null,8,Ve),[[x,t(o).message_template]]),e("p",Me,[e("strong",null,s(t(r)("marketing.placeholders"))+":",1),a[14]||(a[14]=k(" {customer_name}, {business_name}, {offer_name}, {offer_price} ",-1))])]),e("div",Be,[e("label",Ie,s(t(r)("marketing.target_audience")),1),p(e("select",{"onUpdate:modelValue":a[6]||(a[6]=l=>t(o).target_audience=l),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Ue,s(t(r)("marketing.audience_all")),1),e("option",ze,s(t(r)("marketing.audience_active")),1),e("option",Ae,s(t(r)("marketing.audience_recent")),1),e("option",Le,s(t(r)("marketing.audience_unconverted")),1)],512),[[S,t(o).target_audience]])]),e("div",Te,[e("label",Fe,s(t(r)("marketing.send_time")),1),e("div",Ne,[e("label",Se,[p(e("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>t(o).schedule_type=l),type:"radio",value:"immediate",class:"w-4 h-4 text-purple-600 focus:ring-purple-500"},null,512),[[M,t(o).schedule_type]]),e("span",$e,s(t(r)("marketing.send_immediately")),1)]),e("label",qe,[p(e("input",{"onUpdate:modelValue":a[8]||(a[8]=l=>t(o).schedule_type=l),type:"radio",value:"scheduled",class:"w-4 h-4 text-purple-600 focus:ring-purple-500"},null,512),[[M,t(o).schedule_type]]),e("span",De,s(t(r)("marketing.send_scheduled")),1)])]),t(o).schedule_type==="scheduled"?(i(),d("div",Ee,[p(e("input",{"onUpdate:modelValue":a[9]||(a[9]=l=>t(o).scheduled_at=l),type:"datetime-local",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-purple-500 focus:border-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[x,t(o).scheduled_at]])])):g("",!0)]),e("div",Ke,[j(t(B),{href:f("/campaigns"),class:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"},{default:V(()=>[k(s(t(r)("common.cancel")),1)]),_:1},8,["href"]),e("button",{type:"submit",disabled:b.value,class:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50"},s(b.value?t(r)("common.saving")+"...":t(r)("marketing.create_campaign")),9,Oe)])],32)])]))}};export{Qe as _};
