import{h as t,r as e}from"./chunk-DKkye6wf.js";import{_ as a}from"./chunk-BB8-4400.js";import{_ as r}from"./chunk-CfN1UnZK.js";import{u as s}from"./app-DFslr8vl.js";import{_ as l}from"./chunk-BCo6x5W8.js";import{a as d}from"./chunk-9PkX4iPz.js";import{r as o}from"./chunk-DUcDuGHI.js";import{r as i}from"./chunk-DncpFozA.js";import{r as n}from"./chunk-BugzYCIx.js";import{r as c}from"./chunk-DS-Zp4Qb.js";import{r as g,v as m,x as p,y as b,z as u,A as x,D as h,L as y,H as k,E as w,F as f,G as v,B as j,C as _}from"./chunk-7Urb0kxg.js";import"./chunk-Dm-LAqtr.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";import"./chunk-CcsIA-HL.js";import"./chunk-34FQ54zy.js";import"./chunk-D8HUIhLG.js";import"./chunk-CmlhnALp.js";import"./chunk-Di7Oc7TS.js";const S={class:"space-y-8"},I={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-8 shadow-xl"},B={class:"relative"},C={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},z={class:"text-3xl font-bold text-white mb-2"},A={class:"text-indigo-100"},O={key:0,class:"flex gap-2"},N=["onClick"],V={key:0,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6"},$={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},q={class:"relative z-10"},D={class:"text-4xl font-bold text-white mb-1"},E={class:"text-sm text-blue-100"},F={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},G={class:"relative z-10"},H={class:"text-4xl font-bold text-white mb-1"},L={class:"text-sm text-emerald-100"},M={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-500 to-rose-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},P={class:"relative z-10"},Q={class:"text-4xl font-bold text-white mb-1"},T={class:"text-sm text-rose-100"},U={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},J={class:"relative z-10"},K={class:"text-4xl font-bold text-white mb-1"},R={class:"text-sm text-purple-100"},W={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden"},X={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20"},Y={class:"flex items-center justify-between"},Z={class:"text-lg font-bold text-gray-900 dark:text-white"},tt={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},et={class:"p-6"},at={class:"grid grid-cols-7 sm:grid-cols-10 md:grid-cols-15 gap-2"},rt=["onClick","disabled"],st={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-indigo-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg"},lt={key:2,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden"},dt={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700"},ot={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},it={class:"overflow-x-auto"},nt={class:"w-full"},ct={class:"bg-gray-50 dark:bg-gray-700/50"},gt={class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},mt={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},pt={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},bt={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},ut={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},xt={class:"divide-y divide-gray-200 dark:divide-gray-700"},ht={class:"px-6 py-4"},yt={class:"flex items-center gap-3"},kt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-md"},wt={class:"font-semibold text-gray-900 dark:text-white"},ft={class:"px-4 py-4 text-center font-bold text-gray-900 dark:text-white"},vt={class:"px-4 py-4 text-center text-emerald-600 dark:text-emerald-400 font-semibold"},jt={class:"px-4 py-4 text-center"},_t={class:"px-4 py-4 text-center text-gray-700 dark:text-gray-300 font-mono"},St=l({__name:"IndexNew",props:{calls:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,incoming:0,outgoing:0,answered:0,missed:0,avg_duration:0,total_duration:0,answer_rate:0})},dailyBreakdown:{type:Object,default:()=>({})},operatorStats:{type:Array,default:()=>[]},period:{type:String,default:"daily"},dateInfo:{type:Object,default:()=>({current_month:"",current_day:1,days_in_month:31,selected_day:1})},tab:{type:String,default:"all"},auditCount:{type:Number,default:0},canViewAudit:{type:Boolean,default:!1}},setup(l){const{t:St}=s(),It=l,Bt=[{key:"daily",label:St("common.daily")},{key:"weekly",label:St("common.weekly")},{key:"monthly",label:St("common.monthly")}],Ct=g(It.dateInfo?.selected_day||It.dateInfo?.current_day||1),zt=t=>{if(!t)return"0:00";return`${Math.floor(t/60)}:${(t%60).toString().padStart(2,"0")}`},At=t=>{const e=t===It.dateInfo?.current_day,a=t===Ct.value,r=t>It.dateInfo?.current_day,s=It.dailyBreakdown[t]?.total>0;return r?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":a?"bg-indigo-600 text-white border-indigo-600 shadow-lg ring-2 ring-indigo-200":s?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-700 hover:bg-indigo-100 dark:hover:bg-indigo-900/50":e?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700 ring-2 ring-emerald-100":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"};return(s,g)=>(w(),m(a,{title:x(St)("nav.calls")},{default:p(()=>[b(x(t),{title:x(St)("nav.calls")},null,8,["title"]),u("div",S,[u("div",I,[g[0]||(g[0]=u("div",{class:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_70%)]"},null,-1)),u("div",B,[u("div",C,[u("div",null,[u("h1",z,k(x(St)("calls.analytics")),1),u("p",A,k(x(St)("calls.analytics_subtitle")),1)]),"all"===l.tab?(w(),h("div",O,[(w(),h(f,null,v(Bt,t=>u("button",{key:t.key,onClick:a=>{return r=t.key,void e.get("/sales-head/calls",{period:r,tab:It.tab},{preserveState:!0,preserveScroll:!0});var r},class:j(["px-5 py-2.5 rounded-xl font-semibold transition-all",l.period===t.key?"bg-white text-indigo-600 shadow-lg":"bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm"])},k(t.label),11,N)),64))])):y("",!0)])])]),"all"===l.tab?(w(),h("div",V,[u("div",$,[u("div",q,[b(x(d),{class:"w-8 h-8 text-white/80 mb-3"}),u("p",D,k(l.stats.total),1),u("p",E,k(x(St)("common.total")),1)]),g[1]||(g[1]=u("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),u("div",F,[u("div",G,[b(x(o),{class:"w-8 h-8 text-white/80 mb-3"}),u("p",H,k(l.stats.answered),1),u("p",L,k(x(St)("calls.answered")),1)]),g[2]||(g[2]=u("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),u("div",M,[u("div",P,[b(x(i),{class:"w-8 h-8 text-white/80 mb-3"}),u("p",Q,k(l.stats.missed),1),u("p",T,k(x(St)("calls.missed")),1)]),g[3]||(g[3]=u("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),u("div",U,[u("div",J,[b(x(n),{class:"w-8 h-8 text-white/80 mb-3"}),u("p",K,k(l.stats.answer_rate)+"%",1),u("p",R,k(x(St)("calls.answer_rate")),1)]),g[4]||(g[4]=u("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))])])):y("",!0),"all"===l.tab&&"daily"===l.period?(w(),h("div",W,[u("div",X,[u("div",Y,[u("h3",Z,k(x(St)("common.daily"))+" "+k(x(St)("saleshead.monitoring")),1),u("span",tt,k(l.dateInfo.current_month),1)])]),u("div",et,[u("div",at,[(w(!0),h(f,null,v(l.dateInfo.days_in_month,t=>(w(),h("button",{key:t,onClick:a=>(t=>{Ct.value=t,e.get("/sales-head/calls",{period:"daily",day:t,tab:It.tab},{preserveState:!0,preserveScroll:!0})})(t),class:j(["relative p-3 rounded-xl text-sm font-semibold transition-all border-2",At(t)]),disabled:t>l.dateInfo.current_day},[_(k(t)+" ",1),l.dailyBreakdown[t]?.total>0&&t!==Ct.value?(w(),h("span",st,k(l.dailyBreakdown[t].total>9?"9+":l.dailyBreakdown[t].total),1)):y("",!0)],10,rt))),128))])])])):y("",!0),"all"===l.tab&&l.operatorStats.length>0?(w(),h("div",lt,[u("div",dt,[u("h3",ot,[b(x(c),{class:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),_(" "+k(x(St)("saleshead.operator_efficiency")),1)])]),u("div",it,[u("table",nt,[u("thead",ct,[u("tr",null,[u("th",gt,k(x(St)("saleshead.operator")),1),u("th",mt,k(x(St)("common.total")),1),u("th",pt,k(x(St)("calls.answered")),1),u("th",bt,k(x(St)("calls.answer_rate")),1),u("th",ut,k(x(St)("common.average")),1)])]),u("tbody",xt,[(w(!0),h(f,null,v(l.operatorStats,t=>(w(),h("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[u("td",ht,[u("div",yt,[u("div",kt,k(t.avatar),1),u("span",wt,k(t.name),1)])]),u("td",ft,k(t.total_calls),1),u("td",vt,k(t.answered),1),u("td",jt,[u("span",{class:j(["px-3 py-1 rounded-full text-sm font-bold",t.answer_rate>=80?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":t.answer_rate>=60?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"])},k(t.answer_rate)+"% ",3)]),u("td",_t,k(zt(t.avg_duration)),1)]))),128))])])])])):y("",!0),b(r,{calls:l.calls,"active-tab":l.tab,"audit-count":l.auditCount,"can-view-audit":l.canViewAudit,"route-prefix":"/sales-head/calls"},null,8,["calls","active-tab","audit-count","can-view-audit"])])]),_:1},8,["title"]))}},[["__scopeId","data-v-b3197923"]]);export{St as default};
