import{r as g,w as h,C as i,y as n,A as d,x as f,z as e,J as v,K as M,F as r,G as x,I as _,H as o,L as k,D as C,v as B,M as P,B as $,E as Q}from"./chunk-KPSVwAyv.js";import{h as U,l as T,r as V}from"./chunk-BVrjkT6E.js";import{_ as F}from"./chunk-BDCgzsM6.js";import{u as I}from"./app-BtfI-58n.js";import{r as J}from"./chunk-J14gS6og.js";import{r as K}from"./chunk-uNG5YCqx.js";import{r as L}from"./chunk-DG11HGh3.js";import{r as Y}from"./chunk-BOaStF92.js";import{r as E}from"./chunk-6T1eIunH.js";import{r as H}from"./chunk-Cdln-ckn.js";import{r as X}from"./chunk-DOJo2mnZ.js";import"./chunk-Qa9RIO0M.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-BvkwlYlD.js";const A={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},G={class:"flex items-center justify-between mb-8"},R={class:"flex items-center gap-4"},W={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl p-6 mb-6"},Z={class:"flex flex-col sm:flex-row gap-4"},ee={class:"flex-1"},te={class:"relative"},se={class:"sm:w-40"},le=["value"],oe={class:"sm:w-48"},ae=["value"],re={class:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 rounded-2xl overflow-hidden"},ie={class:"overflow-x-auto"},ne={class:"w-full"},de={class:"divide-y divide-slate-700/50"},ce={key:0},ue={class:"px-6 py-4"},pe={class:"flex items-center gap-2"},xe={class:"text-sm text-slate-300"},be={class:"px-6 py-4"},me={class:"text-white font-medium"},ge={key:1},he={class:"text-slate-400 text-sm"},fe={class:"px-6 py-4"},ve={class:"px-6 py-4"},_e={class:"text-slate-300 text-sm"},ye={class:"px-6 py-4"},we={class:"text-slate-300 text-sm"},ke={class:"px-6 py-4"},Ce={class:"text-slate-400 text-sm"},Be={class:"px-6 py-4"},$e=["onClick"],Te={key:1,class:"text-slate-500 text-sm"},Ve={key:0,class:"px-6 py-4 border-t border-slate-700/50 flex items-center justify-between"},qe={class:"text-sm text-slate-400"},Se={class:"flex items-center gap-2"},ze=["disabled"],De={class:"text-slate-300 px-3"},je=["disabled"],dt={__name:"History",props:{calls:Object,filters:{type:Object,default:()=>({status:null,direction:null,search:""})}},setup(a){const b=a;I();const p=g(b.filters.search||""),c=g(b.filters.status||"all"),u=g(b.filters.direction||"all"),q=[{value:"all",label:"Barchasi"},{value:"completed",label:"Tugallangan"},{value:"answered",label:"Javob berilgan"},{value:"no_answer",label:"Javobsiz"},{value:"busy",label:"Band"},{value:"failed",label:"Xatolik"},{value:"missed",label:"O'tkazib yuborilgan"}],S=[{value:"all",label:"Barchasi"},{value:"outbound",label:"Chiquvchi"},{value:"inbound",label:"Kiruvchi"}],z=l=>({initiated:"bg-gray-500/20 text-gray-400 border-gray-500/30",ringing:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",answered:"bg-blue-500/20 text-blue-400 border-blue-500/30",completed:"bg-green-500/20 text-green-400 border-green-500/30",failed:"bg-red-500/20 text-red-400 border-red-500/30",missed:"bg-orange-500/20 text-orange-400 border-orange-500/30",busy:"bg-purple-500/20 text-purple-400 border-purple-500/30",no_answer:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"})[l]||"bg-slate-500/20 text-slate-400 border-slate-500/30",D=l=>l==="outbound"?H:X,j=l=>l==="outbound"?"text-blue-400":"text-green-400",N=l=>({pbx:"PBX",sipuni:"SipUni"})[l]||l,m=()=>{V.get(route("integrations.telephony.history"),{status:c.value==="all"?null:c.value,direction:u.value==="all"?null:u.value,search:p.value||null},{preserveState:!0,replace:!0})};let y=null;h(p,()=>{clearTimeout(y),y=setTimeout(m,500)}),h(c,()=>{m()}),h(u,()=>{m()});const w=l=>{l&&V.get(l,{},{preserveState:!0})},O=l=>{l&&window.open(l,"_blank")};return(l,s)=>(r(),i(x,null,[n(d(U),{title:"Qo'ng'iroqlar Tarixi"}),n(F,null,{default:f(()=>[e("div",A,[e("div",G,[e("div",R,[n(d(T),{href:l.route("integrations.telephony.settings"),class:"p-2 bg-slate-700 rounded-xl hover:bg-slate-600 transition-colors"},{default:f(()=>[n(d(J),{class:"w-5 h-5 text-white"})]),_:1},8,["href"]),s[5]||(s[5]=e("div",null,[e("h1",{class:"text-2xl font-bold text-white"},"Qo'ng'iroqlar Tarixi"),e("p",{class:"text-slate-400 text-sm"},"Barcha qo'ng'iroqlar ro'yxati")],-1))])]),e("div",W,[e("div",Z,[e("div",ee,[e("div",te,[n(d(K),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>p.value=t),type:"text",placeholder:"Qidirish (telefon, ism)...",class:"w-full pl-10 pr-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white placeholder-slate-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},null,512),[[M,p.value]])])]),e("div",se,[v(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.value=t),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},[(r(),i(x,null,_(S,t=>e("option",{key:t.value,value:t.value},o(t.label),9,le)),64))],512),[[k,u.value]])]),e("div",oe,[v(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),class:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-xl text-white focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},[(r(),i(x,null,_(q,t=>e("option",{key:t.value,value:t.value},o(t.label),9,ae)),64))],512),[[k,c.value]])])])]),e("div",re,[e("div",ie,[e("table",ne,[s[7]||(s[7]=e("thead",{class:"bg-slate-700/30"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Yo'nalish "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Kontakt "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Davomiyligi "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Provayder "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Sana "),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-slate-300 uppercase tracking-wider"}," Yozuv ")])],-1)),e("tbody",de,[a.calls.data.length===0?(r(),i("tr",ce,[...s[6]||(s[6]=[e("td",{colspan:"7",class:"px-6 py-12 text-center"},[e("svg",{class:"w-12 h-12 text-slate-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),e("p",{class:"text-slate-400"},"Qo'ng'iroqlar topilmadi")],-1)])])):C("",!0),(r(!0),i(x,null,_(a.calls.data,t=>(r(),i("tr",{key:t.id,class:"hover:bg-slate-700/20 transition-colors"},[e("td",ue,[e("div",pe,[(r(),B(P(D(t.direction)),{class:$(["w-5 h-5",j(t.direction)])},null,8,["class"])),e("span",xe,o(t.direction_label),1)])]),e("td",be,[e("div",null,[e("p",me,[t.lead?(r(),B(d(T),{key:0,href:l.route("business.sales.show",t.lead.id),class:"hover:text-blue-400 transition-colors"},{default:f(()=>[Q(o(t.lead.name),1)]),_:2},1032,["href"])):(r(),i("span",ge,"Noma'lum"))]),e("p",he,o(t.direction==="outbound"?t.to_number:t.from_number),1)])]),e("td",fe,[e("span",{class:$(["px-2.5 py-1 rounded-lg text-xs font-medium border",z(t.status)])},o(t.status_label),3)]),e("td",ve,[e("span",_e,o(t.formatted_duration),1)]),e("td",ye,[e("span",we,o(N(t.provider)),1)]),e("td",ke,[e("span",Ce,o(t.created_at),1)]),e("td",Be,[t.recording_url?(r(),i("button",{key:0,onClick:Ne=>O(t.recording_url),class:"p-2 bg-slate-600 rounded-lg hover:bg-slate-500 transition-colors",title:"Yozuvni tinglash"},[n(d(L),{class:"w-4 h-4 text-white"})],8,$e)):(r(),i("span",Te,"-"))])]))),128))])])]),a.calls.last_page>1?(r(),i("div",Ve,[e("p",qe,o(a.calls.from)+"-"+o(a.calls.to)+" / "+o(a.calls.total)+" ta qo'ng'iroq ",1),e("div",Se,[e("button",{onClick:s[3]||(s[3]=t=>w(a.calls.prev_page_url)),disabled:!a.calls.prev_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[n(d(Y),{class:"w-5 h-5 text-white"})],8,ze),e("span",De,o(a.calls.current_page)+" / "+o(a.calls.last_page),1),e("button",{onClick:s[4]||(s[4]=t=>w(a.calls.next_page_url)),disabled:!a.calls.next_page_url,class:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[n(d(E),{class:"w-5 h-5 text-white"})],8,je)])])):C("",!0)])])]),_:1})],64))}};export{dt as default};
