import{r as $,b as I,v as k,x as f,z as t,D as d,L as y,y as g,A as n,H as i,I as b,K as D,J as v,E as s,F as p,G as x,B as m,M as R,C as z}from"./chunk-BcTZxe-J.js";import{l as _}from"./chunk-BYRtWSr0.js";import{_ as E}from"./chunk-BJZ7gbQ1.js";import{r as J}from"./chunk-BHX0ueEB.js";import{r as K}from"./chunk-L32cCIyO.js";import{r as A}from"./chunk-TBIYSmbo.js";import{r as O}from"./chunk-Rs1WNzbn.js";import{r as V}from"./chunk-DNp5bQOL.js";import{r as B}from"./chunk-Ba8J67bG.js";import{r as L}from"./chunk-CcYiqaUc.js";import{o as P}from"./chunk-BnC_-OK6.js";import"./app-CncQRLgv.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";const Y={class:"mb-8"},X={class:"flex items-center justify-between flex-wrap gap-4"},Z={class:"flex items-center gap-3"},Q={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},W={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},tt={class:"text-2xl font-bold text-gray-900 dark:text-white"},et={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},rt={class:"text-2xl font-bold text-green-600"},at={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},st={class:"text-2xl font-bold text-blue-600"},ot={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},dt={class:"text-2xl font-bold text-amber-600"},lt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 mb-6"},it={class:"flex flex-wrap gap-4"},nt={class:"flex items-center gap-2"},gt={class:"flex-1 min-w-[200px]"},ut={key:0,class:"space-y-4"},yt={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},pt={class:"flex items-center gap-3"},xt={class:"font-medium text-gray-900 dark:text-white"},ct={class:"flex items-center gap-2 mt-1"},bt={class:"text-xs text-gray-500 dark:text-gray-400"},mt={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},ht={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},kt={class:"flex items-center gap-4"},ft={key:0,class:"flex items-center gap-1"},vt={class:"text-right"},_t={class:"text-sm font-medium text-gray-900 dark:text-white"},wt={class:"text-xs text-gray-500"},Ct=["onClick"],$t={key:0,class:"p-4 bg-gray-50 dark:bg-gray-900/50"},Dt={key:0,class:"mb-4"},Vt={class:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Bt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Lt={key:1,class:"mb-4"},Nt={class:"space-y-2"},Tt={class:"text-xs font-medium text-purple-600 mb-1"},jt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Mt={key:2,class:"mb-4"},qt={class:"flex flex-wrap gap-2"},Ft={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},St={class:"flex gap-2"},Ut=["onClick"],Ht=["onClick"],Gt={class:"flex items-center gap-2"},It={class:"flex gap-1"},Rt=["onClick"],zt={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center"},Et={key:2,class:"mt-6 flex justify-center"},Jt={class:"flex gap-1"},be={__name:"History",props:{generations:{type:Object,default:()=>({data:[]})},stats:{type:Object,default:()=>({total:0,published:0,total_tokens:0,total_cost:0})}},setup(u){const N=u,c=$([]),o=$({status:"",content_type:"",date_from:"",date_to:"",search:""}),T={pending:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",generating:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",published:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",failed:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"},j={pending:B,generating:V,completed:O,published:A,failed:K},M={post:"Post",story:"Story",reel:"Reel",ad:"Reklama",carousel:"Carousel",article:"Maqola"},q={engage:"Faollashtirish",sell:"Sotish",educate:"Ta'lim",inspire:"Ilhomlantirish",announce:"E'lon",entertain:"Ko'ngil ochar"},w=I(()=>{let a=[...N.generations.data||[]];if(o.value.status&&(a=a.filter(e=>e.status===o.value.status)),o.value.content_type&&(a=a.filter(e=>e.content_type===o.value.content_type)),o.value.search){const e=o.value.search.toLowerCase();a=a.filter(r=>r.topic.toLowerCase().includes(e))}return o.value.date_from&&(a=a.filter(e=>new Date(e.created_at)>=new Date(o.value.date_from))),o.value.date_to&&(a=a.filter(e=>new Date(e.created_at)<=new Date(o.value.date_to))),a}),C=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a?.toString()||"0",F=a=>new Date(a).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),S=a=>{const e=c.value.indexOf(a);e===-1?c.value.push(a):c.value.splice(e,1)},U=a=>{navigator.clipboard.writeText(a)},H=async a=>{try{await axios.post(route("business.marketing.content-ai.history.rate",a.id),{status:"published"}),a.status="published"}catch(e){console.error("Update failed:",e)}},G=async(a,e)=>{try{await axios.post(route("business.marketing.content-ai.history.rate",a.id),{rating:e}),a.rating=e}catch(r){console.error("Rating failed:",r)}};return(a,e)=>(s(),k(E,{title:"Generatsiya Tarixi"},{default:f(()=>[t("div",Y,[t("div",X,[t("div",null,[t("div",Z,[g(n(_),{href:a.route("business.marketing.content-ai.index"),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all"},{default:f(()=>[g(n(J),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})]),_:1},8,["href"]),e[5]||(e[5]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"}," Generatsiya Tarixi "),t("p",{class:"mt-1 text-gray-600 dark:text-gray-400"}," Barcha yaratilgan kontentlar ")],-1))])])])]),t("div",Q,[t("div",W,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami generatsiya",-1)),t("p",tt,i(u.stats.total),1)]),t("div",et,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nashr qilingan",-1)),t("p",rt,i(u.stats.published),1)]),t("div",at,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami tokenlar",-1)),t("p",st,i(C(u.stats.total_tokens)),1)]),t("div",ot,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami xarajat",-1)),t("p",dt,"$"+i(u.stats.total_cost?.toFixed(2)||"0.00"),1)])]),t("div",lt,[t("div",it,[t("div",null,[b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.status=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...e[10]||(e[10]=[t("option",{value:""},"Barcha holatlar",-1),t("option",{value:"completed"},"Yaratilgan",-1),t("option",{value:"published"},"Nashr qilingan",-1),t("option",{value:"failed"},"Xatolik",-1)])],512),[[D,o.value.status]])]),t("div",null,[b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.content_type=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...e[11]||(e[11]=[t("option",{value:""},"Barcha turlar",-1),t("option",{value:"post"},"Post",-1),t("option",{value:"story"},"Story",-1),t("option",{value:"reel"},"Reel",-1),t("option",{value:"ad"},"Reklama",-1)])],512),[[D,o.value.content_type]])]),t("div",nt,[b(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=r=>o.value.date_from=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.date_from]]),e[12]||(e[12]=t("span",{class:"text-gray-500"},"â€”",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=r=>o.value.date_to=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.date_to]])]),t("div",gt,[b(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>o.value.search=r),placeholder:"Mavzu bo'yicha qidirish...",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.search]])])])]),w.value.length?(s(),d("div",ut,[(s(!0),d(p,null,x(w.value,r=>(s(),d("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},[t("div",yt,[t("div",pt,[t("div",{class:m(["w-10 h-10 rounded-lg flex items-center justify-center",T[r.status]])},[(s(),k(R(j[r.status]),{class:"w-5 h-5"}))],2),t("div",null,[t("h4",xt,i(r.topic),1),t("div",ct,[t("span",bt,i(F(r.created_at)),1),t("span",mt,i(M[r.content_type]),1),t("span",ht,i(q[r.purpose]),1)])])]),t("div",kt,[r.rating?(s(),d("div",ft,[(s(),d(p,null,x(5,l=>g(n(L),{key:l,class:m(["w-4 h-4",l<=r.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))])):y("",!0),t("div",vt,[t("p",_t,i(C(r.input_tokens+r.output_tokens))+" tokens ",1),t("p",wt,"$"+i(r.cost_usd?.toFixed(4)||"0.0000"),1)]),t("button",{onClick:l=>S(r.id),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all"},[g(n(P),{class:m(["w-5 h-5 text-gray-400 transition-transform",c.value.includes(r.id)?"rotate-180":""])},null,8,["class"])],8,Ct)])]),c.value.includes(r.id)?(s(),d("div",$t,[r.generated_content?(s(),d("div",Dt,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Yaratilgan kontent:",-1)),t("div",Vt,[t("p",Bt,i(r.generated_content),1)])])):y("",!0),r.generated_variations?.length>1?(s(),d("div",Lt,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Variantlar:",-1)),t("div",Nt,[(s(!0),d(p,null,x(r.generated_variations,(l,h)=>(s(),d("div",{key:h,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},[t("p",Tt,"Variant "+i(h+1),1),t("p",jt,i(l),1)]))),128))])])):y("",!0),r.generated_hashtags?.length?(s(),d("div",Mt,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Hashtaglar:",-1)),t("div",qt,[(s(!0),d(p,null,x(r.generated_hashtags,l=>(s(),d("span",{key:l,class:"px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full"}," #"+i(l),1))),128))])])):y("",!0),t("div",Ft,[t("div",St,[t("button",{onClick:l=>U(r.generated_content),class:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"}," Nusxalash ",8,Ut),r.status!=="published"?(s(),d("button",{key:0,onClick:l=>H(r),class:"px-3 py-1.5 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-all"}," Nashr qilindi ",8,Ht)):y("",!0)]),t("div",Gt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500"},"Baholash:",-1)),t("div",It,[(s(),d(p,null,x(5,l=>t("button",{key:l,onClick:h=>G(r,l),class:"p-0.5 hover:scale-110 transition-transform"},[g(n(L),{class:m(["w-5 h-5",l<=(r.rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["class"])],8,Rt)),64))])])])])):y("",!0)]))),128))])):(s(),d("div",zt,[g(n(B),{class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Hali generatsiya yo'q",-1)),e[19]||(e[19]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," Content AI orqali yangi kontent yarating va tarix shu yerda ko'rinadi. ",-1)),g(n(_),{href:a.route("business.marketing.content-ai.index"),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all"},{default:f(()=>[g(n(V),{class:"w-5 h-5"}),e[17]||(e[17]=z(" Kontent yaratish ",-1))]),_:1},8,["href"])])),u.generations.links?.length>3?(s(),d("div",Et,[t("nav",Jt,[(s(!0),d(p,null,x(u.generations.links,r=>(s(),k(n(_),{key:r.label,href:r.url||"#",class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-all",r.active?"bg-purple-600 text-white":r.url?"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed"]),innerHTML:r.label},null,8,["href","class","innerHTML"]))),128))])])):y("",!0)]),_:1}))}};export{be as default};
