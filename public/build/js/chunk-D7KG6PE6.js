import{r as g,a as ee,b as M,C as n,z as e,v as F,y as te,x as re,A as ae,E as C,H as o,N as E,D as T,J as u,K as j,O as se,B as x,G as B,I as q,M as oe,Q as le,L as z,P as ne,h as p,F as l}from"./chunk-KPSVwAyv.js";import{l as ie,a as h,r as K}from"./chunk-BVrjkT6E.js";const de={class:"space-y-6"},ge={class:"flex items-center justify-between"},ue={class:"flex items-center gap-4"},pe={class:"text-gray-500 dark:text-gray-400 flex items-center gap-2"},be={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},xe={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5"},ce={class:"flex items-center gap-4"},ye={class:"text-2xl font-bold text-gray-900 dark:text-white"},ke={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5"},ve={class:"flex items-center gap-4"},he={class:"text-2xl font-bold text-gray-900 dark:text-white"},me={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5"},fe={class:"flex items-center gap-4"},we={class:"text-2xl font-bold text-gray-900 dark:text-white"},_e={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-5"},Me={class:"flex items-center gap-4"},Ce={class:"text-2xl font-bold text-gray-900 dark:text-white"},Te={key:0,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},je={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Be={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/50"},ze={class:"flex gap-3"},qe=["disabled"],Ve={key:0,class:"text-sm text-green-700 dark:text-green-300"},Se={key:1,class:"text-sm text-amber-700 dark:text-amber-300"},He={class:"overflow-x-auto"},Le={class:"w-full"},Ae={class:"divide-y divide-gray-200 dark:divide-gray-700"},Fe={class:"px-6 py-4"},Ee={class:"flex items-center gap-3"},Ke={class:"font-medium text-gray-900 dark:text-white"},Ue={class:"text-xs text-gray-500 dark:text-gray-400"},Ne={class:"px-6 py-4"},De={class:"px-6 py-4"},Ie={class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm text-gray-800 dark:text-gray-200 font-mono"},Ye={class:"ml-2 text-xs text-gray-500 dark:text-gray-400"},$e={class:"px-6 py-4"},Oe={key:0},Pe={class:"text-sm text-gray-900 dark:text-white"},Qe={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},Re={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},Xe={class:"px-6 py-4"},Je=["onClick"],Ge={class:"px-6 py-4"},We={class:"flex items-center justify-end gap-2"},Ze=["onClick"],et=["onClick"],tt={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},rt={class:"flex items-center justify-center min-h-screen px-4 py-6"},at={class:"relative bg-white dark:bg-gray-800 rounded-2xl max-w-lg w-full shadow-2xl max-h-[90vh] overflow-y-auto"},st={class:"sticky top-0 z-10 bg-white dark:bg-gray-800 p-6 border-b border-gray-200 dark:border-gray-700"},ot={class:"flex items-center justify-between"},lt={class:"text-xl font-bold text-gray-900 dark:text-white"},nt=["placeholder"],it={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},dt=["value"],gt={key:0},ut=["value"],pt={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl"},bt={class:"flex justify-end gap-3 pt-4"},xt=["disabled"],kt={__name:"TelegramTriggersIndex",props:{bot:Object,triggers:{type:Array,default:()=>[]},funnels:{type:Array,default:()=>[]},panelType:{type:String,required:!0,validator:k=>["business","marketing"].includes(k)}},setup(k){const i=k,c=(r,t=null)=>{const a=i.panelType==="business"?"business.":"marketing.";return Array.isArray(t)||t?route(a+r,t):route(a+r)},y=g(i.triggers),V=g(i.funnels),m=g(!1),d=g(null),f=g(!1),v=g(""),b=g(null),w=g(!1),s=ee({name:"",type:"command",value:"",match_type:"exact",funnel_id:"",step_id:"",priority:0,is_active:!0}),U=M(()=>y.value.filter(r=>r.is_active).length),N=M(()=>y.value.filter(r=>r.type==="command").length),D=M(()=>y.value.filter(r=>r.type==="keyword").length),S=M(()=>s.funnel_id?V.value.find(t=>t.id===s.funnel_id)?.steps||[]:[]),I=r=>{const t={command:"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",keyword:"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",text:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",callback:"bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",start_payload:"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",event:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400"};return t[r]||t.text},Y=r=>{const t={command:{render(){return p("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])}},keyword:{render(){return p("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])}},callback:{render(){return p("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})])}},default:{render(){return p("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[p("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])}}};return t[r]||t.default},$=r=>{const t={command:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",keyword:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300",text:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",callback:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",start_payload:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",event:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"};return t[r]||t.text},O=r=>({command:"Buyruq",keyword:"Kalit so'z",text:"Matn",callback:"Callback",start_payload:"/start payload",event:"Hodisa"})[r]||r,P=r=>({exact:"aniq",contains:"ichida",starts_with:"boshlanadi",ends_with:"tugaydi",regex:"regex",wildcard:"wildcard"})[r]||r,Q=()=>({command:"/start",keyword:"narx",text:"salom",callback:"btn_confirm",start_payload:"ref123",event:"new_chat_member"})[s.type]||"Qiymat kiriting",R=()=>({command:"Buyruq / bilan boshlanishi kerak",keyword:"Xabarda qidiriladigan so'z",text:"Foydalanuvchi xabari matni",callback:"Inline tugma callback_data qiymati",start_payload:"/start dan keyingi payload",event:"Telegram hodisasi nomi"})[s.type]||"",X=()=>{s.step_id=""},H=()=>{d.value=null,s.name="",s.type="command",s.value="",s.match_type="exact",s.funnel_id="",s.step_id="",s.priority=0,s.is_active=!0,m.value=!0},J=r=>{d.value=r,s.name=r.name,s.type=r.type,s.value=r.value,s.match_type=r.match_type,s.funnel_id=r.funnel?.id||"",s.step_id=r.step?.id||"",s.priority=r.priority,s.is_active=r.is_active,m.value=!0},_=()=>{m.value=!1,d.value=null},G=async()=>{f.value=!0;try{const r=d.value?c("telegram-funnels.triggers.update",[i.bot.id,d.value.id]):c("telegram-funnels.triggers.store",i.bot.id),t={name:s.name,type:s.type,value:s.value,match_type:s.match_type,funnel_id:s.funnel_id,step_id:s.step_id||null,priority:s.priority,is_active:s.is_active},a=d.value?await h.put(r,t):await h.post(r,t);a.data.success?(_(),K.reload()):alert(a.data.message||"Xatolik yuz berdi")}catch(r){console.error("Error saving trigger:",r),r.response?.status===419?alert("Sessiya tugagan. Sahifani yangilang."):alert(r.response?.data?.message||"Xatolik yuz berdi")}finally{f.value=!1}},W=async r=>{try{await h.post(c("telegram-funnels.triggers.toggle-active",[i.bot.id,r.id])),r.is_active=!r.is_active}catch(t){console.error("Error toggling trigger:",t),t.response?.status===419&&alert("Sessiya tugagan. Sahifani yangilang.")}},Z=async r=>{if(confirm(`"${r.name}" triggerini o'chirishni xohlaysizmi?`))try{await h.delete(c("telegram-funnels.triggers.destroy",[i.bot.id,r.id])),K.reload()}catch(t){console.error("Error deleting trigger:",t),t.response?.status===419&&alert("Sessiya tugagan. Sahifani yangilang.")}},L=async()=>{if(v.value){w.value=!0,b.value=null;try{const r=await h.post(c("telegram-funnels.triggers.test",i.bot.id),{text:v.value});b.value=r.data}catch(r){console.error("Error testing trigger:",r),r.response?.status===419&&alert("Sessiya tugagan. Sahifani yangilang.")}finally{w.value=!1}}};return(r,t)=>(l(),n(B,null,[e("div",de,[e("div",ge,[e("div",ue,[te(ae(ie),{href:c("telegram-funnels.show",k.bot.id),class:"w-10 h-10 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl flex items-center justify-center transition-colors group"},{default:re(()=>[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400 group-hover:-translate-x-0.5 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),e("div",null,[t[11]||(t[11]=e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Triggerlar",-1)),e("p",pe,[t[10]||(t[10]=e("span",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),C(" @"+o(k.bot.username),1)])])]),e("button",{onClick:H,class:"inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white text-sm font-semibold rounded-xl transition-all shadow-lg shadow-purple-500/30 hover:shadow-xl"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),C(" Yangi Trigger ",-1)])])]),e("div",be,[e("div",xe,[e("div",ce,[t[14]||(t[14]=e("div",{class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1)),e("div",null,[e("p",ye,o(y.value.length),1),t[13]||(t[13]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami triggerlar",-1))])])]),e("div",ke,[e("div",ve,[t[16]||(t[16]=e("div",{class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",null,[e("p",he,o(U.value),1),t[15]||(t[15]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol triggerlar",-1))])])]),e("div",me,[e("div",fe,[t[18]||(t[18]=e("div",{class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})])],-1)),e("div",null,[e("p",we,o(N.value),1),t[17]||(t[17]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Buyruqlar",-1))])])]),e("div",_e,[e("div",Me,[t[20]||(t[20]=e("div",{class:"w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-amber-600 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])],-1)),e("div",null,[e("p",Ce,o(D.value),1),t[19]||(t[19]=e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kalit so'zlar",-1))])])])]),y.value.length===0?(l(),n("div",Te,[e("div",{class:"p-12 text-center"},[t[22]||(t[22]=E('<div class="relative w-24 h-24 mx-auto mb-6"><div class="absolute inset-0 bg-purple-500/20 rounded-full animate-ping"></div><div class="relative w-24 h-24 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center shadow-xl shadow-purple-500/30"><svg class="w-12 h-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div></div><h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">Hozircha trigger yo&#39;q</h3><p class="text-gray-600 dark:text-gray-400 max-w-md mx-auto mb-6"> Triggerlar foydalanuvchi xabarlariga avtomatik javob berish uchun ishlatiladi. Buyruqlar, kalit so&#39;zlar va boshqa hodisalar uchun trigger yarating. </p>',3)),e("button",{onClick:H,class:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-semibold rounded-xl transition-all shadow-lg shadow-purple-500/30"},[...t[21]||(t[21]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),C(" Birinchi Triggerni Yaratish ",-1)])])]),t[23]||(t[23]=E('<div class="grid grid-cols-1 md:grid-cols-3 border-t border-gray-200 dark:border-gray-700"><div class="p-6 border-b md:border-b-0 md:border-r border-gray-200 dark:border-gray-700"><div class="w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mb-3"><svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path></svg></div><h4 class="font-semibold text-gray-900 dark:text-white mb-1">Buyruqlar</h4><p class="text-sm text-gray-500 dark:text-gray-400">/start, /help kabi buyruqlarga javob</p></div><div class="p-6 border-b md:border-b-0 md:border-r border-gray-200 dark:border-gray-700"><div class="w-10 h-10 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center mb-3"><svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg></div><h4 class="font-semibold text-gray-900 dark:text-white mb-1">Kalit so&#39;zlar</h4><p class="text-sm text-gray-500 dark:text-gray-400">Ma&#39;lum so&#39;zlarni topib javob berish</p></div><div class="p-6"><div class="w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mb-3"><svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"></path></svg></div><h4 class="font-semibold text-gray-900 dark:text-white mb-1">Callback</h4><p class="text-sm text-gray-500 dark:text-gray-400">Tugma bosilganda ishga tushish</p></div></div>',1))])):(l(),n("div",je,[e("div",Be,[e("div",ze,[u(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>v.value=a),type:"text",placeholder:"Test uchun matn kiriting...",class:"flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all text-sm",onKeyup:se(L,["enter"])},null,544),[[j,v.value]]),e("button",{onClick:L,disabled:!v.value||w.value,class:"px-4 py-2 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white text-sm font-medium rounded-xl transition-colors"},o(w.value?"Tekshirilmoqda...":"Test qilish"),9,qe)]),b.value?(l(),n("div",{key:0,class:x(["mt-3 p-3 rounded-lg",b.value.matches?.length>0?"bg-green-50 dark:bg-green-900/20":"bg-amber-50 dark:bg-amber-900/20"])},[b.value.matches?.length>0?(l(),n("p",Ve,[e("strong",null,o(b.value.matches.length),1),t[24]||(t[24]=C(" ta trigger topildi! Ishga tushadigan: ",-1)),e("strong",null,o(b.value.will_trigger?.name),1)])):(l(),n("p",Se," Mos trigger topilmadi "))],2)):T("",!0)]),e("div",He,[e("table",Le,[t[27]||(t[27]=e("thead",null,[e("tr",{class:"border-b border-gray-200 dark:border-gray-700"},[e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Trigger"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Turi"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Qiymati"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Funnel"),e("th",{class:"px-6 py-4 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Holati"),e("th",{class:"px-6 py-4 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Amallar")])],-1)),e("tbody",Ae,[(l(!0),n(B,null,q(y.value,a=>(l(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",Fe,[e("div",Ee,[e("div",{class:x(["w-10 h-10 rounded-lg flex items-center justify-center",I(a.type)])},[(l(),F(oe(Y(a.type)),{class:"w-5 h-5"}))],2),e("div",null,[e("p",Ke,o(a.name),1),e("p",Ue,"Prioritet: "+o(a.priority),1)])])]),e("td",Ne,[e("span",{class:x(["inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium",$(a.type)])},o(O(a.type)),3)]),e("td",De,[e("code",Ie,o(a.value),1),e("span",Ye,o(P(a.match_type)),1)]),e("td",$e,[a.funnel?(l(),n("div",Oe,[e("p",Pe,o(a.funnel.name),1),a.step?(l(),n("p",Qe,o(a.step.name),1)):T("",!0)])):(l(),n("span",Re,"-"))]),e("td",Xe,[e("button",{onClick:A=>W(a),class:x(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",a.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},[e("span",{class:x(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a.is_active?"translate-x-6":"translate-x-1"])},null,2)],10,Je)]),e("td",Ge,[e("div",We,[e("button",{onClick:A=>J(a),class:"p-2 text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Tahrirlash"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ze),e("button",{onClick:A=>Z(a),class:"p-2 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"O'chirish"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,et)])])]))),128))])])])]))]),(l(),F(ne,{to:"body"},[m.value?(l(),n("div",tt,[e("div",rt,[e("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:_}),e("div",at,[e("div",st,[e("div",ot,[e("h3",lt,o(d.value?"Triggerni Tahrirlash":"Yangi Trigger"),1),e("button",{onClick:_,class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...t[28]||(t[28]=[e("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("form",{onSubmit:le(G,["prevent"]),class:"p-6 space-y-5"},[e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Nomi *",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.name=a),type:"text",required:"",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all",placeholder:"Masalan: /start buyrug'i"},null,512),[[j,s.name]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Turi *",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.type=a),required:"",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all"},[...t[30]||(t[30]=[e("option",{value:"command"},"Buyruq (Command)",-1),e("option",{value:"keyword"},"Kalit so'z (Keyword)",-1),e("option",{value:"text"},"Matn (Text)",-1),e("option",{value:"callback"},"Callback",-1),e("option",{value:"start_payload"},"/start payload",-1),e("option",{value:"event"},"Hodisa (Event)",-1)])],512),[[z,s.type]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Qiymati *",-1)),u(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.value=a),type:"text",required:"",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all font-mono",placeholder:Q()},null,8,nt),[[j,s.value]]),e("p",it,o(R()),1)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Mos kelish turi",-1)),u(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>s.match_type=a),class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all"},[...t[33]||(t[33]=[e("option",{value:"exact"},"Aniq mos kelish",-1),e("option",{value:"contains"},"O'z ichiga oladi",-1),e("option",{value:"starts_with"},"...bilan boshlanadi",-1),e("option",{value:"ends_with"},"...bilan tugaydi",-1),e("option",{value:"regex"},"Regex",-1),e("option",{value:"wildcard"},"Wildcard (*)",-1)])],512),[[z,s.match_type]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Funnel *",-1)),u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>s.funnel_id=a),required:"",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all",onChange:X},[t[35]||(t[35]=e("option",{value:""},"Funnel tanlang",-1)),(l(!0),n(B,null,q(V.value,a=>(l(),n("option",{key:a.id,value:a.id},o(a.name),9,dt))),128))],544),[[z,s.funnel_id]])]),S.value.length>0?(l(),n("div",gt,[t[38]||(t[38]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Boshlang'ich qadam (ixtiyoriy)",-1)),u(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.step_id=a),class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all"},[t[37]||(t[37]=e("option",{value:""},"Birinchi qadamdan boshlash",-1)),(l(!0),n(B,null,q(S.value,a=>(l(),n("option",{key:a.id,value:a.id},o(a.name),9,ut))),128))],512),[[z,s.step_id]])])):T("",!0),e("div",null,[t[39]||(t[39]=e("label",{class:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2"},"Prioritet",-1)),u(e("input",{"onUpdate:modelValue":t[7]||(t[7]=a=>s.priority=a),type:"number",min:"0",max:"100",class:"w-full px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:text-white transition-all"},null,512),[[j,s.priority,void 0,{number:!0}]]),t[40]||(t[40]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Yuqori prioritetli triggerlar birinchi tekshiriladi (0-100)",-1))]),e("div",pt,[t[41]||(t[41]=e("div",null,[e("p",{class:"font-medium text-gray-900 dark:text-white"},"Faollashtirish"),e("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Trigger darhol ishlashni boshlaydi")],-1)),e("button",{type:"button",onClick:t[8]||(t[8]=a=>s.is_active=!s.is_active),class:x(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",s.is_active?"bg-green-500":"bg-gray-300 dark:bg-gray-600"])},[e("span",{class:x(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",s.is_active?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",bt,[e("button",{type:"button",onClick:_,class:"px-5 py-2.5 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 font-medium rounded-xl transition-colors"}," Bekor qilish "),e("button",{type:"submit",disabled:f.value,class:"px-5 py-2.5 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white font-semibold rounded-xl transition-all shadow-lg shadow-purple-500/30 disabled:shadow-none"},o(f.value?"Saqlanmoqda...":d.value?"Saqlash":"Yaratish"),9,xt)])],32)])])])):T("",!0)]))],64))}};export{kt as _};
