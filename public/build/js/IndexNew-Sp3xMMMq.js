import{h as B,r as f}from"./chunk-BYRtWSr0.js";import{_ as I}from"./chunk-BVg2xI-u.js";import{_ as $}from"./chunk-BTE3gJL2.js";import{u as j}from"./app-DWC75jbx.js";import{_ as N}from"./chunk-DlAUqK2U.js";import{a as z}from"./chunk-CklLzvQL.js";import{r as D}from"./chunk-Rs1WNzbn.js";import{r as V}from"./chunk-L32cCIyO.js";import{r as A}from"./chunk-I93QdGKi.js";import{r as F}from"./chunk-CQoMtUf7.js";import{r as O,v as E,x as L,y as g,z as t,A as o,D as n,L as m,H as r,E as l,F as x,G as u,B as y,C as w}from"./chunk-BcTZxe-J.js";import"./chunk-CYarSvys.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-Dy6aDPCS.js";import"./chunk-CKHdppiT.js";import"./chunk-Sr2jsNPC.js";import"./chunk-Bv_bj7dx.js";import"./chunk-NJ5HWRnA.js";import"./chunk-EvWs7tbK.js";import"./chunk-ChiSzigC.js";import"./chunk-CzEpYekH.js";import"./chunk-C1xeNfMu.js";const T={class:"space-y-8"},G={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-8 shadow-xl"},H={class:"relative"},M={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},P={class:"text-3xl font-bold text-white mb-2"},q={class:"text-indigo-100"},J={key:0,class:"flex gap-2"},K=["onClick"],Q={key:0,class:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-4 gap-6"},R={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-500 to-blue-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},U={class:"relative z-10"},W={class:"text-4xl font-bold text-white mb-1"},X={class:"text-sm text-blue-100"},Y={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-500 to-emerald-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},Z={class:"relative z-10"},tt={class:"text-4xl font-bold text-white mb-1"},et={class:"text-sm text-emerald-100"},rt={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-rose-500 to-rose-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},at={class:"relative z-10"},ot={class:"text-4xl font-bold text-white mb-1"},st={class:"text-sm text-rose-100"},dt={class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-purple-500 to-purple-600 p-6 shadow-lg hover:shadow-xl transition-shadow"},it={class:"relative z-10"},lt={class:"text-4xl font-bold text-white mb-1"},nt={class:"text-sm text-purple-100"},ct={key:1,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden"},gt={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/20 dark:to-purple-900/20"},mt={class:"flex items-center justify-between"},ht={class:"text-lg font-bold text-gray-900 dark:text-white"},bt={class:"text-sm font-medium text-gray-600 dark:text-gray-400"},xt={class:"p-6"},ut={class:"grid grid-cols-7 sm:grid-cols-10 md:grid-cols-15 gap-2"},yt=["onClick","disabled"],ft={key:0,class:"absolute -top-1 -right-1 w-5 h-5 bg-indigo-500 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-lg"},wt={key:2,class:"bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden"},pt={class:"px-6 py-5 border-b border-gray-200 dark:border-gray-700"},_t={class:"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2"},vt={class:"overflow-x-auto"},kt={class:"w-full"},Ct={class:"bg-gray-50 dark:bg-gray-700/50"},St={class:"px-6 py-4 text-left text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},Bt={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},It={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},$t={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},jt={class:"px-4 py-4 text-center text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wider"},Nt={class:"divide-y divide-gray-200 dark:divide-gray-700"},zt={class:"px-6 py-4"},Dt={class:"flex items-center gap-3"},Vt={class:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-bold shadow-md"},At={class:"font-semibold text-gray-900 dark:text-white"},Ft={class:"px-4 py-4 text-center font-bold text-gray-900 dark:text-white"},Ot={class:"px-4 py-4 text-center text-emerald-600 dark:text-emerald-400 font-semibold"},Et={class:"px-4 py-4 text-center"},Lt={class:"px-4 py-4 text-center text-gray-700 dark:text-gray-300 font-mono"},Tt={__name:"IndexNew",props:{calls:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,incoming:0,outgoing:0,answered:0,missed:0,avg_duration:0,total_duration:0,answer_rate:0})},dailyBreakdown:{type:Object,default:()=>({})},operatorStats:{type:Array,default:()=>[]},period:{type:String,default:"daily"},dateInfo:{type:Object,default:()=>({current_month:"",current_day:1,days_in_month:31,selected_day:1})},tab:{type:String,default:"all"},auditCount:{type:Number,default:0},canViewAudit:{type:Boolean,default:!1}},setup(a){const{t:s}=j(),c=a,p=[{key:"daily",label:s("common.daily")},{key:"weekly",label:s("common.weekly")},{key:"monthly",label:s("common.monthly")}],h=O(c.dateInfo?.selected_day||c.dateInfo?.current_day||1),_=d=>{f.get("/sales-head/calls",{period:d,tab:c.tab},{preserveState:!0,preserveScroll:!0})},v=d=>{h.value=d,f.get("/sales-head/calls",{period:"daily",day:d,tab:c.tab},{preserveState:!0,preserveScroll:!0})},k=d=>{if(!d)return"0:00";const i=Math.floor(d/60),e=d%60;return`${i}:${e.toString().padStart(2,"0")}`},C=d=>{const i=d===c.dateInfo?.current_day,e=d===h.value,b=d>c.dateInfo?.current_day,S=c.dailyBreakdown[d]?.total>0;return b?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 border-gray-200 dark:border-gray-700 cursor-not-allowed":e?"bg-indigo-600 text-white border-indigo-600 shadow-lg ring-2 ring-indigo-200":S?"bg-indigo-50 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 border-indigo-200 dark:border-indigo-700 hover:bg-indigo-100 dark:hover:bg-indigo-900/50":i?"bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-700 ring-2 ring-emerald-100":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"};return(d,i)=>(l(),E(I,{title:o(s)("nav.calls")},{default:L(()=>[g(o(B),{title:o(s)("nav.calls")},null,8,["title"]),t("div",T,[t("div",G,[i[0]||(i[0]=t("div",{class:"absolute inset-0 bg-grid-white/10 [mask-image:radial-gradient(white,transparent_70%)]"},null,-1)),t("div",H,[t("div",M,[t("div",null,[t("h1",P,r(o(s)("calls.analytics")),1),t("p",q,r(o(s)("calls.analytics_subtitle")),1)]),a.tab==="all"?(l(),n("div",J,[(l(),n(x,null,u(p,e=>t("button",{key:e.key,onClick:b=>_(e.key),class:y(["px-5 py-2.5 rounded-xl font-semibold transition-all",a.period===e.key?"bg-white text-indigo-600 shadow-lg":"bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm"])},r(e.label),11,K)),64))])):m("",!0)])])]),a.tab==="all"?(l(),n("div",Q,[t("div",R,[t("div",U,[g(o(z),{class:"w-8 h-8 text-white/80 mb-3"}),t("p",W,r(a.stats.total),1),t("p",X,r(o(s)("common.total")),1)]),i[1]||(i[1]=t("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),t("div",Y,[t("div",Z,[g(o(D),{class:"w-8 h-8 text-white/80 mb-3"}),t("p",tt,r(a.stats.answered),1),t("p",et,r(o(s)("calls.answered")),1)]),i[2]||(i[2]=t("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),t("div",rt,[t("div",at,[g(o(V),{class:"w-8 h-8 text-white/80 mb-3"}),t("p",ot,r(a.stats.missed),1),t("p",st,r(o(s)("calls.missed")),1)]),i[3]||(i[3]=t("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))]),t("div",dt,[t("div",it,[g(o(A),{class:"w-8 h-8 text-white/80 mb-3"}),t("p",lt,r(a.stats.answer_rate)+"%",1),t("p",nt,r(o(s)("calls.answer_rate")),1)]),i[4]||(i[4]=t("div",{class:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16"},null,-1))])])):m("",!0),a.tab==="all"&&a.period==="daily"?(l(),n("div",ct,[t("div",gt,[t("div",mt,[t("h3",ht,r(o(s)("common.daily"))+" "+r(o(s)("saleshead.monitoring")),1),t("span",bt,r(a.dateInfo.current_month),1)])]),t("div",xt,[t("div",ut,[(l(!0),n(x,null,u(a.dateInfo.days_in_month,e=>(l(),n("button",{key:e,onClick:b=>v(e),class:y(["relative p-3 rounded-xl text-sm font-semibold transition-all border-2",C(e)]),disabled:e>a.dateInfo.current_day},[w(r(e)+" ",1),a.dailyBreakdown[e]?.total>0&&e!==h.value?(l(),n("span",ft,r(a.dailyBreakdown[e].total>9?"9+":a.dailyBreakdown[e].total),1)):m("",!0)],10,yt))),128))])])])):m("",!0),a.tab==="all"&&a.operatorStats.length>0?(l(),n("div",wt,[t("div",pt,[t("h3",_t,[g(o(F),{class:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),w(" "+r(o(s)("saleshead.operator_efficiency")),1)])]),t("div",vt,[t("table",kt,[t("thead",Ct,[t("tr",null,[t("th",St,r(o(s)("saleshead.operator")),1),t("th",Bt,r(o(s)("common.total")),1),t("th",It,r(o(s)("calls.answered")),1),t("th",$t,r(o(s)("calls.answer_rate")),1),t("th",jt,r(o(s)("common.average")),1)])]),t("tbody",Nt,[(l(!0),n(x,null,u(a.operatorStats,e=>(l(),n("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/30 transition-colors"},[t("td",zt,[t("div",Dt,[t("div",Vt,r(e.avatar),1),t("span",At,r(e.name),1)])]),t("td",Ft,r(e.total_calls),1),t("td",Ot,r(e.answered),1),t("td",Et,[t("span",{class:y(["px-3 py-1 rounded-full text-sm font-bold",e.answer_rate>=80?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":e.answer_rate>=60?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"])},r(e.answer_rate)+"% ",3)]),t("td",Lt,r(k(e.avg_duration)),1)]))),128))])])])])):m("",!0),g($,{calls:a.calls,"active-tab":a.tab,"audit-count":a.auditCount,"can-view-audit":a.canViewAudit,"route-prefix":"/sales-head/calls"},null,8,["calls","active-tab","audit-count","can-view-audit"])])]),_:1},8,["title"]))}},pe=N(Tt,[["__scopeId","data-v-8089f0d7"]]);export{pe as default};
