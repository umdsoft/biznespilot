import{h as e,l as t}from"./chunk-BhZp3z4u.js";import{_ as r}from"./chunk-BDBDdGhv.js";import{u as s}from"./app-C-ZlocOh.js";import{r as a}from"./chunk-BYA8ViGa.js";import{r as o}from"./chunk-BVPTQeUf.js";import{r as i}from"./chunk-BaJGWy5z.js";import{r as l}from"./chunk-BiBvtcLb.js";import{r as n}from"./chunk-BB7xsSUf.js";import{b as d,v as g,x as c,L as m,y as h,A as p,z as x,B as y,D as u,C as b,I as k,Q as f,J as v,K as w}from"./chunk-CpmtkKLp.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-BWiubfpN.js";const j={class:"space-y-5"},_={class:"flex items-center justify-between"},B={class:"text-sm text-gray-500 dark:text-gray-400"},D={class:"flex items-center gap-2"},E={class:"inline-flex items-center px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},F={class:"bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 overflow-x-auto border border-gray-200 dark:border-gray-800"},q={class:"min-w-max flex flex-col items-center"},C={class:"bg-gray-900 dark:bg-gray-800 rounded-lg shadow-xl w-72 overflow-hidden"},A={class:"p-4"},z={class:"text-white font-semibold text-base text-center"},I={class:"text-gray-400 text-sm text-center mt-0.5"},S={class:"bg-gray-800/50 dark:bg-gray-700/50 px-4 py-2.5 border-t border-gray-700"},M={class:"text-xs text-gray-400 text-center"},O={key:0,class:"relative flex items-center"},Q={class:"flex gap-3"},Y={class:"w-56 rounded-lg overflow-hidden shadow-lg"},K={class:"text-white font-semibold text-sm"},L={class:"text-white/70 text-xs mt-0.5"},T={class:"bg-white dark:bg-gray-800 max-h-64 overflow-y-auto"},J={class:"font-medium text-gray-900 dark:text-white text-sm"},W={key:0,class:"text-xs text-gray-600 dark:text-gray-300 mt-1.5 leading-relaxed"},X={key:1,class:"px-4 py-8 text-center"},$={class:"text-xs text-center leading-snug text-white font-medium"},G={class:"mt-8 w-full max-w-3xl"},H={class:"bg-gray-900 dark:bg-gray-800 rounded-lg px-6 py-4 text-center"},N={class:"text-white text-sm font-medium"},P={__name:"Index",props:{orgStructure:Object,business:Object,systemDepartments:Array,departments:Object,ownerInfo:Object},setup(P){const{t:R}=s(),U=P,V={sales_head:{bg:"#059669",light:"#D1FAE5",text:"#10B981",darkBg:"#064E3B"},sales_operator:{bg:"#059669",light:"#D1FAE5",text:"#10B981",darkBg:"#064E3B"},marketing:{bg:"#7C3AED",light:"#EDE9FE",text:"#A78BFA",darkBg:"#4C1D95"},hr:{bg:"#DB2777",light:"#FCE7F3",text:"#F472B6",darkBg:"#831843"},finance:{bg:"#EA580C",light:"#FFEDD5",text:"#FB923C",darkBg:"#7C2D12"},default:{bg:"#475569",light:"#F1F5F9",text:"#94A3B8",darkBg:"#1E293B"}},Z=d(()=>{if(!U.systemDepartments)return[];const e=[],t={code:"sales",name:"Sotuv bo'limi",employees:[],positions:[],employee_count:0};let r=!1;return U.systemDepartments.forEach(s=>{"sales_head"===s.code||"sales_operator"===s.code?(t.employees=[...t.employees,...s.employees],t.positions=[...t.positions,...s.positions],t.employee_count+=s.employee_count,r=!0):e.push(s)}),(r||U.systemDepartments.some(e=>"sales_head"===e.code||"sales_operator"===e.code))&&e.unshift(t),e}),ee=e=>"sales"===e||"sales_head"===e||"sales_operator"===e?V.sales_head:V[e]||V.default,te={sales:"Sotuvlarni amalga oshirish va daromadni ko'paytirish",marketing:"Brend qiymatini oshirish va sifatli lidlar generatsiya qilish",hr:"Malakali kadrlarni jalb qilish va samaradorlikni oshirish",finance:"Moliyaviy barqarorlikni ta'minlash"},re=d(()=>{let e=0,t=0;return Z.value.forEach(r=>{e+=r.employee_count||0,t+=r.positions?.length||0}),{departments:Z.value.length,employees:e,positions:t}}),se=d(()=>U.orgStructure?.description||"Mijozlarga yuqori sifatli xizmat ko'rsatish va biznesni barqaror rivojlantirish");return(s,d)=>(u(),g(r,{title:p(R)("hr.org_structure")},{default:c(()=>[m(p(e),{title:p(R)("hr.org_structure")},null,8,["title"]),h("div",j,[h("div",_,[h("div",null,[d[0]||(d[0]=h("h1",{class:"text-xl font-semibold text-gray-900 dark:text-white"}," Tashkiliy tuzilma ",-1)),h("p",B,x(re.value.departments)+" bo'lim · "+x(re.value.employees)+" xodim · "+x(re.value.positions)+" lavozim ",1)]),h("div",D,[m(p(t),{href:s.route("hr.job-descriptions.index"),class:"inline-flex items-center px-3 py-2 text-sm bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},{default:c(()=>[m(p(a),{class:"w-4 h-4 mr-1.5"}),d[1]||(d[1]=y(" Lavozimlar ",-1))]),_:1},8,["href"]),h("button",E,[m(p(o),{class:"w-4 h-4 mr-1.5"}),d[2]||(d[2]=y(" Chop etish ",-1))]),P.orgStructure?(u(),g(p(t),{key:0,href:s.route("hr.org-structure.edit",P.orgStructure.id),class:"inline-flex items-center px-3 py-2 text-sm bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-100"},{default:c(()=>[m(p(i),{class:"w-4 h-4 mr-1.5"}),d[3]||(d[3]=y(" Tahrirlash ",-1))]),_:1},8,["href"])):(u(),g(p(t),{key:1,href:s.route("hr.org-structure.create"),class:"inline-flex items-center px-3 py-2 text-sm bg-gray-900 dark:bg-white text-white dark:text-gray-900 rounded-lg hover:bg-gray-800 dark:hover:bg-gray-100"},{default:c(()=>[m(p(l),{class:"w-4 h-4 mr-1.5"}),d[4]||(d[4]=y(" Yaratish ",-1))]),_:1},8,["href"]))])]),h("div",F,[h("div",q,[h("div",C,[d[6]||(d[6]=h("div",{class:"bg-gray-800 dark:bg-gray-700 px-4 py-2.5"},[h("p",{class:"text-xs font-semibold text-gray-400 uppercase tracking-wider text-center"},"Direktor")],-1)),h("div",A,[h("p",z,x(P.ownerInfo?.name||P.business?.name),1),h("p",I,x(P.ownerInfo?.position||"Bosh direktor"),1)]),h("div",S,[h("p",M,[d[5]||(d[5]=h("span",{class:"text-yellow-500 font-medium"},"YQM:",-1)),y(" "+x(P.ownerInfo?.yqm||"Korxonani boshqarish va rivojlantirish"),1)])])]),d[9]||(d[9]=h("div",{class:"w-px h-8 bg-gray-300 dark:bg-gray-600"},null,-1)),Z.value.length>1?(u(),b("div",O,[h("div",{class:"h-px bg-gray-300 dark:bg-gray-600",style:f({width:232*(Z.value.length-1)+12*(Z.value.length-1)+"px"})},null,4)])):k("",!0),h("div",Q,[(u(!0),b(v,null,w(Z.value,e=>{return u(),b("div",{key:e.code,class:"flex flex-col items-center"},[d[8]||(d[8]=h("div",{class:"w-px h-6 bg-gray-300 dark:bg-gray-600"},null,-1)),h("div",Y,[h("div",{class:"px-4 py-3 text-center",style:f({backgroundColor:ee(e.code).bg})},[h("p",K,x(e.name),1),h("p",L,x(e.employee_count)+" xodim",1)],4),h("div",T,[e.employees?.length>0?(u(!0),b(v,{key:0},w(e.employees,t=>(u(),b("div",{key:t.id,class:"px-3 py-2.5 border-b border-gray-100 dark:border-gray-700 last:border-b-0"},[h("p",J,x(t.name),1),h("p",{class:"text-xs mt-0.5 font-medium",style:f({color:ee(e.code).text})},x(t.position),5),t.yqm?(u(),b("p",W,[h("span",{class:"font-medium",style:f({color:ee(e.code).text})},"YQM:",4),y(" "+x(t.yqm),1)])):k("",!0)]))),128)):(u(),b("div",X,[m(p(n),{class:"w-8 h-8 text-gray-300 dark:text-gray-600 mx-auto mb-2"}),d[7]||(d[7]=h("p",{class:"text-xs text-gray-400 dark:text-gray-500"},"Xodim yo'q",-1))]))]),h("div",{class:"px-3 py-2.5",style:f({backgroundColor:ee(e.code).bg})},[h("p",$,x((t=e.code,"sales"===t||"sales_head"===t||"sales_operator"===t?te.sales:te[t]||"")),1)],4)])]);var t}),128))]),h("div",G,[h("div",H,[h("p",N,x(se.value),1)])])])])])]),_:1},8,["title"]))}};export{P as default};
