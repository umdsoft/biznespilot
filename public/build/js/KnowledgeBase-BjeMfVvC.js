import{r as k,w as H,D as n,y as V,A as s,x as _,z as e,L as c,H as r,I as b,J as f,E as a,F as y,G as h,K as $,C as x,v as z,Q as B,R as N}from"./chunk-BcTZxe-J.js";import{u as A,h as O,l as K,r as S}from"./chunk-BYRtWSr0.js";import{_ as P}from"./chunk-RRYrF3wy.js";import{u as Y}from"./app-CPufef6f.js";import"./chunk-D6nU8-nU.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const E={class:"py-12"},I={class:"max-w-8xl mx-auto sm:px-6 lg:px-8"},J={class:"mb-8 flex items-center justify-between"},T={class:"text-3xl font-bold text-gray-900"},G={class:"mt-2 text-gray-600"},Q={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Z={class:"block text-sm font-medium text-gray-700 mb-1"},W={class:"block text-sm font-medium text-gray-700 mb-1"},X={value:"all"},ee=["value"],te={class:"bg-white rounded-lg shadow-sm overflow-hidden"},se={class:"divide-y divide-gray-200"},oe={class:"flex items-start justify-between"},le={class:"flex-1"},re={class:"flex items-center gap-3 mb-2"},ae={class:"text-lg font-semibold text-gray-900"},ne={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},ie={key:1,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},de={class:"text-gray-600 mb-3"},ue={key:0,class:"flex flex-wrap gap-2 mb-2"},ce={class:"flex items-center gap-4 text-sm text-gray-500"},me={class:"flex gap-2 ml-4"},be=["onClick"],ge=["onClick"],pe={key:0,class:"p-12 text-center text-gray-500"},ye={class:"mt-4"},xe={key:0,class:"bg-white px-6 py-4 border-t border-gray-200"},ve={class:"flex items-center justify-between"},fe={class:"text-sm text-gray-700"},he={class:"font-medium"},we={class:"font-medium"},ke={class:"font-medium"},_e={class:"flex gap-2"},Ce={class:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6"},qe={class:"flex items-center justify-between mb-6"},je={class:"text-2xl font-bold text-gray-900"},Me={key:0,class:"mt-1 text-sm text-red-600"},Ve={key:0,class:"mt-1 text-sm text-red-600"},ze={id:"category-suggestions"},Be=["value"],Ke={class:"flex flex-wrap gap-2 mb-2"},Se=["onClick"],Ue={for:"priority",class:"block text-sm font-medium text-gray-700 mb-1"},Le={class:"flex items-center"},De={class:"flex justify-end gap-3 pt-4 border-t"},Fe=["disabled"],He={key:0},$e={key:1},nt={__name:"KnowledgeBase",props:{knowledge_base:Object,categories:Array,filters:Object},setup(u){const{t:d}=Y(),C=u,g=k({search:C.filters.search||"",category:C.filters.category||"all"}),w=k(!1),m=k(null),l=A({question:"",answer:"",category:"",keywords:[],priority:50,is_active:!0}),q=()=>{S.get(route("business.customer-bot.knowledge-base"),g.value,{preserveState:!0,preserveScroll:!0})};H(()=>g.value.search,i=>{(i.length===0||i.length>=3)&&q()});const j=(i=null)=>{i?(m.value=i,l.question=i.question,l.answer=i.answer,l.category=i.category||"",l.keywords=i.keywords||[],l.priority=i.priority||50,l.is_active=i.is_active):(m.value=null,l.reset()),w.value=!0},v=()=>{w.value=!1,m.value=null,l.reset()},U=()=>{m.value?l.put(route("business.customer-bot.knowledge-base.update",m.value.id),{onSuccess:()=>v()}):l.post(route("business.customer-bot.knowledge-base.store"),{onSuccess:()=>v()})},L=i=>{confirm(d("common.confirm_delete"))&&S.delete(route("business.customer-bot.knowledge-base.destroy",i.id))},D=()=>{const i=prompt("Kalit so'z kiriting:");i&&!l.keywords.includes(i)&&l.keywords.push(i)},F=i=>{l.keywords.splice(i,1)};return(i,t)=>(a(),n(y,null,[V(s(O),{title:s(d)("chatbot.knowledge_base")},null,8,["title"]),V(P,{title:s(d)("chatbot.knowledge_base")},{default:_(()=>[e("div",E,[e("div",I,[e("div",J,[e("div",null,[e("h1",T,r(s(d)("chatbot.knowledge_base")),1),e("p",G,r(s(d)("chatbot.knowledge_base_desc")),1)]),e("button",{onClick:t[0]||(t[0]=o=>j()),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," + "+r(s(d)("chatbot.new_qa")),1)]),e("div",Q,[e("div",R,[e("div",null,[e("label",Z,r(s(d)("common.search")),1),b(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>g.value.search=o),placeholder:"Savol, javob yoki kategoriya...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[f,g.value.search]])]),e("div",null,[e("label",W,r(s(d)("common.category")),1),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>g.value.category=o),onChange:q,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[e("option",X,r(s(d)("common.all")),1),(a(!0),n(y,null,h(u.categories,o=>(a(),n("option",{key:o,value:o},r(o),9,ee))),128))],544),[[$,g.value.category]])])])]),e("div",te,[e("ul",se,[(a(!0),n(y,null,h(u.knowledge_base.data,o=>(a(),n("li",{key:o.id,class:"p-6 hover:bg-gray-50 transition-colors"},[e("div",oe,[e("div",le,[e("div",re,[e("h3",ae,r(o.question),1),o.category?(a(),n("span",ne,r(o.category),1)):c("",!0),o.is_active?c("",!0):(a(),n("span",ie," O'chirilgan "))]),e("p",de,r(o.answer),1),o.keywords&&o.keywords.length>0?(a(),n("div",ue,[(a(!0),n(y,null,h(o.keywords,(p,M)=>(a(),n("span",{key:M,class:"inline-flex items-center px-2 py-1 rounded text-xs bg-gray-100 text-gray-700"},r(p),1))),128))])):c("",!0),e("div",ce,[e("span",null,"Prioritet: "+r(o.priority),1),e("span",null,r(new Date(o.created_at).toLocaleDateString("uz-UZ")),1)])]),e("div",me,[e("button",{onClick:p=>j(o),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-md"},[...t[8]||(t[8]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,be),e("button",{onClick:p=>L(o),class:"p-2 text-red-600 hover:bg-red-50 rounded-md"},[...t[9]||(t[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ge)])])]))),128)),u.knowledge_base.data.length===0?(a(),n("li",pe,[t[10]||(t[10]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("p",ye,r(s(d)("reports.no_data")),1)])):c("",!0)]),u.knowledge_base.data.length>0?(a(),n("div",xe,[e("div",ve,[e("div",fe,[e("span",he,r(u.knowledge_base.from),1),t[11]||(t[11]=x(" - ",-1)),e("span",we,r(u.knowledge_base.to),1),t[12]||(t[12]=x(" dan ",-1)),e("span",ke,r(u.knowledge_base.total),1),t[13]||(t[13]=x(" ta ",-1))]),e("div",_e,[u.knowledge_base.prev_page_url?(a(),z(s(K),{key:0,href:u.knowledge_base.prev_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:_(()=>[x(r(s(d)("common.previous")),1)]),_:1},8,["href"])):c("",!0),u.knowledge_base.next_page_url?(a(),z(s(K),{key:1,href:u.knowledge_base.next_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:_(()=>[x(r(s(d)("common.next")),1)]),_:1},8,["href"])):c("",!0)])])])):c("",!0)])])]),w.value?(a(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:B(v,["self"])},[e("div",Ce,[e("div",qe,[e("h2",je,r(m.value?s(d)("common.edit"):s(d)("chatbot.new_qa")),1),e("button",{onClick:v,class:"p-2 hover:bg-gray-100 rounded-md"},[...t[14]||(t[14]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:B(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[15]||(t[15]=e("label",{for:"question",class:"block text-sm font-medium text-gray-700 mb-1"},"Savol *",-1)),b(e("input",{type:"text",id:"question","onUpdate:modelValue":t[3]||(t[3]=o=>s(l).question=o),required:"",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Masalan: Yetkazib berish narxi qancha?"},null,512),[[f,s(l).question]]),s(l).errors.question?(a(),n("p",Me,r(s(l).errors.question),1)):c("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{for:"answer",class:"block text-sm font-medium text-gray-700 mb-1"},"Javob *",-1)),b(e("textarea",{id:"answer","onUpdate:modelValue":t[4]||(t[4]=o=>s(l).answer=o),required:"",rows:"4",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Bu savolga javob..."},null,512),[[f,s(l).answer]]),s(l).errors.answer?(a(),n("p",Ve,r(s(l).errors.answer),1)):c("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{for:"category",class:"block text-sm font-medium text-gray-700 mb-1"},"Kategoriya",-1)),b(e("input",{type:"text",id:"category","onUpdate:modelValue":t[5]||(t[5]=o=>s(l).category=o),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Masalan: Yetkazib berish",list:"category-suggestions"},null,512),[[f,s(l).category]]),e("datalist",ze,[(a(!0),n(y,null,h(u.categories,o=>(a(),n("option",{key:o,value:o},null,8,Be))),128))])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kalit so'zlar",-1)),e("div",Ke,[(a(!0),n(y,null,h(s(l).keywords,(o,p)=>(a(),n("span",{key:p,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800"},[x(r(o)+" ",1),e("button",{type:"button",onClick:M=>F(p),class:"ml-2 hover:text-blue-600"}," Ã— ",8,Se)]))),128))]),e("button",{type:"button",onClick:D,class:"text-sm text-blue-600 hover:text-blue-700"}," + Kalit so'z qo'shish ")]),e("div",null,[e("label",Ue," Prioritet: "+r(s(l).priority),1),b(e("input",{type:"range",id:"priority","onUpdate:modelValue":t[6]||(t[6]=o=>s(l).priority=o),min:"0",max:"100",class:"w-full"},null,512),[[f,s(l).priority]]),t[19]||(t[19]=e("div",{class:"flex justify-between text-xs text-gray-500"},[e("span",null,"Past"),e("span",null,"Yuqori")],-1))]),e("div",Le,[b(e("input",{type:"checkbox",id:"is_active","onUpdate:modelValue":t[7]||(t[7]=o=>s(l).is_active=o),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,512),[[N,s(l).is_active]]),t[20]||(t[20]=e("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900"}," Faol ",-1))]),e("div",De,[e("button",{type:"button",onClick:v,class:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50"},r(s(d)("common.cancel")),1),e("button",{type:"submit",disabled:s(l).processing,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50"},[s(l).processing?(a(),n("span",He,r(s(d)("common.saving")),1)):(a(),n("span",$e,r(m.value?s(d)("common.update"):s(d)("common.add")),1))],8,Fe)])],32)])])):c("",!0)]),_:1},8,["title"])],64))}};export{nt as default};
