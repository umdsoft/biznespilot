import{l as q,a as Q,r as F}from"./chunk-BVrjkT6E.js";import{u as D}from"./app-BtfI-58n.js";import{_ as J}from"./chunk-Qa9RIO0M.js";import{_ as K}from"./chunk-BDCgzsM6.js";import{_ as P}from"./chunk-bFX-UPbu.js";import{_ as X}from"./chunk-1DWeV4YO.js";import{_ as W}from"./chunk-CpJ89zQZ.js";import{_ as Y}from"./chunk-B61Svt2J.js";import{r as M,b as C,C as c,z as t,H as r,A as s,y as O,D as p,x as A,E as z,J as _,K as T,L as S,G as N,I as E,B as I,F as i,a as Z,w as tt,v as R,Q as G,R as et,P as rt,M as ot}from"./chunk-KPSVwAyv.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";import"./chunk-B1Yis8U5.js";import"./chunk-CXygRKxK.js";import"./chunk-31-ywezX.js";import"./chunk-CQ-EgyBm.js";const st={class:"p-6 space-y-6"},at={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},lt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},dt={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},nt={class:"flex gap-3"},it={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ct={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},gt={class:"flex items-center gap-3"},ut={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},mt={class:"text-xs text-gray-500 dark:text-gray-400"},pt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},xt={class:"flex items-center gap-3"},yt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},ht={class:"text-xs text-gray-500 dark:text-gray-400"},bt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},vt={class:"flex items-center gap-3"},kt={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},_t={class:"text-xs text-gray-500 dark:text-gray-400"},ft={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},wt={class:"flex items-center gap-3"},$t={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Ct={class:"text-xs text-gray-500 dark:text-gray-400"},Mt={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},jt={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Bt={class:"md:col-span-2"},Tt={class:"relative"},zt=["placeholder"],St={value:""},Vt={value:"low"},Ot={value:"medium"},At={value:"high"},Lt={value:"critical"},Ut={value:""},Ht={value:"active"},qt={value:"inactive"},Ft={value:"archived"},Nt={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},Et={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-1"},Rt={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},Dt={key:1,class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},It={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Gt={class:"overflow-x-auto"},Qt={class:"w-full"},Jt={class:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"},Kt={class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Pt={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Xt={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Wt={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Yt={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Zt={class:"px-4 py-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},te={class:"divide-y divide-gray-100 dark:divide-gray-700"},ee={class:"px-4 py-3"},re={class:"flex items-center gap-3"},oe={class:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm"},se={class:"min-w-0"},ae={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},le={class:"px-4 py-3 text-center"},de={key:0,class:"flex flex-col items-center"},ne={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},ie={class:"text-xs text-gray-500 dark:text-gray-400"},ce={key:1,class:"text-gray-300 dark:text-gray-600"},ge={class:"px-4 py-3 text-center"},ue={key:0,class:"flex flex-col items-center"},me={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},pe={class:"text-xs text-gray-500 dark:text-gray-400"},xe={key:1,class:"text-gray-300 dark:text-gray-600"},ye={class:"px-4 py-3 text-center"},he={class:"px-4 py-3 text-center"},be={class:"px-4 py-3"},ve={class:"flex items-center justify-end gap-1"},ke=["onClick","title"],_e=["onClick","title"],fe={class:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400"},we={__name:"CompetitorsIndex",props:{competitors:{type:[Array,Object],default:()=>[]},stats:{type:Object,default:()=>({})},currentBusiness:{type:Object,default:null},panelType:{type:String,required:!0,validator:u=>["business","marketing","finance","operator","saleshead"].includes(u)},readOnly:{type:Boolean,default:!1}},emits:["add","edit","delete"],setup(u,{emit:j}){const{t:o}=D(),h=u,B=j,m=M({search:"",threat_level:"",status:""}),d=(e,a=null)=>{const n=h.panelType==="saleshead"?"sales-head":h.panelType,V={dashboard:`/${n}/competitors/dashboard`,index:`/${n}/competitors`,show:`/${n}/competitors/${a}`,create:`/${n}/competitors/create`};return V[e]||V.index},y=C(()=>Array.isArray(h.competitors)?h.competitors:h.competitors?.data||[]),b=C(()=>y.value.length),v=C(()=>y.value.filter(e=>e.status==="active").length),f=C(()=>y.value.filter(e=>e.threat_level==="critical").length),$=C(()=>y.value.filter(e=>e.threat_level==="high").length),k=C(()=>{let e=y.value;if(m.value.search){const a=m.value.search.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(a)||n.description&&n.description.toLowerCase().includes(a))}return m.value.threat_level&&(e=e.filter(a=>a.threat_level===m.value.threat_level)),m.value.status&&(e=e.filter(a=>a.status===m.value.status)),e}),x=()=>B("add"),w=e=>o(`competitors.modal.${e}`)||e,L=e=>{const a={low:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",high:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",critical:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"};return a[e]||a.medium},U=e=>o(`competitors.modal.${e}`)||e,H=e=>{const a={active:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",archived:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"};return a[e]||a.inactive},g=e=>e==null?"—":e===0?"0":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),l=(e,a)=>{const n=e.metrics?.[0];return n?n[a]??null:null};return(e,a)=>(i(),c("div",st,[t("div",at,[t("div",null,[t("h1",lt,r(s(o)("competitors.title")),1),t("p",dt,r(s(o)("competitors.subtitle")),1)]),t("div",nt,[O(s(q),{href:d("dashboard"),class:"inline-flex items-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:A(()=>[a[3]||(a[3]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),z(" "+r(s(o)("competitors.dashboard")),1)]),_:1},8,["href"]),u.readOnly?p("",!0):(i(),c("button",{key:0,onClick:x,class:"inline-flex items-center px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},[a[4]||(a[4]=t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),z(" "+r(s(o)("competitors.new_competitor")),1)]))])]),t("div",it,[t("div",ct,[t("div",gt,[a[5]||(a[5]=t("div",{class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg"},[t("svg",{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("div",null,[t("p",ut,r(b.value),1),t("p",mt,r(s(o)("competitors.total")),1)])])]),t("div",pt,[t("div",xt,[a[6]||(a[6]=t("div",{class:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},[t("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",null,[t("p",yt,r(v.value),1),t("p",ht,r(s(o)("competitors.active")),1)])])]),t("div",bt,[t("div",vt,[a[7]||(a[7]=t("div",{class:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg"},[t("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),t("div",null,[t("p",kt,r(f.value),1),t("p",_t,r(s(o)("competitors.critical_threat")),1)])])]),t("div",ft,[t("div",wt,[a[8]||(a[8]=t("div",{class:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg"},[t("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),t("div",null,[t("p",$t,r($.value),1),t("p",Ct,r(s(o)("competitors.high_threat")),1)])])])]),t("div",Mt,[t("div",jt,[t("div",Bt,[t("div",Tt,[a[9]||(a[9]=t("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),_(t("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>m.value.search=n),type:"text",placeholder:s(o)("competitors.search_placeholder"),class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,8,zt),[[T,m.value.search]])])]),t("div",null,[_(t("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>m.value.threat_level=n),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[t("option",St,r(s(o)("competitors.all_threats")),1),t("option",Vt,r(s(o)("competitors.low_threat")),1),t("option",Ot,r(s(o)("competitors.medium_threat")),1),t("option",At,r(s(o)("competitors.high_threat")),1),t("option",Lt,r(s(o)("competitors.critical_threat")),1)],512),[[S,m.value.threat_level]])]),t("div",null,[_(t("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>m.value.status=n),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[t("option",Ut,r(s(o)("competitors.all_statuses")),1),t("option",Ht,r(s(o)("competitors.active")),1),t("option",qt,r(s(o)("competitors.inactive")),1),t("option",Ft,r(s(o)("competitors.archived")),1)],512),[[S,m.value.status]])])])]),k.value.length===0?(i(),c("div",Nt,[a[11]||(a[11]=t("div",{class:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"},[t("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("h3",Et,r(s(o)("competitors.not_found")),1),u.readOnly?(i(),c("p",Dt,r(s(o)("competitors.not_added")),1)):(i(),c("p",Rt,r(s(o)("competitors.not_found_desc")),1)),u.readOnly?p("",!0):(i(),c("button",{key:2,onClick:x,class:"inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},[a[10]||(a[10]=t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),z(" "+r(s(o)("competitors.add_competitor")),1)]))])):(i(),c("div",It,[t("div",Gt,[t("table",Qt,[t("thead",null,[t("tr",Jt,[t("th",Kt,r(s(o)("competitors.title")),1),t("th",Pt,r(s(o)("competitors.instagram")),1),t("th",Xt,r(s(o)("competitors.telegram")),1),t("th",Wt,r(s(o)("competitors.threat")),1),t("th",Yt,r(s(o)("common.status")),1),t("th",Zt,r(s(o)("competitors.actions")),1)])]),t("tbody",te,[(i(!0),c(N,null,E(k.value,n=>(i(),c("tr",{key:n.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[t("td",ee,[t("div",re,[t("div",oe,r(n.name.substring(0,2).toUpperCase()),1),t("div",se,[O(s(q),{href:d("show",n.id),class:"font-medium text-gray-900 dark:text-gray-100 hover:text-indigo-600 dark:hover:text-indigo-400 truncate block"},{default:A(()=>[z(r(n.name),1)]),_:2},1032,["href"]),t("p",ae,r(n.industry||n.location||s(o)("competitors.no_data")),1)])])]),t("td",le,[n.instagram_handle?(i(),c("div",de,[t("span",ne,r(g(l(n,"instagram_followers"))),1),t("span",ie,r(n.instagram_handle),1)])):(i(),c("span",ce,"—"))]),t("td",ge,[n.telegram_handle?(i(),c("div",ue,[t("span",me,r(g(l(n,"telegram_members"))),1),t("span",pe,r(n.telegram_handle),1)])):(i(),c("span",xe,"—"))]),t("td",ye,[t("span",{class:I([L(n.threat_level),"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full"])},r(w(n.threat_level)),3)]),t("td",he,[t("span",{class:I([H(n.status),"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-md"])},r(U(n.status)),3)]),t("td",be,[t("div",ve,[O(s(q),{href:d("show",n.id),class:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:s(o)("competitors.view")},{default:A(()=>[...a[12]||(a[12]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["href","title"]),u.readOnly?p("",!0):(i(),c("button",{key:0,onClick:V=>e.$emit("edit",n),class:"p-1.5 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:s(o)("competitors.edit")},[...a[13]||(a[13]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,ke)),u.readOnly?p("",!0):(i(),c("button",{key:1,onClick:V=>e.$emit("delete",n),class:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:s(o)("competitors.delete")},[...a[14]||(a[14]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,_e))])])]))),128))])])]),t("div",fe,r(s(o)("competitors.total_count",{count:k.value.length})),1)]))]))}},$e={class:"fixed inset-0 z-50 overflow-y-auto"},Ce={class:"flex min-h-full items-center justify-center p-4"},Me={class:"relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl"},je={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},Be={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze={class:"md:col-span-2 relative"},Se={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Ve={class:"relative"},Oe=["placeholder"],Ae={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},Le={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg max-h-72 overflow-y-auto"},Ue={class:"p-2 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"},He=["onMousedown"],qe={class:"flex items-start justify-between gap-3"},Fe={class:"flex-1 min-w-0"},Ne={class:"flex items-center gap-2"},Ee={class:"font-medium text-gray-900 dark:text-gray-100"},Re={key:0,class:"px-1.5 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded"},De={key:1,class:"px-1.5 py-0.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded"},Ie={class:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400"},Ge={key:0},Qe={key:1},Je={key:2},Ke={key:3},Pe={key:0,class:"flex items-center gap-3 mt-1"},Xe={key:0,class:"text-xs text-pink-600 dark:text-pink-400"},We={key:1,class:"text-xs text-blue-600 dark:text-blue-400"},Ye={class:"flex-shrink-0 text-right"},Ze={key:0,class:"flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400"},tr={key:1,class:"text-xs text-gray-400 dark:text-gray-500 mt-0.5"},er={key:1,class:"mt-2 p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg"},rr={class:"flex items-start justify-between"},or={class:"flex items-center gap-2"},sr={class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},ar={class:"text-xs text-emerald-600 dark:text-emerald-400"},lr={class:"md:col-span-2"},dr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},nr=["placeholder"],ir={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},cr={value:""},gr=["value"],ur={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},mr=["placeholder"],pr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},xr={value:"low"},yr={value:"medium"},hr={value:"high"},br={value:"critical"},vr={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},kr={value:"active"},_r={value:"inactive"},fr={value:"archived"},wr={class:"md:col-span-2 pt-4 border-t border-gray-200 dark:border-gray-700"},$r={class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3"},Cr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Mr={class:"md:col-span-2 pt-4 border-t border-gray-200 dark:border-gray-700"},jr={class:"flex items-center cursor-pointer"},Br={class:"ml-3 text-sm text-gray-700 dark:text-gray-300"},Tr={class:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},zr={type:"submit",class:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},Sr={__name:"CompetitorModal",props:{competitor:{type:Object,default:null},currentBusiness:{type:Object,default:null},panelType:{type:String,default:"business"}},emits:["close","submit"],setup(u,{emit:j}){const{t:o}=D(),h=u,B=j,m=["Toshkent shahri","Toshkent viloyati","Andijon viloyati","Buxoro viloyati","Farg'ona viloyati","Jizzax viloyati","Xorazm viloyati","Namangan viloyati","Navoiy viloyati","Qashqadaryo viloyati","Qoraqalpog'iston Respublikasi","Samarqand viloyati","Sirdaryo viloyati","Surxondaryo viloyati"],d=Z({name:"",description:"",industry:"",location:"",region:"",district:"",threat_level:"medium",status:"active",instagram_handle:"",telegram_handle:"",facebook_page:"",tiktok_handle:"",auto_monitor:!0,check_frequency_hours:24,global_competitor_id:null}),y=M(!1),b=M(!1),v=M([]),f=M(null);let $=null,k=null;const x=()=>{$&&(clearTimeout($),$=null),k&&(k.abort(),k=null);const g=d.name?.trim();if(!g||g.length<3){v.value=[],y.value=!1,b.value=!1;return}y.value=!0,$=setTimeout(async()=>{k=new AbortController;try{const l=h.panelType==="business"?"/business":"/marketing",e=await Q.get(`${l}/competitors/search-global`,{params:{q:g},signal:k.signal});if(d.name?.trim()===g){const a=e.data;Array.isArray(a)?(v.value=a,b.value=a.length>0):(v.value=[],b.value=!1)}}catch(l){l.name!=="CanceledError"&&l.code!=="ERR_CANCELED"&&console.error("Search failed:",l),v.value=[],b.value=!1}finally{y.value=!1,k=null}},500)},w=g=>{f.value=g,b.value=!1,v.value=[],d.name=g.name,d.description=g.description||"",d.industry=g.industry||"",d.region=g.region||"",d.district=g.district||"",d.instagram_handle=g.instagram_handle||"",d.telegram_handle=g.telegram_handle||"",d.global_competitor_id=g.id},L=()=>{f.value=null,d.global_competitor_id=null},U=()=>{setTimeout(()=>{b.value=!1},200)};tt(()=>h.competitor,g=>{g?(Object.assign(d,g),f.value=null):(Object.assign(d,{name:"",description:"",industry:h.currentBusiness?.industry_name||"",location:h.currentBusiness?.region||"",region:"",district:"",threat_level:"medium",status:"active",instagram_handle:"",telegram_handle:"",facebook_page:"",tiktok_handle:"",auto_monitor:!0,check_frequency_hours:24,global_competitor_id:null}),f.value=null)},{immediate:!0});const H=()=>{B("submit",{...d})};return(g,l)=>(i(),R(rt,{to:"body"},[t("div",$e,[t("div",Ce,[t("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:l[0]||(l[0]=e=>g.$emit("close"))}),t("div",Me,[t("div",je,[t("h3",Be,r(u.competitor?s(o)("competitors.modal.edit_title"):s(o)("competitors.modal.add_title")),1),t("button",{onClick:l[1]||(l[1]=e=>g.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...l[13]||(l[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("form",{onSubmit:G(H,["prevent"]),class:"p-6"},[t("div",Te,[t("div",ze,[t("label",Se,r(s(o)("competitors.modal.name"))+" *",1),t("div",Ve,[_(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>d.name=e),onInput:x,onFocus:l[3]||(l[3]=e=>b.value=!0),onBlur:U,type:"text",required:"",autocomplete:"off",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:s(o)("competitors.modal.name_placeholder")},null,40,Oe),[[T,d.name]]),y.value?(i(),c("div",Ae,[...l[14]||(l[14]=[t("svg",{class:"w-5 h-5 animate-spin text-gray-400",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):p("",!0)]),b.value&&v.value.length>0?(i(),c("div",Le,[t("div",Ue,r(s(o)("competitors.modal.found_count",{count:v.value.length})),1),(i(!0),c(N,null,E(v.value,e=>(i(),c("button",{key:e.id,type:"button",onMousedown:G(a=>w(e),["prevent"]),class:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0"},[t("div",qe,[t("div",Fe,[t("div",Ne,[t("span",Ee,r(e.name),1),e.same_industry?(i(),c("span",Re,r(s(o)("competitors.modal.same_industry")),1)):p("",!0),e.same_region?(i(),c("span",De,r(s(o)("competitors.modal.same_region")),1)):p("",!0)]),t("div",Ie,[e.industry?(i(),c("span",Ge,r(e.industry),1)):p("",!0),e.industry&&e.region?(i(),c("span",Qe,"•")):p("",!0),e.region?(i(),c("span",Je,r(e.region),1)):p("",!0),e.district?(i(),c("span",Ke,", "+r(e.district),1)):p("",!0)]),e.instagram_handle||e.telegram_handle?(i(),c("div",Pe,[e.instagram_handle?(i(),c("span",Xe," @"+r(e.instagram_handle.replace("@","")),1)):p("",!0),e.telegram_handle?(i(),c("span",We," @"+r(e.telegram_handle.replace("@","")),1)):p("",!0)])):p("",!0)]),t("div",Ye,[e.has_swot?(i(),c("div",Ze,[l[15]||(l[15]=t("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),z(" "+r(s(o)("competitors.modal.swot_available")),1)])):p("",!0),e.swot_contributors_count>0?(i(),c("div",tr,r(s(o)("competitors.modal.business_count",{count:e.swot_contributors_count})),1)):p("",!0)])])],40,He))),128))])):p("",!0),f.value?(i(),c("div",er,[t("div",rr,[t("div",or,[l[16]||(l[16]=t("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("div",null,[t("p",sr,r(s(o)("competitors.modal.auto_loaded")),1),t("p",ar,r(s(o)("competitors.modal.from_database")),1)])]),t("button",{type:"button",onClick:L,class:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-800 dark:hover:text-emerald-300"},[...l[17]||(l[17]=[t("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):p("",!0)]),t("div",lr,[t("label",dr,r(s(o)("competitors.modal.description")),1),_(t("textarea",{"onUpdate:modelValue":l[4]||(l[4]=e=>d.description=e),rows:"3",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:s(o)("competitors.modal.description_placeholder")},null,8,nr),[[T,d.description]])]),t("div",null,[t("label",ir,r(s(o)("competitors.modal.region")),1),_(t("select",{"onUpdate:modelValue":l[5]||(l[5]=e=>d.region=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[t("option",cr,r(s(o)("competitors.modal.select")),1),(i(),c(N,null,E(m,e=>t("option",{key:e,value:e},r(e),9,gr)),64))],512),[[S,d.region]])]),t("div",null,[t("label",ur,r(s(o)("competitors.modal.district")),1),_(t("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>d.district=e),type:"text",placeholder:s(o)("competitors.modal.district_placeholder"),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,8,mr),[[T,d.district]])]),t("div",null,[t("label",pr,r(s(o)("competitors.modal.threat_level"))+" *",1),_(t("select",{"onUpdate:modelValue":l[7]||(l[7]=e=>d.threat_level=e),required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[t("option",xr,r(s(o)("competitors.modal.low")),1),t("option",yr,r(s(o)("competitors.modal.medium")),1),t("option",hr,r(s(o)("competitors.modal.high")),1),t("option",br,r(s(o)("competitors.modal.critical")),1)],512),[[S,d.threat_level]])]),t("div",null,[t("label",vr,r(s(o)("competitors.modal.status")),1),_(t("select",{"onUpdate:modelValue":l[8]||(l[8]=e=>d.status=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[t("option",kr,r(s(o)("competitors.modal.active")),1),t("option",_r,r(s(o)("competitors.modal.inactive")),1),t("option",fr,r(s(o)("competitors.modal.archived")),1)],512),[[S,d.status]])]),t("div",wr,[t("h4",$r,r(s(o)("competitors.modal.platforms")),1),t("div",Cr,[t("div",null,[l[18]||(l[18]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},"Instagram",-1)),_(t("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>d.instagram_handle=e),type:"text",placeholder:"@username",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[T,d.instagram_handle]])]),t("div",null,[l[19]||(l[19]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},"Telegram",-1)),_(t("input",{"onUpdate:modelValue":l[10]||(l[10]=e=>d.telegram_handle=e),type:"text",placeholder:"@username",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[T,d.telegram_handle]])])])]),t("div",Mr,[t("label",jr,[_(t("input",{"onUpdate:modelValue":l[11]||(l[11]=e=>d.auto_monitor=e),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-indigo-600 focus:ring-indigo-500"},null,512),[[et,d.auto_monitor]]),t("span",Br,r(s(o)("competitors.modal.auto_monitor")),1)])])]),t("div",Tr,[t("button",{type:"button",onClick:l[12]||(l[12]=e=>g.$emit("close")),class:"px-4 py-2.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"},r(s(o)("competitors.modal.cancel")),1),t("button",zr,r(u.competitor?s(o)("competitors.modal.save"):s(o)("competitors.modal.add")),1)])],32)])])])]))}},io={__name:"Index",props:{competitors:{type:[Array,Object],default:()=>[]},stats:{type:Object,default:()=>({})},currentBusiness:{type:Object,default:null},panelType:{type:String,required:!0,validator:u=>["business","marketing","finance","operator","saleshead"].includes(u)}},setup(u){const{t:j}=D(),o=u,h=C(()=>({business:K,marketing:P,finance:X,operator:W,saleshead:Y})[o.panelType]||J),B=C(()=>o.panelType==="saleshead"),m=M(!1),d=M(null),y=()=>"/"+(o.panelType==="saleshead"?"sales-head":o.panelType),b=()=>{d.value=null,m.value=!0},v=x=>{d.value=x,m.value=!0},f=()=>{m.value=!1,d.value=null},$=x=>{const w=y();d.value?F.put(`${w}/competitors/${d.value.id}`,x,{onSuccess:()=>f()}):F.post(`${w}/competitors`,x,{onSuccess:()=>f()})},k=x=>{if(confirm(j("competitors.confirm_delete",{name:x.name}))){const w=y();F.delete(`${w}/competitors/${x.id}`)}};return(x,w)=>(i(),R(ot(h.value),{title:s(j)("competitors.title")},{default:A(()=>[O(we,{competitors:u.competitors,stats:u.stats,"current-business":u.currentBusiness,"panel-type":u.panelType,"read-only":B.value,onAdd:b,onEdit:v,onDelete:k},null,8,["competitors","stats","current-business","panel-type","read-only"]),m.value&&!B.value?(i(),R(Sr,{key:0,competitor:d.value,"current-business":u.currentBusiness,onClose:f,onSubmit:$},null,8,["competitor","current-business"])):p("",!0)]),_:1},8,["title"]))}};export{io as default};
