import{r as t,b as e,C as a,L as r,y as s,A as l,z as d,E as i,B as n,I as x,F as o,G as c,J as g,K as u,H as p,v as m,D as y}from"./chunk-CpmtkKLp.js";import{h as b,r as k}from"./chunk-BhZp3z4u.js";import{_ as h}from"./chunk-Dr248YzT.js";import{u as v}from"./app-C-ZlocOh.js";import{a as f,h as w}from"./chunk-D7SyfRoT.js";import{r as j}from"./chunk-a909mUNd.js";import{r as _}from"./chunk-eMHYSAeQ.js";import{r as B}from"./chunk-Bsc1JRL5.js";import{r as C}from"./chunk-XzsiFwnJ.js";import{r as A}from"./chunk-B3ILNJqD.js";import{r as F}from"./chunk-yvcCPqrN.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-BuJDoypK.js";const O={class:"p-4 lg:p-6 min-h-screen"},z={class:"max-w-[1800px] mx-auto"},L={class:"flex items-center justify-between mb-6"},S={class:"text-sm text-gray-500 dark:text-gray-400 mt-0.5"},D={class:"flex items-center gap-2"},T=["disabled"],U={class:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-lg transition-colors"},I={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-6"},J={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},N={class:"flex items-center gap-3"},Z={class:"w-10 h-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center"},q={class:"text-2xl font-bold text-gray-900 dark:text-white"},E={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},H={class:"flex items-center gap-3"},K={class:"w-10 h-10 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center"},R={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},V={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},G={class:"flex items-center gap-3"},M={class:"w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center"},Q={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},Y={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},$={class:"flex items-center gap-3"},P={class:"w-10 h-10 rounded-lg bg-red-100 dark:bg-red-900/30 flex items-center justify-center"},W={class:"text-2xl font-bold text-red-600 dark:text-red-400"},X={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},tt={class:"flex items-center gap-3"},et={class:"w-10 h-10 rounded-lg bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center"},at={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},rt={class:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700"},st={class:"flex items-center gap-3"},lt={class:"w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center"},dt={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},it={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},nt={class:"p-4 border-b border-gray-200 dark:border-gray-700"},xt={class:"flex flex-col lg:flex-row gap-4 lg:items-center lg:justify-between"},ot={class:"relative flex-1 max-w-md"},ct={class:"flex items-center gap-1 p-1 bg-gray-100 dark:bg-gray-900 rounded-lg"},gt=["onClick"],ut={class:"ml-1 text-gray-400"},pt=["value"],mt={class:"overflow-x-auto"},yt={class:"w-full"},bt={class:"divide-y divide-gray-100 dark:divide-gray-700"},kt={class:"px-4 py-3"},ht={class:"flex items-center gap-3"},vt={class:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center flex-shrink-0"},ft={class:"text-xs font-bold text-white"},wt={class:"min-w-0"},jt={class:"text-sm font-medium text-gray-900 dark:text-white truncate"},_t={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},Bt={class:"px-4 py-3"},Ct={class:"text-sm text-gray-900 dark:text-white"},At={class:"px-4 py-3"},Ft={class:"flex items-center gap-2"},Ot={class:"px-4 py-3 text-right"},zt={class:"text-sm font-semibold text-gray-900 dark:text-white"},Lt={class:"text-xs text-gray-500 ml-1"},St={class:"px-4 py-3"},Dt={class:"text-sm text-gray-600 dark:text-gray-400"},Tt={class:"px-4 py-3"},Ut={class:"text-sm text-gray-600 dark:text-gray-400"},It={class:"px-4 py-3"},Jt={class:"text-sm text-gray-600 dark:text-gray-400"},Nt={class:"px-4 py-3 text-center"},Zt={key:0,class:"py-16 text-center"},qt={class:"w-16 h-16 mx-auto rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mb-4"},Et=Object.assign({layout:h},{__name:"Index",props:{subscriptions:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({total:0,active:0,trial:0,cancelled:0,expired:0,total_revenue:0,mrr:0})},plans:{type:Array,default:()=>[]}},setup(h){v();const Et=h,Ht=t(""),Kt=t("all"),Rt=t("all"),Vt=t(!1),Gt=[{value:"all",label:"Barchasi",count:Et.stats.total},{value:"active",label:"Faol",count:Et.stats.active},{value:"trial",label:"Sinov",count:Et.stats.trial},{value:"cancelled",label:"Bekor",count:Et.stats.cancelled},{value:"expired",label:"Tugagan",count:Et.stats.expired}],Mt=e(()=>{let t=Et.subscriptions;if(Ht.value){const e=Ht.value.toLowerCase();t=t.filter(t=>t.business?.name?.toLowerCase().includes(e)||t.plan?.name?.toLowerCase().includes(e))}return"all"!==Kt.value&&(t=t.filter(t=>t.status===Kt.value)),"all"!==Rt.value&&(t=t.filter(t=>t.plan_id===Rt.value)),t}),Qt=t=>{const e={active:{bg:"bg-emerald-500",text:"text-emerald-700 dark:text-emerald-400",label:"Faol"},trial:{bg:"bg-blue-500",text:"text-blue-700 dark:text-blue-400",label:"Sinov"},cancelled:{bg:"bg-red-500",text:"text-red-700 dark:text-red-400",label:"Bekor"},expired:{bg:"bg-gray-400",text:"text-gray-600 dark:text-gray-400",label:"Tugagan"},pending:{bg:"bg-amber-500",text:"text-amber-700 dark:text-amber-400",label:"Kutilmoqda"}};return e[t]||e.pending},Yt=t=>t?new Date(t).toLocaleDateString("uz-UZ",{day:"2-digit",month:"2-digit",year:"numeric"}):"—",$t=t=>t?new Intl.NumberFormat("uz-UZ").format(t):"0",Pt=()=>{Vt.value=!0,k.reload({onFinish:()=>Vt.value=!1})};return(t,e)=>(y(),a(g,null,[r(l(b),{title:"Obunalar"}),s("div",O,[s("div",z,[s("div",L,[s("div",null,[e[2]||(e[2]=s("h1",{class:"text-xl lg:text-2xl font-semibold text-gray-900 dark:text-white"},"Obunalar",-1)),s("p",S,d(Mt.value.length)+" ta obuna",1)]),s("div",D,[s("button",{onClick:Pt,disabled:Vt.value,class:"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors"},[r(l(f),{class:i(["w-5 h-5",{"animate-spin":Vt.value}])},null,8,["class"])],8,T),s("button",U,[r(l(j),{class:"w-4 h-4"}),e[3]||(e[3]=n(" Export ",-1))])])]),s("div",I,[s("div",J,[s("div",N,[s("div",Z,[r(l(w),{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]),s("div",null,[s("p",q,d(h.stats.total),1),e[4]||(e[4]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jami",-1))])])]),s("div",E,[s("div",H,[s("div",K,[r(l(_),{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})]),s("div",null,[s("p",R,d(h.stats.active),1),e[5]||(e[5]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Faol",-1))])])]),s("div",V,[s("div",G,[s("div",M,[r(l(B),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),s("div",null,[s("p",Q,d(h.stats.trial),1),e[6]||(e[6]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Sinov",-1))])])]),s("div",Y,[s("div",$,[s("div",P,[r(l(C),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),s("div",null,[s("p",W,d(h.stats.cancelled),1),e[7]||(e[7]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Bekor",-1))])])]),s("div",X,[s("div",tt,[s("div",et,[r(l(A),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})]),s("div",null,[s("p",at,d($t(h.stats.mrr)),1),e[8]||(e[8]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"MRR",-1))])])]),s("div",rt,[s("div",st,[s("div",lt,[r(l(A),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),s("div",null,[s("p",dt,d($t(h.stats.total_revenue)),1),e[9]||(e[9]=s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jami daromad",-1))])])])]),s("div",it,[s("div",nt,[s("div",xt,[s("div",ot,[r(l(F),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>Ht.value=t),type:"text",placeholder:"Qidirish...",class:"w-full pl-9 pr-4 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[c,Ht.value]])]),s("div",ct,[(y(),a(g,null,u(Gt,t=>s("button",{key:t.value,onClick:e=>Kt.value=t.value,class:i(["px-3 py-1.5 text-xs font-medium rounded-md transition-all",Kt.value===t.value?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"])},[n(d(t.label)+" ",1),s("span",ut,d(t.count),1)],10,gt)),64))]),h.plans.length>0?o((y(),a("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=t=>Rt.value=t),class:"px-3 py-2 text-sm bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-indigo-500"},[e[10]||(e[10]=s("option",{value:"all"},"Barcha tariflar",-1)),(y(!0),a(g,null,u(h.plans,t=>(y(),a("option",{key:t.id,value:t.id},d(t.name),9,pt))),128))],512)),[[p,Rt.value]]):x("",!0)])]),s("div",mt,[s("table",yt,[e[11]||(e[11]=s("thead",null,[s("tr",{class:"bg-gray-50 dark:bg-gray-900/50"},[s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Biznes"),s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Tarif"),s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),s("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Narx"),s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Davr"),s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Boshlanish"),s("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Tugash"),s("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Auto")])],-1)),s("tbody",bt,[(y(!0),a(g,null,u(Mt.value,t=>(y(),a("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-colors"},[s("td",kt,[s("div",ht,[s("div",vt,[s("span",ft,d(t.business?.name?.charAt(0)||"?"),1)]),s("div",wt,[s("p",jt,d(t.business?.name||"N/A"),1),s("p",_t,d(t.business?.owner?.email||""),1)])])]),s("td",Bt,[s("span",Ct,d(t.plan?.name||"—"),1)]),s("td",At,[s("div",Ft,[s("span",{class:i(["w-2 h-2 rounded-full",Qt(t.status).bg])},null,2),s("span",{class:i(["text-sm font-medium",Qt(t.status).text])},d(Qt(t.status).label),3)])]),s("td",Ot,[s("span",zt,d($t(t.amount)),1),s("span",Lt,d(t.currency),1)]),s("td",St,[s("span",Dt,d("monthly"===t.billing_cycle?"Oylik":"Yillik"),1)]),s("td",Tt,[s("span",Ut,d(Yt(t.starts_at)),1)]),s("td",It,[s("span",Jt,d(Yt(t.ends_at)),1)]),s("td",Nt,[t.auto_renew?(y(),m(l(_),{key:0,class:"w-5 h-5 text-emerald-500 mx-auto"})):(y(),m(l(C),{key:1,class:"w-5 h-5 text-gray-300 dark:text-gray-600 mx-auto"}))])]))),128))])])]),0===Mt.value.length?(y(),a("div",Zt,[s("div",qt,[r(l(w),{class:"w-8 h-8 text-gray-400"})]),e[12]||(e[12]=s("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-1"},"Obunalar topilmadi",-1)),e[13]||(e[13]=s("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Hozircha hech qanday obuna mavjud emas",-1))])):x("",!0)])])])],64))}});export{Et as default};
