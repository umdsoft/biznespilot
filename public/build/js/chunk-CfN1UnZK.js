import{r as e}from"./chunk-DKkye6wf.js";import{r as a}from"./chunk-ab1b1Fp4.js";import{r as t}from"./chunk-afst19KZ.js";import{r}from"./chunk-CcsIA-HL.js";import{r as l}from"./chunk-34FQ54zy.js";import{r as s}from"./chunk-DOBCiesv.js";import{r as o}from"./chunk-D8HUIhLG.js";import{r as d}from"./chunk-CmlhnALp.js";import{r as i,a as n}from"./chunk-DUcDuGHI.js";import{r as c}from"./chunk-DncpFozA.js";import{r as g,D as b,E as m,L as u,z as x,A as y,B as h,v as p,M as k,H as f,y as v,C as w,b as j,F as _,G as q}from"./chunk-7Urb0kxg.js";import{a as T}from"./chunk-9PkX4iPz.js";const z={key:0,class:"absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-amber-400 to-orange-500"},A={class:"p-5 pl-6"},C={class:"flex items-start gap-4"},S={class:"flex-1 min-w-0 space-y-3"},B={class:"flex items-start justify-between gap-4"},L={class:"flex-1 min-w-0"},P={class:"flex items-center gap-2 mb-1"},D={class:"text-lg font-semibold text-gray-900 dark:text-white truncate"},R={class:"text-sm text-gray-500 dark:text-gray-400 font-mono"},$={key:0,class:"flex items-start gap-3 p-3 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"},H={class:"flex-1 min-w-0"},Q={class:"text-xs text-amber-700 dark:text-amber-300"},U={class:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400"},V={class:"flex items-center gap-1.5"},I={key:0,class:"flex items-center gap-1.5"},J={class:"text-gray-500 dark:text-gray-400"},M={key:1,class:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-900/50 border border-gray-200 dark:border-gray-700"},Z={class:"text-xs font-mono text-gray-500 dark:text-gray-400 tabular-nums"},E={class:"flex flex-col items-end gap-2 flex-shrink-0"},F={key:0,class:"flex flex-col items-end gap-2"},G={class:"flex items-center gap-2"},K={class:"text-2xl font-bold text-gray-900 dark:text-white"},N=["disabled"],O={key:0},Y={key:1},W=["href"],X={__name:"CallListRow",props:{call:{type:Object,required:!0},isAnalyzing:{type:Boolean,default:!1}},emits:["analyze","viewReport"],setup(e,{emit:n}){const j=e,_=n,q=g(!1),T=()=>["completed","answered"].includes(j.call.status)?{icon:i,text:"Javob berildi",class:"text-emerald-600 bg-emerald-50 dark:text-emerald-400 dark:bg-emerald-900/20"}:{icon:c,text:"Javob yo'q",class:"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/20"},X=()=>{const e=j.call.ai_score;return e?e>=80?{class:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300",label:"A"}:e>=50?{class:"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300",label:"B"}:{class:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300",label:"C"}:null},ee=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,ae=e=>{const a=new Date(e);return a.toLocaleDateString("uz-UZ",{day:"numeric",month:"short"})+", "+a.toLocaleTimeString("uz-UZ",{hour:"2-digit",minute:"2-digit"})},te=()=>{q.value=!q.value},re=j.call.recommended_reason,le=null!==j.call.ai_score&&void 0!==j.call.ai_score,se=j.call.duration<30;return(i,n)=>(m(),b("div",{class:h(["group relative overflow-hidden rounded-xl border transition-all duration-200",y(re)?"bg-gradient-to-r from-amber-50/50 via-white to-white dark:from-amber-900/10 dark:via-gray-800 dark:to-gray-800 border-amber-200 dark:border-amber-800 shadow-sm hover:shadow-md":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600"])},[y(re)?(m(),b("div",z)):u("",!0),x("div",A,[x("div",C,[x("div",{class:h(["incoming"===j.call.type?"text-emerald-600 bg-emerald-50 dark:text-emerald-400 dark:bg-emerald-900/20":"text-blue-600 bg-blue-50 dark:text-blue-400 dark:bg-blue-900/20","w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 ring-1 ring-gray-900/5"])},[(m(),p(k("incoming"===j.call.type?o:d),{class:"w-6 h-6"}))],2),x("div",S,[x("div",B,[x("div",L,[x("div",P,[x("h3",D,f(e.call.lead?.name||e.call.phone),1),(m(),p(k(T().icon),{class:h([T().class,"w-4 h-4 flex-shrink-0"])},null,8,["class"]))]),x("p",R,f(e.call.phone),1)]),x("span",{class:h([T().class,"px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap"])},f(T().text),3)]),y(re)&&!y(le)?(m(),b("div",$,[v(y(a),{class:"w-5 h-5 text-amber-600 dark:text-amber-400 flex-shrink-0 mt-0.5"}),x("div",H,[n[2]||(n[2]=x("p",{class:"text-sm font-medium text-amber-900 dark:text-amber-100 mb-0.5"}," AI Tavsiyasi ",-1)),x("p",Q,f(e.call.recommended_reason),1)])])):u("",!0),x("div",U,[x("div",V,[v(y(t),{class:"w-4 h-4"}),x("span",{class:h(se?"text-red-600 dark:text-red-400 font-semibold":"")},f(e.call.formatted_duration||ee(e.call.duration)),3)]),n[4]||(n[4]=x("span",{class:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600"},null,-1)),x("span",null,f(ae(e.call.created_at)),1),e.call.operator?(m(),b("span",I,[n[3]||(n[3]=x("span",{class:"w-1 h-1 rounded-full bg-gray-300 dark:bg-gray-600"},null,-1)),x("span",J,f(e.call.operator.name),1)])):u("",!0)]),e.call.recording_url?(m(),b("div",M,[x("button",{onClick:te,class:"w-8 h-8 rounded-full bg-gray-900 dark:bg-white text-white dark:text-gray-900 flex items-center justify-center hover:scale-105 transition-transform"},[(m(),p(k(q.value?y(r):y(l)),{class:"w-4 h-4"}))]),n[5]||(n[5]=x("div",{class:"flex-1 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"},[x("div",{class:"h-full bg-gradient-to-r from-indigo-500 to-purple-500",style:{width:"0%"}})],-1)),x("span",Z,f(e.call.formatted_duration||ee(e.call.duration)),1)])):u("",!0)]),x("div",E,[y(le)?(m(),b("div",F,[x("div",G,[x("span",K,f(e.call.ai_score),1),x("span",{class:h([X().class,"w-10 h-10 rounded-lg flex items-center justify-center text-sm font-bold"])},f(X().label),3)]),x("button",{onClick:n[0]||(n[0]=a=>_("viewReport",e.call.id)),class:"px-4 py-2 rounded-lg bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 font-medium text-sm transition-colors flex items-center gap-2"},[v(y(s),{class:"w-4 h-4"}),n[6]||(n[6]=w(" Hisobot ",-1))])])):y(re)?(m(),b("button",{key:1,onClick:n[1]||(n[1]=a=>_("analyze",e.call.id)),disabled:e.isAnalyzing,class:h(["px-6 py-3 rounded-xl font-semibold text-sm transition-all flex items-center gap-2 shadow-lg hover:shadow-xl",e.isAnalyzing?"bg-gray-300 dark:bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white transform hover:scale-105"])},[v(y(a),{class:"w-5 h-5"}),e.isAnalyzing?(m(),b("span",O,"Tahlil qilinmoqda...")):(m(),b("span",Y,"✨ Tahlil Qilish"))],10,N)):e.call.recording_url?(m(),b("a",{key:2,href:e.call.recording_url,download:"",class:"px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 font-medium text-sm transition-colors"}," Yuklab olish ",8,W)):u("",!0)])])]),n[7]||(n[7]=x("div",{class:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none"},[x("div",{class:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent"})],-1))],2))}},ee={class:"space-y-6"},ae={class:"border-b border-gray-200 dark:border-gray-700"},te={class:"flex gap-1","aria-label":"Tabs"},re=["onClick"],le={class:"flex items-center gap-2.5"},se={key:0,class:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 dark:from-emerald-900/20 dark:via-teal-900/20 dark:to-cyan-900/20 border-2 border-emerald-200 dark:border-emerald-800 p-12"},oe={class:"relative text-center space-y-4"},de={class:"flex justify-center"},ie={class:"relative"},ne={class:"w-24 h-24 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center shadow-lg"},ce={key:1,class:"text-center py-16"},ge={key:2,class:"space-y-3"},be={key:3,class:"text-center pt-6"},me={__name:"CallList",props:{calls:{type:Array,default:()=>[]},activeTab:{type:String,default:"all"},auditCount:{type:Number,default:0},canViewAudit:{type:Boolean,default:!1},routePrefix:{type:String,default:"/business/calls"}},setup(a){const t=a,r=g(new Set),l=j(()=>{const e=[{key:"all",label:"Barchasi",icon:T,count:t.calls.length}];return t.canViewAudit&&e.push({key:"audit",label:"Diqqat Talab",icon:n,count:t.auditCount,highlight:!0}),e}),s=async a=>{if(!r.value.has(a)){r.value.add(a);try{await new Promise(e=>setTimeout(e,2e3)),e.reload({preserveScroll:!0})}catch(t){}finally{r.value.delete(a)}}},o=a=>{e.get(`${t.routePrefix}/${a}`)};return(d,n)=>(m(),b("div",ee,[x("div",ae,[x("nav",te,[(m(!0),b(_,null,q(l.value,r=>(m(),b("button",{key:r.key,onClick:a=>{return l=r.key,void e.get(t.routePrefix,{tab:l},{preserveState:!0,preserveScroll:!0});var l},class:h(["group relative px-6 py-4 font-semibold text-sm transition-all duration-200",a.activeTab===r.key?r.highlight?"text-orange-600 dark:text-orange-400":"text-indigo-600 dark:text-indigo-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"])},[x("span",le,[(m(),p(k(r.icon),{class:h(["w-5 h-5 transition-all duration-200",a.activeTab===r.key&&r.highlight&&"animate-pulse"])},null,8,["class"])),x("span",null,f(r.label),1),r.count>0?(m(),b("span",{key:0,class:h(["px-2.5 py-0.5 rounded-full text-xs font-bold transition-all duration-200",a.activeTab===r.key?r.highlight?"bg-orange-500 text-white":"bg-indigo-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300"])},f(r.count>99?"99+":r.count),3)):u("",!0)]),x("span",{class:h(["absolute bottom-0 left-0 right-0 h-0.5 transition-all duration-200",a.activeTab===r.key?r.highlight?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-indigo-500 to-purple-500":"bg-transparent"])},null,2)],10,re))),128))])]),"audit"===a.activeTab&&0===a.calls.length?(m(),b("div",se,[n[2]||(n[2]=x("div",{class:"absolute inset-0 opacity-10"},[x("div",{class:"absolute top-0 left-0 w-72 h-72 bg-emerald-400 rounded-full blur-3xl"}),x("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-teal-400 rounded-full blur-3xl"})],-1)),x("div",oe,[x("div",de,[x("div",ie,[x("div",ne,[v(y(i),{class:"w-14 h-14 text-white"})]),n[0]||(n[0]=x("div",{class:"absolute -top-1 -right-1 w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center shadow-lg animate-bounce"},[x("span",{class:"text-xl"},"✨")],-1))])]),n[1]||(n[1]=x("div",null,[x("h3",{class:"text-3xl font-bold text-emerald-900 dark:text-emerald-100 mb-2"}," Ajoyib Ish! "),x("p",{class:"text-lg text-emerald-700 dark:text-emerald-300"}," Hozircha diqqat talab qiladigan qo'ng'iroqlar yo'q ")],-1))])])):"all"===a.activeTab&&0===a.calls.length?(m(),b("div",ce,[v(y(T),{class:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-600 mb-4"}),n[3]||(n[3]=x("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"}," Qo'ng'iroqlar topilmadi ",-1)),n[4]||(n[4]=x("p",{class:"text-gray-500 dark:text-gray-400"}," Tanlangan davr uchun qo'ng'iroqlar mavjud emas ",-1))])):(m(),b("div",ge,[(m(!0),b(_,null,q(a.calls,e=>{return m(),p(X,{key:e.id,call:e,"is-analyzing":(a=e.id,r.value.has(a)),onAnalyze:s,onViewReport:o},null,8,["call","is-analyzing"]);var a}),128))])),a.calls.length>=100?(m(),b("div",be,[...n[5]||(n[5]=[x("button",{class:"px-6 py-3 rounded-xl bg-white dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:border-indigo-500 dark:hover:border-indigo-400 hover:text-indigo-600 dark:hover:text-indigo-400 font-semibold transition-all"}," Ko'proq yuklash ",-1)])])):u("",!0)]))}};export{me as _};
