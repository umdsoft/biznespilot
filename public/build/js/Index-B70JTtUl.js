import{r as e,o as a,v as t,x as s,L as r,y as l,C as d,I as n,A as i,B as u,E as o,D as g,z as c,J as x,K as p,Q as b,F as y,H as m,G as k}from"./chunk-CpmtkKLp.js";import{h,a as v}from"./chunk-BhZp3z4u.js";import{_ as f}from"./chunk-BDBDdGhv.js";import{a as w}from"./chunk-D7SyfRoT.js";import{r as _}from"./chunk-BiBvtcLb.js";import{r as j}from"./chunk-BB7xsSUf.js";import{r as B}from"./chunk-eMHYSAeQ.js";import{r as Y}from"./chunk-DvBKKKMs.js";import{r as C}from"./chunk-dqIIyBTR.js";import{r as O}from"./chunk-DvlohF_U.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const $={class:"space-y-6"},q={class:"flex items-center justify-between"},z={class:"flex items-center gap-3"},F=["disabled"],H={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},V={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},K={class:"flex items-center gap-3"},U={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},A={class:"text-2xl font-bold text-blue-600"},I={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},J={class:"flex items-center gap-3"},P={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},R={class:"text-2xl font-bold text-green-600"},D={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},E={class:"flex items-center gap-3"},G={class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center"},L={class:"text-2xl font-bold text-red-600"},M={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},N={class:"flex items-center gap-3"},Q={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},S={class:"text-2xl font-bold text-purple-600"},T={key:1,class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},W={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},X={class:"flex items-center justify-between mb-2"},Z={class:"text-lg font-bold text-gray-900 dark:text-white"},ee={class:"bg-gray-200 dark:bg-gray-600 rounded-full h-2"},ae={class:"flex items-center gap-4"},te={class:"flex items-center gap-2"},se=["value"],re={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden"},le={class:"overflow-x-auto"},de={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ne={class:"divide-y divide-gray-200 dark:divide-gray-700"},ie={class:"px-6 py-4 whitespace-nowrap"},ue={class:"flex items-center"},oe={class:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},ge={class:"text-sm font-medium text-blue-600 dark:text-blue-400"},ce={class:"ml-4"},xe={class:"text-sm font-medium text-gray-900 dark:text-white"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},be={class:"px-6 py-4 whitespace-nowrap"},ye={class:"px-6 py-4 whitespace-nowrap"},me={class:"flex items-center gap-2"},ke={class:"w-24 bg-gray-200 dark:bg-gray-600 rounded-full h-2"},he={class:"text-sm font-medium text-gray-900 dark:text-white"},ve={class:"px-6 py-4 whitespace-nowrap"},fe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},we={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},_e={class:"text-green-600"},je={key:0,class:"text-red-600 ml-2"},Be={key:0,class:"p-8 text-center"},Ye={key:1,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Ce={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50"},Oe={class:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4"},$e={class:"space-y-4"},qe=["value"],ze={class:"flex justify-end gap-3 mt-6"},Fe={__name:"Index",props:{currentBusiness:Object},setup(Fe){const He=Fe,Ve=e(!0),Ke=e([]),Ue=e(null),Ae=e(""),Ie=e(!1),Je=e([]),Pe=e({user_id:"",start_date:""}),Re=[{value:"",label:"Barcha statuslar"},{value:"not_started",label:"Boshlanmagan"},{value:"in_progress",label:"Jarayonda"},{value:"completed",label:"Yakunlangan"},{value:"cancelled",label:"Bekor qilingan"}],De=async()=>{if(He.currentBusiness?.id){Ve.value=!0;try{const[e,a]=await Promise.all([v.get(`/api/v1/businesses/${He.currentBusiness.id}/hr/onboarding`,{params:{status:Ae.value||void 0}}),v.get(`/api/v1/businesses/${He.currentBusiness.id}/hr/onboarding/statistics`)]);Ke.value=e.data.data?.data||[],Ue.value=a.data.data}catch(e){}finally{Ve.value=!1}}},Ee=async()=>{Ie.value=!0;try{const e=await v.get(`/api/v1/businesses/${He.currentBusiness.id}/users`);Je.value=e.data.data||[]}catch(e){}},Ge=async()=>{if(He.currentBusiness?.id&&Pe.value.user_id)try{await v.post(`/api/v1/businesses/${He.currentBusiness.id}/hr/onboarding`,Pe.value),Ie.value=!1,Pe.value={user_id:"",start_date:""},De()}catch(e){}},Le=e=>({day_30:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",day_60:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",day_90:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"}[e]||"bg-gray-100 text-gray-800"),Me=e=>e>=80?"bg-green-500":e>=50?"bg-yellow-500":"bg-red-500";return a(De),(e,a)=>(g(),t(f,{title:"Onboarding"},{default:s(()=>[r(i(h),{title:"HR Onboarding"}),l("div",$,[l("div",q,[a[6]||(a[6]=l("div",null,[l("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," 30-60-90 Onboarding "),l("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Yangi hodimlarni moslashish jarayonini boshqarish ")],-1)),l("div",z,[l("button",{onClick:De,disabled:Ve.value,class:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},[r(i(w),{class:o(["w-5 h-5",Ve.value?"animate-spin":""])},null,8,["class"]),a[4]||(a[4]=u(" Yangilash ",-1))],8,F),l("button",{onClick:Ee,class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},[r(i(_),{class:"w-5 h-5"}),a[5]||(a[5]=u(" Yangi onboarding ",-1))])])]),Ue.value?(g(),d("div",H,[l("div",V,[l("div",K,[l("div",U,[r(i(j),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),l("div",null,[a[7]||(a[7]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Faol rejalar",-1)),l("p",A,c(Ue.value.active_plans||0),1)])])]),l("div",I,[l("div",J,[l("div",P,[r(i(B),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),l("div",null,[a[8]||(a[8]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yakunlangan",-1)),l("p",R,c(Ue.value.completed_plans||0),1)])])]),l("div",D,[l("div",E,[l("div",G,[r(i(Y),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),l("div",null,[a[9]||(a[9]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kechikkan vazifalar",-1)),l("p",L,c(Ue.value.overdue_tasks_count||0),1)])])]),l("div",M,[l("div",N,[l("div",Q,[r(i(C),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),l("div",null,[a[10]||(a[10]=l("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"O'rtacha progress",-1)),l("p",S,c(Ue.value.avg_progress?.toFixed(0)||0)+"% ",1)])])])])):n("",!0),Ue.value?.milestone_completion_rates?(g(),d("div",T,[a[11]||(a[11]=l("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Milestone o'rtacha ballari ",-1)),l("div",W,[(g(!0),d(x,null,p(Ue.value.milestone_completion_rates,(e,a)=>(g(),d("div",{key:a,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[l("div",X,[l("span",{class:o(["px-3 py-1 text-xs font-medium rounded-full",Le(a)])},c("day_30"===a?"30 kun":"day_60"===a?"60 kun":"90 kun"),3),l("span",Z,c(e?.toFixed(0)||0)+"% ",1)]),l("div",ee,[l("div",{class:o(["h-2 rounded-full transition-all duration-500",Me(e)]),style:b({width:`${e||0}%`})},null,6)])]))),128))])])):n("",!0),l("div",ae,[l("div",te,[r(i(O),{class:"w-5 h-5 text-gray-400"}),y(l("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>Ae.value=e),onChange:De,class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500"},[(g(),d(x,null,p(Re,e=>l("option",{key:e.value,value:e.value},c(e.label),9,se)),64))],544),[[m,Ae.value]])])]),l("div",re,[l("div",le,[l("table",de,[a[13]||(a[13]=l("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[l("tr",null,[l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Hodim"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Bosqich"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Progress"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Status"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Kunlar"),l("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Vazifalar")])],-1)),l("tbody",ne,[(g(!0),d(x,null,p(Ke.value,e=>{return g(),d("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[l("td",ie,[l("div",ue,[l("div",oe,[l("span",ge,c(e.user?.name?.charAt(0)||"?"),1)]),l("div",ce,[l("div",xe,c(e.user?.name||"Noma'lum"),1),l("div",pe,c(e.user?.email),1)])])]),l("td",be,[l("span",{class:o(["px-3 py-1 text-xs font-medium rounded-full",Le(e.current_phase)])},c(e.current_phase_label),3)]),l("td",ye,[l("div",me,[l("div",ke,[l("div",{class:o(["h-2 rounded-full",Me(e.progress)]),style:b({width:`${e.progress}%`})},null,6)]),l("span",he,c(e.progress)+"% ",1)])]),l("td",ve,[l("span",{class:o(["px-3 py-1 text-xs font-medium rounded-full",(t=e.status,{not_started:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",in_progress:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",cancelled:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}[t]||"bg-gray-100 text-gray-800")])},c(e.status_label),3)]),l("td",fe,c(e.days_elapsed)+" kun / 90 kun ",1),l("td",we,[l("span",_e,c(e.completed_tasks_count),1),a[12]||(a[12]=u(" / ",-1)),l("span",null,c(e.total_tasks_count),1),e.overdue_tasks_count>0?(g(),d("span",je," ("+c(e.overdue_tasks_count)+" kechikkan) ",1)):n("",!0)])]);var t}),128))])])]),Ve.value?(g(),d("div",Be,[r(i(w),{class:"w-8 h-8 mx-auto animate-spin text-blue-600"}),a[14]||(a[14]=l("p",{class:"mt-2 text-gray-500"},"Yuklanmoqda...",-1))])):0===Ke.value.length?(g(),d("div",Ye,[r(i(j),{class:"w-12 h-12 mx-auto opacity-50 mb-3"}),a[15]||(a[15]=l("p",null,"Onboarding rejalari topilmadi",-1)),l("button",{onClick:Ee,class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Birinchi rejani yarating ")])):n("",!0)])]),Ie.value?(g(),d("div",Ce,[l("div",Oe,[a[19]||(a[19]=l("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"}," Yangi Onboarding Rejasi ",-1)),l("div",$e,[l("div",null,[a[17]||(a[17]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Hodim ",-1)),y(l("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>Pe.value.user_id=e),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},[a[16]||(a[16]=l("option",{value:""},"Tanlang...",-1)),(g(!0),d(x,null,p(Je.value,e=>(g(),d("option",{key:e.id,value:e.id},c(e.name),9,qe))),128))],512),[[m,Pe.value.user_id]])]),l("div",null,[a[18]||(a[18]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"}," Boshlash sanasi ",-1)),y(l("input",{type:"date","onUpdate:modelValue":a[2]||(a[2]=e=>Pe.value.start_date=e),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"},null,512),[[k,Pe.value.start_date]])])]),l("div",ze,[l("button",{onClick:a[3]||(a[3]=e=>Ie.value=!1),class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"}," Bekor qilish "),l("button",{onClick:Ge,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Yaratish ")])])])):n("",!0)]),_:1}))}};export{Fe as default};
