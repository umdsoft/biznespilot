import{D as e,z as t,E as r,b as a,r as l,w as s,o,e as n,C as d,L as i,H as g,B as u,y as c,A as b,v as x,M as m,I as h,J as v,F as y,G as f,Q as p,h as k,p as w}from"./chunk-7Urb0kxg.js";import{r as C,a as j}from"./chunk-DKkye6wf.js";import{a as B}from"./chunk-C1ExV0Y3.js";import{r as I}from"./chunk-afst19KZ.js";import{r as S}from"./chunk-BscFvtBT.js";import{r as z}from"./chunk-Be6I8nOg.js";import{r as M}from"./chunk-CoFofPT-.js";import{k as _,a as H,d as P}from"./chunk-Dm-LAqtr.js";import{r as q}from"./chunk-COgkU9mi.js";import{r as A}from"./chunk-DZ7Jx33-.js";import{r as V}from"./chunk-Di_ohWeo.js";function T(a,l){return r(),e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"})])}const O={class:"space-y-6"},$={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Y={class:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-3"},F={key:0,class:"inline-flex items-center justify-center px-2.5 py-1 text-sm font-bold bg-red-500 text-white rounded-full animate-pulse"},J=["disabled"],U={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4"},X={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all cursor-pointer group"},K={class:"flex items-center justify-between"},L={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center group-hover:scale-110 transition-transform"},N={class:"mt-3"},D={class:"text-2xl font-bold text-gray-900 dark:text-white"},E={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-green-300 dark:hover:border-green-600 transition-all cursor-pointer group"},G={class:"flex items-center justify-between"},Q={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-100 to-emerald-200 dark:from-green-900/30 dark:to-emerald-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},R={class:"mt-3"},Z={class:"text-2xl font-bold text-green-600 dark:text-green-400"},W={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-amber-300 dark:hover:border-amber-600 transition-all cursor-pointer group"},ee={class:"flex items-center justify-between"},te={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-amber-100 to-orange-200 dark:from-amber-900/30 dark:to-orange-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},re={class:"mt-3"},ae={class:"text-2xl font-bold text-amber-600 dark:text-amber-400"},le={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-gray-300 dark:hover:border-gray-600 transition-all cursor-pointer group"},se={class:"flex items-center justify-between"},oe={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-gray-100 to-slate-200 dark:from-gray-700 dark:to-slate-600 flex items-center justify-center group-hover:scale-110 transition-transform"},ne={class:"mt-3"},de={class:"text-2xl font-bold text-gray-600 dark:text-gray-400"},ie={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg hover:border-red-300 dark:hover:border-red-600 transition-all cursor-pointer group"},ge={class:"flex items-center justify-between"},ue={class:"w-10 h-10 rounded-xl bg-gradient-to-br from-red-100 to-rose-200 dark:from-red-900/30 dark:to-rose-800/30 flex items-center justify-center group-hover:scale-110 transition-transform"},ce={class:"mt-3"},be={class:"text-2xl font-bold text-red-600 dark:text-red-400"},xe={class:"flex items-center justify-between"},me={class:"mt-3"},he={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ve={class:"lg:col-span-1 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-sm",style:{height:"700px"}},ye={class:"p-4 border-b border-gray-200 dark:border-gray-700 space-y-3 bg-gray-50/50 dark:bg-gray-800/50"},fe={class:"flex flex-wrap gap-2"},pe={class:"relative"},ke={class:"flex-1 overflow-y-auto"},we=["onClick"],Ce={key:0,class:"absolute top-4 right-4 w-3 h-3 bg-blue-500 rounded-full animate-pulse ring-4 ring-blue-500/20"},je={class:"flex items-start gap-3"},Be={class:"relative flex-shrink-0"},Ie={key:0,class:"absolute -bottom-0.5 -right-0.5 w-4 h-4 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"},Se={class:"flex-1 min-w-0"},ze={class:"flex items-center justify-between gap-2"},Me={class:"text-sm font-semibold text-gray-900 dark:text-white truncate"},_e={class:"flex-shrink-0 text-xs text-gray-400 dark:text-gray-500"},He={key:0,class:"text-xs text-gray-400 dark:text-gray-500 truncate"},Pe={class:"flex items-center gap-2 mt-2"},qe={key:0,class:"inline-flex items-center justify-center min-w-[18px] h-[18px] px-1 text-xs font-bold bg-blue-500 text-white rounded-full"},Ae={class:"text-xs text-gray-400 dark:text-gray-500"},Ve={key:0,class:"flex flex-col items-center justify-center h-full p-8 text-center"},Te={class:"relative w-20 h-20 mb-4"},Oe={class:"relative w-20 h-20 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 flex items-center justify-center"},$e={class:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col shadow-sm",style:{height:"700px"}},Ye={key:0,class:"flex-1 flex flex-col items-center justify-center text-center p-8"},Fe={class:"relative w-24 h-24 mb-6"},Je={key:0,class:"flex-1 flex items-center justify-center"},Ue={class:"flex flex-col items-center gap-3"},Xe={class:"flex-shrink-0 px-6 py-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-gray-50 to-gray-100/50 dark:from-gray-800/50 dark:to-gray-900/30"},Ke={key:0,class:"flex items-center justify-between"},Le={class:"flex items-center gap-4"},Ne={class:"relative"},De={key:0,class:"absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-white dark:border-gray-800 rounded-full"},Ee={class:"text-lg font-bold text-gray-900 dark:text-white"},Ge={class:"flex items-center gap-2 mt-0.5"},Qe={key:0,class:"text-sm text-blue-500 dark:text-blue-400"},Re={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Ze={class:"text-sm text-gray-500 dark:text-gray-400 capitalize flex items-center gap-1"},We={class:"flex items-center gap-3"},et={class:"p-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},tt={class:"text-sm leading-relaxed whitespace-pre-wrap"},rt={key:0,class:"flex flex-col items-center justify-center h-full text-center"},at={class:"flex-shrink-0 p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},lt={type:"button",class:"p-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors"},st=["disabled"],ot={key:1,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},nt={__name:"InboxIndex",props:{conversations:Array,stats:Object,filters:Object,currentBusiness:Object,panelType:{type:String,default:"business",validator:e=>["business","saleshead","operator"].includes(e)}},setup(nt){const dt=nt,it=a(()=>({business:{routePrefix:"business",buttonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30",filterActiveClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30",statsBorderHover:"hover:border-blue-300 dark:hover:border-blue-600",statsIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",statsIconColor:"text-blue-600 dark:text-blue-400",statsValueColor:"text-blue-600 dark:text-blue-400",emptyStatePulseBg:"bg-blue-500/20",emptyStateIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",emptyStateIconColor:"text-blue-500 dark:text-blue-400",loadingSpinnerColor:"text-blue-500",outboundMessageClass:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-br-md",outboundTimeClass:"text-blue-200",sendButtonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30"},saleshead:{routePrefix:"sales-head",buttonClass:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-emerald-500/30",filterActiveClass:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg shadow-emerald-500/30",statsBorderHover:"hover:border-emerald-300 dark:hover:border-emerald-600",statsIconBg:"bg-gradient-to-br from-emerald-100 to-teal-200 dark:from-emerald-900/30 dark:to-teal-800/30",statsIconColor:"text-emerald-600 dark:text-emerald-400",statsValueColor:"text-emerald-600 dark:text-emerald-400",emptyStatePulseBg:"bg-emerald-500/20",emptyStateIconBg:"bg-gradient-to-br from-emerald-100 to-teal-200 dark:from-emerald-900/30 dark:to-teal-800/30",emptyStateIconColor:"text-emerald-500 dark:text-emerald-400",loadingSpinnerColor:"text-emerald-500",outboundMessageClass:"bg-gradient-to-br from-emerald-600 to-teal-600 text-white rounded-br-md",outboundTimeClass:"text-emerald-200",sendButtonClass:"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-emerald-500/30"},operator:{routePrefix:"operator",buttonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30",filterActiveClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/30",statsBorderHover:"hover:border-blue-300 dark:hover:border-blue-600",statsIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",statsIconColor:"text-blue-600 dark:text-blue-400",statsValueColor:"text-blue-600 dark:text-blue-400",emptyStatePulseBg:"bg-blue-500/20",emptyStateIconBg:"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900/30 dark:to-indigo-800/30",emptyStateIconColor:"text-blue-500 dark:text-blue-400",loadingSpinnerColor:"text-blue-500",outboundMessageClass:"bg-gradient-to-br from-blue-600 to-indigo-600 text-white rounded-br-md",outboundTimeClass:"text-blue-200",sendButtonClass:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 shadow-blue-500/30"}}[dt.panelType])),gt=l(null),ut=l(null),ct=l(""),bt=l(!1),xt=l(!1),mt=l(!1),ht=l(dt.filters?.search||""),vt=l({...dt.filters}),yt=l(null),ft=l(dt.conversations||[]),pt=l(dt.stats||{});let kt=null,wt=null,Ct=null;s(()=>dt.conversations,e=>{ft.value=e||[]}),s(()=>dt.stats,e=>{pt.value=e||{}});const jt={render:()=>k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})])},Bt={render:()=>k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})])},It={render:()=>k("svg",{viewBox:"0 0 24 24",fill:"currentColor"},[k("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})])},St={render:()=>k("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])},zt=e=>({instagram:jt,telegram:Bt,facebook:It}[e]||St),Mt=e=>({instagram:"bg-gradient-to-br from-purple-500 via-pink-500 to-orange-400",telegram:"bg-gradient-to-br from-sky-400 to-blue-500",facebook:"bg-gradient-to-br from-blue-500 to-blue-600"}[e]||"bg-gradient-to-br from-gray-400 to-gray-500"),_t=e=>{const t={open:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",active:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",pending:"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400",closed:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-400"};return t[e]||t.closed},Ht=e=>({open:"Ochiq",active:"Faol",pending:"Kutilmoqda",closed:"Yopilgan"}[e]||e),Pt=()=>{xt.value=!0,C.reload({onFinish:()=>{xt.value=!1}})},qt=()=>{clearTimeout(Ct),Ct=setTimeout(()=>{At("search",ht.value)},500)},At=(e,t)=>{vt.value[e]=t,C.get(route(`${it.value.routePrefix}.inbox.index`),vt.value,{preserveState:!0,preserveScroll:!0})},Vt=async e=>{gt.value=e,mt.value=!0;try{const t=await j.get(route(`${it.value.routePrefix}.inbox.show`,e));ut.value=t.data.conversation,await w(),Ot()}catch(t){}finally{mt.value=!1}},Tt=async()=>{if(ct.value.trim()&&!bt.value){bt.value=!0;try{(await j.post(route(`${it.value.routePrefix}.inbox.send`,gt.value),{message:ct.value})).data.success&&(ct.value="",await Vt(gt.value))}catch(e){}finally{bt.value=!1}}},Ot=()=>{yt.value&&(yt.value.scrollTop=yt.value.scrollHeight)},$t=async()=>{try{const e=new URLSearchParams;vt.value.channel&&e.append("channel",vt.value.channel),vt.value.search&&e.append("search",vt.value.search);const t=await j.get(route(`${it.value.routePrefix}.inbox.index`)+"?"+e.toString(),{headers:{Accept:"application/json"}});t.data.conversations&&(ft.value=t.data.conversations),t.data.stats&&(pt.value=t.data.stats)}catch(e){}},Yt=async()=>{if(gt.value&&!mt.value)try{const e=await j.get(route(`${it.value.routePrefix}.inbox.show`,gt.value));if(e.data.conversation){const t=ut.value?.messages?.length||0,r=e.data.conversation.messages?.length||0;ut.value=e.data.conversation,r>t&&(await w(),Ot())}}catch(e){}};return o(()=>{kt=setInterval($t,5e3),wt=setInterval(Yt,3e3)}),n(()=>{kt&&(clearInterval(kt),kt=null),wt&&(clearInterval(wt),wt=null),Ct&&(clearTimeout(Ct),Ct=null)}),(a,l)=>(r(),e("div",O,[t("div",$,[t("div",null,[t("h1",Y,[l[5]||(l[5]=d(" Yagona Inbox ",-1)),pt.value.unread?.total>0?(r(),e("span",F,g(pt.value.unread.total),1)):i("",!0)]),l[6]||(l[6]=t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Barcha kanallardan kelgan xabarlarni bir joyda boshqaring ",-1))]),t("button",{onClick:Pt,disabled:xt.value,class:u(["inline-flex items-center px-4 py-2.5 text-white text-sm font-semibold rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50",it.value.buttonClass])},[(r(),e("svg",{class:u(["w-4 h-4 mr-2",xt.value?"animate-spin":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...l[7]||(l[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),l[8]||(l[8]=d(" Yangilash ",-1))],10,J)]),t("div",U,[t("div",X,[t("div",K,[t("div",L,[c(b(B),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})])]),t("div",N,[t("p",D,g(pt.value.total),1),l[9]||(l[9]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Jami suhbatlar",-1))])]),t("div",E,[t("div",G,[t("div",Q,[c(b(T),{class:"w-5 h-5 text-green-600 dark:text-green-400"})])]),t("div",R,[t("p",Z,g(pt.value.open),1),l[10]||(l[10]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Ochiq",-1))])]),t("div",W,[t("div",ee,[t("div",te,[c(b(I),{class:"w-5 h-5 text-amber-600 dark:text-amber-400"})])]),t("div",re,[t("p",ae,g(pt.value.pending),1),l[11]||(l[11]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Kutilmoqda",-1))])]),t("div",le,[t("div",se,[t("div",oe,[c(b(S),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})])]),t("div",ne,[t("p",de,g(pt.value.closed),1),l[12]||(l[12]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Yopilgan",-1))])]),t("div",ie,[t("div",ge,[t("div",ue,[c(b(z),{class:"w-5 h-5 text-red-600 dark:text-red-400"})])]),t("div",ce,[t("p",be,g(pt.value.unread?.total||0),1),l[13]||(l[13]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"O'qilmagan",-1))])]),t("div",{class:u(["bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-all cursor-pointer group",it.value.statsBorderHover])},[t("div",xe,[t("div",{class:u(["w-10 h-10 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",it.value.statsIconBg])},[c(b(M),{class:u(["w-5 h-5",it.value.statsIconColor])},null,8,["class"])],2)]),t("div",me,[t("p",{class:u(["text-2xl font-bold",it.value.statsValueColor])},g(pt.value.response_rate?.toFixed(1)||0)+"%",3),l[14]||(l[14]=t("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},"Javob darajasi",-1))])],2)]),t("div",he,[t("div",ve,[t("div",ye,[t("div",fe,[t("button",{onClick:l[0]||(l[0]=e=>At("channel",null)),class:u(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all",vt.value.channel?"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600":it.value.filterActiveClass])},[c(b(_),{class:"w-4 h-4 mr-1.5"}),l[15]||(l[15]=d(" Barchasi ",-1)),pt.value.unread?.total>0?(r(),e("span",{key:0,class:u(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full",vt.value.channel?"bg-red-500 text-white":"bg-white/20 text-white"])},g(pt.value.unread.total),3)):i("",!0)],2),t("button",{onClick:l[1]||(l[1]=e=>At("channel","instagram")),class:u(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all","instagram"===vt.value.channel?"bg-gradient-to-r from-purple-600 via-pink-600 to-orange-500 text-white shadow-lg shadow-pink-500/30":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"])},[(r(),x(m(jt),{class:"w-4 h-4 mr-1.5"})),l[16]||(l[16]=d(" Instagram ",-1)),(pt.value.unread?.instagram||0)>0?(r(),e("span",{key:0,class:u(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full","instagram"===vt.value.channel?"bg-white/20 text-white":"bg-gradient-to-r from-purple-500 to-pink-500 text-white"])},g(pt.value.unread.instagram),3)):i("",!0)],2),t("button",{onClick:l[2]||(l[2]=e=>At("channel","telegram")),class:u(["relative inline-flex items-center px-3.5 py-2 text-sm font-semibold rounded-xl transition-all","telegram"===vt.value.channel?"bg-gradient-to-r from-sky-500 to-blue-600 text-white shadow-lg shadow-sky-500/30":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 border border-gray-200 dark:border-gray-600"])},[(r(),x(m(Bt),{class:"w-4 h-4 mr-1.5"})),l[17]||(l[17]=d(" Telegram ",-1)),(pt.value.unread?.telegram||0)>0?(r(),e("span",{key:0,class:u(["ml-2 inline-flex items-center justify-center min-w-[20px] h-5 px-1.5 text-xs font-bold rounded-full","telegram"===vt.value.channel?"bg-white/20 text-white":"bg-sky-500 text-white"])},g(pt.value.unread.telegram),3)):i("",!0)],2)]),t("div",pe,[c(b(q),{class:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),h(t("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>ht.value=e),onInput:qt,type:"text",placeholder:"Mijoz nomi yoki telefon...",class:"w-full pl-10 pr-4 py-2.5 text-sm bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:text-white dark:placeholder-gray-400 transition-all"},null,544),[[v,ht.value]])])]),t("div",ke,[(r(!0),e(y,null,f(ft.value,a=>(r(),e("div",{key:a.id,onClick:e=>Vt(a.id),class:u(["relative p-4 border-b border-gray-100 dark:border-gray-700/50 cursor-pointer transition-all hover:bg-gray-50 dark:hover:bg-gray-700/50",{"bg-blue-50/70 dark:bg-blue-900/20 border-l-4 border-l-blue-500":gt.value===a.id}])},[a.is_unread?(r(),e("div",Ce)):i("",!0),t("div",je,[t("div",Be,[t("div",{class:u(["w-12 h-12 rounded-full flex items-center justify-center shadow-md",Mt(a.channel)])},[(r(),x(m(zt(a.channel)),{class:"w-6 h-6 text-white"}))],2),"open"===a.status?(r(),e("div",Ie)):i("",!0)]),t("div",Se,[t("div",ze,[t("h4",Me,g(a.customer_name||"Noma'lum"),1),t("span",_e,g(a.last_message_time),1)]),a.customer_username?(r(),e("p",He," @"+g(a.customer_username),1)):i("",!0),t("p",{class:u(["text-sm text-gray-600 dark:text-gray-400 truncate mt-1",{"font-medium text-gray-900 dark:text-white":a.is_unread}])},g(a.last_message||"Xabar yo'q"),3),t("div",Pe,[t("span",{class:u(["inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full",_t(a.status)])},g(Ht(a.status)),3),a.unread_count>0?(r(),e("span",qe,g(a.unread_count),1)):i("",!0),t("span",Ae,g(a.message_count)+" xabar ",1)])])])],10,we))),128)),0===ft.value.length?(r(),e("div",Ve,[t("div",Te,[l[18]||(l[18]=t("div",{class:"absolute inset-0 bg-gray-500/20 rounded-full animate-ping"},null,-1)),t("div",Oe,[c(b(B),{class:"w-10 h-10 text-gray-400"})])]),l[19]||(l[19]=t("h3",{class:"text-base font-semibold text-gray-900 dark:text-white"},"Suhbat topilmadi",-1)),l[20]||(l[20]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Hozircha hech qanday suhbat yo'q",-1))])):i("",!0)])]),t("div",$e,[gt.value?(r(),e(y,{key:1},[mt.value?(r(),e("div",Je,[t("div",Ue,[(r(),e("svg",{class:u(["w-8 h-8 animate-spin",it.value.loadingSpinnerColor]),fill:"none",viewBox:"0 0 24 24"},[...l[23]||(l[23]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])],2)),l[24]||(l[24]=t("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Yuklanmoqda...",-1))])])):(r(),e(y,{key:1},[t("div",Xe,[ut.value?(r(),e("div",Ke,[t("div",Le,[t("div",Ne,[t("div",{class:u(["w-14 h-14 rounded-full flex items-center justify-center shadow-lg",Mt(ut.value.channel)])},[(r(),x(m(zt(ut.value.channel)),{class:"w-7 h-7 text-white"}))],2),"open"===ut.value.status?(r(),e("div",De)):i("",!0)]),t("div",null,[t("h3",Ee,g(ut.value.customer?.name||"Noma'lum mijoz"),1),t("div",Ge,[ut.value.customer?.username?(r(),e("span",Qe," @"+g(ut.value.customer.username),1)):i("",!0),ut.value.customer?.phone?(r(),e("span",Re,g(ut.value.customer.phone),1)):i("",!0),l[25]||(l[25]=t("span",{class:"text-gray-300 dark:text-gray-600"},"â€¢",-1)),t("span",Ze,[(r(),x(m(zt(ut.value.channel)),{class:"w-3.5 h-3.5 text-gray-500"})),d(" "+g(ut.value.channel),1)])])])]),t("div",We,[t("span",{class:u(["inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-full",_t(ut.value.status)])},g(Ht(ut.value.status)),3),t("button",et,[c(b(A),{class:"w-5 h-5"})])])])):i("",!0)]),t("div",{ref_key:"messagesContainer",ref:yt,class:"flex-1 overflow-y-auto p-6 space-y-4 bg-gradient-to-b from-gray-50 to-white dark:from-gray-900/50 dark:to-gray-800/50"},[(r(!0),e(y,null,f(ut.value?.messages||[],a=>(r(),e("div",{key:a.id,class:u(["flex","outbound"===a.direction?"justify-end":"justify-start"])},[t("div",{class:u(["max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-sm","outbound"===a.direction?it.value.outboundMessageClass:"bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-200 dark:border-gray-600 rounded-bl-md shadow-md"])},[t("p",tt,g(a.content),1),t("p",{class:u(["text-xs mt-1.5","outbound"===a.direction?it.value.outboundTimeClass:"text-gray-400"])},g(a.human_time),3)],2)],2))),128)),ut.value?.messages?.length?i("",!0):(r(),e("div",rt,[c(b(H),{class:"w-12 h-12 text-gray-300 dark:text-gray-600 mb-3"}),l[26]||(l[26]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Xabarlar yo'q",-1))]))],512),t("div",at,[t("form",{onSubmit:p(Tt,["prevent"]),class:"flex items-center gap-3"},[t("button",lt,[c(b(P),{class:"w-5 h-5"})]),h(t("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>ct.value=e),type:"text",placeholder:"Xabar yozish...",class:"flex-1 px-4 py-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:text-white dark:placeholder-gray-400 text-sm transition-all"},null,512),[[v,ct.value]]),t("button",{type:"submit",disabled:!ct.value.trim()||bt.value,class:u(["inline-flex items-center justify-center w-12 h-12 text-white rounded-xl transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",it.value.sendButtonClass])},[bt.value?(r(),e("svg",ot,[...l[27]||(l[27]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(r(),x(b(V),{key:0,class:"w-5 h-5"}))],10,st)],32)])],64))],64)):(r(),e("div",Ye,[t("div",Fe,[t("div",{class:u(["absolute inset-0 rounded-full animate-pulse",it.value.emptyStatePulseBg])},null,2),t("div",{class:u(["relative w-24 h-24 rounded-full flex items-center justify-center",it.value.emptyStateIconBg])},[c(b(H),{class:u(["w-12 h-12",it.value.emptyStateIconColor])},null,8,["class"])],2)]),l[21]||(l[21]=t("h3",{class:"text-xl font-bold text-gray-900 dark:text-white"},"Suhbatni tanlang",-1)),l[22]||(l[22]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400 mt-2 max-w-sm"}," Chap tarafdagi ro'yxatdan suhbatni tanlab, mijoz bilan muloqotni davom ettiring ",-1))]))])])]))}};export{nt as _};
