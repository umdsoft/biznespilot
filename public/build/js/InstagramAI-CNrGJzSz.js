import{r as f,o as j,v as q,x as C,y as d,z as t,A as u,C as y,D as c,L as h,I as a,R as m,E as g,J as i,H as v,F as V,G as z}from"./chunk-BcTZxe-J.js";import{b as A,h as U}from"./chunk-BYRtWSr0.js";import{_ as $}from"./chunk-TXgJ1MaD.js";import{u as B}from"./app-BC9IivQF.js";import{r as X}from"./chunk-DNp5bQOL.js";import{r as D}from"./chunk-BfUzJLaZ.js";import{r as M}from"./chunk-Rs1WNzbn.js";import{a as N}from"./chunk-_yYzsx_i.js";import{e as J}from"./chunk-AyRJdOJv.js";import{r as O}from"./chunk-gCWBLgcy.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const E={class:"py-12"},F={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},K={class:"mb-8"},L={class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},P={class:"w-10 h-10 rounded-lg bg-gradient-to-tr from-purple-600 via-pink-600 to-orange-600 flex items-center justify-center"},R={class:"bg-white rounded-xl shadow-md p-6 mb-6"},Y={class:"flex items-center gap-3 mb-6"},Q={class:"space-y-6"},G={class:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-100"},H={class:"relative inline-flex items-center cursor-pointer"},W={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},Z={class:"relative inline-flex items-center cursor-pointer"},ee={key:0},te={class:"block text-sm font-medium text-gray-700 mb-2"},se={class:"border-t pt-6"},re={class:"space-y-3"},ae={class:"flex items-center"},le={class:"flex items-center"},oe={class:"flex items-center"},ne={class:"border-t pt-6"},ie={class:"flex items-center justify-between mb-4"},de={class:"relative inline-flex items-center cursor-pointer"},ue={key:0,class:"space-y-4"},pe={class:"grid grid-cols-2 gap-4"},me={class:"mt-6 flex items-center gap-4"},ge=["disabled"],fe={key:0,class:"flex items-center gap-2 text-green-600"},ce={class:"bg-white rounded-xl shadow-md p-6"},be={class:"flex items-center gap-3 mb-6"},ve={class:"space-y-3 mb-6"},xe={class:"flex-1"},ye={class:"text-sm font-medium text-gray-700"},he={class:"text-purple-600"},_e={class:"text-sm text-gray-600 mt-1"},ke=["onClick"],we={class:"border-t pt-6"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ie={class:"flex gap-4"},Te=["disabled"],et={__name:"InstagramAI",setup(je){B();const _=A(),x=_.props.currentBusiness||_.props.auth?.currentBusiness,r=f({is_active:!0,ai_enabled:!0,auto_greet:!0,greeting_message:"Salom! ðŸ‘‹ Sizga qanday yordam bera olamiz?",fallback_message:"Kechirasiz, savol tushunilmadi. Iltimos, boshqacha so'rang.",outside_hours_message:"Ish vaqti tugadi. Ish kunlari 9:00-18:00 da ishlaymiz.",business_hours_enabled:!1,business_hours_start:"09:00",business_hours_end:"18:00",lead_auto_create:!0,ai_creativity_level:7,use_dream_buyer_context:!0,use_offer_context:!0}),o=f(!1),b=f(!1),p=f([{id:1,trigger:"salom",response:"Salom! ðŸ‘‹ Sizga qanday yordam bera olamiz?"},{id:2,trigger:"narx",response:"Takliflarimiz haqida ma'lumot olish uchun DM yozing."},{id:3,trigger:"xarid",response:"Xarid uchun operator bilan bog'lanamiz. â³"}]),n=f({trigger:"",response:""}),k=async()=>{o.value=!0;try{const e=await(await fetch(`/api/instagram/${x.id}/ai-config`)).json();e.success&&(r.value={...r.value,...e.config},e.templates&&(p.value=e.templates))}catch(l){console.error("Error loading config:",l)}finally{o.value=!1}},w=async()=>{o.value=!0,b.value=!1;try{const e=await(await fetch(`/api/instagram/${x.id}/ai-config`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(r.value)})).json();e.success?(b.value=!0,setTimeout(()=>b.value=!1,3e3)):alert("Xatolik: "+e.message)}catch(l){alert("Xatolik: "+l.message)}finally{o.value=!1}},S=()=>{n.value.trigger&&n.value.response&&(p.value.push({id:Date.now(),...n.value}),n.value={trigger:"",response:""})},I=l=>{p.value=p.value.filter(e=>e.id!==l)},T=async()=>{o.value=!0;try{const e=await(await fetch(`/api/instagram/${x.id}/ai-templates`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({templates:p.value})})).json();e.success?alert("Templatelar saqlandi!"):alert("Xatolik: "+e.message)}catch(l){alert("Xatolik: "+l.message)}finally{o.value=!1}};return j(()=>{k()}),(l,e)=>(g(),q($,{title:"Instagram AI Settings"},{default:C(()=>[d(u(U),{title:"Instagram AI Configuration"}),t("div",E,[t("div",F,[t("div",K,[t("h1",L,[t("div",P,[d(u(X),{class:"w-6 h-6 text-white"})]),e[14]||(e[14]=y(" Instagram AI Chatbot Configuration ",-1))]),e[15]||(e[15]=t("p",{class:"mt-2 text-gray-600"}," AI-powered avtomatik javoblar Instagram DM va Story replies uchun ",-1))]),t("div",R,[t("div",Y,[d(u(D),{class:"w-6 h-6 text-gray-700"}),e[16]||(e[16]=t("h2",{class:"text-xl font-bold text-gray-900"},"Asosiy Sozlamalar",-1))]),t("div",Q,[t("div",G,[e[18]||(e[18]=t("div",null,[t("h3",{class:"font-semibold text-gray-900"},"AI Chatbot Yoqish"),t("p",{class:"text-sm text-gray-600"},"Instagram DM va Story replies uchun avtomatik AI javoblar")],-1)),t("label",H,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>r.value.ai_enabled=s),class:"sr-only peer"},null,512),[[m,r.value.ai_enabled]]),e[17]||(e[17]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},null,-1))])]),t("div",W,[e[20]||(e[20]=t("div",null,[t("h3",{class:"font-semibold text-gray-900"},"Avtomatik Salomlashish"),t("p",{class:"text-sm text-gray-600"},"Yangi mijozlarga avtomatik salom berish")],-1)),t("label",Z,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>r.value.auto_greet=s),class:"sr-only peer"},null,512),[[m,r.value.auto_greet]]),e[19]||(e[19]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},null,-1))])]),r.value.auto_greet?(g(),c("div",ee,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Salomlashish Xabari (emoji ishlatishingiz mumkin ðŸ˜Š) ",-1)),a(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.value.greeting_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,r.value.greeting_message]])])):h("",!0),t("div",null,[t("label",te," AI Ijodkorlik Darajasi: "+v(r.value.ai_creativity_level)+"/10 ",1),a(t("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=s=>r.value.ai_creativity_level=s),min:"1",max:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{"accent-color":"#9333ea"}},null,512),[[i,r.value.ai_creativity_level]]),e[22]||(e[22]=t("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[t("span",null,"Aniq javoblar"),t("span",null,"Ijodiy javoblar")],-1))]),t("div",se,[e[26]||(e[26]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Kontekst Sozlamalari",-1)),t("div",re,[t("div",ae,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>r.value.use_dream_buyer_context=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[m,r.value.use_dream_buyer_context]]),e[23]||(e[23]=t("label",{class:"ml-2 text-sm text-gray-700"},"Ideal Mijoz ma'lumotlaridan foydalanish",-1))]),t("div",le,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>r.value.use_offer_context=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[m,r.value.use_offer_context]]),e[24]||(e[24]=t("label",{class:"ml-2 text-sm text-gray-700"},"Aktiv Takliflar haqida ma'lumot berish",-1))]),t("div",oe,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>r.value.lead_auto_create=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[m,r.value.lead_auto_create]]),e[25]||(e[25]=t("label",{class:"ml-2 text-sm text-gray-700"},"Avtomatik Lead yaratish (xarid bosqichida)",-1))])])]),t("div",ne,[t("div",ie,[e[28]||(e[28]=t("h3",{class:"font-semibold text-gray-900"},"Ish Vaqti",-1)),t("label",de,[a(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>r.value.business_hours_enabled=s),class:"sr-only peer"},null,512),[[m,r.value.business_hours_enabled]]),e[27]||(e[27]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-purple-600 peer-checked:to-pink-600"},null,-1))])]),r.value.business_hours_enabled?(g(),c("div",ue,[t("div",pe,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Boshlanish",-1)),a(t("input",{type:"time","onUpdate:modelValue":e[8]||(e[8]=s=>r.value.business_hours_start=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,r.value.business_hours_start]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Tugash",-1)),a(t("input",{type:"time","onUpdate:modelValue":e[9]||(e[9]=s=>r.value.business_hours_end=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,r.value.business_hours_end]])])]),t("div",null,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ish vaqtidan tashqari xabar",-1)),a(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=s=>r.value.outside_hours_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,r.value.outside_hours_message]])])])):h("",!0)]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Fallback Xabar (AI javob bera olmasa)",-1)),a(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>r.value.fallback_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,r.value.fallback_message]])])]),t("div",me,[t("button",{onClick:w,disabled:o.value,class:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-purple-400 disabled:to-pink-400 text-white font-semibold rounded-lg transition-all"},v(o.value?"Saqlanmoqda...":"Sozlamalarni Saqlash"),9,ge),b.value?(g(),c("div",fe,[d(u(M),{class:"w-5 h-5"}),e[33]||(e[33]=t("span",{class:"font-medium"},"Saqlandi!",-1))])):h("",!0)])]),t("div",ce,[t("div",be,[d(u(N),{class:"w-6 h-6 text-gray-700"}),e[34]||(e[34]=t("h2",{class:"text-xl font-bold text-gray-900"},"Tez Javob Templatelar",-1))]),t("div",ve,[(g(!0),c(V,null,z(p.value,s=>(g(),c("div",{key:s.id,class:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg"},[t("div",xe,[t("div",ye,[e[35]||(e[35]=y(" Trigger: ",-1)),t("span",he,v(s.trigger),1)]),t("div",_e,v(s.response),1)]),t("button",{onClick:qe=>I(s.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[d(u(J),{class:"w-5 h-5"})],8,ke)]))),128))]),t("div",we,[e[39]||(e[39]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Yangi Template Qo'shish",-1)),t("div",Se,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Trigger Kalit So'z",-1)),a(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>n.value.trigger=s),type:"text",placeholder:"masalan: narx, xarid",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,n.value.trigger]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Javob Matni",-1)),a(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>n.value.response=s),type:"text",placeholder:"Javob xabari",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[i,n.value.response]])])]),t("div",Ie,[t("button",{onClick:S,class:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-lg transition-all gap-2"},[d(u(O),{class:"w-5 h-5"}),e[38]||(e[38]=y(" Template Qo'shish ",-1))]),t("button",{onClick:T,disabled:o.value,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-semibold rounded-lg transition-colors"}," Barchasini Saqlash ",8,Te)])])])])])]),_:1}))}};export{et as default};
