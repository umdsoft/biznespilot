import{r as e,o as a,v as t,x as s,L as r,y as l,A as o,B as i,z as n,C as u,I as p,F as c,P as d,D as g,G as m,J as b,K as f}from"./chunk-CpmtkKLp.js";import{b as h,h as _}from"./chunk-BhZp3z4u.js";import{_ as x}from"./chunk-DbFbpSR2.js";import{u as v}from"./app-C-ZlocOh.js";import{r as y}from"./chunk-CvscUVdi.js";import{r as w}from"./chunk-DWKYWsDr.js";import{r as k}from"./chunk-eMHYSAeQ.js";import{a as j}from"./chunk-De_qwhex.js";import{d as U}from"./chunk-D7SyfRoT.js";import{r as V}from"./chunk-BiBvtcLb.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const q={class:"py-12"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},C={class:"mb-8"},S={class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},T={class:"mt-2 text-gray-600"},A={class:"bg-white rounded-xl shadow-md p-6 mb-6"},I={class:"flex items-center gap-3 mb-6"},X={class:"text-xl font-bold text-gray-900"},O={class:"space-y-6"},B={class:"flex items-center justify-between p-4 bg-purple-50 rounded-lg"},K={class:"font-semibold text-gray-900"},N={class:"text-sm text-gray-600"},$={class:"relative inline-flex items-center cursor-pointer"},F={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},J={class:"font-semibold text-gray-900"},P={class:"text-sm text-gray-600"},W={class:"relative inline-flex items-center cursor-pointer"},D={key:0},E={class:"block text-sm font-medium text-gray-700 mb-2"},R={class:"block text-sm font-medium text-gray-700 mb-2"},G={class:"flex justify-between text-xs text-gray-500 mt-1"},L={class:"border-t pt-6"},H={class:"font-semibold text-gray-900 mb-4"},M={class:"space-y-3"},Q={class:"flex items-center"},Y={class:"ml-2 text-sm text-gray-700"},Z={class:"flex items-center"},ee={class:"ml-2 text-sm text-gray-700"},ae={class:"flex items-center"},te={class:"ml-2 text-sm text-gray-700"},se={class:"border-t pt-6"},re={class:"flex items-center justify-between mb-4"},le={class:"font-semibold text-gray-900"},oe={class:"relative inline-flex items-center cursor-pointer"},ie={key:0,class:"grid grid-cols-2 gap-4"},ne={class:"block text-sm font-medium text-gray-700 mb-2"},ue={class:"block text-sm font-medium text-gray-700 mb-2"},pe={key:1,class:"mt-4"},ce={class:"block text-sm font-medium text-gray-700 mb-2"},de={class:"block text-sm font-medium text-gray-700 mb-2"},ge={class:"mt-6 flex items-center gap-4"},me=["disabled"],be={key:0,class:"flex items-center gap-2 text-green-600"},fe={class:"font-medium"},he={class:"bg-white rounded-xl shadow-md p-6"},_e={class:"flex items-center gap-3 mb-6"},xe={class:"text-xl font-bold text-gray-900"},ve={class:"space-y-3 mb-6"},ye={class:"flex-1"},we={class:"text-sm font-medium text-gray-700"},ke={class:"text-purple-600"},je={class:"text-sm text-gray-600 mt-1"},Ue=["onClick"],Ve={class:"border-t pt-6"},qe={class:"font-semibold text-gray-900 mb-4"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ce={class:"block text-sm font-medium text-gray-700 mb-2"},Se=["placeholder"],Te={class:"block text-sm font-medium text-gray-700 mb-2"},Ae=["placeholder"],Ie={class:"flex gap-4"},Xe=["disabled"],Oe={__name:"WhatsAppAI",setup(Oe){const{t:Be}=v(),Ke=h(),Ne=Ke.props.currentBusiness||Ke.props.auth?.currentBusiness,$e=e({is_active:!0,ai_enabled:!0,auto_greet:!0,greeting_message:"Assalomu alaykum! Bizga xush kelibsiz. Sizga qanday yordam bera olamiz?",fallback_message:"Kechirasiz, savol tushunilmadi. Iltimos, boshqacha so'rang.",outside_hours_message:"Ish vaqti tugadi. Ish kunlari 9:00-18:00 da ishlmaymiz.",business_hours_enabled:!1,business_hours_start:"09:00",business_hours_end:"18:00",lead_auto_create:!0,ai_creativity_level:7,use_dream_buyer_context:!0,use_offer_context:!0}),Fe=e(!1),Je=e(!1),Pe=e([{id:1,trigger:"salom",response:"Assalomu alaykum! Sizga qanday yordam bera olamiz?"},{id:2,trigger:"narx",response:"Takliflarimiz haqida ma'lumot olish uchun telefon raqamingizni qoldiring."},{id:3,trigger:"xarid",response:"Xarid uchun operator bilan bog'lanamiz. Bir daqiqa kuting."}]),We=e({trigger:"",response:""}),De=async()=>{Fe.value=!0,Je.value=!1;try{const e=await fetch(`/api/whatsapp/${Ne.id}/ai-config`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify($e.value)}),a=await e.json();a.success?(Je.value=!0,setTimeout(()=>Je.value=!1,3e3)):alert("Xatolik: "+a.message)}catch(e){alert("Xatolik: "+e.message)}finally{Fe.value=!1}},Ee=()=>{We.value.trigger&&We.value.response&&(Pe.value.push({id:Date.now(),...We.value}),We.value={trigger:"",response:""})},Re=async()=>{Fe.value=!0;try{const e=await fetch(`/api/whatsapp/${Ne.id}/ai-templates`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({templates:Pe.value})}),a=await e.json();a.success?alert("Templatelar saqlandi!"):alert("Xatolik: "+a.message)}catch(e){alert("Xatolik: "+e.message)}finally{Fe.value=!1}};return a(()=>{(async()=>{Fe.value=!0;try{const e=await fetch(`/api/whatsapp/${Ne.id}/ai-config`),a=await e.json();a.success&&($e.value={...$e.value,...a.config},a.templates&&(Pe.value=a.templates))}catch(e){}finally{Fe.value=!1}})()}),(e,a)=>(g(),t(x,{title:"WhatsApp AI Settings"},{default:s(()=>[r(o(_),{title:"WhatsApp AI Configuration"}),l("div",q,[l("div",z,[l("div",C,[l("h1",S,[r(o(y),{class:"w-10 h-10 text-purple-600"}),i(" "+n(o(Be)("whatsapp_ai.title")),1)]),l("p",T,n(o(Be)("whatsapp_ai.subtitle")),1)]),l("div",A,[l("div",I,[r(o(w),{class:"w-6 h-6 text-gray-700"}),l("h2",X,n(o(Be)("whatsapp_ai.main_settings")),1)]),l("div",O,[l("div",B,[l("div",null,[l("h3",K,n(o(Be)("whatsapp_ai.enable_ai")),1),l("p",N,n(o(Be)("whatsapp_ai.enable_ai_desc")),1)]),l("label",$,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=e=>$e.value.ai_enabled=e),class:"sr-only peer"},null,512),[[d,$e.value.ai_enabled]]),a[14]||(a[14]=l("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),l("div",F,[l("div",null,[l("h3",J,n(o(Be)("whatsapp_ai.auto_greet")),1),l("p",P,n(o(Be)("whatsapp_ai.auto_greet_desc")),1)]),l("label",W,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=e=>$e.value.auto_greet=e),class:"sr-only peer"},null,512),[[d,$e.value.auto_greet]]),a[15]||(a[15]=l("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),$e.value.auto_greet?(g(),u("div",D,[l("label",E,n(o(Be)("whatsapp_ai.greeting_message")),1),c(l("textarea",{"onUpdate:modelValue":a[2]||(a[2]=e=>$e.value.greeting_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,$e.value.greeting_message]])])):p("",!0),l("div",null,[l("label",R,n(o(Be)("whatsapp_ai.creativity_level"))+": "+n($e.value.ai_creativity_level)+"/10 ",1),c(l("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=e=>$e.value.ai_creativity_level=e),min:"1",max:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"},null,512),[[m,$e.value.ai_creativity_level]]),l("div",G,[l("span",null,n(o(Be)("whatsapp_ai.exact_answers")),1),l("span",null,n(o(Be)("whatsapp_ai.creative_answers")),1)])]),l("div",L,[l("h3",H,n(o(Be)("whatsapp_ai.context_settings")),1),l("div",M,[l("div",Q,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[4]||(a[4]=e=>$e.value.use_dream_buyer_context=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,$e.value.use_dream_buyer_context]]),l("label",Y,n(o(Be)("whatsapp_ai.use_dream_buyer")),1)]),l("div",Z,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[5]||(a[5]=e=>$e.value.use_offer_context=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,$e.value.use_offer_context]]),l("label",ee,n(o(Be)("whatsapp_ai.use_offers")),1)]),l("div",ae,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>$e.value.lead_auto_create=e),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[d,$e.value.lead_auto_create]]),l("label",te,n(o(Be)("whatsapp_ai.auto_create_lead")),1)])])]),l("div",se,[l("div",re,[l("h3",le,n(o(Be)("whatsapp_ai.business_hours")),1),l("label",oe,[c(l("input",{type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=e=>$e.value.business_hours_enabled=e),class:"sr-only peer"},null,512),[[d,$e.value.business_hours_enabled]]),a[16]||(a[16]=l("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),$e.value.business_hours_enabled?(g(),u("div",ie,[l("div",null,[l("label",ne,n(o(Be)("whatsapp_ai.hours_start")),1),c(l("input",{type:"time","onUpdate:modelValue":a[8]||(a[8]=e=>$e.value.business_hours_start=e),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,$e.value.business_hours_start]])]),l("div",null,[l("label",ue,n(o(Be)("whatsapp_ai.hours_end")),1),c(l("input",{type:"time","onUpdate:modelValue":a[9]||(a[9]=e=>$e.value.business_hours_end=e),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,$e.value.business_hours_end]])])])):p("",!0),$e.value.business_hours_enabled?(g(),u("div",pe,[l("label",ce,n(o(Be)("whatsapp_ai.outside_hours_message")),1),c(l("textarea",{"onUpdate:modelValue":a[10]||(a[10]=e=>$e.value.outside_hours_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,$e.value.outside_hours_message]])])):p("",!0)]),l("div",null,[l("label",de,n(o(Be)("whatsapp_ai.fallback_message")),1),c(l("textarea",{"onUpdate:modelValue":a[11]||(a[11]=e=>$e.value.fallback_message=e),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[m,$e.value.fallback_message]])])]),l("div",ge,[l("button",{onClick:De,disabled:Fe.value,class:"px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-semibold rounded-lg transition-colors"},n(Fe.value?o(Be)("common.loading"):o(Be)("whatsapp_ai.save_settings")),9,me),Je.value?(g(),u("div",be,[r(o(k),{class:"w-5 h-5"}),l("span",fe,n(o(Be)("whatsapp_ai.saved")),1)])):p("",!0)])]),l("div",he,[l("div",_e,[r(o(j),{class:"w-6 h-6 text-gray-700"}),l("h2",xe,n(o(Be)("whatsapp_ai.quick_reply_templates")),1)]),l("div",ve,[(g(!0),u(b,null,f(Pe.value,e=>(g(),u("div",{key:e.id,class:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg"},[l("div",ye,[l("div",we,[a[17]||(a[17]=i(" Trigger: ",-1)),l("span",ke,n(e.trigger),1)]),l("div",je,n(e.response),1)]),l("button",{onClick:a=>{return t=e.id,void(Pe.value=Pe.value.filter(e=>e.id!==t));var t},class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[r(o(U),{class:"w-5 h-5"})],8,Ue)]))),128))]),l("div",Ve,[l("h3",qe,n(o(Be)("whatsapp_ai.add_template")),1),l("div",ze,[l("div",null,[l("label",Ce,n(o(Be)("whatsapp_ai.trigger_keyword")),1),c(l("input",{"onUpdate:modelValue":a[12]||(a[12]=e=>We.value.trigger=e),type:"text",placeholder:o(Be)("whatsapp_ai.trigger_placeholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,8,Se),[[m,We.value.trigger]])]),l("div",null,[l("label",Te,n(o(Be)("whatsapp_ai.response_text")),1),c(l("input",{"onUpdate:modelValue":a[13]||(a[13]=e=>We.value.response=e),type:"text",placeholder:o(Be)("whatsapp_ai.response_placeholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,8,Ae),[[m,We.value.response]])])]),l("div",Ie,[l("button",{onClick:Ee,class:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors gap-2"},[r(o(V),{class:"w-5 h-5"}),i(" "+n(o(Be)("whatsapp_ai.add_template_btn")),1)]),l("button",{onClick:Re,disabled:Fe.value,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-semibold rounded-lg transition-colors"},n(o(Be)("whatsapp_ai.save_all")),9,Xe)])])])])])]),_:1}))}};export{Oe as default};
