import{r as N,w as C,C as d,y as x,A as a,x as g,z as t,H as o,E as c,J as f,K as T,L as v,D as u,F as r,G as _,I as A,B as I,v as y}from"./chunk-KPSVwAyv.js";import{h as R,l as b,r as O}from"./chunk-BVrjkT6E.js";import{_ as U}from"./chunk-C_LZBpOn.js";import{u as z}from"./app-Bx12lrZQ.js";import"./chunk-DMP3tXW5.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";import"./chunk-BvkwlYlD.js";const M={class:"py-12"},V={class:"max-w-8xl mx-auto sm:px-6 lg:px-8"},D={class:"mb-8 flex items-center justify-between"},j={class:"text-3xl font-bold text-gray-900"},B={class:"mt-2 text-gray-600"},L={class:"bg-white rounded-lg shadow-sm p-6 mb-6"},P={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},X={class:"block text-sm font-medium text-gray-700 mb-1"},F={class:"block text-sm font-medium text-gray-700 mb-1"},H={value:"all"},q={value:"active"},Q={value:"closed"},W={value:"archived"},G={class:"block text-sm font-medium text-gray-700 mb-1"},J={value:"all"},K={class:"block text-sm font-medium text-gray-700 mb-1"},Y={value:"all"},Z={class:"bg-white rounded-lg shadow-sm overflow-hidden"},$={class:"divide-y divide-gray-200"},tt={class:"flex items-center justify-between"},et={class:"flex items-center space-x-4 flex-1"},st={class:"flex-shrink-0 text-2xl"},ot={class:"flex-1 min-w-0"},at={class:"flex items-center gap-3"},lt={class:"text-lg font-semibold text-gray-900 truncate"},rt={key:0,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},nt={class:"mt-1 flex items-center gap-4 text-sm text-gray-500"},it={key:0},dt={key:1},ut={key:0,class:"mt-2 text-sm text-gray-600 truncate"},mt={class:"flex-shrink-0 ml-4 text-right"},ct={class:"text-sm text-gray-500"},gt={class:"mt-1 text-xs text-gray-400"},pt={key:0,class:"mt-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},ht={key:0,class:"p-12 text-center text-gray-500"},xt={class:"mt-4"},ft={key:0,class:"bg-white px-6 py-4 border-t border-gray-200"},bt={class:"flex items-center justify-between"},vt={class:"text-sm text-gray-700"},_t={class:"font-medium"},yt={class:"font-medium"},kt={class:"font-medium"},wt={class:"flex gap-2"},Qt={__name:"Conversations",props:{conversations:Object,filters:Object},setup(n){const{t:l}=z(),p=n,i=N({status:p.filters.status||"all",channel:p.filters.channel||"all",stage:p.filters.stage||"all",search:p.filters.search||""}),h=()=>{O.get(route("business.customer-bot.conversations"),i.value,{preserveState:!0,preserveScroll:!0})};C(()=>i.value.search,m=>{(m.length===0||m.length>=3)&&h()});const k={active:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800",archived:"bg-yellow-100 text-yellow-800"},w={telegram:"ðŸ“±",instagram:"ðŸ“·",facebook:"ðŸ‘¥"},S={AWARENESS:"Xabardorlik",INTEREST:"Qiziqish",CONSIDERATION:"Mulohaza",INTENT:"Niyat",PURCHASE:"Xarid",POST_PURCHASE:"Xariddan keyin"},E=m=>new Date(m).toLocaleString("uz-UZ",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(m,e)=>(r(),d(_,null,[x(a(R),{title:a(l)("chatbot.conversations")},null,8,["title"]),x(U,{title:a(l)("chatbot.conversations")},{default:g(()=>[t("div",M,[t("div",V,[t("div",D,[t("div",null,[t("h1",j,o(a(l)("chatbot.conversations")),1),t("p",B,o(a(l)("chatbot.all_conversations")),1)]),x(a(b),{href:m.route("business.customer-bot.settings"),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},{default:g(()=>[c(o(a(l)("common.settings")),1)]),_:1},8,["href"])]),t("div",L,[t("div",P,[t("div",null,[t("label",X,o(a(l)("common.search")),1),f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>i.value.search=s),placeholder:"Ism, email, telefon...",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[T,i.value.search]])]),t("div",null,[t("label",F,o(a(l)("common.status")),1),f(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>i.value.status=s),onChange:h,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t("option",H,o(a(l)("common.all")),1),t("option",q,o(a(l)("common.active")),1),t("option",Q,o(a(l)("chatbot.closed")),1),t("option",W,o(a(l)("chatbot.archived")),1)],544),[[v,i.value.status]])]),t("div",null,[t("label",G,o(a(l)("analytics.channel")),1),f(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>i.value.channel=s),onChange:h,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t("option",J,o(a(l)("common.all")),1),e[4]||(e[4]=t("option",{value:"telegram"},"Telegram",-1)),e[5]||(e[5]=t("option",{value:"instagram"},"Instagram",-1)),e[6]||(e[6]=t("option",{value:"facebook"},"Facebook",-1))],544),[[v,i.value.channel]])]),t("div",null,[t("label",K,o(a(l)("chatbot.stage")),1),f(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>i.value.stage=s),onChange:h,class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},[t("option",Y,o(a(l)("common.all")),1),e[7]||(e[7]=t("option",{value:"AWARENESS"},"Xabardorlik",-1)),e[8]||(e[8]=t("option",{value:"INTEREST"},"Qiziqish",-1)),e[9]||(e[9]=t("option",{value:"CONSIDERATION"},"Mulohaza",-1)),e[10]||(e[10]=t("option",{value:"INTENT"},"Niyat",-1)),e[11]||(e[11]=t("option",{value:"PURCHASE"},"Xarid",-1)),e[12]||(e[12]=t("option",{value:"POST_PURCHASE"},"Xariddan keyin",-1))],544),[[v,i.value.stage]])])])]),t("div",Z,[t("ul",$,[(r(!0),d(_,null,A(n.conversations.data,s=>(r(),d("li",{key:s.id,class:"hover:bg-gray-50 transition-colors"},[x(a(b),{href:m.route("business.customer-bot.conversation",s.id),class:"block p-6"},{default:g(()=>[t("div",tt,[t("div",et,[t("div",st,o(w[s.channel]||"ðŸ’¬"),1),t("div",ot,[t("div",at,[t("p",lt,o(s.customer_name||"Anonim"),1),t("span",{class:I(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",k[s.status]])},o(s.status==="active"?"Faol":s.status==="closed"?"Yopilgan":"Arxiv"),3),s.handed_off?(r(),d("span",rt," Operatorda ")):u("",!0)]),t("div",nt,[s.customer_email?(r(),d("span",it,o(s.customer_email),1)):u("",!0),s.customer_phone?(r(),d("span",dt,o(s.customer_phone),1)):u("",!0),t("span",null,o(s.messages_count)+" xabar",1)]),s.messages&&s.messages.length>0?(r(),d("p",ut,o(s.messages[0].content),1)):u("",!0)])]),t("div",mt,[t("p",ct,o(E(s.updated_at)),1),t("p",gt,o(S[s.current_stage]||s.current_stage),1),s.lead_id?(r(),d("p",pt," Lid ")):u("",!0)])])]),_:2},1032,["href"])]))),128)),n.conversations.data.length===0?(r(),d("li",ht,[e[13]||(e[13]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),t("p",xt,o(a(l)("chatbot.no_conversations")),1)])):u("",!0)]),n.conversations.data.length>0?(r(),d("div",ft,[t("div",bt,[t("div",vt,[t("span",_t,o(n.conversations.from),1),e[14]||(e[14]=c(" - ",-1)),t("span",yt,o(n.conversations.to),1),e[15]||(e[15]=c(" dan ",-1)),t("span",kt,o(n.conversations.total),1),e[16]||(e[16]=c(" ta ",-1))]),t("div",wt,[n.conversations.prev_page_url?(r(),y(a(b),{key:0,href:n.conversations.prev_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:g(()=>[c(o(a(l)("common.previous")),1)]),_:1},8,["href"])):u("",!0),n.conversations.next_page_url?(r(),y(a(b),{key:1,href:n.conversations.next_page_url,class:"px-3 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50","preserve-state":""},{default:g(()=>[c(o(a(l)("common.next")),1)]),_:1},8,["href"])):u("",!0)])])])):u("",!0)])])])]),_:1},8,["title"])],64))}};export{Qt as default};
