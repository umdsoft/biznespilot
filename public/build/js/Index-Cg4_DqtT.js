import{r as p,v as K,x as z,y as m,z as e,D as n,L as k,A as r,H as s,C as B,E as l,F as j,G as S,Q as h,I as g,J as x,K as N}from"./chunk-BcTZxe-J.js";import{h as D,r as J}from"./chunk-BYRtWSr0.js";import{_ as R}from"./chunk-D8H5eHXP.js";import{u as X}from"./app-CncQRLgv.js";import{r as I}from"./chunk-gCWBLgcy.js";import{m as T,e as L}from"./chunk-BnC_-OK6.js";import{r as G}from"./chunk-C6v56q2n.js";import{r as H}from"./chunk-B8B9YLkE.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const Q={class:"space-y-6"},W={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Y={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},ee={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},te={key:0,class:"p-12 text-center text-gray-500 dark:text-gray-400"},re={key:1,class:"overflow-x-auto"},oe={class:"w-full"},ae={class:"bg-gray-50 dark:bg-gray-900/50"},se={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},de={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},le={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},ne={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},ie={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},pe={class:"divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"px-6 py-4"},ue={class:"flex items-center gap-3"},ge={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center"},ye={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},me={key:0,class:"text-xs text-purple-600 dark:text-purple-400"},he={class:"px-6 py-4 text-sm text-gray-900 dark:text-gray-100"},xe={class:"px-6 py-4"},be={class:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400"},fe={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400"},_e={class:"px-6 py-4"},ve={key:0,class:"flex items-center gap-2"},ke=["onClick","title"],we=["onClick","title"],Ce=["onClick","title"],je={key:1,class:"text-gray-400"},Se={key:2,class:"p-12 text-center text-gray-500 dark:text-gray-400"},$e={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},Ee={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Ne={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Te={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Me=["placeholder"],Ve={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},qe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Oe={value:""},Fe=["value"],Ue={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Pe=["placeholder"],Ae={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ke=["placeholder"],ze={class:"flex justify-end gap-3 pt-4"},Be={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},De={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},Je={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Re={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Xe={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},Ie={value:""},Le=["value"],Ge={class:"flex justify-end gap-3 pt-4"},He={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Qe={class:"bg-white dark:bg-gray-800 rounded-2xl max-w-md w-full"},We={class:"p-6 border-b border-gray-200 dark:border-gray-700"},Ye={class:"text-xl font-bold text-gray-900 dark:text-gray-100"},Ze={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},et=["placeholder"],tt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},rt=["placeholder"],ot={class:"flex justify-end gap-3 pt-4"},at={type:"submit",class:"px-6 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700"},Tt={__name:"Index",props:{members:{type:Array,default:()=>[]},departments:{type:Object,default:()=>({})},roles:{type:Object,default:()=>({})}},setup(M){const{t}=X(),w=M,$=p(w.members),E=p(w.departments);p(w.roles);const V=p(!1),b=p(!1),f=p(!1),_=p(!1),c=p(null),i=p({name:"",phone:"",password:"",password_confirmation:"",department:""}),v=p({department:"",role:""}),y=p({password:"",password_confirmation:""}),C=()=>{J.reload({only:["members"]})},q=async()=>{try{const o=await(await fetch(route("hr.team.invite"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(i.value)})).json();o.success?(b.value=!1,i.value={name:"",phone:"",password:"",password_confirmation:"",department:""},C()):alert(o.error||t("hr.error_occurred"))}catch(d){console.error("Error adding member:",d),alert(t("hr.error_occurred"))}},O=d=>{c.value=d,v.value={department:d.department||"",role:d.role||""},f.value=!0},F=async()=>{if(c.value)try{const o=await(await fetch(route("hr.team.update",c.value.id),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(v.value)})).json();o.success?(f.value=!1,c.value=null,C()):alert(o.error||t("hr.error_occurred"))}catch(d){console.error("Error updating member:",d),alert(t("hr.error_occurred"))}},U=d=>{c.value=d,y.value={password:"",password_confirmation:""},_.value=!0},P=async()=>{if(c.value)try{const o=await(await fetch(route("hr.team.reset-password",c.value.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content},body:JSON.stringify(y.value)})).json();o.success?(_.value=!1,c.value=null,y.value={password:"",password_confirmation:""},alert(t("hr.password_changed"))):alert(o.error||t("hr.error_occurred"))}catch(d){console.error("Error resetting password:",d),alert(t("hr.error_occurred"))}},A=async d=>{if(confirm(`${d.name}${t("hr.remove_confirm")}`))try{const a=await(await fetch(route("hr.team.remove",d.id),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content}})).json();a.success?C():alert(a.error||t("hr.error_occurred"))}catch(o){console.error("Error removing member:",o),alert(t("hr.error_occurred"))}};return(d,o)=>(l(),K(R,{title:r(t)("hr.employees")},{default:z(()=>[m(r(D),{title:r(t)("hr.employees")},null,8,["title"]),e("div",Q,[e("div",W,[e("div",null,[e("h1",Y,s(r(t)("hr.employees")),1),e("p",Z,s(r(t)("hr.manage_team")),1)]),e("button",{onClick:o[0]||(o[0]=a=>b.value=!0),class:"px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2"},[m(r(I),{class:"w-5 h-5"}),B(" "+s(r(t)("hr.add_employee")),1)])]),e("div",ee,[V.value?(l(),n("div",te,s(r(t)("hr.loading")),1)):$.value.length>0?(l(),n("div",re,[e("table",oe,[e("thead",ae,[e("tr",null,[e("th",se,s(r(t)("hr.full_name")),1),e("th",de,s(r(t)("hr.phone")),1),e("th",le,s(r(t)("hr.department")),1),e("th",ne,s(r(t)("hr.joined_at")),1),e("th",ie,s(r(t)("hr.actions")),1)])]),e("tbody",pe,[(l(!0),n(j,null,S($.value,a=>(l(),n("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-900/50"},[e("td",ce,[e("div",ue,[e("div",ge,[m(r(T),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),e("div",null,[e("p",ye,s(a.name),1),a.is_owner?(l(),n("p",me,s(r(t)("hr.business_owner")),1)):k("",!0)])])]),e("td",he,s(a.phone||"N/A"),1),e("td",xe,[e("span",be,s(a.department_label||"N/A"),1)]),e("td",fe,s(a.joined_at||a.created_at),1),e("td",_e,[a.is_owner?(l(),n("span",je,"-")):(l(),n("div",ve,[e("button",{onClick:u=>O(a),class:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:r(t)("hr.edit")},[m(r(G),{class:"w-5 h-5"})],8,ke),e("button",{onClick:u=>U(a),class:"p-1 text-green-600 dark:text-green-400 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:r(t)("hr.change_password")},[m(r(H),{class:"w-5 h-5"})],8,we),e("button",{onClick:u=>A(a),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:r(t)("hr.delete")},[m(r(L),{class:"w-5 h-5"})],8,Ce)]))])]))),128))])])])):(l(),n("div",Se,[m(r(T),{class:"w-12 h-12 mx-auto mb-4 opacity-50"}),e("p",null,s(r(t)("hr.no_employees")),1)]))])]),b.value?(l(),n("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[7]||(o[7]=h(a=>b.value=!1,["self"]))},[e("div",$e,[e("div",Ee,[e("h3",Ne,s(r(t)("hr.new_employee")),1)]),e("form",{onSubmit:h(q,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("label",Te,s(r(t)("hr.full_name"))+" *",1),g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>i.value.name=a),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:r(t)("hr.name_placeholder")},null,8,Me),[[x,i.value.name]])]),e("div",null,[e("label",Ve,s(r(t)("hr.phone"))+" *",1),g(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>i.value.phone=a),type:"text",required:"",maxlength:"12",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:"998901234567"},null,512),[[x,i.value.phone]])]),e("div",null,[e("label",qe,s(r(t)("hr.department"))+" *",1),g(e("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>i.value.department=a),required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[e("option",Oe,s(r(t)("hr.select")),1),(l(!0),n(j,null,S(E.value,(a,u)=>(l(),n("option",{key:u,value:u},s(a),9,Fe))),128))],512),[[N,i.value.department]])]),e("div",null,[e("label",Ue,s(r(t)("hr.password"))+" *",1),g(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>i.value.password=a),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:r(t)("hr.password_placeholder")},null,8,Pe),[[x,i.value.password]])]),e("div",null,[e("label",Ae,s(r(t)("hr.confirm_password"))+" *",1),g(e("input",{"onUpdate:modelValue":o[5]||(o[5]=a=>i.value.password_confirmation=a),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:r(t)("hr.reenter_password")},null,8,Ke),[[x,i.value.password_confirmation]])]),e("div",ze,[e("button",{type:"button",onClick:o[6]||(o[6]=a=>b.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},s(r(t)("hr.cancel")),1),e("button",Be,s(r(t)("hr.add")),1)])],32)])])):k("",!0),f.value?(l(),n("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[10]||(o[10]=h(a=>f.value=!1,["self"]))},[e("div",De,[e("div",Je,[e("h3",Re,s(r(t)("hr.edit_employee")),1)]),e("form",{onSubmit:h(F,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("label",Xe,s(r(t)("hr.department")),1),g(e("select",{"onUpdate:modelValue":o[8]||(o[8]=a=>v.value.department=a),class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500"},[e("option",Ie,s(r(t)("hr.select")),1),(l(!0),n(j,null,S(E.value,(a,u)=>(l(),n("option",{key:u,value:u},s(a),9,Le))),128))],512),[[N,v.value.department]])]),e("div",Ge,[e("button",{type:"button",onClick:o[9]||(o[9]=a=>f.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},s(r(t)("hr.cancel")),1),e("button",He,s(r(t)("hr.save")),1)])],32)])])):k("",!0),_.value?(l(),n("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[14]||(o[14]=h(a=>_.value=!1,["self"]))},[e("div",Qe,[e("div",We,[e("h3",Ye,s(r(t)("hr.change_password")),1)]),e("form",{onSubmit:h(P,["prevent"]),class:"p-6 space-y-4"},[e("div",null,[e("label",Ze,s(r(t)("hr.new_password"))+" *",1),g(e("input",{"onUpdate:modelValue":o[11]||(o[11]=a=>y.value.password=a),type:"password",required:"",minlength:"6",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:r(t)("hr.password_placeholder")},null,8,et),[[x,y.value.password]])]),e("div",null,[e("label",tt,s(r(t)("hr.confirm_password"))+" *",1),g(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>y.value.password_confirmation=a),type:"password",required:"",class:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-purple-500",placeholder:r(t)("hr.reenter_password")},null,8,rt),[[x,y.value.password_confirmation]])]),e("div",ot,[e("button",{type:"button",onClick:o[13]||(o[13]=a=>_.value=!1),class:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600"},s(r(t)("hr.cancel")),1),e("button",at,s(r(t)("hr.update")),1)])],32)])])):k("",!0)]),_:1},8,["title"]))}};export{Tt as default};
