import{r as e,b as a,v as r,x as t,y as l,B as s,z as d,A as o,F as n,G as i,N as u,C as m,I as g,D as p}from"./chunk-CpmtkKLp.js";import{r as c}from"./chunk-BhZp3z4u.js";import{_ as k}from"./chunk-BHCorYK2.js";import{u as x}from"./app-C-ZlocOh.js";import"./chunk-D7SyfRoT.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";import"./chunk-BWiubfpN.js";const b={class:"max-w-3xl mx-auto"},y={class:"mb-8"},v={href:"/sales-head/kpi",class:"inline-flex items-center text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 mb-4"},h={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},w={class:"mt-1 text-gray-600 dark:text-gray-400"},_={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6 mb-6"},f={class:"flex items-center justify-between"},j={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},M=["max"],S={class:"text-right"},z={class:"text-2xl font-bold text-emerald-600 dark:text-emerald-400"},U={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},V={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},C={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},B={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},D={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},H={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},I={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},N={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-6"},L={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},T={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},Z={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},A={key:0,class:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl border border-emerald-200 dark:border-emerald-800 p-6"},E={class:"text-lg font-semibold text-emerald-900 dark:text-emerald-100 mb-4"},G={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},$={class:"text-sm text-emerald-700 dark:text-emerald-300"},q={class:"text-xl font-bold text-emerald-900 dark:text-emerald-100"},J={class:"text-sm text-emerald-700 dark:text-emerald-300"},K={class:"text-xl font-bold text-emerald-900 dark:text-emerald-100"},P={class:"text-sm text-emerald-700 dark:text-emerald-300"},Q={class:"text-xl font-bold text-emerald-900 dark:text-emerald-100"},R={class:"text-sm text-emerald-700 dark:text-emerald-300"},W={class:"text-xl font-bold text-emerald-900 dark:text-emerald-100"},X={class:"flex justify-end gap-3"},Y={href:"/sales-head/kpi",class:"px-6 py-3 rounded-lg font-medium bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"},ee={type:"submit",class:"px-6 py-3 rounded-lg font-medium bg-emerald-600 text-white hover:bg-emerald-700"},ae={__name:"DataEntry",props:{date:String,entry:Object,panelType:String},setup(ae){const{t:re}=x(),te=ae,le=(new Date).toISOString().split("T")[0],se=e(te.date||le),de=e({leads_total:te.entry?.leads_total||0,sales_new:te.entry?.sales_new||0,sales_repeat:te.entry?.sales_repeat||0,revenue_new:te.entry?.revenue_new||0,revenue_repeat:te.entry?.revenue_repeat||0}),oe=a(()=>new Date(se.value).toLocaleDateString("uz-UZ",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),ne=a(()=>(de.value.sales_new||0)+(de.value.sales_repeat||0)),ie=a(()=>(de.value.revenue_new||0)+(de.value.revenue_repeat||0)),ue=a(()=>ne.value>0?ie.value/ne.value:0),me=a(()=>de.value.leads_total&&0!==de.value.leads_total?Math.round(ne.value/de.value.leads_total*100):0),ge=e=>e?e>=1e6?(e/1e6).toFixed(1)+" mln so'm":new Intl.NumberFormat("uz-UZ").format(e)+" so'm":"0 so'm",pe=()=>{c.get("/sales-head/kpi/data-entry",{date:se.value},{preserveState:!0,preserveScroll:!0})},ce=()=>{c.post("/sales-head/kpi/daily-entry",{date:se.value,...de.value},{preserveScroll:!0,onSuccess:()=>{c.visit("/sales-head/kpi")}})};return(e,a)=>(p(),r(k,{title:o(re)("kpi.daily_data")},{default:t(()=>[l("div",b,[l("div",y,[l("a",v,[a[6]||(a[6]=l("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)),s(" "+d(o(re)("kpi.back_to_kpi")),1)]),l("h2",h,d(o(re)("kpi.enter_daily_data")),1),l("p",w,d(o(re)("kpi.enter_sales_indicators_daily")),1)]),l("div",_,[l("div",f,[l("div",null,[l("label",j,d(o(re)("common.date")),1),n(l("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>se.value=e),type:"date",max:o(le),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",onChange:pe},null,40,M),[[i,se.value]])]),l("div",S,[l("span",z,d(oe.value),1)])])]),l("form",{onSubmit:u(ce,["prevent"]),class:"space-y-6"},[l("div",U,[l("h3",V,[a[7]||(a[7]=l("svg",{class:"w-5 h-5 text-purple-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),s(" "+d(o(re)("sales.leads")),1)]),l("div",null,[l("label",C,d(o(re)("kpi.total_incoming_leads")),1),n(l("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>de.value.leads_total=e),type:"number",min:"0",class:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-lg",placeholder:"0"},null,512),[[i,de.value.leads_total,void 0,{number:!0}]])])]),l("div",B,[l("h3",D,[a[8]||(a[8]=l("svg",{class:"w-5 h-5 text-teal-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})],-1)),s(" "+d(o(re)("kpi.sales")),1)]),l("div",F,[l("div",null,[l("label",H,d(o(re)("kpi.new_sales")),1),n(l("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>de.value.sales_new=e),type:"number",min:"0",class:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"0"},null,512),[[i,de.value.sales_new,void 0,{number:!0}]])]),l("div",null,[l("label",I,d(o(re)("kpi.repeat_sales")),1),n(l("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>de.value.sales_repeat=e),type:"number",min:"0",class:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"0"},null,512),[[i,de.value.sales_repeat,void 0,{number:!0}]])])])]),l("div",N,[l("h3",L,[a[9]||(a[9]=l("svg",{class:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),s(" "+d(o(re)("saleshead.revenue")),1)]),l("div",O,[l("div",null,[l("label",T,d(o(re)("kpi.new_sales_revenue")),1),n(l("input",{"onUpdate:modelValue":a[4]||(a[4]=e=>de.value.revenue_new=e),type:"number",min:"0",step:"1000",class:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"0"},null,512),[[i,de.value.revenue_new,void 0,{number:!0}]])]),l("div",null,[l("label",Z,d(o(re)("kpi.repeat_sales_revenue")),1),n(l("input",{"onUpdate:modelValue":a[5]||(a[5]=e=>de.value.revenue_repeat=e),type:"number",min:"0",step:"1000",class:"w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"0"},null,512),[[i,de.value.revenue_repeat,void 0,{number:!0}]])])])]),ne.value>0||ie.value>0?(p(),m("div",A,[l("h3",E,d(o(re)("kpi.calculated_indicators")),1),l("div",G,[l("div",null,[l("p",$,d(o(re)("kpi.total_sales")),1),l("p",q,d(ne.value),1)]),l("div",null,[l("p",J,d(o(re)("analytics.total_revenue")),1),l("p",K,d(ge(ie.value)),1)]),l("div",null,[l("p",P,d(o(re)("kpi.avg_check")),1),l("p",Q,d(ge(ue.value)),1)]),l("div",null,[l("p",R,d(o(re)("saleshead.conversion")),1),l("p",W,d(me.value)+"%",1)])])])):g("",!0),l("div",X,[l("a",Y,d(o(re)("common.cancel")),1),l("button",ee,d(o(re)("common.save")),1)])],32)])]),_:1},8,["title"]))}};export{ae as default};
