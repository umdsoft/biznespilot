import{r as e,b as t,D as s,y as a,z as l,A as n,x as r,H as o,B as i,C as d,S as c,F as u,G as g,v as p,L as m,Q as x,I as b,J as y,K as v,E as f}from"./chunk-7Urb0kxg.js";import{h,l as k,r as w}from"./chunk-DKkye6wf.js";import{_}from"./chunk-ChR1ufy9.js";import{r as j}from"./chunk-D4tA7yBb.js";import{r as q}from"./chunk-iVGhU8RF.js";import{r as S,a as $}from"./chunk-YGW1Cp7-.js";import{r as C}from"./chunk-DOBCiesv.js";import{r as H,a as V}from"./chunk-C9ok9TsT.js";import{r as F}from"./chunk-ujXbNZhL.js";import{r as K}from"./chunk-Rl16a4N0.js";import{r as O}from"./chunk-Dz2-E44V.js";import{Y as z,h as U,G as A,V as B,S as Q}from"./chunk-BWNgHGSI.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";const Y={class:"py-6"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},M={class:"flex items-center justify-between mb-6"},R={class:"flex items-center space-x-4"},P={class:"text-2xl font-bold text-gray-900"},I={class:"text-gray-500"},T={class:"flex items-center space-x-3"},E={class:"bg-white rounded-lg border p-6 mb-6"},G={class:"flex items-center justify-between mb-4"},J={class:"text-2xl font-bold text-indigo-600"},L={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},N={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},W={class:"bg-white rounded-lg border p-4"},X={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-gray-900 mt-1"},ee={class:"bg-white rounded-lg border p-4"},te={class:"flex items-center justify-between"},se={class:"text-2xl font-bold text-gray-900 mt-1"},ae={class:"bg-white rounded-lg border p-4"},le={class:"flex items-center justify-between"},ne={class:"text-2xl font-bold text-gray-900 mt-1"},re={class:"bg-white rounded-lg border p-4"},oe={class:"flex items-center justify-between"},ie={class:"text-2xl font-bold text-gray-900 mt-1"},de={class:"bg-white rounded-lg border p-4"},ce={class:"flex items-center justify-between"},ue={class:"text-2xl font-bold text-gray-900 mt-1"},ge={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},pe={class:"lg:col-span-2 space-y-6"},me={class:"bg-white rounded-lg border p-6"},xe={class:"flex items-center justify-between mb-4"},be={key:0,class:"space-y-3"},ye={key:1,class:"text-center py-8 text-gray-500"},ve={class:"bg-white rounded-lg border p-6"},fe={class:"flex items-center justify-between mb-4"},he={class:"space-y-3"},ke={class:"flex items-center justify-between mb-2"},we={class:"flex items-center space-x-3"},_e={class:"font-semibold text-gray-900"},je={class:"text-sm text-gray-500"},qe={class:"grid grid-cols-3 gap-4 mt-3"},Se={class:"text-center p-2 bg-gray-50 rounded"},$e={class:"font-semibold"},Ce={class:"text-center p-2 bg-gray-50 rounded"},He={class:"font-semibold"},Ve={class:"text-center p-2 bg-gray-50 rounded"},Fe={class:"font-semibold text-indigo-600"},Ke={class:"h-1.5 bg-gray-200 rounded-full overflow-hidden mt-3"},Oe={class:"text-center"},ze={class:"bg-white rounded-lg border p-6"},Ue={class:"flex items-center justify-between mb-4"},Ae={key:0,class:"flex flex-wrap gap-2"},Be=["onClick"],Qe={key:1,class:"text-center py-4 text-gray-500 text-sm"},Ye={class:"space-y-6"},De={class:"bg-white rounded-lg border p-6"},Me={class:"space-y-4"},Re={class:"font-medium text-gray-900 mb-2"},Pe={class:"space-y-1 text-sm text-gray-600"},Ie={key:0,class:"text-gray-400"},Te={key:0,class:"text-center py-4 text-gray-500 text-sm"},Ee={class:"flex items-center mb-3"},Ge={class:"flex items-center justify-between text-sm"},Je={class:"text-gray-600"},Le={class:"bg-white rounded-lg border p-6"},Ne={class:"flex items-center justify-between mb-4"},We={key:0,class:"space-y-3"},Xe={class:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center text-amber-600 flex-shrink-0"},Ze={class:"flex-1 min-w-0"},et={class:"font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},st={key:1,class:"text-center py-4 text-gray-500 text-sm"},at={key:0,class:"bg-white rounded-lg border p-6"},lt={class:"space-y-3"},nt={class:"font-medium text-green-800"},rt={class:"text-sm text-green-600 mt-1"},ot={class:"text-xs text-green-500 mt-2"},it={class:"fixed inset-0 overflow-y-auto"},dt={class:"flex min-h-full items-center justify-center p-4"},ct={class:"grid grid-cols-2 gap-4"},ut={class:"grid grid-cols-2 gap-4"},gt={class:"flex justify-end space-x-3 pt-4"},pt=["disabled"],mt={__name:"Show",props:{plan:Object,quarterly:Object,weeks:Array,content_count:Number},setup(mt){const xt=mt,bt=e(!1),yt=e(!1),vt=e(!1),ft=e(!1),ht=e(!1),kt=e({title:xt.plan.title||"",focus_area:xt.plan.focus_area||"",budget:xt.plan.budget,posts_target:xt.plan.posts_target,stories_target:xt.plan.stories_target,reels_target:xt.plan.reels_target,status:xt.plan.status}),wt=t(()=>["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"][xt.plan.month]||""),_t=t(()=>({draft:"bg-gray-100 text-gray-700",planning:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-indigo-100 text-indigo-700"}[xt.plan.status]||"bg-gray-100 text-gray-700")),jt=t(()=>({draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[xt.plan.status]||xt.plan.status)),qt=t(()=>{const e={};return["week1","week2","week3","week4"].forEach(t=>{xt.plan[t]&&xt.plan[t].length>0&&(e[t]=xt.plan[t])}),e}),St=t(()=>Object.keys(qt.value).length>0),$t=t(()=>xt.content_count||0);function Ct(e){return{draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[e]||e}function Ht(){const e=(xt.weeks?.length||0)+1;w.post("/business/strategy/weekly",{monthly_plan_id:xt.plan.id,week_of_month:e,year:xt.plan.year,month:xt.plan.month})}function Vt(){ht.value=!0,w.put(`/business/strategy/monthly/${xt.plan.id}`,kt.value,{preserveScroll:!0,onSuccess:()=>{bt.value=!1},onFinish:()=>{ht.value=!1}})}return(e,t)=>{return f(),s(u,null,[a(n(h),{title:`${wt.value} ${mt.plan.year}`},null,8,["title"]),l("div",Y,[l("div",D,[l("div",M,[l("div",R,[a(n(k),{href:mt.quarterly?`/business/strategy/quarterly/${mt.quarterly.id}`:"/business/strategy",class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"},{default:r(()=>[a(n(j),{class:"w-5 h-5"})]),_:1},8,["href"]),l("div",null,[l("h1",P,o(mt.plan.title||`${wt.value} ${mt.plan.year}`),1),l("p",I,o(mt.plan.focus_area||"Oylik reja"),1)])]),l("div",T,[l("span",{class:i(["px-3 py-1 rounded-full text-sm font-medium",_t.value])},o(jt.value),3),l("button",{onClick:t[0]||(t[0]=e=>bt.value=!0),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"},[a(n(q),{class:"w-4 h-4 inline mr-1"}),t[13]||(t[13]=d(" Tahrirlash ",-1))])])]),l("div",E,[l("div",G,[t[14]||(t[14]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Oy progressi",-1)),l("span",J,o(mt.plan.completion_percent||0)+"%",1)]),l("div",L,[l("div",{class:"h-full bg-indigo-600 rounded-full transition-all duration-500",style:c({width:`${mt.plan.completion_percent||0}%`})},null,4)])]),l("div",N,[l("div",W,[l("div",X,[t[15]||(t[15]=l("span",{class:"text-sm text-gray-500"},"Byudjet",-1)),a(n(S),{class:"w-5 h-5 text-purple-500"})]),l("p",Z,o((Ft=mt.plan.budget,Ft?Ft>=1e6?`${(Ft/1e6).toFixed(1)}M`:Ft>=1e3?`${(Ft/1e3).toFixed(0)}K`:Ft.toLocaleString():"-")),1)]),l("div",ee,[l("div",te,[t[16]||(t[16]=l("span",{class:"text-sm text-gray-500"},"Postlar",-1)),a(n(C),{class:"w-5 h-5 text-blue-500"})]),l("p",se,o(mt.plan.posts_target||0),1)]),l("div",ae,[l("div",le,[t[17]||(t[17]=l("span",{class:"text-sm text-gray-500"},"Storiyalar",-1)),a(n(H),{class:"w-5 h-5 text-pink-500"})]),l("p",ne,o(mt.plan.stories_target||0),1)]),l("div",re,[l("div",oe,[t[18]||(t[18]=l("span",{class:"text-sm text-gray-500"},"Reelslar",-1)),a(n(V),{class:"w-5 h-5 text-red-500"})]),l("p",ie,o(mt.plan.reels_target||0),1)]),l("div",de,[l("div",ce,[t[19]||(t[19]=l("span",{class:"text-sm text-gray-500"},"Haftalar",-1)),a(n($),{class:"w-5 h-5 text-amber-500"})]),l("p",ue,o(mt.weeks.length)+" / 4",1)])]),l("div",ge,[l("div",pe,[l("div",me,[l("div",xe,[t[21]||(t[21]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Oy maqsadlari",-1)),l("button",{onClick:t[1]||(t[1]=e=>yt.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[a(n(F),{class:"w-4 h-4 inline mr-1"}),t[20]||(t[20]=d(" Qo'shish ",-1))])]),mt.plan.monthly_objectives?.length?(f(),s("div",be,[(f(!0),s(u,null,g(mt.plan.monthly_objectives,(e,t)=>(f(),p(_,{key:t,goal:e,index:t,onToggle:e=>function(e){const t=[...xt.plan.monthly_objectives||[]];t[e].completed=!t[e].completed,w.put(`/business/strategy/monthly/${xt.plan.id}`,{monthly_objectives:t},{preserveScroll:!0})}(t),onDelete:e=>function(e){if(!confirm("Bu maqsadni o'chirmoqchimisiz?"))return;const t=[...xt.plan.monthly_objectives||[]];t.splice(e,1),w.put(`/business/strategy/monthly/${xt.plan.id}`,{monthly_objectives:t},{preserveScroll:!0})}(t)},null,8,["goal","index","onToggle","onDelete"]))),128))])):(f(),s("div",ye," Hali oy maqsadlari yo'q "))]),l("div",ve,[l("div",fe,[t[23]||(t[23]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Haftalik rejalar",-1)),mt.weeks.length<5?(f(),s("button",{key:0,onClick:Ht,class:"text-sm text-indigo-600 hover:text-indigo-800"},[a(n(F),{class:"w-4 h-4 inline mr-1"}),t[22]||(t[22]=d(" Hafta qo'shish ",-1))])):m("",!0)]),l("div",he,[(f(!0),s(u,null,g(mt.weeks,e=>(f(),p(n(k),{key:e.id,href:`/business/strategy/weekly/${e.id}`,class:"block p-4 rounded-lg border hover:shadow-md transition-shadow"},{default:r(()=>{return[l("div",ke,[l("div",we,[l("span",_e,"Hafta "+o(e.week_of_month),1),l("span",je,o(e.start_date)+" - "+o(e.end_date),1)]),l("span",{class:i(["px-2 py-0.5 rounded-full text-xs",(s=e.status,{draft:"bg-gray-100 text-gray-600",planning:"bg-blue-100 text-blue-600",active:"bg-green-100 text-green-600",completed:"bg-indigo-100 text-indigo-600"}[s]||"bg-gray-100 text-gray-600")])},o(Ct(e.status)),3)]),l("div",qe,[l("div",Se,[t[24]||(t[24]=l("p",{class:"text-xs text-gray-500"},"Vazifalar",-1)),l("p",$e,o(e.completed_tasks||0)+" / "+o(e.total_tasks||0),1)]),l("div",Ce,[t[25]||(t[25]=l("p",{class:"text-xs text-gray-500"},"Postlar",-1)),l("p",He,o(e.posts_published||0)+" / "+o(e.posts_planned||0),1)]),l("div",Ve,[t[26]||(t[26]=l("p",{class:"text-xs text-gray-500"},"Progress",-1)),l("p",Fe,o(e.completion_percent||0)+"%",1)])]),l("div",Ke,[l("div",{class:"h-full bg-indigo-500 rounded-full",style:c({width:`${e.completion_percent||0}%`})},null,4)])];var s}),_:2},1032,["href"]))),128)),mt.weeks.length<5?(f(),s("div",{key:0,class:"p-4 rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center cursor-pointer hover:border-indigo-300 hover:bg-indigo-50 transition-colors",onClick:Ht},[l("div",Oe,[a(n(F),{class:"w-6 h-6 text-gray-400 mx-auto mb-1"}),t[27]||(t[27]=l("span",{class:"text-sm text-gray-500"},"Yangi hafta yaratish",-1))])])):m("",!0)])]),l("div",ze,[l("div",Ue,[t[29]||(t[29]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Kontent mavzulari",-1)),l("button",{onClick:t[2]||(t[2]=e=>vt.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[a(n(F),{class:"w-4 h-4 inline mr-1"}),t[28]||(t[28]=d(" Qo'shish ",-1))])]),mt.plan.content_themes?.length?(f(),s("div",Ae,[(f(!0),s(u,null,g(mt.plan.content_themes,(e,t)=>(f(),s("span",{key:t,class:"inline-flex items-center px-3 py-1.5 rounded-full bg-indigo-50 text-indigo-700 text-sm"},[d(o(e)+" ",1),l("button",{onClick:e=>function(e){const t=[...xt.plan.content_themes||[]];t.splice(e,1),w.put(`/business/strategy/monthly/${xt.plan.id}`,{content_themes:t},{preserveScroll:!0})}(t),class:"ml-2 text-indigo-400 hover:text-indigo-600"},[a(n(K),{class:"w-4 h-4"})],8,Be)]))),128))])):(f(),s("div",Qe," Kontent mavzulari yo'q "))])]),l("div",Ye,[l("div",De,[t[30]||(t[30]=l("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Hafta bo'yicha rejalar",-1)),l("div",Me,[(f(!0),s(u,null,g(qt.value,(e,t)=>(f(),s("div",{key:t,class:"p-3 bg-gray-50 rounded-lg"},[l("h4",Re,"Hafta "+o(t.replace("week","")),1),l("ul",Pe,[(f(!0),s(u,null,g(e.slice(0,3),(e,t)=>(f(),s("li",{key:t,class:"truncate"},o(e),1))),128)),e.length>3?(f(),s("li",Ie," +"+o(e.length-3)+" yana ",1)):m("",!0)])]))),128))]),St.value?m("",!0):(f(),s("div",Te," Haftalik rejalar tuzilmagan "))]),a(n(k),{href:"/business/content-calendar",class:"block bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg border border-pink-200 p-6 hover:shadow-md transition-shadow"},{default:r(()=>[l("div",Ee,[a(n(O),{class:"w-8 h-8 text-pink-500 mr-3"}),t[31]||(t[31]=l("div",null,[l("h3",{class:"font-semibold text-gray-900"},"Kontent Kalendar"),l("p",{class:"text-sm text-gray-500"},"Kontentlarni rejalashtiring")],-1))]),l("div",Ge,[l("span",Je,o($t.value)+" ta kontent",1),t[32]||(t[32]=l("span",{class:"text-pink-600 font-medium"},"Ko'rish â†’",-1))])]),_:1}),l("div",Le,[l("div",Ne,[t[33]||(t[33]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Muhim voqealar",-1)),l("button",{onClick:t[3]||(t[3]=e=>ft.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[a(n(F),{class:"w-4 h-4 inline"})])]),mt.plan.key_events?.length?(f(),s("div",We,[(f(!0),s(u,null,g(mt.plan.key_events,(e,t)=>(f(),s("div",{key:t,class:"flex items-start space-x-3"},[l("div",Xe,[a(n($),{class:"w-5 h-5"})]),l("div",Ze,[l("p",et,o(e.title),1),l("p",tt,o(e.date),1)])]))),128))])):(f(),s("div",st," Muhim voqealar yo'q "))]),mt.plan.promotions?.length?(f(),s("div",at,[t[34]||(t[34]=l("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Aksiyalar",-1)),l("div",lt,[(f(!0),s(u,null,g(mt.plan.promotions,(e,t)=>(f(),s("div",{key:t,class:"p-3 bg-green-50 rounded-lg border border-green-200"},[l("h4",nt,o(e.title),1),l("p",rt,o(e.description),1),l("p",ot,o(e.dates),1)]))),128))])])):m("",!0)])])])]),a(n(Q),{appear:"",show:bt.value,as:"template"},{default:r(()=>[a(n(z),{as:"div",class:"relative z-50",onClose:t[12]||(t[12]=e=>bt.value=!1)},{default:r(()=>[a(n(U),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[...t[35]||(t[35]=[l("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),l("div",it,[l("div",dt,[a(n(U),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[a(n(A),{class:"w-full max-w-2xl bg-white rounded-xl shadow-xl p-6"},{default:r(()=>[a(n(B),{class:"text-lg font-semibold text-gray-900 mb-4"},{default:r(()=>[...t[36]||(t[36]=[d(" Oylik rejani tahrirlash ",-1)])]),_:1}),l("form",{onSubmit:x(Vt,["prevent"]),class:"space-y-4"},[l("div",null,[t[37]||(t[37]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sarlavha",-1)),b(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>kt.value.title=e),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.title]])]),l("div",null,[t[38]||(t[38]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Asosiy fokus",-1)),b(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>kt.value.focus_area=e),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.focus_area]])]),l("div",ct,[l("div",null,[t[39]||(t[39]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Byudjet",-1)),b(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>kt.value.budget=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.budget,void 0,{number:!0}]])]),l("div",null,[t[40]||(t[40]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Post maqsadi",-1)),b(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>kt.value.posts_target=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.posts_target,void 0,{number:!0}]])])]),l("div",ut,[l("div",null,[t[41]||(t[41]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Story maqsadi",-1)),b(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>kt.value.stories_target=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.stories_target,void 0,{number:!0}]])]),l("div",null,[t[42]||(t[42]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Reels maqsadi",-1)),b(l("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>kt.value.reels_target=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,kt.value.reels_target,void 0,{number:!0}]])])]),l("div",null,[t[44]||(t[44]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),b(l("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>kt.value.status=e),class:"w-full rounded-lg border-gray-300"},[...t[43]||(t[43]=[l("option",{value:"draft"},"Qoralama",-1),l("option",{value:"planning"},"Rejalashtirish",-1),l("option",{value:"active"},"Faol",-1),l("option",{value:"completed"},"Yakunlangan",-1)])],512),[[v,kt.value.status]])]),l("div",gt,[l("button",{type:"button",onClick:t[11]||(t[11]=e=>bt.value=!1),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"}," Bekor qilish "),l("button",{type:"submit",disabled:ht.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},o(ht.value?"Saqlanmoqda...":"Saqlash"),9,pt)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64);var Ft}}};export{mt as default};
