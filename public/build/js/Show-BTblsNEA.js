import{r as h,a as B}from"./chunk-BYRtWSr0.js";import{_ as M}from"./chunk-TXgJ1MaD.js";import{v as n,x as j,z as t,D as i,L as d,H as o,E as a,C as k,B as u,F as x,G as m}from"./chunk-BcTZxe-J.js";import"./chunk-AyRJdOJv.js";import"./app-BC9IivQF.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const z={class:"space-y-6"},V={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},N={class:"flex items-center space-x-3"},S={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},T={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},A={class:"flex items-center space-x-3"},L=["href"],D={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},F={class:"flex flex-col md:flex-row md:items-center gap-6"},H={class:"text-3xl font-bold"},O={class:"flex-1"},I={class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},U={key:0,class:"mt-4 grid grid-cols-2 md:grid-cols-5 gap-3"},Z={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},q={class:"text-xs text-gray-500 dark:text-gray-400"},E={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},P={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},R={key:0,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},G={class:"space-y-3"},K={class:"text-lg"},Y={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},$={class:"text-xs text-gray-500 dark:text-gray-400"},J={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},Q={class:"space-y-4"},W={class:"flex items-start space-x-3"},X={class:"text-lg"},tt={class:"font-medium text-gray-900 dark:text-gray-100"},et={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},rt={key:2,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},at={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},st={class:"text-sm text-gray-500 dark:text-gray-400"},ot={class:"text-xl font-bold text-gray-900 dark:text-gray-100 mt-1"},lt={class:"flex items-center mt-2"},it=["d"],dt={key:3,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},nt={class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},ct={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},gt={class:"space-y-3"},ut={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},xt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},mt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6"},bt={class:"whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg overflow-x-auto"},It={__name:"Show",props:{report:Object},setup(e){const y=e,c={props:["label","value","suffix","icon","color"],template:`
        <div class="p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
            <div class="text-sm text-gray-500 dark:text-gray-400">{{ label }}</div>
            <div class="text-xl font-bold text-gray-900 dark:text-gray-100 mt-1">
                {{ value }}{{ suffix || '' }}
            </div>
        </div>
    `},b=l=>l?new Intl.NumberFormat("uz-UZ").format(Math.round(l))+" UZS":"0 UZS",v=l=>new Intl.NumberFormat("uz-UZ").format(Math.round(l)),f=l=>l?l>=80?"bg-green-500 text-white":l>=60?"bg-blue-500 text-white":l>=40?"bg-yellow-500 text-white":"bg-red-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-600",p=l=>({"bg-green-50 dark:bg-green-900/20 border-l-4 border-green-500":l==="positive","bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500":l==="negative","bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500":l==="warning","bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500":l==="neutral"}),w=()=>{h.visit(route("business.reports.algorithmic"))},_=async()=>{if(confirm("Hisobotni o'chirishni xohlaysizmi?"))try{await B.delete(route("business.reports.delete",y.report.id)),h.visit(route("business.reports.algorithmic"))}catch(l){console.error("Delete failed:",l),alert("O'chirishda xatolik")}},C=()=>{navigator.clipboard.writeText(y.report.content_text),alert("Matn nusxalandi!")};return(l,s)=>(a(),n(M,{title:e.report.title},{default:j(()=>[t("div",z,[t("div",V,[t("div",null,[t("div",N,[t("button",{onClick:w,class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},[...s[0]||(s[0]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("h2",S,o(e.report.title),1)]),t("p",T,o(e.report.period_label)+" | Yaratildi: "+o(e.report.created_at),1)]),t("div",A,[e.report.has_pdf?(a(),i("a",{key:0,href:e.report.pdf_url,target:"_blank",class:"inline-flex items-center px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors"},[...s[1]||(s[1]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),k(" PDF ",-1)])],8,L)):d("",!0),t("button",{onClick:_,class:"text-red-500 hover:text-red-700"},[...s[2]||(s[2]=[t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])])]),t("div",D,[t("div",F,[t("div",{class:u(["w-24 h-24 rounded-2xl flex flex-col items-center justify-center",f(e.report.health_score)])},[t("div",H,o(e.report.health_score),1),s[3]||(s[3]=t("div",{class:"text-xs opacity-80"},"/ 100",-1))],2),t("div",O,[t("h3",I," Salomatlik balli: "+o(e.report.health_score_label),1),s[4]||(s[4]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Bu ko'rsatkich biznesingizning umumiy holatini aks ettiradi ",-1)),e.report.health_breakdown?(a(),i("div",U,[(a(!0),i(x,null,m(e.report.health_breakdown,r=>(a(),i("div",{key:r.category,class:"text-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[t("div",Z,o(r.score),1),t("div",q,o(r.label),1)]))),128))])):d("",!0)])])]),t("div",E,[s[5]||(s[5]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Asosiy ko'rsatkichlar",-1)),t("div",P,[e.report.metrics_data?.sales?(a(),n(c,{key:0,label:"Sotuvlar",value:e.report.metrics_data.sales.total_sales,suffix:" ta",icon:"shopping-cart",color:"blue"},null,8,["value"])):d("",!0),e.report.metrics_data?.sales?(a(),n(c,{key:1,label:"Daromad",value:b(e.report.metrics_data.sales.total_revenue),icon:"currency",color:"green"},null,8,["value"])):d("",!0),e.report.metrics_data?.marketing?(a(),n(c,{key:2,label:"Lidlar",value:e.report.metrics_data.marketing.total_leads,suffix:" ta",icon:"users",color:"purple"},null,8,["value"])):d("",!0),e.report.metrics_data?.marketing?(a(),n(c,{key:3,label:"Konversiya",value:e.report.metrics_data.marketing.conversion_rate,suffix:"%",icon:"chart",color:"yellow"},null,8,["value"])):d("",!0),e.report.metrics_data?.financial?(a(),n(c,{key:4,label:"ROI",value:e.report.metrics_data.financial.roi,suffix:"%",icon:"trending-up",color:"green"},null,8,["value"])):d("",!0),e.report.metrics_data?.financial?(a(),n(c,{key:5,label:"CAC",value:b(e.report.metrics_data.financial.cac),icon:"tag",color:"red"},null,8,["value"])):d("",!0),e.report.metrics_data?.financial?(a(),n(c,{key:6,label:"CLV",value:b(e.report.metrics_data.financial.clv),icon:"heart",color:"pink"},null,8,["value"])):d("",!0),e.report.metrics_data?.financial?(a(),n(c,{key:7,label:"LTV/CAC",value:e.report.metrics_data.financial.ltv_cac_ratio,suffix:"x",icon:"scale",color:"indigo"},null,8,["value"])):d("",!0)])]),e.report.insights?.length?(a(),i("div",R,[s[6]||(s[6]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Tushunchalar",-1)),t("div",G,[(a(!0),i(x,null,m(e.report.insights,(r,g)=>(a(),i("div",{key:g,class:u(["flex items-start space-x-3 p-3 rounded-lg",p(r.type)])},[t("span",K,o(r.icon),1),t("div",null,[t("p",Y,o(r.message),1),t("span",$,o(r.category),1)])],2))),128))])])):d("",!0),e.report.recommendations?.length?(a(),i("div",J,[s[7]||(s[7]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Tavsiyalar",-1)),t("div",Q,[(a(!0),i(x,null,m(e.report.recommendations,(r,g)=>(a(),i("div",{key:g,class:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800"},[t("div",W,[t("span",X,o(r.icon),1),t("div",null,[t("h4",tt,o(r.title),1),t("p",et,o(r.description),1)])])]))),128))])])):d("",!0),e.report.comparisons?.previous_period?(a(),i("div",rt,[s[8]||(s[8]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"}," Oldingi davr bilan taqqoslash ",-1)),t("div",at,[(a(!0),i(x,null,m(e.report.comparisons.previous_period.metrics,(r,g)=>(a(),i("div",{key:g,class:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[t("div",st,o(r.label),1),t("div",ot,o(typeof r.current=="number"&&r.current>1e3?v(r.current):r.current),1),t("div",lt,[t("span",{class:u([r.direction==="up"?"text-green-500":r.direction==="down"?"text-red-500":"text-gray-500","text-sm font-medium"])},o(r.direction==="up"?"+":"")+o(r.change_percent)+"% ",3),r.direction!=="stable"?(a(),i("svg",{key:0,class:u(["w-4 h-4 ml-1",r.direction==="up"?"text-green-500":"text-red-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:r.direction==="up"?"M5 10l7-7m0 0l7 7m-7-7v18":"M19 14l-7 7m0 0l-7-7m7 7V3"},null,8,it)],2)):d("",!0)])]))),128))])])):d("",!0),e.report.anomalies?.length?(a(),i("div",dt,[t("h3",nt,[s[9]||(s[9]=k(" Anomaliyalar ",-1)),t("span",ct,"("+o(e.report.anomalies.length)+")",1)]),t("div",gt,[(a(!0),i(x,null,m(e.report.anomalies,(r,g)=>(a(),i("div",{key:g,class:u(["flex items-start justify-between p-3 rounded-lg",r.severity==="high"?"bg-red-50 dark:bg-red-900/20":"bg-yellow-50 dark:bg-yellow-900/20"])},[t("div",null,[t("p",ut,o(r.message),1),t("p",xt,o(r.date),1)]),t("span",{class:u(["text-xs font-medium px-2 py-1 rounded",r.type==="spike"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},o(r.type==="spike"?"O'sish":"Pasayish"),3)],2))),128))])])):d("",!0),t("div",mt,[t("div",{class:"flex items-center justify-between mb-4"},[s[10]||(s[10]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Telegram uchun matn",-1)),t("button",{onClick:C,class:"text-blue-600 hover:text-blue-700 text-sm font-medium"}," Nusxalash ")]),t("pre",bt,o(e.report.content_text),1)])])]),_:1},8,["title"]))}};export{It as default};
