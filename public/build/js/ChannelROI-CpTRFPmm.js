import{r as n,o as w,v as f,x as M,y as z,z as t,A as I,C as l,D as c,J as b,K as h,F as d,H as r,G as v,B as k,I as O,E as R}from"./chunk-KPSVwAyv.js";import{h as B,a as C}from"./chunk-BVrjkT6E.js";import{_ as K}from"./chunk-BEX9HuyE.js";import"./chunk-C_PbB7ed.js";import"./app-DMGwzSHW.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-Dfha1x8d.js";import"./chunk-BgOPVSvg.js";import"./chunk-CYw1XsNK.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-Cw_2vanC.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";import"./chunk-J14gS6og.js";const V={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},j={class:"mb-6 flex flex-wrap gap-4 items-end"},D={key:0,class:"flex justify-center py-12"},L={key:1,class:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-4"},N={class:"flex items-center gap-3"},q={class:"text-sm text-red-800 dark:text-red-200"},F={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 mb-8"},T={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},U={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},E={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},H={class:"text-2xl font-bold text-green-600 dark:text-green-400"},J={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},S={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},A={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400"},Q={class:"text-sm text-gray-500 dark:text-gray-400"},X={class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},Y={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Z={class:"divide-y divide-gray-200 dark:divide-gray-700"},$={class:"px-6 py-4 whitespace-nowrap"},P={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},W={class:"text-xs text-gray-500 dark:text-gray-400"},tt={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-100"},et={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-green-600 dark:text-green-400 font-medium"},at={class:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900 dark:text-gray-100"},rt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-gray-100"},st={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-green-600 dark:text-green-400 font-medium"},ot={class:"px-6 py-4 whitespace-nowrap text-center"},dt={class:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium text-indigo-600 dark:text-indigo-400"},lt={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900 dark:text-gray-100"},it={class:"px-6 py-4 whitespace-nowrap text-center"},nt={class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xt=["d"],gt={key:0,class:"mt-6 bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4"},Lt={__name:"ChannelROI",props:{lazyLoad:Boolean},setup(mt){const p=n(!0),x=n(null),o=n(null),g=n(""),m=n(""),y=async()=>{p.value=!0,x.value=null;try{const s={};g.value&&(s.date_from=g.value),m.value&&(s.date_to=m.value);const e=await C.get(route("business.analytics.api.channel-roi"),{params:s});o.value=e.data}catch(s){console.error("Failed to fetch channel ROI:",s),x.value="Ma'lumotlarni yuklashda xatolik yuz berdi. Qayta urinib ko'ring."}finally{p.value=!1}};w(()=>{y()});const i=s=>s?new Intl.NumberFormat("uz-UZ").format(s):"0",_=s=>s>200?"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/50":s>100?"text-green-500 dark:text-green-400 bg-green-50 dark:bg-green-900/30":s>0?"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/30":"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/30",u=s=>{const e={scale_up:{text:"Byudjetni oshiring",color:"bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200",icon:"M5 10l7-7m0 0l7 7m-7-7v18"},maintain:{text:"Davom eting",color:"bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},optimize:{text:"Optimizatsiya qiling",color:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-800 dark:text-yellow-200",icon:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"},test_more:{text:"Ko'proq test qiling",color:"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},reduce:{text:"Kamaytiring",color:"bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200",icon:"M19 14l-7 7m0 0l-7-7m7 7V3"}};return e[s]||e.maintain};return(s,e)=>(d(),f(K,{title:"Marketing Kanallar ROI"},{default:M(()=>[z(I(B),{title:"Marketing Kanallar ROI"}),t("div",V,[e[13]||(e[13]=t("div",{class:"mb-8"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"Marketing Kanallar ROI"),t("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Har bir marketing kanalingizning qaytimi va samaradorligini kuzating")],-1)),t("div",j,[t("div",null,[e[2]||(e[2]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Boshlanish",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[0]||(e[0]=a=>g.value=a),class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[h,g.value]])]),t("div",null,[e[3]||(e[3]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Tugash",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=a=>m.value=a),class:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[h,m.value]])]),t("button",{onClick:y,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Yangilash ")]),p.value?(d(),l("div",D,[...e[4]||(e[4]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):x.value?(d(),l("div",L,[t("div",N,[e[5]||(e[5]=t("svg",{class:"h-5 w-5 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("p",q,r(x.value),1),t("button",{onClick:y,class:"ml-auto text-sm text-red-600 dark:text-red-400 hover:underline"},"Qayta urinish")])])):o.value?(d(),l(v,{key:2},[t("div",F,[t("div",T,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami xarajat",-1)),t("p",U,r(i(o.value.summary?.total_spend))+" so'm",1)]),t("div",E,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami daromad",-1)),t("p",H,r(i(o.value.summary?.total_revenue))+" so'm",1)]),t("div",J,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Umumiy ROI",-1)),t("p",{class:k(["text-2xl font-bold",o.value.summary?.overall_roi>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])},r(o.value.summary?.overall_roi)+"% ",3)]),o.value.summary?.best_channel?(d(),l("div",S,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Eng yaxshi kanal",-1)),t("p",A,r(o.value.summary?.best_channel?.channel_name),1),t("p",Q,"ROI: "+r(o.value.summary?.best_channel?.roi)+"%",1)])):c("",!0)]),t("div",X,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Kanallar bo'yicha tahlil")],-1)),t("div",Y,[t("table",G,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Kanal"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Lidlar"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Yutilgan"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Konversiya"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Xarajat"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Daromad"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"ROI"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"ROAS"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Lid narxi"),t("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Tavsiya")])],-1)),t("tbody",Z,[(d(!0),l(v,null,O(o.value.channels,a=>(d(),l("tr",{key:a.channel_id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",$,[t("div",null,[t("div",P,r(a.channel_name),1),t("div",W,r(a.channel_type),1)])]),t("td",tt,r(a.total_leads),1),t("td",et,r(a.won_leads),1),t("td",at,r(a.conversion_rate)+"%",1),t("td",rt,r(i(a.spend)),1),t("td",st,r(i(a.revenue)),1),t("td",ot,[t("span",{class:k(["px-2 py-1 text-sm font-bold rounded",_(a.roi)])},r(a.roi)+"% ",3)]),t("td",dt,r(a.roas)+"x",1),t("td",lt,r(i(a.cost_per_lead)),1),t("td",it,[t("span",{class:k(["inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full",u(a.recommendation).color])},[(d(),l("svg",nt,[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:u(a.recommendation).icon},null,8,xt)])),R(" "+r(u(a.recommendation).text),1)],2)])]))),128))])])])]),o.value.summary?.total_spend===0?(d(),l("div",gt,[...e[12]||(e[12]=[t("div",{class:"flex items-start gap-3"},[t("svg",{class:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),t("div",null,[t("h4",{class:"font-medium text-yellow-800 dark:text-yellow-200"},"Xarajat ma'lumotlari yo'q"),t("p",{class:"text-sm text-yellow-700 dark:text-yellow-300 mt-1"}," ROI ni to'g'ri hisoblash uchun Marketing Kanallar sozlamalarida oylik byudjetni kiriting. Sozlamalar > Marketing Kanallar bo'limiga o'ting. ")])],-1)])])):c("",!0)],64)):c("",!0)])]),_:1}))}};export{Lt as default};
