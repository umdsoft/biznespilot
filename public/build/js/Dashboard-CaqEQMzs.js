import{_ as F}from"./chunk-CvbzrQjU.js";import{l as P,b as K,a as S,h as V}from"./chunk-BYRtWSr0.js";import{u as L}from"./app-CPufef6f.js";import{_ as E}from"./chunk-BngMnNMW.js";import{r as J}from"./chunk-aL39oRCf.js";import{r as Q}from"./chunk-DnfwDglZ.js";import{r as W}from"./chunk-WIXLsbTK.js";import{r as U}from"./chunk-BaCQBAcd.js";import{b as $,D as i,E as o,z as t,y as u,A as a,H as e,B as k,v as q,M as H,S as O,x as R,C as N,F as j,G as A,L as v,r as C,o as G}from"./chunk-BcTZxe-J.js";import{r as Z}from"./chunk-CJsSO8V8.js";import{r as X}from"./chunk-D0j8iZkh.js";import{r as tt}from"./chunk-BFec1c2B.js";import{r as et}from"./chunk-Rs1WNzbn.js";import{r as st}from"./chunk-Ba8J67bG.js";import{r as rt}from"./chunk-Bv_bj7dx.js";import{n as D,m as at,g as ot}from"./chunk-D6nU8-nU.js";import{r as nt}from"./chunk-TdbA8O2H.js";import{r as it}from"./chunk-BqueMrU7.js";import{r as dt}from"./chunk-DNp5bQOL.js";import{r as lt}from"./chunk-CKHdppiT.js";import{r as ct}from"./chunk-CQoMtUf7.js";import{a as ut,r as gt}from"./chunk-D58UsNjm.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-_yYzsx_i.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-BHX0ueEB.js";const ht={class:"flex items-center justify-between mb-6"},xt={class:"flex items-center gap-3"},bt={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},mt={class:"text-xl font-bold"},yt={class:"text-right"},pt={class:"text-4xl font-bold"},vt={class:"space-y-3"},ft={class:"flex items-center gap-3"},_t={class:"flex-1 bg-white/20 rounded-full h-2"},kt={class:"text-xs w-8 text-right"},wt={class:"flex items-center gap-3"},$t={class:"flex-1 bg-white/20 rounded-full h-2"},jt={class:"text-xs w-8 text-right"},At={class:"flex items-center gap-3"},Bt={class:"flex-1 bg-white/20 rounded-full h-2"},Ct={class:"text-xs w-8 text-right"},St={class:"flex items-center gap-3"},Rt={class:"flex-1 bg-white/20 rounded-full h-2"},Ot={class:"text-xs w-8 text-right"},qt={class:"mt-4 pt-4 border-t border-white/20 text-center"},Nt={__name:"EngagementWidget",props:{avgScore:{type:Number,default:0},engagementStatus:{type:String,default:"unknown"},trend:{type:Object,default:()=>({direction:"stable",change:0})},distribution:{type:Object,default:()=>({highly_engaged:{count:0},engaged:{count:0},neutral:{count:0},disengaged:{count:0}})},businessId:{type:String,default:""}},setup(s){const r=s,_=$(()=>{const g={excellent:"from-emerald-500 to-green-600",good:"from-blue-500 to-cyan-600",average:"from-yellow-500 to-orange-600",needs_attention:"from-red-500 to-pink-600",unknown:"from-gray-500 to-gray-600"};return g[r.engagementStatus]||g.unknown}),b=$(()=>{const g={excellent:"A'lo darajada",good:"Yaxshi",average:"O'rtacha",needs_attention:"E'tibor kerak",unknown:"Ma'lumot yo'q"};return g[r.engagementStatus]||g.unknown}),n=$(()=>r.trend.direction==="up"?J:r.trend.direction==="down"?Q:W),c=$(()=>r.trend.direction==="up"?"text-green-500":r.trend.direction==="down"?"text-red-500":"text-gray-500"),h=$(()=>(r.distribution.highly_engaged?.count||0)+(r.distribution.engaged?.count||0)+(r.distribution.neutral?.count||0)+(r.distribution.disengaged?.count||0));return(g,d)=>(o(),i("div",{class:k(["rounded-2xl p-6 text-white shadow-xl bg-gradient-to-br",_.value])},[t("div",ht,[t("div",xt,[t("div",bt,[u(a(U),{class:"w-6 h-6"})]),t("div",null,[d[0]||(d[0]=t("p",{class:"text-sm opacity-90"},"Hodimlar Ishga Qiziqishi",-1)),t("p",mt,e(b.value),1)])]),t("div",yt,[t("div",pt,e(s.avgScore.toFixed(1)),1),t("div",{class:k(["text-sm flex items-center justify-end gap-1",c.value])},[(o(),q(H(n.value),{class:"w-4 h-4"})),t("span",null,e(s.trend.change>0?"+":"")+e(s.trend.change.toFixed(1))+"%",1)],2)])]),t("div",vt,[t("div",ft,[d[1]||(d[1]=t("span",{class:"text-xs w-24 opacity-90"},"Juda qiziqgan",-1)),t("div",_t,[t("div",{class:"bg-white rounded-full h-2 transition-all duration-500",style:O({width:h.value>0?`${(s.distribution.highly_engaged?.count||0)/h.value*100}%`:"0%"})},null,4)]),t("span",kt,e(s.distribution.highly_engaged?.count||0),1)]),t("div",wt,[d[2]||(d[2]=t("span",{class:"text-xs w-24 opacity-90"},"Qiziqgan",-1)),t("div",$t,[t("div",{class:"bg-white rounded-full h-2 transition-all duration-500",style:O({width:h.value>0?`${(s.distribution.engaged?.count||0)/h.value*100}%`:"0%"})},null,4)]),t("span",jt,e(s.distribution.engaged?.count||0),1)]),t("div",At,[d[3]||(d[3]=t("span",{class:"text-xs w-24 opacity-90"},"Neytral",-1)),t("div",Bt,[t("div",{class:"bg-white rounded-full h-2 transition-all duration-500",style:O({width:h.value>0?`${(s.distribution.neutral?.count||0)/h.value*100}%`:"0%"})},null,4)]),t("span",Ct,e(s.distribution.neutral?.count||0),1)]),t("div",St,[d[4]||(d[4]=t("span",{class:"text-xs w-24 opacity-90"},"Qiziqmagan",-1)),t("div",Rt,[t("div",{class:"bg-white rounded-full h-2 transition-all duration-500",style:O({width:h.value>0?`${(s.distribution.disengaged?.count||0)/h.value*100}%`:"0%"})},null,4)]),t("span",Ot,e(s.distribution.disengaged?.count||0),1)])]),t("div",qt,[u(a(P),{href:"/hr/engagement",class:"text-sm opacity-90 hover:opacity-100 transition-opacity underline"},{default:R(()=>[...d[5]||(d[5]=[N(" Batafsil ko'rish ",-1)])]),_:1})])],2))}},Dt={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden"},Pt={class:"flex items-center justify-between"},zt={class:"flex items-center gap-3"},Et={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},Lt={class:"text-xl font-bold"},Ht={class:"text-right"},Tt={class:"text-4xl font-bold"},Yt={class:"p-6"},It={class:"grid grid-cols-4 gap-2 mb-6"},Mt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ft={class:"text-xs text-gray-500 dark:text-gray-400"},Kt={key:0,class:"space-y-3"},Vt={class:"text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2"},Jt={class:"space-y-2"},Qt={class:"flex items-center gap-3"},Wt={class:"w-8 h-8 bg-gray-200 dark:bg-gray-600 rounded-full flex items-center justify-center"},Ut={class:"text-xs font-medium text-gray-600 dark:text-gray-300"},Gt={class:"text-sm font-medium text-gray-900 dark:text-white"},Zt={class:"text-xs text-gray-500 dark:text-gray-400"},Xt={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400"},te={class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-center"},ee={__name:"FlightRiskWidget",props:{distribution:{type:Object,default:()=>({critical:{count:0,label:"Juda yuqori xavf",color:"red"},high:{count:0,label:"Yuqori xavf",color:"orange"},medium:{count:0,label:"O'rtacha xavf",color:"yellow"},low:{count:0,label:"Past xavf",color:"green"}})},topRisks:{type:Array,default:()=>[]},avgRiskScore:{type:Number,default:0},businessId:{type:String,default:""}},setup(s){const r=s,_=$(()=>(r.distribution.critical?.count||0)+(r.distribution.high?.count||0)+(r.distribution.medium?.count||0)+(r.distribution.low?.count||0)),b=$(()=>(r.distribution.critical?.count||0)+(r.distribution.high?.count||0)),n=$(()=>{const g=_.value>0?b.value/_.value*100:0;return g>=15?{label:"Kritik holat",color:"from-red-500 to-pink-600"}:g>=10?{label:"Ogohlantirish",color:"from-orange-500 to-red-600"}:g>=5?{label:"Kuzatuvda",color:"from-yellow-500 to-orange-600"}:{label:"Normal",color:"from-emerald-500 to-green-600"}}),c=g=>({critical:"bg-red-500",high:"bg-orange-500",medium:"bg-yellow-500",low:"bg-green-500"})[g]||"bg-gray-500",h=g=>({critical:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"})[g]||"bg-gray-100 text-gray-800";return(g,d)=>(o(),i("div",Dt,[t("div",{class:k(["p-6 text-white bg-gradient-to-br",n.value.color])},[t("div",Pt,[t("div",zt,[t("div",Et,[u(a(Z),{class:"w-6 h-6"})]),t("div",null,[d[0]||(d[0]=t("p",{class:"text-sm opacity-90"},"Ketish xavfi",-1)),t("p",Lt,e(n.value.label),1)])]),t("div",Ht,[t("div",Tt,e(b.value),1),d[1]||(d[1]=t("div",{class:"text-sm opacity-90"},"yuqori xavfli",-1))])])],2),t("div",Yt,[t("div",It,[(o(!0),i(j,null,A(s.distribution,(f,B)=>(o(),i("div",{key:B,class:"text-center"},[t("div",{class:k(["w-full h-2 rounded-full mb-2",c(B)])},null,2),t("div",Mt,e(f.count),1),t("div",Ft,e(f.label),1)]))),128))]),s.topRisks.length>0?(o(),i("div",Kt,[t("h4",Vt,[u(a(X),{class:"w-4 h-4"}),d[2]||(d[2]=N(" Eng yuqori xavfli hodimlar ",-1))]),t("div",Jt,[(o(!0),i(j,null,A(s.topRisks.slice(0,3),f=>(o(),i("div",{key:f.user?.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[t("div",Qt,[t("div",Wt,[t("span",Ut,e(f.user?.name?.charAt(0)||"?"),1)]),t("div",null,[t("p",Gt,e(f.user?.name||"Noma'lum"),1),t("p",Zt,e(f.top_factors?.[0]||"Ma'lumot yo'q"),1)])]),t("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",h(f.risk_level)])},e(f.risk_score)+"% ",3)]))),128))])])):(o(),i("div",Xt,[...d[3]||(d[3]=[t("p",{class:"text-sm"},"Yuqori xavfli hodimlar yo'q",-1)])])),t("div",te,[u(a(P),{href:"/hr/flight-risk",class:"text-sm text-purple-600 dark:text-purple-400 hover:underline"},{default:R(()=>[...d[4]||(d[4]=[N(" Batafsil ko'rish ",-1)])]),_:1})])])]))}},se={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden"},re={class:"p-6 bg-gradient-to-br from-blue-500 to-cyan-600 text-white"},ae={class:"flex items-center justify-between"},oe={class:"flex items-center gap-3"},ne={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},ie={class:"text-right"},de={class:"text-4xl font-bold"},le={class:"p-6"},ce={class:"grid grid-cols-3 gap-4 mb-6"},ue={class:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-xl"},ge={class:"text-xl font-bold text-green-600 dark:text-green-400"},he={class:"text-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl"},xe={class:"text-xl font-bold text-blue-600 dark:text-blue-400"},be={class:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-xl"},me={class:"text-xl font-bold text-red-600 dark:text-red-400"},ye={class:"mb-6"},pe={class:"space-y-2"},ve={class:"text-xs w-16 text-gray-600 dark:text-gray-400"},fe={class:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full h-2"},_e={class:"text-xs w-10 text-right font-medium text-gray-700 dark:text-gray-300"},ke={key:0,class:"space-y-3"},we={class:"space-y-2"},$e={class:"flex items-center gap-3"},je={class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center"},Ae={class:"text-xs font-medium text-blue-600 dark:text-blue-400"},Be={class:"text-sm font-medium text-gray-900 dark:text-white"},Ce={class:"text-xs text-gray-500 dark:text-gray-400"},Se={class:"w-16"},Re={class:"bg-gray-200 dark:bg-gray-600 rounded-full h-2"},Oe={class:"text-xs text-center mt-1 text-gray-500 dark:text-gray-400"},qe={class:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 text-center"},Ne={__name:"OnboardingWidget",props:{activePlans:{type:Number,default:0},completedPlans:{type:Number,default:0},overdueTasksCount:{type:Number,default:0},recentOnboardings:{type:Array,default:()=>[]},milestoneScores:{type:Object,default:()=>({day_30:0,day_60:0,day_90:0})},businessId:{type:String,default:""}},setup(s){const r=b=>b>=80?"bg-green-500":b>=50?"bg-yellow-500":"bg-red-500",_=b=>({day_30:"30 kun",day_60:"60 kun",day_90:"90 kun"})[b]||b;return(b,n)=>(o(),i("div",se,[t("div",re,[t("div",ae,[t("div",oe,[t("div",ne,[u(a(tt),{class:"w-6 h-6"})]),n[0]||(n[0]=t("div",null,[t("p",{class:"text-sm opacity-90"},"Onboarding"),t("p",{class:"text-xl font-bold"},"Yangi hodimlar")],-1))]),t("div",ie,[t("div",de,e(s.activePlans),1),n[1]||(n[1]=t("div",{class:"text-sm opacity-90"},"faol reja",-1))])])]),t("div",le,[t("div",ce,[t("div",ue,[u(a(et),{class:"w-6 h-6 mx-auto text-green-600 dark:text-green-400 mb-1"}),t("div",ge,e(s.completedPlans),1),n[2]||(n[2]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Yakunlangan",-1))]),t("div",he,[u(a(st),{class:"w-6 h-6 mx-auto text-blue-600 dark:text-blue-400 mb-1"}),t("div",xe,e(s.activePlans),1),n[3]||(n[3]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jarayonda",-1))]),t("div",be,[u(a(rt),{class:"w-6 h-6 mx-auto text-red-600 dark:text-red-400 mb-1"}),t("div",me,e(s.overdueTasksCount),1),n[4]||(n[4]=t("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Kechikkan",-1))])]),t("div",ye,[n[5]||(n[5]=t("h4",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3"}," O'rtacha milestone ballari ",-1)),t("div",pe,[(o(!0),i(j,null,A(s.milestoneScores,(c,h)=>(o(),i("div",{key:h,class:"flex items-center gap-3"},[t("span",ve,e(_(h)),1),t("div",fe,[t("div",{class:k(["h-2 rounded-full transition-all duration-500",r(c)]),style:O({width:`${c}%`})},null,6)]),t("span",_e,e(c)+"% ",1)]))),128))])]),s.recentOnboardings.length>0?(o(),i("div",ke,[n[6]||(n[6]=t("h4",{class:"text-sm font-semibold text-gray-700 dark:text-gray-300"}," So'nggi onboardinglar ",-1)),t("div",we,[(o(!0),i(j,null,A(s.recentOnboardings.slice(0,3),c=>(o(),i("div",{key:c.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},[t("div",$e,[t("div",je,[t("span",Ae,e(c.user?.name?.charAt(0)||"?"),1)]),t("div",null,[t("p",Be,e(c.user?.name||"Noma'lum"),1),t("p",Ce,e(c.current_phase)+" • "+e(c.days_elapsed)+" kun ",1)])]),t("div",Se,[t("div",Re,[t("div",{class:k(["h-2 rounded-full",r(c.progress)]),style:O({width:`${c.progress}%`})},null,6)]),t("p",Oe,e(c.progress)+"% ",1)])]))),128))])])):v("",!0),t("div",qe,[u(a(P),{href:"/hr/onboarding",class:"text-sm text-blue-600 dark:text-blue-400 hover:underline"},{default:R(()=>[...n[7]||(n[7]=[N(" Batafsil ko'rish ",-1)])]),_:1})])])]))}},De={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden"},Pe={class:"p-6 border-b border-gray-200 dark:border-gray-700"},ze={class:"flex items-center justify-between"},Ee={class:"flex items-center gap-3"},Le={class:"relative"},He={key:0,class:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center"},Te={class:"text-sm text-gray-500 dark:text-gray-400"},Ye={class:"divide-y divide-gray-200 dark:divide-gray-700 max-h-96 overflow-y-auto"},Ie={class:"flex items-start gap-3"},Me={class:"flex-1 min-w-0"},Fe={class:"flex items-start justify-between gap-2"},Ke={class:"text-sm font-medium text-gray-900 dark:text-white"},Ve={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Je={class:"flex items-center gap-2 mt-2"},Qe={class:"text-xs text-gray-400 dark:text-gray-500"},We={class:"flex items-center gap-1"},Ue=["onClick","disabled"],Ge=["onClick","disabled"],Ze={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},Xe={__name:"HRAlertsList",props:{alerts:{type:Array,default:()=>[]},unreadCount:{type:Number,default:0},businessId:{type:String,default:""}},emits:["acknowledge","resolve","markAllSeen"],setup(s,{emit:r}){const _=r,b=C(null),n=C(null),c=m=>({critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 border-red-200 dark:border-red-800",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 border-orange-200 dark:border-orange-800",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400 border-yellow-200 dark:border-yellow-800",low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 border-green-200 dark:border-green-800"})[m]||"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",h=(m,w)=>w?dt:m.includes("critical")||m.includes("high")?lt:D,g=(m,w)=>w?"text-yellow-500":{critical:"text-red-500",high:"text-orange-500",medium:"text-yellow-500",low:"text-green-500"}[m]||"text-gray-500",d=async m=>{b.value=m,_("acknowledge",m),b.value=null},f=async m=>{n.value=m,_("resolve",m),n.value=null},B=()=>{_("markAllSeen")};return(m,w)=>(o(),i("div",De,[t("div",Pe,[t("div",ze,[t("div",Ee,[t("div",Le,[u(a(D),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"}),s.unreadCount>0?(o(),i("span",He,e(s.unreadCount>9?"9+":s.unreadCount),1)):v("",!0)]),t("div",null,[w[0]||(w[0]=t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"HR Ogohlantirishlar",-1)),t("p",Te,e(s.unreadCount)+" ta yangi bildirishnoma ",1)])]),s.unreadCount>0?(o(),i("button",{key:0,onClick:B,class:"text-sm text-purple-600 dark:text-purple-400 hover:underline"}," Barchasini ko'rilgan deb belgilash ")):v("",!0)])]),t("div",Ye,[(o(!0),i(j,null,A(s.alerts,x=>(o(),i("div",{key:x.id,class:k(["p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",x.status==="new"?"bg-purple-50/50 dark:bg-purple-900/10":""])},[t("div",Ie,[t("div",{class:k(["w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0",c(x.priority)])},[(o(),q(H(h(x.alert_type,x.is_celebration)),{class:k(["w-5 h-5",g(x.priority,x.is_celebration)])},null,8,["class"]))],2),t("div",Me,[t("div",Fe,[t("div",null,[t("p",Ke,e(x.title),1),t("p",Ve,e(x.message),1),t("div",Je,[t("span",{class:k(["px-2 py-0.5 text-xs font-medium rounded-full border",c(x.priority)])},e(x.priority_label),3),t("span",Qe,e(x.created_ago),1)])]),t("div",We,[x.status!=="acknowledged"&&x.status!=="resolved"?(o(),i("button",{key:0,onClick:z=>d(x.id),disabled:b.value===x.id,class:"p-1.5 text-gray-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Tasdiqlash"},[u(a(nt),{class:"w-4 h-4"})],8,Ue)):v("",!0),x.status!=="resolved"?(o(),i("button",{key:1,onClick:z=>f(x.id),disabled:n.value===x.id,class:"p-1.5 text-gray-400 hover:text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",title:"Yechildi"},[u(a(it),{class:"w-4 h-4"})],8,Ge)):v("",!0)])])])])],2))),128)),s.alerts.length===0?(o(),i("div",Ze,[u(a(D),{class:"w-12 h-12 mx-auto opacity-50 mb-3"}),w[1]||(w[1]=t("p",null,"Hozircha ogohlantirishlar yo'q",-1))])):v("",!0)])]))}},ts={class:"space-y-8"},es={class:"relative overflow-hidden bg-gradient-to-r from-purple-600 via-pink-600 to-purple-700 rounded-3xl p-8 shadow-2xl"},ss={class:"relative"},rs={class:"text-3xl md:text-4xl font-bold text-white mb-2"},as={class:"text-purple-100 text-lg"},os={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},ns={class:"group relative bg-gradient-to-br from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-2xl p-6 border border-purple-100 dark:border-purple-800/30 hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer"},is={class:"flex items-start justify-between mb-4"},ds={class:"w-14 h-14 bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg shadow-purple-500/50 group-hover:scale-110 transition-transform duration-300"},ls={class:"flex flex-col items-end"},cs={class:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent"},us={class:"text-xs font-medium px-3 py-1 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full mt-2"},gs={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},hs={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},xs={class:"group relative bg-gradient-to-br from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-2xl p-6 border border-blue-100 dark:border-blue-800/30 hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer"},bs={class:"flex items-start justify-between mb-4"},ms={class:"w-14 h-14 bg-gradient-to-br from-blue-600 to-cyan-600 rounded-2xl flex items-center justify-center shadow-lg shadow-blue-500/50 group-hover:scale-110 transition-transform duration-300"},ys={class:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-cyan-600 bg-clip-text text-transparent"},ps={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},vs={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},fs={class:"group relative bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 rounded-2xl p-6 border border-emerald-100 dark:border-emerald-800/30 hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer"},_s={class:"flex items-start justify-between mb-4"},ks={class:"w-14 h-14 bg-gradient-to-br from-emerald-600 to-green-600 rounded-2xl flex items-center justify-center shadow-lg shadow-emerald-500/50 group-hover:scale-110 transition-transform duration-300"},ws={class:"flex flex-col items-end"},$s={class:"text-4xl font-bold bg-gradient-to-r from-emerald-600 to-green-600 bg-clip-text text-transparent"},js={class:"text-xs font-medium px-3 py-1 bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400 rounded-full mt-2"},As={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},Bs={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Cs={class:"group relative bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 rounded-2xl p-6 border border-orange-100 dark:border-orange-800/30 hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer"},Ss={class:"flex items-start justify-between mb-4"},Rs={class:"w-14 h-14 bg-gradient-to-br from-orange-600 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg shadow-orange-500/50 group-hover:scale-110 transition-transform duration-300"},Os={class:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-amber-600 bg-clip-text text-transparent"},qs={class:"text-sm font-semibold text-gray-700 dark:text-gray-300"},Ns={class:"flex gap-2 mt-2 flex-wrap"},Ds={class:"text-xs px-2 py-1 bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400 rounded-lg"},Ps={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400 rounded-lg"},zs={class:"text-xs px-2 py-1 bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-400 rounded-lg"},Es={key:0,class:"bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl p-6 text-white shadow-xl"},Ls={class:"flex items-center gap-3 mb-6"},Hs={class:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center"},Ts={class:"text-sm opacity-90"},Ys={class:"text-xl font-bold"},Is={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ms={class:"flex items-start justify-between mb-2"},Fs={class:"text-2xl font-bold"},Ks={class:"text-sm opacity-90"},Vs={class:"text-xs opacity-70 mt-1"},Js={key:0,class:"mt-6 pt-6 border-t border-white/20"},Qs={class:"text-sm font-semibold mb-3 opacity-90"},Ws={class:"space-y-2"},Us={class:"text-sm font-medium"},Gs={class:"text-xs opacity-75"},Zs={class:"text-lg font-bold"},Xs={class:"mt-4 text-center"},tr={class:"space-y-6"},er={class:"flex items-center justify-between"},sr={key:0,class:"text-sm text-gray-500"},rr={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-6"},ar={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},or={class:"divide-y divide-gray-200 dark:divide-gray-700"},nr={class:"flex items-start justify-between"},ir={class:"flex-1 min-w-0"},dr={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},lr={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},cr={key:0,class:"text-xs"},ur={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},gr={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},hr={class:"divide-y divide-gray-200 dark:divide-gray-700"},xr={class:"flex items-start justify-between"},br={class:"flex-1 min-w-0"},mr={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},yr={class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},pr={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},vr={__name:"HRDashboard",props:{stats:{type:Object,default:()=>({})},recentActivities:{type:Array,default:()=>[]},pendingTasks:{type:Array,default:()=>[]},leaveBalances:{type:Array,default:()=>[]},upcomingLeaves:{type:Array,default:()=>[]},currentBusiness:{type:Object,default:null}},setup(s){const{t:r}=L(),_=K(),b=$(()=>_.props.auth?.user?.name||r("dashboard.hr.hr_panel")),n=s,c=C(null),h=C(null),g=C(null),d=C([]),f=C(0),B=C(!1),m=async()=>{if(n.currentBusiness?.id){B.value=!0;try{const[p,y,l,I]=await Promise.all([S.get(`/api/v1/businesses/${n.currentBusiness.id}/hr/engagement/statistics`).catch(()=>({data:{data:null}})),S.get(`/api/v1/businesses/${n.currentBusiness.id}/hr/flight-risk/statistics`).catch(()=>({data:{data:null}})),S.get(`/api/v1/businesses/${n.currentBusiness.id}/hr/onboarding/statistics`).catch(()=>({data:{data:null}})),S.get(`/api/v1/businesses/${n.currentBusiness.id}/hr/alerts?limit=5`).catch(()=>({data:{data:{data:[]}}}))]);c.value=p.data.data,h.value=y.data.data,g.value=l.data.data,d.value=I.data.data?.data||[],f.value=d.value.filter(M=>M.status==="new").length}catch(p){console.error("Error fetching HR analytics:",p)}finally{B.value=!1}}},w=async p=>{if(n.currentBusiness?.id)try{await S.post(`/api/v1/businesses/${n.currentBusiness.id}/hr/alerts/${p}/acknowledge`),m()}catch(y){console.error("Error acknowledging alert:",y)}},x=async p=>{if(n.currentBusiness?.id)try{await S.post(`/api/v1/businesses/${n.currentBusiness.id}/hr/alerts/${p}/resolve`),m()}catch(y){console.error("Error resolving alert:",y)}},z=async()=>{if(n.currentBusiness?.id)try{await S.post(`/api/v1/businesses/${n.currentBusiness.id}/hr/alerts/mark-all-seen`),m()}catch(p){console.error("Error marking all as seen:",p)}};G(()=>{m()});const T=p=>({new_member:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",accepted:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-400",department_change:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",invitation_sent:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400"})[p]||"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",Y=p=>({high:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",low:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"})[p]||"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400";return(p,y)=>(o(),i("div",ts,[t("div",es,[y[0]||(y[0]=t("div",{class:"absolute inset-0 bg-grid-white/[0.05] bg-[size:20px_20px]"},null,-1)),y[1]||(y[1]=t("div",{class:"absolute -right-10 -top-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"},null,-1)),y[2]||(y[2]=t("div",{class:"absolute -left-10 -bottom-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"},null,-1)),t("div",ss,[t("h1",rs,e(a(r)("dashboard.hr.welcome",{name:b.value})),1),t("p",as,e(a(r)("dashboard.hr.today"))+" "+e(new Date().toLocaleDateString("uz-UZ",{weekday:"long",day:"numeric",month:"long",year:"numeric"})),1)])]),t("div",os,[t("div",ns,[t("div",is,[t("div",ds,[u(a(at),{class:"w-7 h-7 text-white"})]),t("div",ls,[t("span",cs,e(s.stats?.total_employees||0),1),t("span",us,e(s.stats?.active_employees||0)+" "+e(a(r)("dashboard.hr.active")),1)])]),t("h3",gs,e(a(r)("dashboard.hr.total_employees")),1),t("p",hs,e(a(r)("dashboard.hr.all_company_employees")),1)]),t("div",xs,[t("div",bs,[t("div",ms,[u(a(D),{class:"w-7 h-7 text-white"})]),t("span",ys,e(s.stats?.pending_invitations||0),1)]),t("h3",ps,e(a(r)("dashboard.hr.pending_invitations")),1),t("p",vs,e(a(r)("dashboard.hr.unconfirmed_invitations")),1)]),t("div",fs,[t("div",_s,[t("div",ks,[u(a(ct),{class:"w-7 h-7 text-white"})]),t("div",ws,[t("span",$s,e(s.stats?.departments?.sales||0),1),t("span",js,e(a(r)("dashboard.hr.employee")),1)])]),t("h3",As,e(a(r)("dashboard.hr.sales_department")),1),t("p",Bs,e(a(r)("dashboard.hr.sales_team_members")),1)]),t("div",Cs,[t("div",Ss,[t("div",Rs,[u(a(ot),{class:"w-7 h-7 text-white"})]),t("span",Os,e((s.stats?.departments?.marketing||0)+(s.stats?.departments?.finance||0)+(s.stats?.departments?.hr||0)),1)]),t("h3",qs,e(a(r)("dashboard.hr.other_departments")),1),t("div",Ns,[t("span",Ds,e(a(r)("dashboard.hr.marketing"))+": "+e(s.stats?.departments?.marketing||0),1),t("span",Ps,e(a(r)("dashboard.hr.finance"))+": "+e(s.stats?.departments?.finance||0),1),t("span",zs,e(a(r)("dashboard.hr.hr"))+": "+e(s.stats?.departments?.hr||0),1)])])]),s.leaveBalances.length>0?(o(),i("div",Es,[t("div",Ls,[t("div",Hs,[u(a(ut),{class:"w-6 h-6"})]),t("div",null,[t("p",Ts,e(a(r)("dashboard.hr.my_leave")),1),t("p",Ys,e(new Date().getFullYear())+"-"+e(a(r)("dashboard.hr.year_balance")),1)])]),t("div",Is,[(o(!0),i(j,null,A(s.leaveBalances,l=>(o(),i("div",{key:l.id,class:"bg-white/10 backdrop-blur-sm rounded-xl p-4"},[t("div",Ms,[u(a(gt),{class:"w-5 h-5 opacity-80"}),t("span",Fs,e(l.available_days),1)]),t("p",Ks,e(l.leave_type.name),1),t("p",Vs,e(l.used_days)+"/"+e(l.total_days)+" "+e(a(r)("dashboard.hr.used")),1)]))),128))]),s.upcomingLeaves.length>0?(o(),i("div",Js,[t("p",Qs,e(a(r)("dashboard.hr.upcoming_leaves"))+":",1),t("div",Ws,[(o(!0),i(j,null,A(s.upcomingLeaves,l=>(o(),i("div",{key:l.id,class:"bg-white/10 backdrop-blur-sm rounded-lg p-3 flex items-center justify-between"},[t("div",null,[t("p",Us,e(l.leave_type),1),t("p",Gs,e(l.start_date)+" - "+e(l.end_date),1)]),t("span",Zs,e(l.total_days)+" "+e(a(r)("dashboard.hr.days")),1)]))),128))])])):v("",!0),t("div",Xs,[u(a(P),{href:p.route("hr.leave.index"),class:"text-sm opacity-90 hover:opacity-100 transition-opacity underline"},{default:R(()=>[N(e(a(r)("dashboard.view_details")),1)]),_:1},8,["href"])])])):v("",!0),t("div",tr,[t("div",er,[y[3]||(y[3]=t("h2",{class:"text-xl font-bold text-gray-900 dark:text-white"}," HR Analytics ",-1)),B.value?(o(),i("span",sr,"Yuklanmoqda...")):v("",!0)]),t("div",rr,[c.value?(o(),q(Nt,{key:0,"avg-score":c.value.overview?.avg_score||0,"highly-engaged":c.value.distribution?.highly_engaged?.count||0,engaged:c.value.distribution?.engaged?.count||0,neutral:c.value.distribution?.neutral?.count||0,disengaged:c.value.distribution?.disengaged?.count||0,"business-id":s.currentBusiness?.id},null,8,["avg-score","highly-engaged","engaged","neutral","disengaged","business-id"])):v("",!0),h.value?(o(),q(ee,{key:1,"total-at-risk":(h.value.distribution?.critical?.count||0)+(h.value.distribution?.high?.count||0),"critical-count":h.value.distribution?.critical?.count||0,"high-count":h.value.distribution?.high?.count||0,"medium-count":h.value.distribution?.medium?.count||0,"top-risk-employees":h.value.top_risk_employees||[],"business-id":s.currentBusiness?.id},null,8,["total-at-risk","critical-count","high-count","medium-count","top-risk-employees","business-id"])):v("",!0),g.value?(o(),q(Ne,{key:2,"active-plans":g.value.active_plans||0,"completed-plans":g.value.completed_plans||0,"overdue-tasks-count":g.value.overdue_tasks_count||0,"recent-onboardings":g.value.recent_onboardings||[],"milestone-scores":g.value.milestone_completion_rates||{day_30:0,day_60:0,day_90:0},"business-id":s.currentBusiness?.id},null,8,["active-plans","completed-plans","overdue-tasks-count","recent-onboardings","milestone-scores","business-id"])):v("",!0),u(Xe,{alerts:d.value,"unread-count":f.value,"business-id":s.currentBusiness?.id,onAcknowledge:w,onResolve:x,onMarkAllSeen:z},null,8,["alerts","unread-count","business-id"])])]),t("div",ar,[u(E,{title:a(r)("dashboard.hr.recent_activities"),"link-href":"/hr/team",divided:"","no-padding":""},{default:R(()=>[t("div",or,[(o(!0),i(j,null,A(s.recentActivities,l=>(o(),i("div",{key:l.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[t("div",nr,[t("div",ir,[t("p",dr,e(l.user),1),t("p",lr,[N(e(l.description)+" ",1),l.department?(o(),i("span",cr," • "+e(l.department),1)):v("",!0)]),t("p",ur,e(l.date),1)]),t("span",{class:k(["ml-3 px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap",T(l.type)])},e(l.type==="new_member"?a(r)("dashboard.hr.activity_new"):l.type==="accepted"?a(r)("dashboard.hr.activity_accepted"):l.type==="department_change"?a(r)("dashboard.hr.activity_changed"):a(r)("dashboard.hr.activity_sent")),3)])]))),128)),s.recentActivities?.length?v("",!0):(o(),i("div",gr,e(a(r)("dashboard.hr.no_activities")),1))])]),_:1},8,["title"]),u(E,{title:a(r)("dashboard.hr.pending_tasks"),"link-href":"/hr/tasks",divided:"","no-padding":""},{default:R(()=>[t("div",hr,[(o(!0),i(j,null,A(s.pendingTasks,l=>(o(),i("div",{key:l.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors"},[t("div",xr,[t("div",br,[t("p",mr,e(l.title),1),t("p",yr,e(a(r)("dashboard.hr.deadline"))+": "+e(l.due_date),1)]),t("span",{class:k(["ml-3 px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap",Y(l.priority)])},e(l.priority==="high"?a(r)("priority.high"):l.priority==="medium"?a(r)("priority.medium"):a(r)("priority.low")),3)])]))),128)),s.pendingTasks?.length?v("",!0):(o(),i("div",pr,e(a(r)("dashboard.hr.no_tasks")),1))])]),_:1},8,["title"])])]))}},Zr={__name:"Dashboard",props:{stats:Object,recentActivities:Array,pendingTasks:Array,todayAttendance:Object,currentBusiness:Object},setup(s){const{t:r}=L();return(_,b)=>(o(),q(F,{title:a(r)("hr.dashboard")},{default:R(()=>[u(a(V),{title:a(r)("hr.dashboard")},null,8,["title"]),u(vr,{stats:s.stats,"recent-activities":s.recentActivities,"pending-tasks":s.pendingTasks,"today-attendance":s.todayAttendance,"current-business":s.currentBusiness},null,8,["stats","recent-activities","pending-tasks","today-attendance","current-business"])]),_:1},8,["title"]))}};export{Zr as default};
