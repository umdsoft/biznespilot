import{r as p,b as S,v as B,x as V,y as l,z as t,A as o,C as A,H as a,I as u,J as K,D as n,E as d,F as m,G as y,K as L,L as q,B as z}from"./chunk-BcTZxe-J.js";import{h as N,r as h}from"./chunk-BYRtWSr0.js";import{_ as U}from"./chunk-CvbzrQjU.js";import{r as D}from"./chunk-gCWBLgcy.js";import{a as v}from"./chunk-D58UsNjm.js";import{r as M}from"./chunk-Ba8J67bG.js";import{r as b}from"./chunk-TdbA8O2H.js";import{r as _}from"./chunk-BqueMrU7.js";import{f as O}from"./chunk-D6nU8-nU.js";import{r as X}from"./chunk-B4yz7jSC.js";import"./app-CPufef6f.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-BHX0ueEB.js";const E={class:"space-y-6"},F={class:"flex items-center justify-between"},H={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},I={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},J={class:"flex items-center gap-3"},G={class:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-xl flex items-center justify-center"},Q={class:"text-2xl font-bold text-gray-900 dark:text-white"},P={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},W={class:"flex items-center gap-3"},Y={class:"w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-xl flex items-center justify-center"},Z={class:"text-2xl font-bold text-yellow-600"},tt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},et={class:"flex items-center gap-3"},st={class:"w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-xl flex items-center justify-center"},at={class:"text-2xl font-bold text-green-600"},rt={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},lt={class:"flex items-center gap-3"},ot={class:"w-12 h-12 bg-red-100 dark:bg-red-900/30 rounded-xl flex items-center justify-center"},dt={class:"text-2xl font-bold text-red-600"},it={class:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm"},nt={class:"flex items-center gap-3"},ct={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center"},xt={class:"text-2xl font-bold text-blue-600"},pt={class:"flex flex-wrap items-center gap-4"},gt={class:"flex-1 min-w-[200px]"},ut={class:"relative"},mt=["value"],yt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden"},ht={class:"overflow-x-auto"},vt={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},bt={class:"divide-y divide-gray-200 dark:divide-gray-700"},_t={class:"px-6 py-4 whitespace-nowrap"},ft={class:"flex items-center"},kt={class:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center"},wt={class:"text-sm font-medium text-purple-600 dark:text-purple-400"},jt={class:"ml-4"},Ct={class:"text-sm font-medium text-gray-900 dark:text-white"},$t={class:"text-sm text-gray-500 dark:text-gray-400"},Tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},St={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"},Bt={class:"px-6 py-4 whitespace-nowrap"},Vt={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate"},At={class:"px-6 py-4 whitespace-nowrap text-right"},Kt={key:0,class:"flex items-center justify-end gap-2"},Lt=["onClick"],qt=["onClick"],zt={key:1,class:"text-sm text-gray-400"},Nt={key:0,class:"p-8 text-center text-gray-500 dark:text-gray-400"},ne={__name:"Index",props:{leaveRequests:Array,employees:Array,stats:Object,currentBusiness:Object},setup(i){const f=i,c=p(""),x=p(""),k=p(!1),w=[{value:"",label:"Barcha holatlar"},{value:"pending",label:"Kutilmoqda"},{value:"approved",label:"Tasdiqlangan"},{value:"rejected",label:"Rad etilgan"}],g=S(()=>f.leaveRequests?.filter(r=>{const e=!c.value||r.user_name?.toLowerCase().includes(c.value.toLowerCase()),s=!x.value||r.status===x.value;return e&&s})||[]),j=r=>({pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",approved:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",rejected:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"})[r]||"bg-gray-100 text-gray-800",C=r=>({pending:"Kutilmoqda",approved:"Tasdiqlangan",rejected:"Rad etilgan"})[r]||r,$=r=>{confirm("Ushbu ta'til so'rovini tasdiqlaysizmi?")&&h.post(`/hr/leave/${r}/approve`)},T=r=>{confirm("Ushbu ta'til so'rovini rad etasizmi?")&&h.post(`/hr/leave/${r}/reject`)};return(r,e)=>(d(),B(U,{title:"Ta'tillar boshqaruvi"},{default:V(()=>[l(o(N),{title:"Ta'tillar boshqaruvi"}),t("div",E,[t("div",F,[e[4]||(e[4]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Ta'tillar boshqaruvi "),t("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Xodimlar ta'til so'rovlarini boshqarish ")],-1)),t("button",{onClick:e[0]||(e[0]=s=>k.value=!0),class:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700"},[l(o(D),{class:"w-5 h-5"}),e[3]||(e[3]=A(" Ta'tilga chiqarish ",-1))])]),t("div",H,[t("div",I,[t("div",J,[t("div",G,[l(o(v),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t("div",null,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami so'rovlar",-1)),t("p",Q,a(i.stats?.total_requests||0),1)])])]),t("div",P,[t("div",W,[t("div",Y,[l(o(M),{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})]),t("div",null,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Kutilmoqda",-1)),t("p",Z,a(i.stats?.pending||0),1)])])]),t("div",tt,[t("div",et,[t("div",st,[l(o(b),{class:"w-6 h-6 text-green-600 dark:text-green-400"})]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Tasdiqlangan",-1)),t("p",at,a(i.stats?.approved||0),1)])])]),t("div",rt,[t("div",lt,[t("div",ot,[l(o(_),{class:"w-6 h-6 text-red-600 dark:text-red-400"})]),t("div",null,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Rad etilgan",-1)),t("p",dt,a(i.stats?.rejected||0),1)])])]),t("div",it,[t("div",nt,[t("div",ct,[l(o(O),{class:"w-6 h-6 text-blue-600 dark:text-blue-400"})]),t("div",null,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Bugun ta'tilda",-1)),t("p",xt,a(i.stats?.on_leave_today||0),1)])])])]),t("div",pt,[t("div",gt,[t("div",ut,[l(o(X),{class:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),type:"text",placeholder:"Xodim qidirish...",class:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500"},null,512),[[K,c.value]])])]),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>x.value=s),class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg"},[(d(),n(m,null,y(w,s=>t("option",{key:s.value,value:s.value},a(s.label),9,mt)),64))],512),[[L,x.value]])]),t("div",yt,[t("div",ht,[t("table",vt,[e[10]||(e[10]=t("thead",{class:"bg-gray-50 dark:bg-gray-700/50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Xodim"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Ta'til turi"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Sana"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Kunlar"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Holat"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Sabab"),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Amallar")])],-1)),t("tbody",bt,[(d(!0),n(m,null,y(g.value,s=>(d(),n("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50"},[t("td",_t,[t("div",ft,[t("div",kt,[t("span",wt,a(s.user_name?.charAt(0)||"?"),1)]),t("div",jt,[t("div",Ct,a(s.user_name),1),t("div",$t,a(s.user_email),1)])])]),t("td",Tt,a(s.leave_type),1),t("td",Rt,a(s.start_date)+" - "+a(s.end_date),1),t("td",St,a(s.total_days)+" kun ",1),t("td",Bt,[t("span",{class:z(["px-3 py-1 text-xs font-medium rounded-full",j(s.status)])},a(C(s.status)),3)]),t("td",Vt,a(s.reason||"—"),1),t("td",At,[s.status==="pending"?(d(),n("div",Kt,[t("button",{onClick:R=>$(s.id),class:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/30 rounded-lg",title:"Tasdiqlash"},[l(o(b),{class:"w-5 h-5"})],8,Lt),t("button",{onClick:R=>T(s.id),class:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Rad etish"},[l(o(_),{class:"w-5 h-5"})],8,qt)])):(d(),n("span",zt,a(s.approver_name?`${s.approver_name} tomonidan`:"—"),1))])]))),128))])])]),g.value.length===0?(d(),n("div",Nt,[l(o(v),{class:"w-12 h-12 mx-auto opacity-50 mb-3"}),e[11]||(e[11]=t("p",null,"Ta'til so'rovlari topilmadi",-1))])):q("",!0)])])]),_:1}))}};export{ne as default};
