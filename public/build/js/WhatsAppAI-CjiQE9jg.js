import{r as b,o as z,v as A,x as j,y as u,z as t,A as d,C as h,D as g,L as v,I as r,R as f,E as p,J as n,H as x,F as C,G as I}from"./chunk-BcTZxe-J.js";import{b as V,h as U}from"./chunk-BYRtWSr0.js";import{_ as B}from"./chunk-TXgJ1MaD.js";import{u as X}from"./app-BC9IivQF.js";import{r as $}from"./chunk-DNp5bQOL.js";import{r as N}from"./chunk-BfUzJLaZ.js";import{r as J}from"./chunk-Rs1WNzbn.js";import{a as O}from"./chunk-_yYzsx_i.js";import{e as D}from"./chunk-AyRJdOJv.js";import{r as E}from"./chunk-gCWBLgcy.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-CJsSO8V8.js";import"./chunk-CrR1zWIb.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";const F={class:"py-12"},K={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},M={class:"mb-8"},W={class:"text-3xl font-bold text-gray-900 flex items-center gap-3"},L={class:"bg-white rounded-xl shadow-md p-6 mb-6"},P={class:"flex items-center gap-3 mb-6"},R={class:"space-y-6"},Y={class:"flex items-center justify-between p-4 bg-purple-50 rounded-lg"},Q={class:"relative inline-flex items-center cursor-pointer"},G={class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},H={class:"relative inline-flex items-center cursor-pointer"},Z={key:0},ee={class:"block text-sm font-medium text-gray-700 mb-2"},te={class:"border-t pt-6"},se={class:"space-y-3"},ae={class:"flex items-center"},re={class:"flex items-center"},le={class:"flex items-center"},oe={class:"border-t pt-6"},ie={class:"flex items-center justify-between mb-4"},ne={class:"relative inline-flex items-center cursor-pointer"},ue={key:0,class:"grid grid-cols-2 gap-4"},de={key:1,class:"mt-4"},pe={class:"mt-6 flex items-center gap-4"},me=["disabled"],ge={key:0,class:"flex items-center gap-2 text-green-600"},fe={class:"bg-white rounded-xl shadow-md p-6"},be={class:"flex items-center gap-3 mb-6"},ce={class:"space-y-3 mb-6"},ve={class:"flex-1"},xe={class:"text-sm font-medium text-gray-700"},ye={class:"text-purple-600"},he={class:"text-sm text-gray-600 mt-1"},_e=["onClick"],ke={class:"border-t pt-6"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},qe={class:"flex gap-4"},Se=["disabled"],Ze={__name:"WhatsAppAI",setup(Te){X();const _=V(),y=_.props.currentBusiness||_.props.auth?.currentBusiness,a=b({is_active:!0,ai_enabled:!0,auto_greet:!0,greeting_message:"Assalomu alaykum! Bizga xush kelibsiz. Sizga qanday yordam bera olamiz?",fallback_message:"Kechirasiz, savol tushunilmadi. Iltimos, boshqacha so'rang.",outside_hours_message:"Ish vaqti tugadi. Ish kunlari 9:00-18:00 da ishlmaymiz.",business_hours_enabled:!1,business_hours_start:"09:00",business_hours_end:"18:00",lead_auto_create:!0,ai_creativity_level:7,use_dream_buyer_context:!0,use_offer_context:!0}),o=b(!1),c=b(!1),m=b([{id:1,trigger:"salom",response:"Assalomu alaykum! Sizga qanday yordam bera olamiz?"},{id:2,trigger:"narx",response:"Takliflarimiz haqida ma'lumot olish uchun telefon raqamingizni qoldiring."},{id:3,trigger:"xarid",response:"Xarid uchun operator bilan bog'lanamiz. Bir daqiqa kuting."}]),i=b({trigger:"",response:""}),k=async()=>{o.value=!0;try{const e=await(await fetch(`/api/whatsapp/${y.id}/ai-config`)).json();e.success&&(a.value={...a.value,...e.config},e.templates&&(m.value=e.templates))}catch(l){console.error("Error loading config:",l)}finally{o.value=!1}},w=async()=>{o.value=!0,c.value=!1;try{const e=await(await fetch(`/api/whatsapp/${y.id}/ai-config`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(a.value)})).json();e.success?(c.value=!0,setTimeout(()=>c.value=!1,3e3)):alert("Xatolik: "+e.message)}catch(l){alert("Xatolik: "+l.message)}finally{o.value=!1}},q=()=>{i.value.trigger&&i.value.response&&(m.value.push({id:Date.now(),...i.value}),i.value={trigger:"",response:""})},S=l=>{m.value=m.value.filter(e=>e.id!==l)},T=async()=>{o.value=!0;try{const e=await(await fetch(`/api/whatsapp/${y.id}/ai-templates`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({templates:m.value})})).json();e.success?alert("Templatelar saqlandi!"):alert("Xatolik: "+e.message)}catch(l){alert("Xatolik: "+l.message)}finally{o.value=!1}};return z(()=>{k()}),(l,e)=>(p(),A(B,{title:"WhatsApp AI Settings"},{default:j(()=>[u(d(U),{title:"WhatsApp AI Configuration"}),t("div",F,[t("div",K,[t("div",M,[t("h1",W,[u(d($),{class:"w-10 h-10 text-purple-600"}),e[14]||(e[14]=h(" WhatsApp AI Chatbot Configuration ",-1))]),e[15]||(e[15]=t("p",{class:"mt-2 text-gray-600"}," AI-powered avtomatik javoblar va mijozlar bilan muloqot sozlamalari ",-1))]),t("div",L,[t("div",P,[u(d(N),{class:"w-6 h-6 text-gray-700"}),e[16]||(e[16]=t("h2",{class:"text-xl font-bold text-gray-900"},"Asosiy Sozlamalar",-1))]),t("div",R,[t("div",Y,[e[18]||(e[18]=t("div",null,[t("h3",{class:"font-semibold text-gray-900"},"AI Chatbot Yoqish"),t("p",{class:"text-sm text-gray-600"},"Xabarlarga avtomatik AI javoblar berish")],-1)),t("label",Q,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>a.value.ai_enabled=s),class:"sr-only peer"},null,512),[[f,a.value.ai_enabled]]),e[17]||(e[17]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),t("div",G,[e[20]||(e[20]=t("div",null,[t("h3",{class:"font-semibold text-gray-900"},"Avtomatik Salomlashish"),t("p",{class:"text-sm text-gray-600"},"Yangi mijozlarga avtomatik salom berish")],-1)),t("label",H,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>a.value.auto_greet=s),class:"sr-only peer"},null,512),[[f,a.value.auto_greet]]),e[19]||(e[19]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),a.value.auto_greet?(p(),g("div",Z,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Salomlashish Xabari ",-1)),r(t("textarea",{"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.greeting_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,a.value.greeting_message]])])):v("",!0),t("div",null,[t("label",ee," AI Ijodkorlik Darajasi: "+x(a.value.ai_creativity_level)+"/10 ",1),r(t("input",{type:"range","onUpdate:modelValue":e[3]||(e[3]=s=>a.value.ai_creativity_level=s),min:"1",max:"10",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600"},null,512),[[n,a.value.ai_creativity_level]]),e[22]||(e[22]=t("div",{class:"flex justify-between text-xs text-gray-500 mt-1"},[t("span",null,"Aniq javoblar"),t("span",null,"Ijodiy javoblar")],-1))]),t("div",te,[e[26]||(e[26]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Kontekst Sozlamalari",-1)),t("div",se,[t("div",ae,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>a.value.use_dream_buyer_context=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,a.value.use_dream_buyer_context]]),e[23]||(e[23]=t("label",{class:"ml-2 text-sm text-gray-700"}," Ideal Mijoz ma'lumotlaridan foydalanish ",-1))]),t("div",re,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>a.value.use_offer_context=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,a.value.use_offer_context]]),e[24]||(e[24]=t("label",{class:"ml-2 text-sm text-gray-700"}," Aktiv Takliflar haqida ma'lumot berish ",-1))]),t("div",le,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>a.value.lead_auto_create=s),class:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"},null,512),[[f,a.value.lead_auto_create]]),e[25]||(e[25]=t("label",{class:"ml-2 text-sm text-gray-700"}," Avtomatik Lead yaratish (xarid bosqichida) ",-1))])])]),t("div",oe,[t("div",ie,[e[28]||(e[28]=t("h3",{class:"font-semibold text-gray-900"},"Ish Vaqti",-1)),t("label",ne,[r(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>a.value.business_hours_enabled=s),class:"sr-only peer"},null,512),[[f,a.value.business_hours_enabled]]),e[27]||(e[27]=t("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600"},null,-1))])]),a.value.business_hours_enabled?(p(),g("div",ue,[t("div",null,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Boshlanish ",-1)),r(t("input",{type:"time","onUpdate:modelValue":e[8]||(e[8]=s=>a.value.business_hours_start=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,a.value.business_hours_start]])]),t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Tugash ",-1)),r(t("input",{type:"time","onUpdate:modelValue":e[9]||(e[9]=s=>a.value.business_hours_end=s),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,a.value.business_hours_end]])])])):v("",!0),a.value.business_hours_enabled?(p(),g("div",de,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Ish vaqtidan tashqari xabar ",-1)),r(t("textarea",{"onUpdate:modelValue":e[10]||(e[10]=s=>a.value.outside_hours_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,a.value.outside_hours_message]])])):v("",!0)]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Fallback Xabar (AI javob bera olmasa) ",-1)),r(t("textarea",{"onUpdate:modelValue":e[11]||(e[11]=s=>a.value.fallback_message=s),rows:"2",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,a.value.fallback_message]])])]),t("div",pe,[t("button",{onClick:w,disabled:o.value,class:"px-6 py-3 bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-semibold rounded-lg transition-colors"},x(o.value?"Saqlanmoqda...":"Sozlamalarni Saqlash"),9,me),c.value?(p(),g("div",ge,[u(d(J),{class:"w-5 h-5"}),e[33]||(e[33]=t("span",{class:"font-medium"},"Saqlandi!",-1))])):v("",!0)])]),t("div",fe,[t("div",be,[u(d(O),{class:"w-6 h-6 text-gray-700"}),e[34]||(e[34]=t("h2",{class:"text-xl font-bold text-gray-900"},"Tez Javob Templatelar",-1))]),t("div",ce,[(p(!0),g(C,null,I(m.value,s=>(p(),g("div",{key:s.id,class:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg"},[t("div",ve,[t("div",xe,[e[35]||(e[35]=h(" Trigger: ",-1)),t("span",ye,x(s.trigger),1)]),t("div",he,x(s.response),1)]),t("button",{onClick:ze=>S(s.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[u(d(D),{class:"w-5 h-5"})],8,_e)]))),128))]),t("div",ke,[e[39]||(e[39]=t("h3",{class:"font-semibold text-gray-900 mb-4"},"Yangi Template Qo'shish",-1)),t("div",we,[t("div",null,[e[36]||(e[36]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Trigger Kalit So'z ",-1)),r(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>i.value.trigger=s),type:"text",placeholder:"masalan: narx, xarid",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,i.value.trigger]])]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Javob Matni ",-1)),r(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>i.value.response=s),type:"text",placeholder:"Javob xabari",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"},null,512),[[n,i.value.response]])])]),t("div",qe,[t("button",{onClick:q,class:"inline-flex items-center px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors gap-2"},[u(d(E),{class:"w-5 h-5"}),e[38]||(e[38]=h(" Template Qo'shish ",-1))]),t("button",{onClick:T,disabled:o.value,class:"px-4 py-2 bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white font-semibold rounded-lg transition-colors"}," Barchasini Saqlash ",8,Se)])])])])])]),_:1}))}};export{Ze as default};
