import{r as e,b as t,C as a,L as s,y as l,A as r,x as n,E as i,z as o,B as d,Q as u,J as c,K as g,v as p,I as m,N as b,F as x,G as y,H as v,D as h}from"./chunk-CpmtkKLp.js";import{h as f,l as k,r as w}from"./chunk-BhZp3z4u.js";import{_ as j}from"./chunk-C3pzOk_v.js";import{r as _}from"./chunk-BuJDoypK.js";import{r as q}from"./chunk-BaJGWy5z.js";import{r as $}from"./chunk-BiW1c8q7.js";import{r as C}from"./chunk-B3ILNJqD.js";import{r as S}from"./chunk-69iREGaj.js";import{r as M}from"./chunk-DCXiFUg-.js";import{r as F}from"./chunk-BiBvtcLb.js";import{r as O}from"./chunk-DmrwHl-6.js";import{r as Q}from"./chunk-beXL1A--.js";import{Y as A,h as Y,G as B,V,S as z}from"./chunk-pDcEvAuv.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";const D={class:"py-6"},I={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},R={class:"flex items-center justify-between mb-6"},T={class:"flex items-center space-x-4"},U={class:"flex items-center space-x-2"},K={class:"text-2xl font-bold text-gray-900"},N={class:"text-gray-500"},G={class:"flex items-center space-x-3"},H={class:"bg-white rounded-lg border p-6 mb-6"},L={class:"flex items-center justify-between mb-4"},P={class:"text-2xl font-bold text-indigo-600"},E={class:"h-3 bg-gray-200 rounded-full overflow-hidden"},J={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},X={class:"bg-white rounded-lg border p-4"},W={class:"flex items-center justify-between"},Z={class:"text-2xl font-bold text-gray-900 mt-1"},ee={class:"bg-white rounded-lg border p-4"},te={class:"flex items-center justify-between"},ae={class:"text-2xl font-bold text-gray-900 mt-1"},se={class:"bg-white rounded-lg border p-4"},le={class:"flex items-center justify-between"},re={class:"text-2xl font-bold text-gray-900 mt-1"},ne={class:"bg-white rounded-lg border p-4"},ie={class:"flex items-center justify-between"},oe={class:"text-2xl font-bold text-gray-900 mt-1"},de={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ue={class:"lg:col-span-2 space-y-6"},ce={class:"bg-white rounded-lg border p-6"},ge={class:"flex items-center justify-between mb-4"},pe={key:0,class:"space-y-3"},me={key:1,class:"text-center py-8 text-gray-500"},be={class:"bg-white rounded-lg border p-6"},xe={class:"flex items-center justify-between mb-4"},ye={key:0,class:"space-y-3"},ve={class:"flex items-start justify-between"},he={class:"font-medium text-gray-900"},fe={class:"text-sm text-gray-600 mt-1"},ke=["onClick"],we={class:"flex items-center space-x-4 mt-3 text-sm"},je={key:1,class:"text-center py-8 text-gray-500"},_e={class:"bg-white rounded-lg border p-6"},qe={class:"flex items-center justify-between mb-4"},$e={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ce={class:"flex items-center justify-between mb-2"},Se={class:"font-semibold text-gray-900"},Me={class:"text-sm text-gray-600 mb-2"},Fe={class:"flex items-center justify-between text-sm"},Oe={class:"text-gray-500"},Qe={class:"font-medium text-indigo-600"},Ae={class:"h-1.5 bg-gray-200 rounded-full overflow-hidden mt-2"},Ye=["onClick"],Be={class:"text-center"},Ve={class:"text-gray-400 font-medium"},ze={class:"space-y-6"},De={class:"bg-white rounded-lg border p-6"},Ie={class:"flex items-center justify-between mb-4"},Re={key:0,class:"space-y-3"},Te={class:"font-medium text-gray-900"},Ue={class:"text-sm text-gray-600 mt-1"},Ke={class:"flex items-center justify-between mt-2 text-xs text-gray-500"},Ne={key:1,class:"text-center py-4 text-gray-500 text-sm"},Ge={class:"bg-white rounded-lg border p-6"},He={key:0,class:"space-y-3"},Le={class:"flex-1"},Pe={class:"text-sm font-medium text-gray-900"},Ee={class:"text-xs text-gray-500"},Je={key:1,class:"text-center py-4 text-gray-500 text-sm"},Xe={key:0,class:"bg-red-50 rounded-lg border border-red-200 p-6"},We={class:"flex items-center mb-4"},Ze={class:"space-y-2"},et={class:"fixed inset-0 overflow-y-auto"},tt={class:"flex min-h-full items-center justify-center p-4"},at={class:"grid grid-cols-2 gap-4"},st={class:"flex justify-end space-x-3 pt-4"},lt=["disabled"],rt={__name:"Show",props:{plan:Object,annual:Object,months:Array},setup(rt){const nt=rt,it=e(!1),ot=e(!1),dt=e(!1),ut=e(!1),ct=e(!1),gt=e({title:nt.plan.title||"",theme:nt.plan.theme||"",revenue_target:nt.plan.revenue_target,budget:nt.plan.budget,status:nt.plan.status}),pt=t(()=>({1:"bg-blue-100 text-blue-700",2:"bg-green-100 text-green-700",3:"bg-amber-100 text-amber-700",4:"bg-purple-100 text-purple-700"}[nt.plan.quarter]||"bg-gray-100 text-gray-700")),mt=t(()=>{const e=nt.plan.year,t=nt.plan.quarter,a=["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"];return`${a[3*(t-1)+1]} - ${a[3*t]} ${e}`}),bt=t(()=>({draft:"bg-gray-100 text-gray-700",planning:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-indigo-100 text-indigo-700"}[nt.plan.status]||"bg-gray-100 text-gray-700")),xt=t(()=>({draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[nt.plan.status]||nt.plan.status)),yt=t(()=>{const e=3*(nt.plan.quarter-1)+1;return[e,e+1,e+2]}),vt=t(()=>nt.months?.map(e=>e.month)||[]),ht=t(()=>yt.value.filter(e=>!vt.value.includes(e)));function ft(e){return e?e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(0)}K`:e.toLocaleString():"-"}function kt(e){return["","Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"][e]||""}function wt(e){return{draft:"Qoralama",planning:"Rejalashtirish",active:"Faol",completed:"Yakunlangan"}[e]||e}function jt(e){return{high:"Yuqori",medium:"O'rta",low:"Past"}[e]||e}function _t(){const e=ht.value[0];e&&qt(e)}function qt(e){w.post("/business/strategy/monthly",{quarterly_plan_id:nt.plan.id,month:e,year:nt.plan.year})}function $t(){ct.value=!0,w.put(`/business/strategy/quarterly/${nt.plan.id}`,gt.value,{preserveScroll:!0,onSuccess:()=>{it.value=!1},onFinish:()=>{ct.value=!1}})}return(e,t)=>(h(),a(c,null,[s(r(f),{title:`Q${rt.plan.quarter} - ${rt.plan.year}`},null,8,["title"]),l("div",D,[l("div",I,[l("div",R,[l("div",T,[s(r(k),{href:rt.annual?`/business/strategy/annual/${rt.annual.id}`:"/business/strategy",class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100"},{default:n(()=>[s(r(_),{class:"w-5 h-5"})]),_:1},8,["href"]),l("div",null,[l("div",U,[l("span",{class:i(["px-2 py-0.5 rounded text-xs font-medium",pt.value])}," Q"+o(rt.plan.quarter),3),l("h1",K,o(rt.plan.title||rt.plan.theme),1)]),l("p",N,o(mt.value),1)])]),l("div",G,[l("span",{class:i(["px-3 py-1 rounded-full text-sm font-medium",bt.value])},o(xt.value),3),l("button",{onClick:t[0]||(t[0]=e=>it.value=!0),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"},[s(r(q),{class:"w-4 h-4 inline mr-1"}),t[11]||(t[11]=d(" Tahrirlash ",-1))])])]),l("div",H,[l("div",L,[t[12]||(t[12]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Chorak progressi",-1)),l("span",P,o(rt.plan.completion_percent||0)+"%",1)]),l("div",E,[l("div",{class:"h-full bg-indigo-600 rounded-full transition-all duration-500",style:u({width:`${rt.plan.completion_percent||0}%`})},null,4)])]),l("div",J,[l("div",X,[l("div",W,[t[13]||(t[13]=l("span",{class:"text-sm text-gray-500"},"Maqsadli daromad",-1)),s(r($),{class:"w-5 h-5 text-green-500"})]),l("p",Z,o(ft(rt.plan.revenue_target)),1)]),l("div",ee,[l("div",te,[t[14]||(t[14]=l("span",{class:"text-sm text-gray-500"},"Byudjet",-1)),s(r(C),{class:"w-5 h-5 text-purple-500"})]),l("p",ae,o(ft(rt.plan.budget)),1)]),l("div",se,[l("div",le,[t[15]||(t[15]=l("span",{class:"text-sm text-gray-500"},"Maqsadlar",-1)),s(r(S),{class:"w-5 h-5 text-blue-500"})]),l("p",re,o(rt.plan.quarterly_objectives?.length||0),1)]),l("div",ne,[l("div",ie,[t[16]||(t[16]=l("span",{class:"text-sm text-gray-500"},"Oylar",-1)),s(r(M),{class:"w-5 h-5 text-amber-500"})]),l("p",oe,o(rt.months.length)+" / 3",1)])]),l("div",de,[l("div",ue,[l("div",ce,[l("div",ge,[t[18]||(t[18]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Chorak maqsadlari",-1)),l("button",{onClick:t[1]||(t[1]=e=>ot.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[s(r(F),{class:"w-4 h-4 inline mr-1"}),t[17]||(t[17]=d(" Qo'shish ",-1))])]),rt.plan.quarterly_objectives?.length?(h(),a("div",pe,[(h(!0),a(c,null,g(rt.plan.quarterly_objectives,(e,t)=>(h(),p(j,{key:t,goal:e,index:t,onToggle:e=>function(e){const t=[...nt.plan.quarterly_objectives||[]];t[e].completed=!t[e].completed,w.put(`/business/strategy/quarterly/${nt.plan.id}`,{quarterly_objectives:t},{preserveScroll:!0})}(t),onDelete:e=>function(e){if(!confirm("Bu maqsadni o'chirmoqchimisiz?"))return;const t=[...nt.plan.quarterly_objectives||[]];t.splice(e,1),w.put(`/business/strategy/quarterly/${nt.plan.id}`,{quarterly_objectives:t},{preserveScroll:!0})}(t)},null,8,["goal","index","onToggle","onDelete"]))),128))])):(h(),a("div",me," Hali chorak maqsadlari yo'q "))]),l("div",be,[l("div",xe,[t[20]||(t[20]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Asosiy tashabbuslar",-1)),l("button",{onClick:t[2]||(t[2]=e=>dt.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[s(r(F),{class:"w-4 h-4 inline mr-1"}),t[19]||(t[19]=d(" Qo'shish ",-1))])]),rt.plan.key_initiatives?.length?(h(),a("div",ye,[(h(!0),a(c,null,g(rt.plan.key_initiatives,(e,n)=>{return h(),a("div",{key:n,class:"p-4 bg-gray-50 rounded-lg"},[l("div",ve,[l("div",null,[l("h4",he,o(e.title),1),l("p",fe,o(e.description),1)]),l("button",{onClick:e=>function(e){if(!confirm("Bu tashabbusni o'chirmoqchimisiz?"))return;const t=[...nt.plan.key_initiatives||[]];t.splice(e,1),w.put(`/business/strategy/quarterly/${nt.plan.id}`,{key_initiatives:t},{preserveScroll:!0})}(n),class:"text-gray-400 hover:text-red-500"},[s(r(O),{class:"w-4 h-4"})],8,ke)]),l("div",we,[t[21]||(t[21]=l("span",{class:"text-gray-500"},"Prioritet:",-1)),l("span",{class:i(["px-2 py-0.5 rounded text-xs font-medium",(d=e.priority,{high:"bg-red-100 text-red-700",medium:"bg-yellow-100 text-yellow-700",low:"bg-green-100 text-green-700"}[d]||"bg-gray-100 text-gray-700")])},o(jt(e.priority)),3)])]);var d}),128))])):(h(),a("div",je," Tashabbuslar yo'q "))]),l("div",_e,[l("div",qe,[t[23]||(t[23]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Oylik rejalar",-1)),rt.months.length<3?(h(),a("button",{key:0,onClick:_t,class:"text-sm text-indigo-600 hover:text-indigo-800"},[s(r(F),{class:"w-4 h-4 inline mr-1"}),t[22]||(t[22]=d(" Oy qo'shish ",-1))])):m("",!0)]),l("div",$e,[(h(!0),a(c,null,g(rt.months,e=>(h(),p(r(k),{key:e.id,href:`/business/strategy/monthly/${e.id}`,class:"block p-4 rounded-lg border hover:shadow-md transition-shadow"},{default:n(()=>{return[l("div",Ce,[l("span",Se,o(kt(e.month)),1),l("span",{class:i(["px-2 py-0.5 rounded-full text-xs",(t=e.status,{draft:"bg-gray-100 text-gray-600",planning:"bg-blue-100 text-blue-600",active:"bg-green-100 text-green-600",completed:"bg-indigo-100 text-indigo-600"}[t]||"bg-gray-100 text-gray-600")])},o(wt(e.status)),3)]),l("p",Me,o(e.focus_area||"Reja mavjud"),1),l("div",Fe,[l("span",Oe,o(e.posts_target||0)+" post",1),l("span",Qe,o(e.completion_percent||0)+"%",1)]),l("div",Ae,[l("div",{class:"h-full bg-indigo-500 rounded-full",style:u({width:`${e.completion_percent||0}%`})},null,4)])];var t}),_:2},1032,["href"]))),128)),(h(!0),a(c,null,g(ht.value,e=>(h(),a("div",{key:`empty-${e}`,class:"p-4 rounded-lg border-2 border-dashed border-gray-200 flex items-center justify-center cursor-pointer hover:border-indigo-300 hover:bg-indigo-50 transition-colors",onClick:t=>qt(e)},[l("div",Be,[l("span",Ve,o(kt(e)),1),t[24]||(t[24]=l("p",{class:"text-xs text-gray-400 mt-1"},"Reja yarating",-1))])],8,Ye))),128))])])]),l("div",ze,[l("div",De,[l("div",Ie,[t[25]||(t[25]=l("h2",{class:"text-lg font-semibold text-gray-900"},"Kampaniyalar",-1)),l("button",{onClick:t[3]||(t[3]=e=>ut.value=!0),class:"text-sm text-indigo-600 hover:text-indigo-800"},[s(r(F),{class:"w-4 h-4 inline"})])]),rt.plan.campaigns?.length?(h(),a("div",Re,[(h(!0),a(c,null,g(rt.plan.campaigns,(e,t)=>(h(),a("div",{key:t,class:"p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-100"},[l("h4",Te,o(e.name),1),l("p",Ue,o(e.goal),1),l("div",Ke,[l("span",null,o(ft(e.budget)),1),l("span",null,o(e.channel),1)])]))),128))])):(h(),a("div",Ne," Kampaniyalar yo'q "))]),l("div",Ge,[t[26]||(t[26]=l("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Muhim sanalar",-1)),rt.plan.milestones?.length?(h(),a("div",He,[(h(!0),a(c,null,g(rt.plan.milestones,(e,t)=>(h(),a("div",{key:t,class:"flex items-start space-x-3"},[l("div",{class:i(["w-3 h-3 rounded-full mt-1.5",e.completed?"bg-green-500":"bg-gray-300"])},null,2),l("div",Le,[l("p",Pe,o(e.title),1),l("p",Ee,o(e.date),1)])]))),128))])):(h(),a("div",Je," Muhim sanalar belgilanmagan "))]),rt.plan.risks?.length?(h(),a("div",Xe,[l("div",We,[s(r(Q),{class:"w-5 h-5 text-red-500 mr-2"}),t[27]||(t[27]=l("h2",{class:"text-lg font-semibold text-red-900"},"Xavflar",-1))]),l("ul",Ze,[(h(!0),a(c,null,g(rt.plan.risks,(e,t)=>(h(),a("li",{key:t,class:"text-sm text-red-800"},o(e),1))),128))])])):m("",!0)])])])]),s(r(z),{appear:"",show:it.value,as:"template"},{default:n(()=>[s(r(A),{as:"div",class:"relative z-50",onClose:t[10]||(t[10]=e=>it.value=!1)},{default:n(()=>[s(r(Y),{enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:n(()=>[...t[28]||(t[28]=[l("div",{class:"fixed inset-0 bg-black/25"},null,-1)])]),_:1}),l("div",et,[l("div",tt,[s(r(Y),{enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:n(()=>[s(r(B),{class:"w-full max-w-2xl bg-white rounded-xl shadow-xl p-6"},{default:n(()=>[s(r(V),{class:"text-lg font-semibold text-gray-900 mb-4"},{default:n(()=>[...t[29]||(t[29]=[d(" Chorak rejasini tahrirlash ",-1)])]),_:1}),l("form",{onSubmit:b($t,["prevent"]),class:"space-y-4"},[l("div",null,[t[30]||(t[30]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Sarlavha",-1)),x(l("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>gt.value.title=e),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[y,gt.value.title]])]),l("div",null,[t[31]||(t[31]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mavzu (Theme)",-1)),x(l("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>gt.value.theme=e),type:"text",class:"w-full rounded-lg border-gray-300"},null,512),[[y,gt.value.theme]])]),l("div",at,[l("div",null,[t[32]||(t[32]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maqsadli daromad",-1)),x(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>gt.value.revenue_target=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,gt.value.revenue_target,void 0,{number:!0}]])]),l("div",null,[t[33]||(t[33]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Byudjet",-1)),x(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>gt.value.budget=e),type:"number",class:"w-full rounded-lg border-gray-300"},null,512),[[y,gt.value.budget,void 0,{number:!0}]])])]),l("div",null,[t[35]||(t[35]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),x(l("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>gt.value.status=e),class:"w-full rounded-lg border-gray-300"},[...t[34]||(t[34]=[l("option",{value:"draft"},"Qoralama",-1),l("option",{value:"planning"},"Rejalashtirish",-1),l("option",{value:"active"},"Faol",-1),l("option",{value:"completed"},"Yakunlangan",-1)])],512),[[v,gt.value.status]])]),l("div",st,[l("button",{type:"button",onClick:t[9]||(t[9]=e=>it.value=!1),class:"px-4 py-2 text-gray-700 bg-white border rounded-lg hover:bg-gray-50"}," Bekor qilish "),l("button",{type:"submit",disabled:ct.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50"},o(ct.value?"Saqlanmoqda...":"Saqlash"),9,lt)])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}};export{rt as default};
