import{l as e,a as t,r}from"./chunk-BhZp3z4u.js";import{u as a}from"./app-C-ZlocOh.js";import{_ as o}from"./chunk-D7SyfRoT.js";import{_ as s}from"./chunk-DbFbpSR2.js";import{_ as l}from"./chunk-Bfc-GtxM.js";import{_ as d}from"./chunk-DNwbmffR.js";import{_ as i}from"./chunk-Cb_-eVu9.js";import{_ as n}from"./chunk-BHCorYK2.js";import{r as c,b as g,C as u,y as m,z as p,A as x,L as y,I as b,x as k,B as v,F as h,G as f,H as w,J as _,K as j,E as C,D as M,a as B,w as z,v as $,N as O,P as T,M as V,O as U}from"./chunk-CpmtkKLp.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";const A={class:"p-6 space-y-6"},H={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},S={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},q={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},L={class:"flex gap-3"},F={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},I={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},N={class:"flex items-center gap-3"},E={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},D={class:"text-xs text-gray-500 dark:text-gray-400"},J={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},K={class:"flex items-center gap-3"},Q={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},R={class:"text-xs text-gray-500 dark:text-gray-400"},G={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},P={class:"flex items-center gap-3"},X={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},W={class:"text-xs text-gray-500 dark:text-gray-400"},Y={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},Z={class:"flex items-center gap-3"},ee={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},te={class:"text-xs text-gray-500 dark:text-gray-400"},re={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4"},ae={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},oe={class:"md:col-span-2"},se={class:"relative"},le=["placeholder"],de={value:""},ie={value:"low"},ne={value:"medium"},ce={value:"high"},ge={value:"critical"},ue={value:""},me={value:"active"},pe={value:"inactive"},xe={value:"archived"},ye={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},be={class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-1"},ke={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},ve={key:1,class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},he={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},fe={class:"overflow-x-auto"},we={class:"w-full"},_e={class:"bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"},je={class:"px-4 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Ce={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Me={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Be={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},ze={class:"px-4 py-3 text-center text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},$e={class:"px-4 py-3 text-right text-xs font-semibold text-gray-600 dark:text-gray-400 uppercase tracking-wider"},Oe={class:"divide-y divide-gray-100 dark:divide-gray-700"},Te={class:"px-4 py-3"},Ve={class:"flex items-center gap-3"},Ue={class:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm"},Ae={class:"min-w-0"},He={class:"text-xs text-gray-500 dark:text-gray-400 truncate"},Se={class:"px-4 py-3 text-center"},qe={key:0,class:"flex flex-col items-center"},Le={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Fe={class:"text-xs text-gray-500 dark:text-gray-400"},Ie={key:1,class:"text-gray-300 dark:text-gray-600"},Ne={class:"px-4 py-3 text-center"},Ee={key:0,class:"flex flex-col items-center"},De={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Je={class:"text-xs text-gray-500 dark:text-gray-400"},Ke={key:1,class:"text-gray-300 dark:text-gray-600"},Qe={class:"px-4 py-3 text-center"},Re={class:"px-4 py-3 text-center"},Ge={class:"px-4 py-3"},Pe={class:"flex items-center justify-end gap-1"},Xe=["onClick","title"],We=["onClick","title"],Ye={class:"px-4 py-3 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 dark:text-gray-400"},Ze={__name:"CompetitorsIndex",props:{competitors:{type:[Array,Object],default:()=>[]},stats:{type:Object,default:()=>({})},currentBusiness:{type:Object,default:null},panelType:{type:String,required:!0,validator:e=>["business","marketing","finance","operator","saleshead"].includes(e)},readOnly:{type:Boolean,default:!1}},emits:["add","edit","delete"],setup(t,{emit:r}){const{t:o}=a(),s=t,l=r,d=c({search:"",threat_level:"",status:""}),i=(e,t=null)=>{const r="saleshead"===s.panelType?"sales-head":s.panelType,a={dashboard:`/${r}/competitors/dashboard`,index:`/${r}/competitors`,show:`/${r}/competitors/${t}`,create:`/${r}/competitors/create`};return a[e]||a.index},n=g(()=>Array.isArray(s.competitors)?s.competitors:s.competitors?.data||[]),B=g(()=>n.value.length),z=g(()=>n.value.filter(e=>"active"===e.status).length),$=g(()=>n.value.filter(e=>"critical"===e.threat_level).length),O=g(()=>n.value.filter(e=>"high"===e.threat_level).length),T=g(()=>{let e=n.value;if(d.value.search){const t=d.value.search.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t))}return d.value.threat_level&&(e=e.filter(e=>e.threat_level===d.value.threat_level)),d.value.status&&(e=e.filter(e=>e.status===d.value.status)),e}),V=()=>l("add"),U=e=>{const t={low:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",high:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400",critical:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"};return t[e]||t.medium},Ze=e=>{const t={active:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400",inactive:"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",archived:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400"};return t[e]||t.inactive},et=e=>null==e?"—":0===e?"0":e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString(),tt=(e,t)=>{const r=e.metrics?.[0];return r?r[t]??null:null};return(r,a)=>(M(),u("div",A,[m("div",H,[m("div",null,[m("h1",S,p(x(o)("competitors.title")),1),m("p",q,p(x(o)("competitors.subtitle")),1)]),m("div",L,[y(x(e),{href:i("dashboard"),class:"inline-flex items-center px-4 py-2.5 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},{default:k(()=>[a[3]||(a[3]=m("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1)),v(" "+p(x(o)("competitors.dashboard")),1)]),_:1},8,["href"]),t.readOnly?b("",!0):(M(),u("button",{key:0,onClick:V,class:"inline-flex items-center px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},[a[4]||(a[4]=m("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+p(x(o)("competitors.new_competitor")),1)]))])]),m("div",F,[m("div",I,[m("div",N,[a[5]||(a[5]=m("div",{class:"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg"},[m("svg",{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),m("div",null,[m("p",E,p(B.value),1),m("p",D,p(x(o)("competitors.total")),1)])])]),m("div",J,[m("div",K,[a[6]||(a[6]=m("div",{class:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg"},[m("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),m("div",null,[m("p",Q,p(z.value),1),m("p",R,p(x(o)("competitors.active")),1)])])]),m("div",G,[m("div",P,[a[7]||(a[7]=m("div",{class:"p-2 bg-red-100 dark:bg-red-900/30 rounded-lg"},[m("svg",{class:"w-5 h-5 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),m("div",null,[m("p",X,p($.value),1),m("p",W,p(x(o)("competitors.critical_threat")),1)])])]),m("div",Y,[m("div",Z,[a[8]||(a[8]=m("div",{class:"p-2 bg-orange-100 dark:bg-orange-900/30 rounded-lg"},[m("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])],-1)),m("div",null,[m("p",ee,p(O.value),1),m("p",te,p(x(o)("competitors.high_threat")),1)])])])]),m("div",re,[m("div",ae,[m("div",oe,[m("div",se,[a[9]||(a[9]=m("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),h(m("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>d.value.search=e),type:"text",placeholder:x(o)("competitors.search_placeholder"),class:"w-full pl-10 pr-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,8,le),[[f,d.value.search]])])]),m("div",null,[h(m("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>d.value.threat_level=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[m("option",de,p(x(o)("competitors.all_threats")),1),m("option",ie,p(x(o)("competitors.low_threat")),1),m("option",ne,p(x(o)("competitors.medium_threat")),1),m("option",ce,p(x(o)("competitors.high_threat")),1),m("option",ge,p(x(o)("competitors.critical_threat")),1)],512),[[w,d.value.threat_level]])]),m("div",null,[h(m("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>d.value.status=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[m("option",ue,p(x(o)("competitors.all_statuses")),1),m("option",me,p(x(o)("competitors.active")),1),m("option",pe,p(x(o)("competitors.inactive")),1),m("option",xe,p(x(o)("competitors.archived")),1)],512),[[w,d.value.status]])])])]),0===T.value.length?(M(),u("div",ye,[a[11]||(a[11]=m("div",{class:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4"},[m("svg",{class:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),m("h3",be,p(x(o)("competitors.not_found")),1),t.readOnly?(M(),u("p",ve,p(x(o)("competitors.not_added")),1)):(M(),u("p",ke,p(x(o)("competitors.not_found_desc")),1)),t.readOnly?b("",!0):(M(),u("button",{key:2,onClick:V,class:"inline-flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},[a[10]||(a[10]=m("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+p(x(o)("competitors.add_competitor")),1)]))])):(M(),u("div",he,[m("div",fe,[m("table",we,[m("thead",null,[m("tr",_e,[m("th",je,p(x(o)("competitors.title")),1),m("th",Ce,p(x(o)("competitors.instagram")),1),m("th",Me,p(x(o)("competitors.telegram")),1),m("th",Be,p(x(o)("competitors.threat")),1),m("th",ze,p(x(o)("common.status")),1),m("th",$e,p(x(o)("competitors.actions")),1)])]),m("tbody",Oe,[(M(!0),u(_,null,j(T.value,s=>{return M(),u("tr",{key:s.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[m("td",Te,[m("div",Ve,[m("div",Ue,p(s.name.substring(0,2).toUpperCase()),1),m("div",Ae,[y(x(e),{href:i("show",s.id),class:"font-medium text-gray-900 dark:text-gray-100 hover:text-indigo-600 dark:hover:text-indigo-400 truncate block"},{default:k(()=>[v(p(s.name),1)]),_:2},1032,["href"]),m("p",He,p(s.industry||s.location||x(o)("competitors.no_data")),1)])])]),m("td",Se,[s.instagram_handle?(M(),u("div",qe,[m("span",Le,p(et(tt(s,"instagram_followers"))),1),m("span",Fe,p(s.instagram_handle),1)])):(M(),u("span",Ie,"—"))]),m("td",Ne,[s.telegram_handle?(M(),u("div",Ee,[m("span",De,p(et(tt(s,"telegram_members"))),1),m("span",Je,p(s.telegram_handle),1)])):(M(),u("span",Ke,"—"))]),m("td",Qe,[m("span",{class:C([U(s.threat_level),"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full"])},p((d=s.threat_level,o(`competitors.modal.${d}`)||d)),3)]),m("td",Re,[m("span",{class:C([Ze(s.status),"inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-md"])},p((l=s.status,o(`competitors.modal.${l}`)||l)),3)]),m("td",Ge,[m("div",Pe,[y(x(e),{href:i("show",s.id),class:"p-1.5 text-gray-500 hover:text-indigo-600 dark:text-gray-400 dark:hover:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:x(o)("competitors.view")},{default:k(()=>[...a[12]||(a[12]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])]),_:1},8,["href","title"]),t.readOnly?b("",!0):(M(),u("button",{key:0,onClick:e=>r.$emit("edit",s),class:"p-1.5 text-gray-500 hover:text-blue-600 dark:text-gray-400 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:x(o)("competitors.edit")},[...a[13]||(a[13]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Xe)),t.readOnly?b("",!0):(M(),u("button",{key:1,onClick:e=>r.$emit("delete",s),class:"p-1.5 text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:x(o)("competitors.delete")},[...a[14]||(a[14]=[m("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,We))])])]);var l,d}),128))])])]),m("div",Ye,p(x(o)("competitors.total_count",{count:T.value.length})),1)]))]))}},et={class:"fixed inset-0 z-50 overflow-y-auto"},tt={class:"flex min-h-full items-center justify-center p-4"},rt={class:"relative w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl"},at={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},ot={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},lt={class:"md:col-span-2 relative"},dt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},it={class:"relative"},nt=["placeholder"],ct={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},gt={key:0,class:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg max-h-72 overflow-y-auto"},ut={class:"p-2 text-xs text-gray-500 dark:text-gray-400 border-b border-gray-100 dark:border-gray-700"},mt=["onMousedown"],pt={class:"flex items-start justify-between gap-3"},xt={class:"flex-1 min-w-0"},yt={class:"flex items-center gap-2"},bt={class:"font-medium text-gray-900 dark:text-gray-100"},kt={key:0,class:"px-1.5 py-0.5 text-xs bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded"},vt={key:1,class:"px-1.5 py-0.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded"},ht={class:"flex items-center gap-2 mt-1 text-xs text-gray-500 dark:text-gray-400"},ft={key:0},wt={key:1},_t={key:2},jt={key:3},Ct={key:0,class:"flex items-center gap-3 mt-1"},Mt={key:0,class:"text-xs text-pink-600 dark:text-pink-400"},Bt={key:1,class:"text-xs text-blue-600 dark:text-blue-400"},zt={class:"flex-shrink-0 text-right"},$t={key:0,class:"flex items-center gap-1 text-xs text-emerald-600 dark:text-emerald-400"},Ot={key:1,class:"text-xs text-gray-400 dark:text-gray-500 mt-0.5"},Tt={key:1,class:"mt-2 p-3 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg"},Vt={class:"flex items-start justify-between"},Ut={class:"flex items-center gap-2"},At={class:"text-sm font-medium text-emerald-800 dark:text-emerald-300"},Ht={class:"text-xs text-emerald-600 dark:text-emerald-400"},St={class:"md:col-span-2"},qt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Lt=["placeholder"],Ft={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},It={value:""},Nt=["value"],Et={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Dt=["placeholder"],Jt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Kt={value:"low"},Qt={value:"medium"},Rt={value:"high"},Gt={value:"critical"},Pt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Xt={value:"active"},Wt={value:"inactive"},Yt={value:"archived"},Zt={class:"md:col-span-2 pt-4 border-t border-gray-200 dark:border-gray-700"},er={class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3"},tr={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rr={class:"md:col-span-2 pt-4 border-t border-gray-200 dark:border-gray-700"},ar={class:"flex items-center cursor-pointer"},or={class:"ml-3 text-sm text-gray-700 dark:text-gray-300"},sr={class:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200 dark:border-gray-700"},lr={type:"submit",class:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-sm font-medium text-white transition-colors"},dr={__name:"CompetitorModal",props:{competitor:{type:Object,default:null},currentBusiness:{type:Object,default:null},panelType:{type:String,default:"business"}},emits:["close","submit"],setup(e,{emit:r}){const{t:o}=a(),s=e,l=r,d=["Toshkent shahri","Toshkent viloyati","Andijon viloyati","Buxoro viloyati","Farg'ona viloyati","Jizzax viloyati","Xorazm viloyati","Namangan viloyati","Navoiy viloyati","Qashqadaryo viloyati","Qoraqalpog'iston Respublikasi","Samarqand viloyati","Sirdaryo viloyati","Surxondaryo viloyati"],i=B({name:"",description:"",industry:"",location:"",region:"",district:"",threat_level:"medium",status:"active",instagram_handle:"",telegram_handle:"",facebook_page:"",tiktok_handle:"",auto_monitor:!0,check_frequency_hours:24,global_competitor_id:null}),n=c(!1),g=c(!1),y=c([]),k=c(null);let C=null,U=null;const A=()=>{C&&(clearTimeout(C),C=null),U&&(U.abort(),U=null);const e=i.name?.trim();if(!e||e.length<3)return y.value=[],n.value=!1,void(g.value=!1);n.value=!0,C=setTimeout(async()=>{U=new AbortController;try{const r="business"===s.panelType?"/business":"/marketing",a=await t.get(`${r}/competitors/search-global`,{params:{q:e},signal:U.signal});if(i.name?.trim()===e){const e=a.data;Array.isArray(e)?(y.value=e,g.value=e.length>0):(y.value=[],g.value=!1)}}catch(r){"CanceledError"!==r.name&&r.code,y.value=[],g.value=!1}finally{n.value=!1,U=null}},500)},H=()=>{k.value=null,i.global_competitor_id=null},S=()=>{setTimeout(()=>{g.value=!1},200)};z(()=>s.competitor,e=>{e?(Object.assign(i,e),k.value=null):(Object.assign(i,{name:"",description:"",industry:s.currentBusiness?.industry_name||"",location:s.currentBusiness?.region||"",region:"",district:"",threat_level:"medium",status:"active",instagram_handle:"",telegram_handle:"",facebook_page:"",tiktok_handle:"",auto_monitor:!0,check_frequency_hours:24,global_competitor_id:null}),k.value=null)},{immediate:!0});const q=()=>{l("submit",{...i})};return(t,r)=>(M(),$(V,{to:"body"},[m("div",et,[m("div",tt,[m("div",{class:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:r[0]||(r[0]=e=>t.$emit("close"))}),m("div",rt,[m("div",at,[m("h3",ot,p(e.competitor?x(o)("competitors.modal.edit_title"):x(o)("competitors.modal.add_title")),1),m("button",{onClick:r[1]||(r[1]=e=>t.$emit("close")),class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},[...r[13]||(r[13]=[m("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),m("form",{onSubmit:O(q,["prevent"]),class:"p-6"},[m("div",st,[m("div",lt,[m("label",dt,p(x(o)("competitors.modal.name"))+" *",1),m("div",it,[h(m("input",{"onUpdate:modelValue":r[2]||(r[2]=e=>i.name=e),onInput:A,onFocus:r[3]||(r[3]=e=>g.value=!0),onBlur:S,type:"text",required:"",autocomplete:"off",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:x(o)("competitors.modal.name_placeholder")},null,40,nt),[[f,i.name]]),n.value?(M(),u("div",ct,[...r[14]||(r[14]=[m("svg",{class:"w-5 h-5 animate-spin text-gray-400",fill:"none",viewBox:"0 0 24 24"},[m("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),m("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):b("",!0)]),g.value&&y.value.length>0?(M(),u("div",gt,[m("div",ut,p(x(o)("competitors.modal.found_count",{count:y.value.length})),1),(M(!0),u(_,null,j(y.value,e=>(M(),u("button",{key:e.id,type:"button",onMousedown:O(t=>(e=>{k.value=e,g.value=!1,y.value=[],i.name=e.name,i.description=e.description||"",i.industry=e.industry||"",i.region=e.region||"",i.district=e.district||"",i.instagram_handle=e.instagram_handle||"",i.telegram_handle=e.telegram_handle||"",i.global_competitor_id=e.id})(e),["prevent"]),class:"w-full px-4 py-3 text-left hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b border-gray-100 dark:border-gray-700 last:border-0"},[m("div",pt,[m("div",xt,[m("div",yt,[m("span",bt,p(e.name),1),e.same_industry?(M(),u("span",kt,p(x(o)("competitors.modal.same_industry")),1)):b("",!0),e.same_region?(M(),u("span",vt,p(x(o)("competitors.modal.same_region")),1)):b("",!0)]),m("div",ht,[e.industry?(M(),u("span",ft,p(e.industry),1)):b("",!0),e.industry&&e.region?(M(),u("span",wt,"•")):b("",!0),e.region?(M(),u("span",_t,p(e.region),1)):b("",!0),e.district?(M(),u("span",jt,", "+p(e.district),1)):b("",!0)]),e.instagram_handle||e.telegram_handle?(M(),u("div",Ct,[e.instagram_handle?(M(),u("span",Mt," @"+p(e.instagram_handle.replace("@","")),1)):b("",!0),e.telegram_handle?(M(),u("span",Bt," @"+p(e.telegram_handle.replace("@","")),1)):b("",!0)])):b("",!0)]),m("div",zt,[e.has_swot?(M(),u("div",$t,[r[15]||(r[15]=m("svg",{class:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v(" "+p(x(o)("competitors.modal.swot_available")),1)])):b("",!0),e.swot_contributors_count>0?(M(),u("div",Ot,p(x(o)("competitors.modal.business_count",{count:e.swot_contributors_count})),1)):b("",!0)])])],40,mt))),128))])):b("",!0),k.value?(M(),u("div",Tt,[m("div",Vt,[m("div",Ut,[r[16]||(r[16]=m("svg",{class:"w-5 h-5 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),m("div",null,[m("p",At,p(x(o)("competitors.modal.auto_loaded")),1),m("p",Ht,p(x(o)("competitors.modal.from_database")),1)])]),m("button",{type:"button",onClick:H,class:"text-emerald-600 dark:text-emerald-400 hover:text-emerald-800 dark:hover:text-emerald-300"},[...r[17]||(r[17]=[m("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):b("",!0)]),m("div",St,[m("label",qt,p(x(o)("competitors.modal.description")),1),h(m("textarea",{"onUpdate:modelValue":r[4]||(r[4]=e=>i.description=e),rows:"3",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none",placeholder:x(o)("competitors.modal.description_placeholder")},null,8,Lt),[[f,i.description]])]),m("div",null,[m("label",Ft,p(x(o)("competitors.modal.region")),1),h(m("select",{"onUpdate:modelValue":r[5]||(r[5]=e=>i.region=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[m("option",It,p(x(o)("competitors.modal.select")),1),(M(),u(_,null,j(d,e=>m("option",{key:e,value:e},p(e),9,Nt)),64))],512),[[w,i.region]])]),m("div",null,[m("label",Et,p(x(o)("competitors.modal.district")),1),h(m("input",{"onUpdate:modelValue":r[6]||(r[6]=e=>i.district=e),type:"text",placeholder:x(o)("competitors.modal.district_placeholder"),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,8,Dt),[[f,i.district]])]),m("div",null,[m("label",Jt,p(x(o)("competitors.modal.threat_level"))+" *",1),h(m("select",{"onUpdate:modelValue":r[7]||(r[7]=e=>i.threat_level=e),required:"",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[m("option",Kt,p(x(o)("competitors.modal.low")),1),m("option",Qt,p(x(o)("competitors.modal.medium")),1),m("option",Rt,p(x(o)("competitors.modal.high")),1),m("option",Gt,p(x(o)("competitors.modal.critical")),1)],512),[[w,i.threat_level]])]),m("div",null,[m("label",Pt,p(x(o)("competitors.modal.status")),1),h(m("select",{"onUpdate:modelValue":r[8]||(r[8]=e=>i.status=e),class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},[m("option",Xt,p(x(o)("competitors.modal.active")),1),m("option",Wt,p(x(o)("competitors.modal.inactive")),1),m("option",Yt,p(x(o)("competitors.modal.archived")),1)],512),[[w,i.status]])]),m("div",Zt,[m("h4",er,p(x(o)("competitors.modal.platforms")),1),m("div",tr,[m("div",null,[r[18]||(r[18]=m("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},"Instagram",-1)),h(m("input",{"onUpdate:modelValue":r[9]||(r[9]=e=>i.instagram_handle=e),type:"text",placeholder:"@username",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[f,i.instagram_handle]])]),m("div",null,[r[19]||(r[19]=m("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5"},"Telegram",-1)),h(m("input",{"onUpdate:modelValue":r[10]||(r[10]=e=>i.telegram_handle=e),type:"text",placeholder:"@username",class:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl text-sm text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-indigo-500 focus:border-transparent"},null,512),[[f,i.telegram_handle]])])])]),m("div",rr,[m("label",ar,[h(m("input",{"onUpdate:modelValue":r[11]||(r[11]=e=>i.auto_monitor=e),type:"checkbox",class:"w-4 h-4 rounded border-gray-300 dark:border-gray-600 text-indigo-600 focus:ring-indigo-500"},null,512),[[T,i.auto_monitor]]),m("span",or,p(x(o)("competitors.modal.auto_monitor")),1)])])]),m("div",sr,[m("button",{type:"button",onClick:r[12]||(r[12]=e=>t.$emit("close")),class:"px-4 py-2.5 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 transition-colors"},p(x(o)("competitors.modal.cancel")),1),m("button",lr,p(e.competitor?x(o)("competitors.modal.save"):x(o)("competitors.modal.add")),1)])],32)])])])]))}},ir={__name:"Index",props:{competitors:{type:[Array,Object],default:()=>[]},stats:{type:Object,default:()=>({})},currentBusiness:{type:Object,default:null},panelType:{type:String,required:!0,validator:e=>["business","marketing","finance","operator","saleshead"].includes(e)}},setup(e){const{t:t}=a(),u=e,m=g(()=>({business:s,marketing:l,finance:d,operator:i,saleshead:n}[u.panelType]||o)),p=g(()=>"saleshead"===u.panelType),v=c(!1),h=c(null),f=()=>"/"+("saleshead"===u.panelType?"sales-head":u.panelType),w=()=>{h.value=null,v.value=!0},_=e=>{h.value=e,v.value=!0},j=()=>{v.value=!1,h.value=null},C=e=>{const t=f();h.value?r.put(`${t}/competitors/${h.value.id}`,e,{onSuccess:()=>j()}):r.post(`${t}/competitors`,e,{onSuccess:()=>j()})},B=e=>{if(confirm(t("competitors.confirm_delete",{name:e.name}))){const t=f();r.delete(`${t}/competitors/${e.id}`)}};return(r,a)=>(M(),$(U(m.value),{title:x(t)("competitors.title")},{default:k(()=>[y(Ze,{competitors:e.competitors,stats:e.stats,"current-business":e.currentBusiness,"panel-type":e.panelType,"read-only":p.value,onAdd:w,onEdit:_,onDelete:B},null,8,["competitors","stats","current-business","panel-type","read-only"]),v.value&&!p.value?(M(),$(dr,{key:0,competitor:h.value,"current-business":e.currentBusiness,onClose:j,onSubmit:C},null,8,["competitor","current-business"])):b("",!0)]),_:1},8,["title"]))}};export{ir as default};
