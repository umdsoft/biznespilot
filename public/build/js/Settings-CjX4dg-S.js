import{r as e,v as a,x as l,L as r,y as s,A as t,C as n,D as o,J as i,K as u,E as c,O as d,z as g,N as m,T as p,I as b}from"./chunk-CpmtkKLp.js";import{h,l as y,r as f}from"./chunk-BhZp3z4u.js";import{_ as x}from"./chunk-BHCorYK2.js";import{_ as k}from"./chunk-BCo6x5W8.js";import{r as v}from"./chunk-BuJDoypK.js";import{r as _}from"./chunk-D7oP9pDe.js";import{a as j}from"./chunk-eMHYSAeQ.js";import{r as w}from"./chunk-C2r_KHf6.js";import{r as C}from"./chunk-DCXiFUg-.js";import{r as q}from"./chunk-beXL1A--.js";import{r as I}from"./chunk-dqIIyBTR.js";import{r as z}from"./chunk-BB7xsSUf.js";import{o as O,p as T}from"./chunk-D7SyfRoT.js";import"./chunk-3cs9K1fB.js";import"./chunk-BG5DB3cD.js";import"./chunk-CdKrFGoA.js";import"./chunk-DvBKKKMs.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-Bsc1JRL5.js";const A={class:"py-6"},K={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},S={class:"mb-6"},J={class:"flex items-center gap-3"},N={class:"space-y-4"},B=["onClick"],D={class:"flex items-center gap-3"},E={class:"font-medium text-white"},L={class:"text-sm text-gray-400"},M={class:"flex items-center gap-3"},P=["onClick"],Q={key:0,class:"border-t border-gray-700 p-4 space-y-4"},V={class:"flex flex-wrap gap-2"},Y=["onClick"],$=["value","onChange"],F=["value"],G={key:0},H=["value","onChange"],R={key:1},U={class:"space-y-3"},W={key:0,class:"grid grid-cols-2 gap-4"},X=["value","onChange"],Z={key:1,class:"grid grid-cols-2 gap-4"},ee=["value","onChange"],ae=["value","onChange"],le={key:2,class:"grid grid-cols-2 gap-4"},re=["value","onChange"],se=k({__name:"Settings",props:{settings:{type:Object,default:()=>({})},alertTypes:{type:Object,default:()=>({})},channels:{type:Object,default:()=>({})},frequencies:{type:Object,default:()=>({})}},setup(k){const se=e(null),te={lead_followup:z,kpi_warning:I,target_reminder:C,penalty_warning:q,daily_summary:C,achievement:w,streak_warning:j,leaderboard_change:_},ne=e=>te[e]||O,oe=e=>({lead_followup:"text-purple-400",kpi_warning:"text-orange-400",target_reminder:"text-blue-400",penalty_warning:"text-red-400",daily_summary:"text-green-400",achievement:"text-yellow-400",streak_warning:"text-orange-400",leaderboard_change:"text-blue-400"}[e]||"text-gray-400"),ie=e=>["lead_followup","kpi_warning","leaderboard_change"].includes(e),ue=(e,a)=>{f.post(route("sales-head.alerts.settings.update"),{alert_type:e,is_enabled:a.is_enabled,conditions:a.conditions,recipients:a.recipients,channels:a.channels,frequency:a.frequency,schedule_time:a.schedule_time},{preserveScroll:!0,preserveState:!0})},ce=(e,a,l,r)=>{a.conditions||(a.conditions={}),a.conditions[l]=r,ue(e,a)};return(e,f)=>(o(),a(x,null,{default:l(()=>[r(t(h),{title:"Alert sozlamalari"}),s("div",A,[s("div",K,[s("div",S,[s("div",J,[r(t(y),{href:e.route("sales-head.alerts.index"),class:"p-2 rounded-lg hover:bg-gray-700 text-gray-400 transition-colors"},{default:l(()=>[r(t(v),{class:"w-5 h-5"})]),_:1},8,["href"]),f[0]||(f[0]=s("div",null,[s("h1",{class:"text-2xl font-bold text-white"},"Alert sozlamalari"),s("p",{class:"text-gray-400 mt-1"}," Bildirishnoma turlarini sozlash ")],-1))])]),s("div",N,[(o(!0),n(i,null,u(k.settings,(e,h)=>{return o(),n("div",{key:h,class:"bg-gray-800 rounded-xl overflow-hidden"},[s("div",{class:"flex items-center justify-between p-4 cursor-pointer hover:bg-gray-700/50 transition-colors",onClick:e=>(e=>{se.value=se.value===e?null:e})(h)},[s("div",D,[s("div",{class:c(["w-10 h-10 rounded-full flex items-center justify-center",(y=h,{lead_followup:"bg-purple-500/20",kpi_warning:"bg-orange-500/20",target_reminder:"bg-blue-500/20",penalty_warning:"bg-red-500/20",daily_summary:"bg-green-500/20",achievement:"bg-yellow-500/20",streak_warning:"bg-orange-500/20",leaderboard_change:"bg-blue-500/20"}[y]||"bg-gray-500/20")])},[(o(),a(d(ne(h)),{class:c(["w-5 h-5",oe(h)])},null,8,["class"]))],2),s("div",null,[s("h3",E,g(k.alertTypes[h]?.name||h),1),s("p",L,g(k.alertTypes[h]?.description||""),1)])]),s("div",M,[s("button",{onClick:m(a=>((e,a)=>{a.is_enabled=!a.is_enabled,ue(e,a)})(h,e),["stop"]),class:c(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors",e.is_enabled?"bg-blue-600":"bg-gray-600"])},[s("span",{class:c(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",e.is_enabled?"translate-x-6":"translate-x-1"])},null,2)],10,P),r(t(T),{class:c(["w-5 h-5 text-gray-400 transition-transform",{"rotate-180":se.value===h}])},null,8,["class"])])],8,B),r(p,{name:"expand"},{default:l(()=>[se.value===h?(o(),n("div",Q,[s("div",null,[f[1]||(f[1]=s("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Yuborish kanallari ",-1)),s("div",V,[(o(!0),n(i,null,u(k.channels,(a,l)=>(o(),n("button",{key:l,onClick:a=>((e,a,l)=>{a.channels||(a.channels=[]);const r=a.channels.indexOf(l);r>-1?a.channels.splice(r,1):a.channels.push(l),ue(e,a)})(h,e,l),class:c(["px-3 py-1.5 text-sm rounded-lg border transition-colors",e.channels?.includes(l)?"bg-blue-500/20 border-blue-500 text-blue-400":"bg-gray-700 border-gray-600 text-gray-400 hover:border-gray-500"])},g(a),11,Y))),128))])]),s("div",null,[f[2]||(f[2]=s("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Chastotasi ",-1)),s("select",{value:e.frequency,onChange:a=>((e,a,l)=>{a.frequency=l,ue(e,a)})(h,e,a.target.value),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},[(o(!0),n(i,null,u(k.frequencies,(e,a)=>(o(),n("option",{key:a,value:a},g(e),9,F))),128))],40,$)]),"daily"===e.frequency?(o(),n("div",G,[f[3]||(f[3]=s("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Vaqti ",-1)),s("input",{type:"time",value:e.schedule_time,onChange:a=>((e,a,l)=>{a.schedule_time=l,ue(e,a)})(h,e,a.target.value),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"},null,40,H)])):b("",!0),ie(h)?(o(),n("div",R,[f[8]||(f[8]=s("label",{class:"block text-sm font-medium text-gray-300 mb-2"}," Qoidalar ",-1)),s("div",U,["lead_followup"===h?(o(),n("div",W,[s("div",null,[f[4]||(f[4]=s("label",{class:"block text-xs text-gray-400 mb-1"}," Jarimadan necha soat oldin ogohlantirish ",-1)),s("input",{type:"number",value:e.conditions?.hours_before_penalty||4,onChange:a=>ce(h,e,"hours_before_penalty",parseInt(a.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"24"},null,40,X)])])):b("",!0),"kpi_warning"===h?(o(),n("div",Z,[s("div",null,[f[5]||(f[5]=s("label",{class:"block text-xs text-gray-400 mb-1"}," KPI chegarasi (%) ",-1)),s("input",{type:"number",value:e.conditions?.kpi_threshold||50,onChange:a=>ce(h,e,"kpi_threshold",parseInt(a.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"},null,40,ee)]),s("div",null,[f[6]||(f[6]=s("label",{class:"block text-xs text-gray-400 mb-1"}," Ketma-ket kunlar ",-1)),s("input",{type:"number",value:e.conditions?.consecutive_days||3,onChange:a=>ce(h,e,"consecutive_days",parseInt(a.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"7"},null,40,ae)])])):b("",!0),"leaderboard_change"===h?(o(),n("div",le,[s("div",null,[f[7]||(f[7]=s("label",{class:"block text-xs text-gray-400 mb-1"}," Minimal pozitsiya o'zgarishi ",-1)),s("input",{type:"number",value:e.conditions?.min_position_change||3,onChange:a=>ce(h,e,"min_position_change",parseInt(a.target.value)),class:"w-full bg-gray-700 border-gray-600 text-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",min:"1",max:"10"},null,40,re)])])):b("",!0)])])):b("",!0)])):b("",!0)]),_:2},1024)]);var y}),128))])])])]),_:1}))}},[["__scopeId","data-v-01cafb2d"]]);export{se as default};
