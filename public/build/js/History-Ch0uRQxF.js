import{b as D,r as T,v as k,x as f,z as t,C as d,D as y,y as g,A as i,H as n,J as b,L as V,K as v,F as s,G as p,I as x,B as m,M as B,E}from"./chunk-KPSVwAyv.js";import{l as _}from"./chunk-BVrjkT6E.js";import{_ as J,a as K,s as A}from"./chunk-S7b6IQvx.js";import{_ as O}from"./chunk-DjNoE40N.js";import{_ as P}from"./chunk-BdP2VzIX.js";import{r as Y}from"./chunk-J14gS6og.js";import{r as X}from"./chunk-C1aowSOa.js";import{r as Z}from"./chunk-Dfha1x8d.js";import{r as L}from"./chunk-Cw_2vanC.js";import{r as N}from"./chunk-CYw1XsNK.js";import{r as j}from"./chunk-Du8OpaBP.js";import"./app-906_W7J6.js";import"./chunk-BvkwlYlD.js";import"./chunk-BgShz32H.js";import"./chunk-Qe-_4ASA.js";import"./chunk-Ch0Q6XPl.js";import"./chunk-BgOPVSvg.js";import"./chunk-qku2UxUN.js";import"./chunk-D5sR6A8B.js";import"./chunk-Dems4pAU.js";import"./chunk-D59q4lxq.js";import"./chunk-14qmXdHo.js";import"./chunk-DN454CZt.js";import"./chunk-CYZ54WJE.js";import"./chunk-D-7B8ZCD.js";const Q={class:"mb-8"},W={class:"flex items-center justify-between flex-wrap gap-4"},tt={class:"flex items-center gap-3"},et={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},rt={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},at={class:"text-2xl font-bold text-gray-900 dark:text-white"},st={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},ot={class:"text-2xl font-bold text-green-600"},dt={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},lt={class:"text-2xl font-bold text-blue-600"},nt={class:"bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 p-4"},it={class:"text-2xl font-bold text-amber-600"},gt={class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 mb-6"},ut={class:"flex flex-wrap gap-4"},yt={class:"flex items-center gap-2"},pt={class:"flex-1 min-w-[200px]"},xt={key:0,class:"space-y-4"},ct={class:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between"},bt={class:"flex items-center gap-3"},mt={class:"font-medium text-gray-900 dark:text-white"},ht={class:"flex items-center gap-2 mt-1"},kt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},vt={class:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full"},_t={class:"flex items-center gap-4"},wt={key:0,class:"flex items-center gap-1"},Ct={class:"text-right"},$t={class:"text-sm font-medium text-gray-900 dark:text-white"},Dt={class:"text-xs text-gray-500"},Tt=["onClick"],Vt={key:0,class:"p-4 bg-gray-50 dark:bg-gray-900/50"},Bt={key:0,class:"mb-4"},Lt={class:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},Nt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},jt={key:1,class:"mb-4"},Mt={class:"space-y-2"},St={class:"text-xs font-medium text-purple-600 mb-1"},qt={class:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},Ft={key:2,class:"mb-4"},Ut={class:"flex flex-wrap gap-2"},Ht={class:"flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700"},Gt={class:"flex gap-2"},It=["onClick"],Rt=["onClick"],zt={class:"flex items-center gap-2"},Et={class:"flex gap-1"},Jt=["onClick"],Kt={key:1,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-12 text-center"},At={key:2,class:"mt-6 flex justify-center"},Ot={class:"flex gap-1"},ke={__name:"History",props:{generations:{type:Object,default:()=>({data:[]})},stats:{type:Object,default:()=>({total:0,published:0,total_tokens:0,total_cost:0})},panelType:{type:String,default:"business"}},setup(u){const w=u,M=D(()=>({business:O,marketing:P})[w.panelType]||J),c=T([]),o=T({status:"",content_type:"",date_from:"",date_to:"",search:""}),S={pending:"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400",generating:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",completed:"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",published:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",failed:"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"},q={pending:N,generating:L,completed:Z,published:X,failed:K},F={post:"Post",story:"Story",reel:"Reel",ad:"Reklama",carousel:"Carousel",article:"Maqola"},U={engage:"Faollashtirish",sell:"Sotish",educate:"Ta'lim",inspire:"Ilhomlantirish",announce:"E'lon",entertain:"Ko'ngil ochar"},C=D(()=>{let a=[...w.generations.data||[]];if(o.value.status&&(a=a.filter(e=>e.status===o.value.status)),o.value.content_type&&(a=a.filter(e=>e.content_type===o.value.content_type)),o.value.search){const e=o.value.search.toLowerCase();a=a.filter(r=>r.topic.toLowerCase().includes(e))}return o.value.date_from&&(a=a.filter(e=>new Date(e.created_at)>=new Date(o.value.date_from))),o.value.date_to&&(a=a.filter(e=>new Date(e.created_at)<=new Date(o.value.date_to))),a}),$=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a?.toString()||"0",H=a=>new Date(a).toLocaleDateString("uz-UZ",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=a=>{const e=c.value.indexOf(a);e===-1?c.value.push(a):c.value.splice(e,1)},I=a=>{navigator.clipboard.writeText(a)},R=async a=>{try{await axios.post(route("business.marketing.content-ai.history.rate",a.id),{status:"published"}),a.status="published"}catch(e){console.error("Update failed:",e)}},z=async(a,e)=>{try{await axios.post(route("business.marketing.content-ai.history.rate",a.id),{rating:e}),a.rating=e}catch(r){console.error("Rating failed:",r)}};return(a,e)=>(s(),k(B(M.value),{title:"Generatsiya Tarixi"},{default:f(()=>[t("div",Q,[t("div",W,[t("div",null,[t("div",tt,[g(i(_),{href:a.route("business.marketing.content-ai.index"),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-all"},{default:f(()=>[g(i(Y),{class:"w-5 h-5 text-gray-600 dark:text-gray-400"})]),_:1},8,["href"]),e[5]||(e[5]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100"}," Generatsiya Tarixi "),t("p",{class:"mt-1 text-gray-600 dark:text-gray-400"}," Barcha yaratilgan kontentlar ")],-1))])])])]),t("div",et,[t("div",rt,[e[6]||(e[6]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami generatsiya",-1)),t("p",at,n(u.stats.total),1)]),t("div",st,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Nashr qilingan",-1)),t("p",ot,n(u.stats.published),1)]),t("div",dt,[e[8]||(e[8]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami tokenlar",-1)),t("p",lt,n($(u.stats.total_tokens)),1)]),t("div",nt,[e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Jami xarajat",-1)),t("p",it,"$"+n(u.stats.total_cost?.toFixed(2)||"0.00"),1)])]),t("div",gt,[t("div",ut,[t("div",null,[b(t("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>o.value.status=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...e[10]||(e[10]=[t("option",{value:""},"Barcha holatlar",-1),t("option",{value:"completed"},"Yaratilgan",-1),t("option",{value:"published"},"Nashr qilingan",-1),t("option",{value:"failed"},"Xatolik",-1)])],512),[[V,o.value.status]])]),t("div",null,[b(t("select",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.value.content_type=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},[...e[11]||(e[11]=[t("option",{value:""},"Barcha turlar",-1),t("option",{value:"post"},"Post",-1),t("option",{value:"story"},"Story",-1),t("option",{value:"reel"},"Reel",-1),t("option",{value:"ad"},"Reklama",-1)])],512),[[V,o.value.content_type]])]),t("div",yt,[b(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=r=>o.value.date_from=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.date_from]]),e[12]||(e[12]=t("span",{class:"text-gray-500"},"â€”",-1)),b(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=r=>o.value.date_to=r),class:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.date_to]])]),t("div",pt,[b(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>o.value.search=r),placeholder:"Mavzu bo'yicha qidirish...",class:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 text-sm"},null,512),[[v,o.value.search]])])])]),C.value.length?(s(),d("div",xt,[(s(!0),d(p,null,x(C.value,r=>(s(),d("div",{key:r.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden"},[t("div",ct,[t("div",bt,[t("div",{class:m(["w-10 h-10 rounded-lg flex items-center justify-center",S[r.status]])},[(s(),k(B(q[r.status]),{class:"w-5 h-5"}))],2),t("div",null,[t("h4",mt,n(r.topic),1),t("div",ht,[t("span",kt,n(H(r.created_at)),1),t("span",ft,n(F[r.content_type]),1),t("span",vt,n(U[r.purpose]),1)])])]),t("div",_t,[r.rating?(s(),d("div",wt,[(s(),d(p,null,x(5,l=>g(i(j),{key:l,class:m(["w-4 h-4",l<=r.rating?"text-yellow-400 fill-yellow-400":"text-gray-300"])},null,8,["class"])),64))])):y("",!0),t("div",Ct,[t("p",$t,n($(r.input_tokens+r.output_tokens))+" tokens ",1),t("p",Dt,"$"+n(r.cost_usd?.toFixed(4)||"0.0000"),1)]),t("button",{onClick:l=>G(r.id),class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all"},[g(i(A),{class:m(["w-5 h-5 text-gray-400 transition-transform",c.value.includes(r.id)?"rotate-180":""])},null,8,["class"])],8,Tt)])]),c.value.includes(r.id)?(s(),d("div",Vt,[r.generated_content?(s(),d("div",Bt,[e[13]||(e[13]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Yaratilgan kontent:",-1)),t("div",Lt,[t("p",Nt,n(r.generated_content),1)])])):y("",!0),r.generated_variations?.length>1?(s(),d("div",jt,[e[14]||(e[14]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Variantlar:",-1)),t("div",Mt,[(s(!0),d(p,null,x(r.generated_variations,(l,h)=>(s(),d("div",{key:h,class:"p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"},[t("p",St,"Variant "+n(h+1),1),t("p",qt,n(l),1)]))),128))])])):y("",!0),r.generated_hashtags?.length?(s(),d("div",Ft,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Hashtaglar:",-1)),t("div",Ut,[(s(!0),d(p,null,x(r.generated_hashtags,l=>(s(),d("span",{key:l,class:"px-2 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full"}," #"+n(l),1))),128))])])):y("",!0),t("div",Ht,[t("div",Gt,[t("button",{onClick:l=>I(r.generated_content),class:"px-3 py-1.5 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-all"}," Nusxalash ",8,It),r.status!=="published"?(s(),d("button",{key:0,onClick:l=>R(r),class:"px-3 py-1.5 text-sm bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-all"}," Nashr qilindi ",8,Rt)):y("",!0)]),t("div",zt,[e[16]||(e[16]=t("span",{class:"text-sm text-gray-500"},"Baholash:",-1)),t("div",Et,[(s(),d(p,null,x(5,l=>t("button",{key:l,onClick:h=>z(r,l),class:"p-0.5 hover:scale-110 transition-transform"},[g(i(j),{class:m(["w-5 h-5",l<=(r.rating||0)?"text-yellow-400 fill-yellow-400":"text-gray-300 dark:text-gray-600"])},null,8,["class"])],8,Jt)),64))])])])])):y("",!0)]))),128))])):(s(),d("div",Kt,[g(i(N),{class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"},"Hali generatsiya yo'q",-1)),e[19]||(e[19]=t("p",{class:"text-gray-500 dark:text-gray-400 mb-6"}," Content AI orqali yangi kontent yarating va tarix shu yerda ko'rinadi. ",-1)),g(i(_),{href:a.route("business.marketing.content-ai.index"),class:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all"},{default:f(()=>[g(i(L),{class:"w-5 h-5"}),e[17]||(e[17]=E(" Kontent yaratish ",-1))]),_:1},8,["href"])])),u.generations.links?.length>3?(s(),d("div",At,[t("nav",Ot,[(s(!0),d(p,null,x(u.generations.links,r=>(s(),k(i(_),{key:r.label,href:r.url||"#",class:m(["px-4 py-2 rounded-lg text-sm font-medium transition-all",r.active?"bg-purple-600 text-white":r.url?"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":"bg-gray-100 dark:bg-gray-800 text-gray-400 cursor-not-allowed"]),innerHTML:r.label},null,8,["href","class","innerHTML"]))),128))])])):y("",!0)]),_:1}))}};export{ke as default};
