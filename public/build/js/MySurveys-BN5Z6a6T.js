import{h as w,l as B,a as M}from"./chunk-BYRtWSr0.js";import{_ as j}from"./chunk-CvbzrQjU.js";import{b as y}from"./chunk-D6nU8-nU.js";import{r as k}from"./chunk-Rs1WNzbn.js";import{r as z}from"./chunk-LBbTbQSS.js";import{r as C}from"./chunk-Ba8J67bG.js";import{r as p,o as S,v as $,x as f,y as o,z as e,A as n,D as s,C as m,B as h,E as r,H as d,F as N,G as V,L as u}from"./chunk-BcTZxe-J.js";import"./app-CPufef6f.js";import"./chunk-C1xeNfMu.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-BHX0ueEB.js";const E={class:"space-y-6"},H={class:"flex items-center justify-between"},q=["disabled"],A={key:0,class:"flex items-center justify-center py-12"},D={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4"},F={class:"text-red-800 dark:text-red-400"},L={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},T={class:"p-6"},Y={class:"flex items-start justify-between mb-4"},G={key:0,class:"flex items-center gap-1 text-xs text-purple-600 dark:text-purple-400"},O={class:"font-semibold text-gray-900 dark:text-white mb-2"},I={key:0,class:"text-sm text-gray-600 dark:text-gray-400 mb-4 line-clamp-2"},J={class:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4"},K={class:"flex items-center gap-1"},P={key:0,class:"flex items-center gap-1"},Q={key:3,class:"bg-white dark:bg-gray-800 rounded-xl p-12 text-center shadow-sm"},R={class:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4"},ke={__name:"MySurveys",props:{currentBusiness:Object},setup(v){const x=v,l=p(!0),c=p([]),g=p(""),b=async()=>{if(!x.currentBusiness?.id){g.value="Biznes tanlanmagan",l.value=!1;return}l.value=!0,g.value="";try{const i=await M.get(`/api/v1/businesses/${x.currentBusiness.id}/hr/surveys/my-available`);c.value=i.data.data||[]}catch(i){console.error("Error fetching my surveys:",i),g.value=i.response?.data?.message||"So'rovnomalarni yuklashda xatolik"}finally{l.value=!1}},_=i=>({engagement:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",pulse:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",exit:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",onboarding:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900/30 dark:text-cyan-400","360_feedback":"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-400",custom:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"})[i]||"bg-gray-100 text-gray-800";return S(b),(i,t)=>(r(),$(j,{title:"Mening so'rovnomalarim"},{default:f(()=>[o(n(w),{title:"Mening so'rovnomalarim"}),e("div",E,[e("div",H,[t[1]||(t[1]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"}," Mening so'rovnomalarim "),e("p",{class:"text-gray-500 dark:text-gray-400 mt-1"}," Sizga tayinlangan so'rovnomalar ")],-1)),e("button",{onClick:b,disabled:l.value,class:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700"},[o(n(y),{class:h(["w-5 h-5",l.value?"animate-spin":""])},null,8,["class"]),t[0]||(t[0]=m(" Yangilash ",-1))],8,q)]),l.value?(r(),s("div",A,[o(n(y),{class:"w-8 h-8 animate-spin text-purple-600"})])):g.value?(r(),s("div",D,[e("p",F,d(g.value),1)])):c.value.length>0?(r(),s("div",L,[(r(!0),s(N,null,V(c.value,a=>(r(),s("div",{key:a.id,class:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden hover:shadow-md transition-shadow"},[e("div",T,[e("div",Y,[e("span",{class:h(["px-3 py-1 text-xs font-medium rounded-full",_(a.type)])},d(a.type_label),3),a.is_anonymous?(r(),s("div",G,[o(n(k),{class:"w-4 h-4"}),t[2]||(t[2]=m(" Anonim ",-1))])):u("",!0)]),e("h3",O,d(a.title),1),a.description?(r(),s("p",I,d(a.description),1)):u("",!0),e("div",J,[e("div",K,[o(n(z),{class:"w-4 h-4"}),m(" "+d(a.questions_count)+" savol ",1)]),a.end_date?(r(),s("div",P,[o(n(C),{class:"w-4 h-4"}),m(" "+d(a.end_date)+"gacha ",1)])):u("",!0)]),o(n(B),{href:`/hr/surveys/${a.id}/fill`,class:"block w-full text-center px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium transition-colors"},{default:f(()=>[...t[3]||(t[3]=[m(" So'rovnomani boshlash ",-1)])]),_:1},8,["href"])])]))),128))])):(r(),s("div",Q,[e("div",R,[o(n(k),{class:"w-10 h-10 text-green-600"})]),t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-2"}," Hammasi bajarilgan! ",-1)),t[5]||(t[5]=e("p",{class:"text-gray-500 dark:text-gray-400"}," Hozircha sizga tayinlangan so'rovnomalar yo'q. Yangi so'rovnomalar paydo bo'lganda bu yerda ko'rinadi. ",-1))]))])]),_:1}))}};export{ke as default};
