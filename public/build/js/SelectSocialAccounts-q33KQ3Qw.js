import{r as a,v as e,x as t,y as r,B as s,N as l,C as n,D as i,J as o,K as c,E as d,F as u,I as g,_ as m,z as k,L as p,A as b}from"./chunk-CpmtkKLp.js";import{l as y,r as x}from"./chunk-BhZp3z4u.js";import{_ as h}from"./chunk-DbFbpSR2.js";import"./chunk-D7SyfRoT.js";import"./app-C-ZlocOh.js";import"./chunk-BWiubfpN.js";import"./chunk-CouA7u-j.js";import"./chunk-DmrwHl-6.js";import"./chunk-De_qwhex.js";import"./chunk-eMHYSAeQ.js";import"./chunk-beXL1A--.js";import"./chunk-CAoK8Mdm.js";import"./chunk-BiBvtcLb.js";import"./chunk-DNKDGYPp.js";import"./chunk-BiW1c8q7.js";import"./chunk-CTIk0k8a.js";import"./chunk-dqIIyBTR.js";import"./chunk-CvscUVdi.js";import"./chunk-BvbZUszZ.js";import"./chunk-C9nNyFhC.js";import"./chunk-BYA8ViGa.js";import"./chunk-DCXiFUg-.js";import"./chunk-Bsc1JRL5.js";import"./chunk-BuJDoypK.js";const v={class:"max-w-4xl mx-auto py-8 px-4"},f={class:"mb-8"},w={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 text-center"},j={key:1,class:"space-y-3"},A={class:"flex items-center gap-4"},_=["value"],z={class:"flex-1"},C={class:"font-medium text-gray-900 dark:text-white"},S={class:"text-sm text-gray-500 dark:text-gray-400"},B={key:0,class:"text-right"},q={class:"text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 px-2 py-1 rounded"},M={class:"block cursor-pointer"},T={class:"flex items-center gap-4"},U={class:"mb-8"},F={key:0,class:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 text-center"},H={key:1,class:"space-y-3"},I={class:"flex items-center gap-4"},V=["value"],K=["src","alt"],O={key:1,class:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-full flex items-center justify-center"},L={class:"text-lg font-bold text-gray-500"},N={class:"flex-1"},P={class:"font-medium text-gray-900 dark:text-white"},D={class:"text-sm text-gray-500 dark:text-gray-400"},E={key:0,class:"text-xs text-gray-400 dark:text-gray-500 mt-1"},J={class:"block cursor-pointer"},Q={class:"flex items-center gap-4"},X={class:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700"},R=["disabled"],$={key:0,class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},G={__name:"SelectSocialAccounts",props:{adAccounts:{type:Array,default:()=>[]},instagramAccounts:{type:Array,default:()=>[]},facebookPages:{type:Array,default:()=>[]},currentBusiness:{type:Object,required:!0}},setup(G){const W=G,Y=a(W.adAccounts[0]?.id||null),Z=a(W.instagramAccounts[0]?.id||null),aa=a(!1),ea=a=>a?a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString():"0",ta=async()=>{if(Y.value||Z.value){aa.value=!0;try{const a=await fetch(route("business.settings.social.save-accounts"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")},body:JSON.stringify({selected_ad_account_id:Y.value,selected_instagram_id:Z.value})}),e=await a.json();a.ok&&e.success?x.visit(route("business.settings.index"),{preserveState:!1,onSuccess:()=>{}}):alert(e.error||"Xatolik yuz berdi")}catch(a){alert("Tarmoq xatoligi. Qayta urinib ko'ring.")}finally{aa.value=!1}}else alert("Kamida bitta akkaunt tanlashingiz kerak")};return(a,x)=>(i(),e(h,{title:"Akkaunt Tanlash"},{default:t(()=>[r("div",v,[x[12]||(x[12]=r("div",{class:"text-center mb-8"},[r("div",{class:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4"},[r("svg",{class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})])]),r("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-2"}," Akkaunt Tanlang "),r("p",{class:"text-gray-600 dark:text-gray-400"},[s(" Quyidagi akkauntlardan "),r("strong",null,"faqat bittasini"),s(" tanlang. Keyinchalik o'zgartirish uchun avval mavjud akkauntni uzishingiz kerak bo'ladi. ")])],-1)),x[13]||(x[13]=r("div",{class:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 mb-8"},[r("div",{class:"flex items-start gap-3"},[r("svg",{class:"w-5 h-5 text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),r("div",null,[r("h3",{class:"font-medium text-amber-800 dark:text-amber-300"},"Muhim!"),r("p",{class:"text-sm text-amber-700 dark:text-amber-400"},[s(" Har bir kategoriyadan faqat "),r("strong",null,"1 ta"),s(" akkaunt ulash mumkin. Tanlangan akkauntning "),r("strong",null,"oxirgi 6 oylik"),s(" ma'lumotlari avtomatik yuklanadi. ")])])])],-1)),r("form",{onSubmit:l(ta,["prevent"])},[r("div",f,[x[6]||(x[6]=r("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[r("span",{class:"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-4 h-4 text-blue-600 dark:text-blue-400",fill:"currentColor",viewBox:"0 0 24 24"},[r("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})])]),s(" Facebook Ads Account ")],-1)),0===G.adAccounts.length?(i(),n("div",w,[...x[4]||(x[4]=[r("p",{class:"text-gray-500 dark:text-gray-400"},"Hech qanday Ad Account topilmadi",-1)])])):(i(),n("div",j,[(i(!0),n(o,null,c(G.adAccounts,a=>(i(),n("label",{key:a.id,class:"block cursor-pointer"},[r("div",{class:d(["border rounded-xl p-4 transition-all",Y.value===a.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[r("div",A,[u(r("input",{type:"radio",name:"ad_account",value:a.id,"onUpdate:modelValue":x[0]||(x[0]=a=>Y.value=a),class:"w-4 h-4 text-blue-600"},null,8,_),[[m,Y.value]]),r("div",z,[r("p",C,k(a.name),1),r("p",S," ID: "+k(a.id)+" · "+k(a.currency),1)]),a.business_name?(i(),n("div",B,[r("span",q,k(a.business_name),1)])):g("",!0)])],2)]))),128)),r("label",M,[r("div",{class:d(["border rounded-xl p-4 transition-all",null===Y.value?"border-gray-500 bg-gray-50 dark:bg-gray-800 ring-2 ring-gray-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300"])},[r("div",T,[u(r("input",{type:"radio",name:"ad_account",value:null,"onUpdate:modelValue":x[1]||(x[1]=a=>Y.value=a),class:"w-4 h-4 text-gray-600"},null,512),[[m,Y.value]]),x[5]||(x[5]=r("p",{class:"text-gray-600 dark:text-gray-400"},"Ad Account ulamaslik",-1))])],2)])]))]),r("div",U,[x[9]||(x[9]=r("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},[r("span",{class:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center"},[r("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[r("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})])]),s(" Instagram Business Account ")],-1)),0===G.instagramAccounts.length?(i(),n("div",F,[...x[7]||(x[7]=[r("p",{class:"text-gray-500 dark:text-gray-400"},"Hech qanday Instagram Business Account topilmadi",-1),r("p",{class:"text-xs text-gray-400 dark:text-gray-500 mt-1"}," Instagram Business Account ulash uchun Facebook Page bilan bog'langan bo'lishi kerak. ",-1)])])):(i(),n("div",H,[(i(!0),n(o,null,c(G.instagramAccounts,a=>(i(),n("label",{key:a.id,class:"block cursor-pointer"},[r("div",{class:d(["border rounded-xl p-4 transition-all",Z.value===a.id?"border-pink-500 bg-pink-50 dark:bg-pink-900/20 ring-2 ring-pink-500":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"])},[r("div",I,[u(r("input",{type:"radio",name:"instagram",value:a.id,"onUpdate:modelValue":x[2]||(x[2]=a=>Z.value=a),class:"w-4 h-4 text-pink-600"},null,8,V),[[m,Z.value]]),a.profile_picture_url?(i(),n("img",{key:0,src:a.profile_picture_url,alt:a.username,class:"w-12 h-12 rounded-full object-cover"},null,8,K)):(i(),n("div",O,[r("span",L,k(a.username?.charAt(0)?.toUpperCase()),1)])),r("div",N,[r("p",P,"@"+k(a.username),1),r("p",D,k(ea(a.followers_count))+" followers · "+k(ea(a.media_count))+" posts ",1),a.linked_page_name?(i(),n("p",E," Ulangan: "+k(a.linked_page_name),1)):g("",!0)])])],2)]))),128)),r("label",J,[r("div",{class:d(["border rounded-xl p-4 transition-all",null===Z.value?"border-gray-500 bg-gray-50 dark:bg-gray-800 ring-2 ring-gray-400":"border-gray-200 dark:border-gray-700 hover:border-gray-300"])},[r("div",Q,[u(r("input",{type:"radio",name:"instagram",value:null,"onUpdate:modelValue":x[3]||(x[3]=a=>Z.value=a),class:"w-4 h-4 text-gray-600"},null,512),[[m,Z.value]]),x[8]||(x[8]=r("p",{class:"text-gray-600 dark:text-gray-400"},"Instagram ulamaslik",-1))])],2)])]))]),r("div",X,[p(b(y),{href:a.route("business.settings.index"),class:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"},{default:t(()=>[...x[10]||(x[10]=[s(" Bekor qilish ",-1)])]),_:1},8,["href"]),r("button",{type:"submit",disabled:aa.value||!Y.value&&!Z.value,class:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[aa.value?(i(),n("svg",$,[...x[11]||(x[11]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):g("",!0),r("span",null,k(aa.value?"Saqlanmoqda...":"Ulash va Sinxronlash"),1)],8,R)])],32)])]),_:1}))}};export{G as default};
