import{h as q,r as w}from"./chunk-BYRtWSr0.js";import{_ as O}from"./chunk-D8H5eHXP.js";import{u as z}from"./app-CncQRLgv.js";import{r as U}from"./chunk-DVnlbxPa.js";import{r as A}from"./chunk-CoBrxO6j.js";import{a as I}from"./chunk-D58UsNjm.js";import{b as v,v as E,x as J,y as x,z as t,A as l,D as n,H as s,E as d,F as b,G as p,B as h,L as V}from"./chunk-BcTZxe-J.js";import"./chunk-BnC_-OK6.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const W={class:"space-y-6"},H={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},K={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Z={class:"text-sm text-gray-500 dark:text-gray-400"},G={class:"flex items-center gap-3"},P={class:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold min-w-[180px] text-center"},X={class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},Q={class:"grid grid-cols-7 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"},R={class:"grid grid-cols-7 auto-rows-fr"},tt={key:0,class:"h-full flex flex-col"},et={class:"flex-1 space-y-1 overflow-y-auto"},rt=["title"],at={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},st={class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},ot={class:"space-y-2"},dt={class:"flex items-center justify-between"},nt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},it={class:"flex items-center justify-between"},lt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},gt={class:"flex items-center justify-between"},yt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},ct={key:0,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden"},ut={class:"divide-y divide-gray-200 dark:divide-gray-700"},mt={class:"flex items-center justify-between"},xt={class:"flex items-center gap-3"},bt={class:"font-medium text-gray-900 dark:text-gray-100"},pt={class:"text-sm text-gray-500 dark:text-gray-400"},ht={class:"text-right"},vt={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},kt={class:"text-xs text-gray-500 dark:text-gray-400"},ft={key:1,class:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center"},Ht={__name:"Calendar",props:{requests:{type:Array,default:()=>[]},month:{type:Number,required:!0},year:{type:Number,required:!0}},setup(u){const{t:m}=z(),o=u,D=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],S=["Du","Se","Cho","Pa","Ju","Sha","Ya"],T=v(()=>D[o.month-1]),C=v(()=>{const a=new Date(o.year,o.month-1,1),r=new Date(o.year,o.month,0).getDate(),g=a.getDay(),i=[];for(let y=0;y<g;y++)i.push({day:null,date:null,leaves:[]});for(let y=1;y<=r;y++){const c=new Date(o.year,o.month-1,y),Y=M(c),B=o.requests.filter(_=>{const F=new Date(_.start_date),L=new Date(_.end_date);return c>=F&&c<=L});i.push({day:y,date:Y,dateObj:c,leaves:B,isToday:$(c),isWeekend:c.getDay()===0||c.getDay()===6})}return i}),M=a=>{const e=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),g=String(a.getDate()).padStart(2,"0");return`${e}-${r}-${g}`},$=a=>{const e=new Date;return a.getDate()===e.getDate()&&a.getMonth()===e.getMonth()&&a.getFullYear()===e.getFullYear()},k=a=>{let e=o.month+a,r=o.year;e>12?(e=1,r++):e<1&&(e=12,r--),w.get(route("hr.leave.calendar"),{month:e,year:r},{preserveState:!0,preserveScroll:!0})},j=()=>{const a=new Date;w.get(route("hr.leave.calendar"),{month:a.getMonth()+1,year:a.getFullYear()},{preserveState:!0,preserveScroll:!0})},f=a=>({annual:"bg-blue-500",sick:"bg-red-500",family:"bg-purple-500",unpaid:"bg-gray-500"})[a]||"bg-green-500",N=v(()=>{const a={};return o.requests.forEach(e=>{a[e.user_id]||(a[e.user_id]={name:e.user_name,leaves:[]}),a[e.user_id].leaves.push(e)}),Object.values(a)});return(a,e)=>(d(),E(O,{title:l(m)("hr.leave_calendar")},{default:J(()=>[x(l(q),{title:l(m)("hr.leave_calendar")},null,8,["title"]),t("div",W,[t("div",H,[t("div",null,[t("h1",K,s(l(m)("hr.leave_calendar")),1),t("p",Z,s(l(m)("hr.team_members"))+" "+s(l(m)("hr.leave").toLowerCase()),1)]),t("div",G,[t("button",{onClick:e[0]||(e[0]=r=>k(-1)),class:"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[x(l(U),{class:"w-5 h-5 text-gray-700 dark:text-gray-300"})]),t("button",{onClick:j,class:"px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-medium text-gray-700 dark:text-gray-300"}," Bugun "),t("div",P,s(T.value)+" "+s(u.year),1),t("button",{onClick:e[1]||(e[1]=r=>k(1)),class:"p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},[x(l(A),{class:"w-5 h-5 text-gray-700 dark:text-gray-300"})])])]),t("div",X,[t("div",Q,[(d(),n(b,null,p(S,r=>t("div",{key:r,class:"p-3 text-center text-sm font-semibold text-gray-600 dark:text-gray-400"},s(r),1)),64))]),t("div",R,[(d(!0),n(b,null,p(C.value,(r,g)=>(d(),n("div",{key:g,class:h(["min-h-[120px] p-2 border-r border-b border-gray-200 dark:border-gray-700",r.isWeekend?"bg-gray-50 dark:bg-gray-900/30":"bg-white dark:bg-gray-800",r.isToday?"ring-2 ring-inset ring-purple-500":""])},[r.day?(d(),n("div",tt,[t("div",{class:h(["text-sm font-medium mb-2",r.isToday?"w-7 h-7 flex items-center justify-center rounded-full bg-purple-600 text-white":"text-gray-900 dark:text-gray-100"])},s(r.day),3),t("div",et,[(d(!0),n(b,null,p(r.leaves,i=>(d(),n("div",{key:i.id,class:h(["px-2 py-1 rounded text-xs text-white truncate cursor-pointer hover:opacity-80 transition-opacity",f(i.leave_type_code)]),title:`${i.user_name} - ${i.leave_type}`},s(i.user_name),11,rt))),128))])])):V("",!0)],2))),128))])]),t("div",at,[e[6]||(e[6]=t("div",{class:"bg-white dark:bg-gray-800 rounded-xl p-5 border border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3"},"Ta'til Turlari"),t("div",{class:"space-y-2"},[t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-4 h-4 rounded bg-blue-500"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Yillik Ta'til")]),t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-4 h-4 rounded bg-red-500"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Kasallik Ta'tili")]),t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-4 h-4 rounded bg-purple-500"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Oilaviy Ta'til")]),t("div",{class:"flex items-center gap-2"},[t("div",{class:"w-4 h-4 rounded bg-gray-500"}),t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"To'lovdan Tashqari")])])],-1)),t("div",st,[e[5]||(e[5]=t("h3",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-3"},"Statistika",-1)),t("div",ot,[t("div",dt,[e[2]||(e[2]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jami Ta'tillar:",-1)),t("span",nt,s(u.requests.length),1)]),t("div",it,[e[3]||(e[3]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Xodimlar:",-1)),t("span",lt,s(N.value.length),1)]),t("div",gt,[e[4]||(e[4]=t("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"Jami Kunlar:",-1)),t("span",yt,s(u.requests.reduce((r,g)=>r+g.total_days,0))+" kun ",1)])])])]),u.requests.length>0?(d(),n("div",ct,[e[7]||(e[7]=t("div",{class:"p-6 border-b border-gray-200 dark:border-gray-700"},[t("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Ushbu Oyda Ta'tillar")],-1)),t("div",ut,[(d(!0),n(b,null,p(u.requests,r=>(d(),n("div",{key:r.id,class:"p-4 hover:bg-gray-50 dark:hover:bg-gray-900/50 transition-colors"},[t("div",mt,[t("div",xt,[t("div",{class:h(["w-3 h-3 rounded-full",f(r.leave_type_code)])},null,2),t("div",null,[t("p",bt,s(r.user_name),1),t("p",pt,s(r.leave_type),1)])]),t("div",ht,[t("p",vt,s(new Date(r.start_date).toLocaleDateString("uz-UZ"))+" - "+s(new Date(r.end_date).toLocaleDateString("uz-UZ")),1),t("p",kt,s(r.total_days)+" kun",1)])])]))),128))])])):(d(),n("div",ft,[x(l(I),{class:"w-12 h-12 mx-auto mb-4 text-gray-400 opacity-50"}),e[8]||(e[8]=t("p",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"Ushbu oyda ta'tillar yo'q",-1)),e[9]||(e[9]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Hozircha hech kim ta'tilda emas",-1))]))])]),_:1},8,["title"]))}};export{Ht as default};
