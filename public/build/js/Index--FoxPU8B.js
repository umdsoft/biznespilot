import{r as e,b as t,v as r,x as a,z as s,y as d,A as l,C as i,H as o,D as n,L as g,B as x,I as c,E as u,F as y,G as b,K as p,J as k}from"./chunk-7Urb0kxg.js";import{l as m,r as h,a as v}from"./chunk-DKkye6wf.js";import{_ as f}from"./chunk-NrbfQB88.js";import"./chunk-Dm-LAqtr.js";import"./app-DFslr8vl.js";import"./chunk-Di7Oc7TS.js";import"./chunk-Dg8ilgYs.js";import"./chunk-Rl16a4N0.js";import"./chunk-C1ExV0Y3.js";import"./chunk-DUcDuGHI.js";import"./chunk-C3XJH04c.js";import"./chunk-D2XW56yD.js";import"./chunk-DS-Zp4Qb.js";import"./chunk-Sfe4u6kO.js";import"./chunk-BAC6lhkp.js";import"./chunk-BugzYCIx.js";import"./chunk-ab1b1Fp4.js";import"./chunk-DhwSyUm1.js";import"./chunk-9PkX4iPz.js";import"./chunk-DOBCiesv.js";import"./chunk-YGW1Cp7-.js";import"./chunk-afst19KZ.js";import"./chunk-D4tA7yBb.js";const w={class:"max-w-[1800px] mx-auto"},j={class:"flex items-center justify-between mb-4"},_={class:"grid grid-cols-3 md:grid-cols-6 gap-2 mb-4"},M={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},B={class:"text-lg font-bold text-gray-900 dark:text-white"},C={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},z={class:"text-lg font-bold text-blue-600"},O={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},L={class:"text-lg font-bold text-green-600"},q={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},H={class:"text-lg font-bold text-purple-600"},A={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},U={class:"text-lg font-bold text-orange-600"},S={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 px-3 py-2"},V={class:"text-lg font-bold text-indigo-600"},T={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 mb-4"},D={class:"flex flex-wrap items-center justify-between gap-3 px-3 py-2 border-b border-gray-200 dark:border-gray-700"},I={class:"flex items-center gap-1"},J={class:"flex items-center gap-2"},K=["value"],Q={class:"overflow-x-auto"},Y={class:"w-full"},E={class:"divide-y divide-gray-100 dark:divide-gray-700"},F={class:"px-3 py-2"},G={class:"flex items-center gap-2"},X=["d"],Z={class:"min-w-0 flex-1"},$={class:"text-sm font-medium text-gray-900 dark:text-white truncate max-w-xs"},N={class:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-xs"},P={class:"px-3 py-2"},R={class:"px-3 py-2"},W={key:0,class:"text-xs"},ee={class:"font-medium text-gray-900 dark:text-white"},te={class:"text-gray-500 dark:text-gray-400"},re={key:1},ae={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-0.5"},se={class:"px-3 py-2"},de={key:0,class:"inline-flex px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},le={key:1,class:"inline-flex px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},ie={class:"px-3 py-2 text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap"},oe={class:"px-3 py-2 text-right"},ne=["onClick"],ge={key:0},xe={key:0,class:"flex items-center justify-between px-3 py-2 border-t border-gray-200 dark:border-gray-700"},ce={class:"text-xs text-gray-500 dark:text-gray-400"},ue={class:"flex items-center gap-1"},ye={__name:"Index",props:{notifications:Object,stats:Object,filters:Object,types:Object},setup(ye){const be=ye,pe=e(be.filters?.search||""),ke=e(be.filters?.type||"all"),me=e(be.filters?.scope||"all");let he=null;const ve=t(()=>{if(!be.notifications?.data)return[];let e=be.notifications.data;return"unread"===me.value?e=e.filter(e=>!e.read_at):"read"===me.value?e=e.filter(e=>e.read_at):"broadcast"===me.value?e=e.filter(e=>!e.user):"personal"===me.value&&(e=e.filter(e=>e.user)),e}),fe=e=>{me.value=e,je()},we=()=>{clearTimeout(he),he=setTimeout(()=>{je()},300)},je=()=>{const e={};pe.value&&(e.search=pe.value),"all"!==ke.value&&(e.type=ke.value),"all"!==me.value&&(e.scope=me.value),h.get("/dashboard/notifications",e,{preserveState:!0})},_e=e=>{const t={system:{bg:"bg-gray-100 dark:bg-gray-700",icon:"text-gray-600 dark:text-gray-400",badge:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"},update:{bg:"bg-green-100 dark:bg-green-900/50",icon:"text-green-600 dark:text-green-400",badge:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"},announcement:{bg:"bg-indigo-100 dark:bg-indigo-900/50",icon:"text-indigo-600 dark:text-indigo-400",badge:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300"},alert:{bg:"bg-red-100 dark:bg-red-900/50",icon:"text-red-600 dark:text-red-400",badge:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},celebration:{bg:"bg-yellow-100 dark:bg-yellow-900/50",icon:"text-yellow-600 dark:text-yellow-400",badge:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},insight:{bg:"bg-blue-100 dark:bg-blue-900/50",icon:"text-blue-600 dark:text-blue-400",badge:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}};return t[e]||t.system},Me=e=>{const t={system:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z",update:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",announcement:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z",alert:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z",celebration:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z",insight:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"};return t[e]||t.system};return(e,t)=>(u(),r(f,{title:"Bildirishnomalar"},{default:a(()=>[s("div",w,[s("div",j,[t[8]||(t[8]=s("div",null,[s("h1",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Bildirishnomalar"),s("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Tizim bildirishnomalari va e'lonlar")],-1)),d(l(m),{href:"/dashboard/notifications/create",class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 text-white text-sm rounded-lg hover:bg-blue-700 transition-colors"},{default:a(()=>[...t[7]||(t[7]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),i(" Yangi bildirishnoma ",-1)])]),_:1})]),s("div",_,[s("div",M,[s("div",B,o(ye.stats.total),1),t[9]||(t[9]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Jami",-1))]),s("div",C,[s("div",z,o(ye.stats.unread),1),t[10]||(t[10]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"O'qilmagan",-1))]),s("div",O,[s("div",L,o(ye.stats.read),1),t[11]||(t[11]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"O'qilgan",-1))]),s("div",q,[s("div",H,o(ye.stats.broadcast),1),t[12]||(t[12]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Umumiy",-1))]),s("div",A,[s("div",U,o(ye.stats.personal),1),t[13]||(t[13]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Shaxsiy",-1))]),s("div",S,[s("div",V,o(ye.stats.today),1),t[14]||(t[14]=s("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Bugun",-1))])]),s("div",T,[s("div",D,[s("div",I,[s("button",{onClick:t[0]||(t[0]=e=>fe("all")),class:x(["px-3 py-1 text-xs font-medium rounded-md transition-colors","all"===me.value?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"])}," Barchasi ("+o(ye.stats.total)+") ",3),s("button",{onClick:t[1]||(t[1]=e=>fe("unread")),class:x(["px-3 py-1 text-xs font-medium rounded-md transition-colors","unread"===me.value?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"])}," O'qilmagan ("+o(ye.stats.unread)+") ",3),s("button",{onClick:t[2]||(t[2]=e=>fe("read")),class:x(["px-3 py-1 text-xs font-medium rounded-md transition-colors","read"===me.value?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"])}," O'qilgan ("+o(ye.stats.read)+") ",3),s("button",{onClick:t[3]||(t[3]=e=>fe("broadcast")),class:x(["px-3 py-1 text-xs font-medium rounded-md transition-colors","broadcast"===me.value?"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"])}," Umumiy ("+o(ye.stats.broadcast)+") ",3),s("button",{onClick:t[4]||(t[4]=e=>fe("personal")),class:x(["px-3 py-1 text-xs font-medium rounded-md transition-colors","personal"===me.value?"bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700"])}," Shaxsiy ("+o(ye.stats.personal)+") ",3)]),s("div",J,[c(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>ke.value=e),onChange:je,class:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-1 focus:ring-blue-500"},[t[15]||(t[15]=s("option",{value:"all"},"Barcha turlar",-1)),(u(!0),n(y,null,b(ye.types,(e,t)=>(u(),n("option",{key:t,value:t},o(e.label),9,K))),128))],544),[[p,ke.value]]),c(s("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>pe.value=e),type:"text",placeholder:"Qidirish...",class:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-1 focus:ring-blue-500 w-40",onInput:we},null,544),[[k,pe.value]])])]),s("div",Q,[s("table",Y,[t[19]||(t[19]=s("thead",null,[s("tr",{class:"bg-gray-50 dark:bg-gray-900/50"},[s("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Bildirishnoma"),s("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Turi"),s("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Qabul qiluvchi"),s("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Holat"),s("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Sana"),s("th",{class:"px-3 py-2 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase"},"Amallar")])],-1)),s("tbody",E,[(u(!0),n(y,null,b(ve.value,e=>{return u(),n("tr",{key:e.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[s("td",F,[s("div",G,[s("div",{class:x(["flex-shrink-0 w-7 h-7 rounded-full flex items-center justify-center",_e(e.type).bg])},[(u(),n("svg",{class:x(["w-3.5 h-3.5",_e(e.type).icon]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:Me(e.type)},null,8,X)],2))],2),s("div",Z,[s("p",$,o(e.title),1),s("p",N,o(e.message),1)])])]),s("td",P,[s("span",{class:x(["inline-flex px-2 py-0.5 rounded text-xs font-medium",_e(e.type).badge])},o(ye.types[e.type]?.label||e.type),3)]),s("td",R,[e.user?(u(),n("div",W,[s("p",ee,o(e.user.name),1),s("p",te,o(e.user.email),1)])):(u(),n("div",re,[t[16]||(t[16]=s("span",{class:"inline-flex px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"}," Umumiy ",-1)),e.business?(u(),n("p",ae,o(e.business.name),1)):g("",!0)]))]),s("td",se,[e.read_at?(u(),n("span",de," O'qilgan ")):(u(),n("span",le," Yangi "))]),s("td",ie,o((r=e.created_at,new Date(r).toLocaleDateString("uz-UZ",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))),1),s("td",oe,[s("button",{onClick:t=>(async e=>{if(confirm("Bildirishnomani o'chirishni tasdiqlaysizmi?"))try{await v.delete(`/dashboard/notifications/${e.id}`),h.reload()}catch(t){alert("Xatolik yuz berdi")}})(e),class:"p-1 text-gray-400 hover:text-red-600 dark:hover:text-red-400 transition-colors",title:"O'chirish"},[...t[17]||(t[17]=[s("svg",{class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ne)])]);var r}),128)),0===ve.value.length?(u(),n("tr",ge,[...t[18]||(t[18]=[s("td",{colspan:"6",class:"px-3 py-8 text-center text-sm text-gray-500 dark:text-gray-400"}," Bildirishnomalar topilmadi ",-1)])])):g("",!0)])])]),ye.notifications.last_page>1?(u(),n("div",xe,[s("div",ce,o(ye.notifications.from)+"-"+o(ye.notifications.to)+" / "+o(ye.notifications.total),1),s("div",ue,[ye.notifications.prev_page_url?(u(),r(l(m),{key:0,href:ye.notifications.prev_page_url,class:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"},{default:a(()=>[...t[20]||(t[20]=[i(" Oldingi ",-1)])]),_:1},8,["href"])):g("",!0),ye.notifications.next_page_url?(u(),r(l(m),{key:1,href:ye.notifications.next_page_url,class:"px-2 py-1 text-xs border border-gray-300 dark:border-gray-600 rounded hover:bg-gray-50 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300"},{default:a(()=>[...t[21]||(t[21]=[i(" Keyingi ",-1)])]),_:1},8,["href"])):g("",!0)])])):g("",!0)])])]),_:1}))}};export{ye as default};
