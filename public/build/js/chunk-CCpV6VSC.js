import{l as e,r}from"./chunk-BhZp3z4u.js";import{r as t,i as a}from"./app-C-ZlocOh.js";import{_ as d}from"./chunk-odHzR1c5.js";import{_ as l}from"./chunk-BCo6x5W8.js";import{r as s}from"./chunk-BiBvtcLb.js";import{r as o}from"./chunk-beXL1A--.js";import{r as i}from"./chunk-Bsc1JRL5.js";import{r as u}from"./chunk-DCXiFUg-.js";import{r as b}from"./chunk-eMHYSAeQ.js";import{e as n,d as g}from"./chunk-D7SyfRoT.js";import{a as p}from"./chunk-C9nNyFhC.js";import{r as x}from"./chunk-W0cT617J.js";import{b as c,r as k,C as h,y as m,L as v,z as f,E as y,B as w,A as j,J as C,K as _,I as B,v as z,x as P,D as R}from"./chunk-CpmtkKLp.js";const S={class:"h-full flex flex-col -m-4 sm:-m-6 lg:-m-8"},O={class:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 sm:px-6 lg:px-8 py-4"},T={class:"flex items-center justify-between"},q={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},A={class:"grid grid-cols-5 gap-4 mt-6"},V={class:"bg-red-50 dark:bg-red-900/20 rounded-xl p-4 border border-red-200 dark:border-red-800/30"},E={class:"flex items-center gap-3"},I={class:"w-10 h-10 bg-red-100 dark:bg-red-800/30 rounded-lg flex items-center justify-center"},M={class:"text-2xl font-bold text-red-600 dark:text-red-400"},Q={class:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800/30"},$={class:"flex items-center gap-3"},D={class:"w-10 h-10 bg-blue-100 dark:bg-blue-800/30 rounded-lg flex items-center justify-center"},J={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},K={class:"bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 border border-indigo-200 dark:border-indigo-800/30"},L={class:"flex items-center gap-3"},Y={class:"w-10 h-10 bg-indigo-100 dark:bg-indigo-800/30 rounded-lg flex items-center justify-center"},F={class:"text-2xl font-bold text-indigo-600 dark:text-indigo-400"},G={class:"bg-purple-50 dark:bg-purple-900/20 rounded-xl p-4 border border-purple-200 dark:border-purple-800/30"},H={class:"flex items-center gap-3"},N={class:"w-10 h-10 bg-purple-100 dark:bg-purple-800/30 rounded-lg flex items-center justify-center"},U={class:"text-2xl font-bold text-purple-600 dark:text-purple-400"},W={class:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800/30"},X={class:"flex items-center gap-3"},Z={class:"w-10 h-10 bg-green-100 dark:bg-green-800/30 rounded-lg flex items-center justify-center"},ee={class:"text-2xl font-bold text-green-600 dark:text-green-400"},re={class:"flex-1 overflow-hidden p-4 sm:p-6 lg:p-8"},te={class:"grid grid-cols-4 gap-4 h-full"},ae={class:"flex items-center justify-between"},de={class:"flex items-center gap-2"},le={class:"flex-1 overflow-y-auto p-2 space-y-2"},se={class:"flex items-center justify-between mb-2"},oe={class:"font-medium text-gray-900 dark:text-white text-sm mb-1"},ie={key:1,class:"mb-2"},ue={class:"truncate"},be={class:"flex items-center justify-between pt-2 border-t border-gray-100 dark:border-gray-700"},ne=["onClick"],ge={class:"flex gap-1"},pe=["onClick"],xe=["onClick"],ce={key:0,class:"text-center py-8 text-gray-400 dark:text-gray-500"},ke=l({__name:"TasksIndex",props:{tasks:Object,stats:Object,leads:Array,types:Object,priorities:Object,statuses:Object,panelType:{type:String,default:"business",validator:e=>["business","saleshead","operator","marketing","finance"].includes(e)}},setup(l){const ke=l,he=c(()=>({business:{primaryColor:"blue",routePrefix:"business",leadRoute:"business.sales.show",buttonClass:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25",addButtonClass:"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30"},saleshead:{primaryColor:"emerald",routePrefix:"sales-head",leadRoute:"sales-head.leads.show",buttonClass:"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/25",addButtonClass:"text-emerald-600 dark:text-emerald-400 hover:bg-emerald-100 dark:hover:bg-emerald-900/30"},operator:{primaryColor:"blue",routePrefix:"operator",leadRoute:"operator.leads.show",buttonClass:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25",addButtonClass:"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30"},marketing:{primaryColor:"blue",routePrefix:"marketing",leadRoute:"business.sales.show",buttonClass:"bg-blue-600 hover:bg-blue-700 shadow-blue-500/25",addButtonClass:"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30"},finance:{primaryColor:"green",routePrefix:"finance",leadRoute:"business.sales.show",buttonClass:"bg-green-600 hover:bg-green-700 shadow-green-500/25",addButtonClass:"text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30"}}[ke.panelType])),me=k(!1),ve=k(null),fe=k(null),ye=(e=null,r=null)=>{ve.value=e,fe.value=r,me.value=!0},we=()=>{me.value=!1,ve.value=null,fe.value=null},je=()=>{r.reload()},Ce=c(()=>ke.stats.total),_e=[{key:"overdue",label:"Muddati o'tgan",color:"red"},{key:"today",label:"Bugun",color:"blue",showAddButton:!0},{key:"tomorrow",label:"Ertaga",color:"indigo"},{key:"this_week",label:"Shu hafta",color:"purple"}],Be=e=>({red:"bg-red-100 dark:bg-red-900/30 border-b border-red-200 dark:border-red-800/30",blue:"bg-blue-100 dark:bg-blue-900/30 border-b border-blue-200 dark:border-blue-800/30",indigo:"bg-indigo-100 dark:bg-indigo-900/30 border-b border-indigo-200 dark:border-indigo-800/30",purple:"bg-purple-100 dark:bg-purple-900/30 border-b border-purple-200 dark:border-purple-800/30"}[e]),ze=e=>({red:"bg-red-500",blue:"bg-blue-500",indigo:"bg-indigo-500",purple:"bg-purple-500"}[e]),Pe=e=>({red:"text-red-700 dark:text-red-400",blue:"text-blue-700 dark:text-blue-400",indigo:"text-indigo-700 dark:text-indigo-400",purple:"text-purple-700 dark:text-purple-400"}[e]),Re=e=>({red:"bg-red-200 dark:bg-red-800/50 text-red-700 dark:text-red-300",blue:"bg-blue-200 dark:bg-blue-800/50 text-blue-700 dark:text-blue-300",indigo:"bg-indigo-200 dark:bg-indigo-800/50 text-indigo-700 dark:text-indigo-300",purple:"bg-purple-200 dark:bg-purple-800/50 text-purple-700 dark:text-purple-300"}[e]),Se=e=>({red:"border-red-200 dark:border-red-700/50",blue:"border-blue-200 dark:border-blue-700/50",indigo:"border-indigo-200 dark:border-indigo-700/50",purple:"border-purple-200 dark:border-purple-700/50"}[e]),Oe=e=>({red:"text-red-600 dark:text-red-400",blue:"text-blue-600 dark:text-blue-400",indigo:"text-indigo-600 dark:text-indigo-400",purple:"text-purple-600 dark:text-purple-400"}[e]),Te=e=>({red:"text-red-500 dark:text-red-400",blue:"text-blue-500 dark:text-blue-400",indigo:"text-indigo-500 dark:text-indigo-400",purple:"text-purple-500 dark:text-purple-400"}[e]),qe=e=>({red:"text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 border-t border-red-200 dark:border-red-800/30",blue:"text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 border-t border-blue-200 dark:border-blue-800/30",indigo:"text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/30 border-t border-indigo-200 dark:border-indigo-800/30",purple:"text-purple-600 dark:text-purple-400 hover:bg-purple-100 dark:hover:bg-purple-900/30 border-t border-purple-200 dark:border-purple-800/30"}[e]);return(c,k)=>(R(),h(C,null,[m("div",S,[m("div",O,[m("div",T,[m("div",null,[k[2]||(k[2]=m("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Vazifalar",-1)),m("p",q,f(Ce.value)+" ta faol vazifa ",1)]),m("button",{onClick:k[0]||(k[0]=e=>ye()),class:y(["inline-flex items-center gap-2 px-4 py-2.5 text-white font-medium rounded-xl transition-colors shadow-lg",he.value.buttonClass])},[v(j(s),{class:"w-5 h-5"}),k[3]||(k[3]=w(" Vazifa qo'shish ",-1))],2)]),m("div",A,[m("div",V,[m("div",E,[m("div",I,[v(j(o),{class:"w-5 h-5 text-red-600 dark:text-red-400"})]),m("div",null,[m("p",M,f(l.stats.overdue),1),k[4]||(k[4]=m("p",{class:"text-xs text-red-500 dark:text-red-400"},"Muddati o'tgan",-1))])])]),m("div",Q,[m("div",$,[m("div",D,[v(j(i),{class:"w-5 h-5 text-blue-600 dark:text-blue-400"})]),m("div",null,[m("p",J,f(l.stats.today),1),k[5]||(k[5]=m("p",{class:"text-xs text-blue-500 dark:text-blue-400"},"Bugun",-1))])])]),m("div",K,[m("div",L,[m("div",Y,[v(j(u),{class:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})]),m("div",null,[m("p",F,f(l.stats.tomorrow),1),k[6]||(k[6]=m("p",{class:"text-xs text-indigo-500 dark:text-indigo-400"},"Ertaga",-1))])])]),m("div",G,[m("div",H,[m("div",N,[v(j(u),{class:"w-5 h-5 text-purple-600 dark:text-purple-400"})]),m("div",null,[m("p",U,f(l.stats.this_week),1),k[7]||(k[7]=m("p",{class:"text-xs text-purple-500 dark:text-purple-400"},"Shu hafta",-1))])])]),m("div",W,[m("div",X,[m("div",Z,[v(j(b),{class:"w-5 h-5 text-green-600 dark:text-green-400"})]),m("div",null,[m("p",ee,f(l.stats.completed),1),k[8]||(k[8]=m("p",{class:"text-xs text-green-500 dark:text-green-400"},"Bajarilgan",-1))])])])])]),m("div",re,[m("div",te,[(R(),h(C,null,_(_e,d=>{return m("div",{key:d.key,class:y(["flex flex-col rounded-xl border overflow-hidden",(o=d.color,{red:"bg-red-50/50 dark:bg-red-900/10 border-red-200 dark:border-red-800/30",blue:"bg-blue-50/50 dark:bg-blue-900/10 border-blue-200 dark:border-blue-800/30",indigo:"bg-indigo-50/50 dark:bg-indigo-900/10 border-indigo-200 dark:border-indigo-800/30",purple:"bg-purple-50/50 dark:bg-purple-900/10 border-purple-200 dark:border-purple-800/30"}[o])])},[m("div",{class:y(["p-3",Be(d.color)])},[m("div",ae,[m("div",de,[m("div",{class:y(["w-3 h-3 rounded-full",ze(d.color)])},null,2),m("span",{class:y(["font-semibold",Pe(d.color)])},f(d.label),3)]),m("span",{class:y(["text-xs font-bold px-2 py-0.5 rounded-full",Re(d.color)])},f(l.tasks[d.key]?.length||0),3)])],2),m("div",le,[(R(!0),h(C,null,_(l.tasks[d.key],l=>{return R(),h("div",{key:l.id,class:y(["bg-white dark:bg-gray-800 rounded-lg border p-3 shadow-sm hover:shadow-md transition-shadow",Se(d.color)])},[m("div",se,[m("span",{class:y(["text-lg font-bold",Oe(d.color)])},f(l.due_date_human),3),m("span",{class:y(["text-xs px-2 py-0.5 rounded font-medium","call"===l.type?"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-400":"meeting"===l.type?"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-400"])},f(l.type_label),3)]),m("h4",oe,f(l.title),1),"overdue"===d.key||"this_week"===d.key?(R(),h("p",{key:0,class:y(["text-xs mb-2",Te(d.color)])},f(l.due_date_full.split(" ")[0]),3)):B("",!0),"urgent"===l.priority||"high"===l.priority?(R(),h("div",ie,[m("span",{class:y(["text-xs px-2 py-0.5 rounded font-bold","urgent"===l.priority?"bg-red-100 text-red-700 animate-pulse":"bg-orange-100 text-orange-700"])},f(l.priority_label),3)])):B("",!0),l.lead?(R(),z(j(e),{key:2,href:(s=l.lead.id,route(he.value.leadRoute,s)),class:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 mb-2 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg"},{default:P(()=>[v(j(n),{class:"w-3 h-3"}),m("span",ue,f(l.lead.name),1),v(j(p),{class:"w-3 h-3 ml-auto"})]),_:2},1032,["href"])):B("",!0),m("div",be,[m("button",{onClick:e=>(async e=>{try{await t(),(await window.axios.post(route(`${he.value.routePrefix}.tasks.complete`,e.id))).data.success&&r.reload()}catch(d){if(a(d))return await t(),void alert("Sessiya muddati tugadi. Qayta urinib ko'ring.")}})(l),class:"text-xs text-green-600 hover:text-green-700 font-medium"},"Bajarildi",8,ne),m("div",ge,[m("button",{onClick:e=>ye(l,l.lead),class:"p-1 text-gray-400 hover:text-blue-600"},[v(j(x),{class:"w-4 h-4"})],8,pe),m("button",{onClick:e=>(async e=>{if(confirm("Vazifani o'chirmoqchimisiz?"))try{await t(),(await window.axios.delete(route(`${he.value.routePrefix}.tasks.destroy`,e.id))).data.success&&r.reload()}catch(d){if(a(d))return await t(),void alert("Sessiya muddati tugadi. Qayta urinib ko'ring.")}})(l),class:"p-1 text-gray-400 hover:text-red-600"},[v(j(g),{class:"w-4 h-4"})],8,xe)])])],2);var s}),128)),l.tasks[d.key]?.length?B("",!0):(R(),h("div",ce,["overdue"===d.key?(R(),z(j(b),{key:0,class:"w-8 h-8 mx-auto mb-2 opacity-50"})):(R(),z(j(u),{key:1,class:"w-8 h-8 mx-auto mb-2 opacity-50"})),k[9]||(k[9]=m("p",{class:"text-xs"},"Yo'q",-1))]))]),d.showAddButton?(R(),h("div",{key:0,class:y(["p-2",qe(d.color)])},[m("button",{onClick:k[1]||(k[1]=e=>ye()),class:"w-full py-2 text-sm rounded-lg transition-colors flex items-center justify-center gap-1"},[v(j(s),{class:"w-4 h-4"}),k[10]||(k[10]=w(" Vazifa qo'shish ",-1))])],2)):B("",!0)],2);var o}),64))])])]),v(d,{show:me.value,lead:fe.value,task:ve.value,leads:l.leads,"panel-type":l.panelType,onClose:we,onSaved:je},null,8,["show","lead","task","leads","panel-type"])],64))}},[["__scopeId","data-v-c8dd9a35"]]);export{ke as T};
