import{r as x,o as A,v as z,x as v,z as e,D as n,L as h,y as _,H as a,A as l,E as i,C as I,F as w,G as k,B as g,Q as M,I as q,O as V,J as L,p as H}from"./chunk-BcTZxe-J.js";import{l as N,a as C}from"./chunk-BYRtWSr0.js";import{_ as S}from"./chunk-RRYrF3wy.js";import{_ as D}from"./chunk-CjD99w5-.js";import{u as G}from"./app-CPufef6f.js";import{_ as $}from"./chunk-DlAUqK2U.js";import"./chunk-D6nU8-nU.js";import"./chunk-BVYwhYNk.js";import"./chunk-BqueMrU7.js";import"./chunk-_yYzsx_i.js";import"./chunk-Rs1WNzbn.js";import"./chunk-CJsSO8V8.js";import"./chunk-CQoMtUf7.js";import"./chunk-qVc0_oyq.js";import"./chunk-LBbTbQSS.js";import"./chunk-I93QdGKi.js";import"./chunk-DNp5bQOL.js";import"./chunk-CG0drqHE.js";import"./chunk-CklLzvQL.js";import"./chunk-CnrLL2pV.js";import"./chunk-D58UsNjm.js";import"./chunk-Ba8J67bG.js";import"./chunk-BHX0ueEB.js";import"./chunk-C1xeNfMu.js";const E={class:"flex flex-col h-[calc(100vh-12rem)]"},F={class:"mb-4 flex items-center justify-between"},O={class:"text-2xl font-bold text-gray-900"},P={class:"text-sm text-gray-600 mt-1"},J={key:0,class:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Q={class:"flex items-start"},R={class:"text-sm font-medium text-yellow-800"},U={class:"mt-1 text-sm text-yellow-700"},W={key:0,class:"text-center py-12"},X={class:"text-lg font-semibold text-gray-900 mb-2"},Y={class:"text-gray-600 max-w-md mx-auto"},Z={class:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-3 max-w-2xl mx-auto"},ee=["onClick"],te={class:"whitespace-pre-line text-sm"},se={key:0,class:"ml-2"},oe={key:1,class:"flex justify-start"},ae={class:"border-t border-gray-200 p-4"},re={class:"flex-1"},le=["onKeydown","disabled","placeholder"],ie={class:"text-xs text-gray-500 mt-1"},ne=["disabled"],de={__name:"Index",props:{messages:Array,hasApiKey:Boolean},setup(m){const{t:o}=G(),b=m,c=x([...b.messages]),d=x(""),u=x(!1),p=x(null),j=["Ideal Mijoz qanday yaratish kerak?","Ijtimoiy tarmoqlarda marketing strategiyasi","Raqobatchilardan qanday ajralib turish mumkin?","Konversiyani oshirish usullari"],B=r=>r.includes("gpt-4")?"GPT-4":r.includes("gpt-3.5")?"GPT-3.5":r.includes("claude-3-opus")?"Claude 3 Opus":r.includes("claude-3-sonnet")?"Claude 3 Sonnet":r,y=()=>{H(()=>{p.value&&(p.value.scrollTop=p.value.scrollHeight)})},f=async()=>{if(!d.value.trim()||!b.hasApiKey||u.value)return;const r=d.value.trim();d.value="",u.value=!0;try{const t=await C.post(route("business.chatbot.send"),{message:r});t.data.success&&(c.value.push(t.data.userMessage),y(),setTimeout(()=>{c.value.push(t.data.assistantMessage),y()},300))}catch(t){alert(t.response?.data?.error||o("common.error"))}finally{u.value=!1}},K=r=>{d.value=r,f()},T=async()=>{if(confirm(o("chatbot.confirm_clear")))try{await C.delete(route("business.chatbot.clear")),c.value=[]}catch{alert(o("common.error"))}};return A(()=>{y()}),(r,t)=>(i(),z(S,{title:l(o)("chatbot.ai_chatbot")},{default:v(()=>[e("div",E,[e("div",F,[e("div",null,[e("h1",O,a(l(o)("chatbot.ai_marketing_advisor")),1),e("p",P,a(l(o)("chatbot.business_marketing_help")),1)]),c.value.length>0?(i(),n("button",{key:0,onClick:T,class:"px-4 py-2 text-sm text-red-600 hover:text-red-700 font-medium"},a(l(o)("chatbot.clear_history")),1)):h("",!0)]),m.hasApiKey?h("",!0):(i(),n("div",J,[e("div",Q,[t[2]||(t[2]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-yellow-600 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",null,[e("h3",R,a(l(o)("chatbot.api_key_required")),1),e("p",U,a(l(o)("chatbot.api_key_message")),1),_(l(N),{href:r.route("business.settings.index"),class:"mt-3 inline-flex items-center text-sm font-medium text-yellow-800 hover:text-yellow-900"},{default:v(()=>[I(a(l(o)("chatbot.go_to_settings"))+" ",1),t[1]||(t[1]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),_:1},8,["href"])])])])),_(D,{class:"flex-1 flex flex-col overflow-hidden"},{default:v(()=>[e("div",{ref_key:"messagesContainer",ref:p,class:"flex-1 overflow-y-auto p-4 space-y-4"},[c.value.length===0&&m.hasApiKey?(i(),n("div",W,[t[3]||(t[3]=e("div",{class:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})])],-1)),e("h3",X,a(l(o)("chatbot.greeting")),1),e("p",Y,a(l(o)("chatbot.welcome_message")),1),e("div",Z,[(i(),n(w,null,k(j,s=>e("button",{key:s,onClick:ce=>K(s),class:"px-4 py-3 text-left text-sm bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors"},a(s),9,ee)),64))])])):h("",!0),(i(!0),n(w,null,k(c.value,s=>(i(),n("div",{key:s.id,class:g(["flex",s.role==="user"?"justify-end":"justify-start"])},[e("div",{class:g(["max-w-[70%] rounded-lg px-4 py-3",s.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"])},[e("div",te,a(s.message),1),e("div",{class:g(["text-xs mt-1 flex items-center justify-between",s.role==="user"?"text-blue-100":"text-gray-500"])},[e("span",null,a(s.created_at),1),s.ai_model&&s.role==="assistant"?(i(),n("span",se,a(B(s.ai_model)),1)):h("",!0)],2)],2)],2))),128)),u.value?(i(),n("div",oe,[...t[4]||(t[4]=[e("div",{class:"bg-gray-100 rounded-lg px-4 py-3"},[e("div",{class:"flex space-x-2"},[e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"0ms"}}),e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"150ms"}}),e("div",{class:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{"animation-delay":"300ms"}})])],-1)])])):h("",!0)],512),e("div",ae,[e("form",{onSubmit:M(f,["prevent"]),class:"flex items-end space-x-3"},[e("div",re,[q(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),onKeydown:V(M(f,["exact","prevent"]),["enter"]),rows:"1",disabled:!m.hasApiKey||u.value,class:"input resize-none",placeholder:l(o)("chatbot.type_question"),style:{"min-height":"44px","max-height":"120px"}},null,40,le),[[L,d.value]]),e("p",ie,a(l(o)("chatbot.enter_to_send")),1)]),e("button",{type:"submit",disabled:!d.value.trim()||!m.hasApiKey||u.value,class:"px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0"},[...t[5]||(t[5]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})],-1)])],8,ne)],32)])]),_:1})])]),_:1},8,["title"]))}},Le=$(de,[["__scopeId","data-v-c9d3109a"]]);export{Le as default};
