APP_NAME=BiznesPilot
APP_ENV=local
APP_KEY=
# SECURITY WARNING: Set APP_DEBUG=false in production!
APP_DEBUG=true
APP_URL=http://localhost

# Production settings example:
# APP_ENV=production
# APP_DEBUG=false
# APP_URL=https://yourdomain.com

APP_LOCALE=en
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=file
# APP_MAINTENANCE_STORE=database

# PHP_CLI_SERVER_WORKERS=4

BCRYPT_ROUNDS=12

LOG_CHANNEL=stack
LOG_STACK=single
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=debug

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=biznespilot
DB_USERNAME=root
DB_PASSWORD=

SESSION_DRIVER=database
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=null

BROADCAST_CONNECTION=log
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis

CACHE_STORE=redis
CACHE_PREFIX=biznespilot

MEMCACHED_HOST=127.0.0.1

REDIS_CLIENT=phpredis
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

MAIL_MAILER=log
MAIL_SCHEME=null
MAIL_HOST=127.0.0.1
MAIL_PORT=2525
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"

AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# Anthropic Claude API (for AI features)
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# Google APIs (for Google Ads, YouTube Analytics)
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ADS_DEVELOPER_TOKEN=

# Yandex APIs (for Yandex Direct)
# Get credentials from: https://oauth.yandex.ru/client/new
YANDEX_CLIENT_ID=
YANDEX_CLIENT_SECRET=

# Meta/Facebook App (for Meta Ads & Instagram Integration)
META_APP_ID=
META_APP_SECRET=

# WhatsApp Business Cloud API
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_VERIFY_TOKEN=biznespilot_whatsapp_verify_token
WHATSAPP_BUSINESS_ACCOUNT_ID=

# Registration Control (set to false to disable new registrations)
REGISTRATION_ENABLED=true

# Analytics Tracking (Platform-wide)
# Google Analytics 4 Measurement ID (e.g., G-XXXXXXXXXX)
GA4_MEASUREMENT_ID=
# Yandex Metrika Counter ID (e.g., 12345678)
YANDEX_METRIKA_ID=
# Meta (Facebook) Pixel ID (e.g., 123456789012345)
META_PIXEL_ID=

# ============================================================================
# KPI SYNC SYSTEM CONFIGURATION (Optimized for 1000+ businesses)
# ============================================================================

# --- Batch Processing (ULTRA-OPTIMIZED: 90% faster) ---
KPI_SYNC_BATCH_SIZE=100                      # Businesses per batch (100 = 10 batches for 1000)
KPI_SYNC_BATCH_DELAY=5                      # Seconds between batches (sequential mode only)
KPI_SYNC_BUSINESS_DELAY=0                   # No delay (parallel API calls handle throttling)
KPI_SYNC_MAX_CONCURRENT_BATCHES=15          # 15 workers for maximum throughput
KPI_SYNC_DISTRIBUTED=true                   # Enable distributed queue processing
KPI_SYNC_PARALLEL_API=true                  # Parallel API calls (3x faster per business)
KPI_SYNC_BATCH_DB_WRITES=true               # Batch database writes (10x faster inserts)

# --- Queue Configuration ---
KPI_SYNC_QUEUE=kpi-sync                     # Main sync queue
KPI_BATCH_QUEUE=kpi-batch-processing        # Batch processing queue
KPI_AGGREGATION_QUEUE=kpi-aggregation       # Aggregation queue
KPI_MONITORING_QUEUE=kpi-monitoring         # Monitoring queue (highest priority)

# --- Job Configuration ---
KPI_SYNC_MAX_TRIES=3                        # Maximum retry attempts
KPI_SYNC_TIMEOUT=900                        # Job timeout in seconds (15 minutes)
KPI_SYNC_MAX_EXCEPTIONS=3                   # Maximum exceptions before failing

# --- Circuit Breaker Configuration ---
KPI_CIRCUIT_BREAKER_ENABLED=true            # Enable circuit breaker protection
KPI_CIRCUIT_BREAKER_THRESHOLD=5             # Failures before opening circuit
KPI_CIRCUIT_BREAKER_TIMEOUT=300             # Seconds to wait before retry (5 minutes)
KPI_CIRCUIT_BREAKER_SUCCESS=3               # Successes needed to close circuit

# --- Rate Limiting ---
INSTAGRAM_RATE_LIMIT=200                    # Instagram API: requests per hour
INSTAGRAM_RATE_LIMIT_PER_MIN=60             # Instagram API: requests per minute
FACEBOOK_RATE_LIMIT=200                     # Facebook API: requests per hour
FACEBOOK_RATE_LIMIT_PER_MIN=60              # Facebook API: requests per minute
POS_RATE_LIMIT=1000                         # POS system: requests per hour
POS_RATE_LIMIT_PER_MIN=500                  # POS system: requests per minute

# --- Database Optimization ---
DB_POOL_SIZE=50                             # Connection pool size (MySQL max_connections should be 2x)
DB_PERSISTENT=true                          # Use persistent connections
DB_STATEMENT_CACHE=250                      # Prepared statement cache size
DB_QUERY_CACHE=true                         # Enable query result caching
DB_BATCH_INSERT_SIZE=500                    # Batch insert size for bulk operations
KPI_SYNC_CHUNK_SIZE=100                     # Chunk size for large queries
KPI_SYNC_QUERY_LOG=false                    # Enable query logging (debug only)

# --- Monitoring & Health Checks ---
KPI_SYNC_SUCCESS_RATE_WARNING=80            # Warning if success rate < 80%
KPI_SYNC_SUCCESS_RATE_CRITICAL=60           # Critical if success rate < 60%
KPI_SYNC_AVG_DURATION_WARNING=300           # Warning if avg duration > 5 minutes
KPI_SYNC_AVG_DURATION_CRITICAL=600          # Critical if avg duration > 10 minutes
KPI_SYNC_FAILED_WARNING=10                  # Warning if 10+ businesses failed
KPI_SYNC_FAILED_CRITICAL=30                 # Critical if 30+ businesses failed
KPI_SYNC_CACHE_TTL=30                       # Cache TTL in days for monitoring data

# --- Sync Schedule ---
KPI_SYNC_DAILY_TIME=05:00                   # Daily sync time (Tashkent timezone)
KPI_WEEKLY_AGG_DAY=1                        # Weekly aggregation day (1=Monday)
KPI_WEEKLY_AGG_TIME=07:00                   # Weekly aggregation time
KPI_MONTHLY_AGG_DAY=1                       # Monthly aggregation day of month
KPI_MONTHLY_AGG_TIME=08:00                  # Monthly aggregation time
APP_TIMEZONE=Asia/Tashkent                  # Application timezone

# --- Notifications ---
KPI_SYNC_NOTIFICATIONS_ENABLED=true         # Enable notifications for critical issues
KPI_SYNC_NOTIFY_EMAIL=true                  # Send email notifications
KPI_SYNC_NOTIFY_TELEGRAM=false              # Send Telegram notifications
KPI_SYNC_NOTIFY_SLACK=false                 # Send Slack notifications
KPI_SYNC_ADMIN_EMAILS=admin@biznespilot.uz  # Admin email addresses (comma-separated)

# --- Data Quality ---
KPI_MIN_QUALITY_SCORE=80                    # Minimum quality score to mark as verified
KPI_AUTO_ANOMALY_DETECTION=true             # Enable automatic anomaly detection
KPI_ANOMALY_SENSITIVITY=7                   # Anomaly detection sensitivity (1-10)

# --- Performance Optimization ---
KPI_SYNC_CACHE_ENABLED=true                 # Enable Redis caching for sync results
KPI_SYNC_CACHE_DRIVER=redis                 # Cache driver (redis recommended)
KPI_DB_POOLING_ENABLED=true                 # Enable database connection pooling
KPI_LAZY_LOAD=false                         # Use lazy loading for relationships
KPI_BATCH_INSERTS=true                      # Enable batch inserts for bulk operations

# --- Logging ---
KPI_SYNC_LOG_LEVEL=info                     # Log level (debug, info, warning, error)
KPI_SYNC_LOG_CHANNEL=daily                  # Log channel
KPI_SYNC_DETAILED_LOGS=false                # Enable detailed sync logs (verbose)
KPI_SLOW_QUERY_THRESHOLD=1000               # Log slow queries > 1000ms

# ==============================================
# TELEGRAM SYSTEM BOT (Dual Bot Strategy)
# ==============================================
# System Bot - BiznesPilot dan Business Owner larga notification yuborish
# Bu Tenant Bot lardan alohida va faqat system-to-admin xabarlar uchun
#
# Bot yaratish: @BotFather -> /newbot -> BiznesPilotBot
# Webhook URL: https://yourdomain.com/webhooks/telegram-system-bot

TELEGRAM_SYSTEM_BOT_TOKEN=               # @BotFather dan olingan token
TELEGRAM_SYSTEM_BOT_USERNAME=BiznesPilotBot  # Bot username (@BiznesPilotBot)
TELEGRAM_SYSTEM_WEBHOOK_SECRET=          # Webhook xavfsizlik kaliti (ixtiyoriy)
TELEGRAM_SYSTEM_WEBHOOK_URL=             # https://yourdomain.com/api/webhooks/system-bot

# ==============================================
# APIFY - TrendSee (Viral Content Hunter)
# ==============================================
# Apify Instagram Scraper for viral content discovery
# Uses synchronous endpoint for instant results
#
# SETUP INSTRUCTIONS:
# 1. Go to: https://console.apify.com/sign-up
# 2. Create account and get your API token
# 3. Go to: https://console.apify.com/account/integrations
# 4. Copy your API token and paste below
#
# PRICING: $49 credit gives ~500-1000 hashtag scrapes
# Actor: apify/instagram-scraper
#
# Test your configuration:
#   php artisan trendsee:test

APIFY_TOKEN=                             # Your Apify API token

VITE_APP_NAME="${APP_NAME}"

# ============================================================================
# BILLING - TO'LOV TIZIMLARI (Payme & Click)
# ============================================================================
# Payme merchant credentials: https://merchant.payme.uz
PAYME_MERCHANT_ID=
PAYME_MERCHANT_KEY=
PAYME_TEST_MODE=true

# Click merchant credentials: https://merchant.click.uz
CLICK_SERVICE_ID=16184
CLICK_MERCHANT_ID=
CLICK_MERCHANT_USER_ID=
CLICK_SECRET_KEY=73cIcaHiNghP
CLICK_TEST_MODE=true

BILLING_ADMIN_EMAIL=admin@biznespilot.uz

# ============================================================================
# TELEGRAM - Legacy Bot (config/services.php telegram-bot-api)
# ============================================================================
# Bu TELEGRAM_SYSTEM_BOT_TOKEN dan alohida - tenant botlar uchun
TELEGRAM_BOT_TOKEN=

# ============================================================================
# CALL CENTER - Groq Whisper (Speech-to-Text)
# ============================================================================
# Get API key from: https://console.groq.com/keys
GROQ_API_KEY=

# ============================================================================
# FACEBOOK OAuth (META_APP_ID dan alohida)
# ============================================================================
# Get credentials from: https://developers.facebook.com/apps
FACEBOOK_CLIENT_ID=
FACEBOOK_CLIENT_SECRET=
FACEBOOK_REDIRECT_URI=

# ============================================================================
# META AD LIBRARY
# ============================================================================
# Token with ads_read permission for Ad Library access
META_AD_LIBRARY_TOKEN=

# ============================================================================
# GOOGLE ADS OAuth Redirect
# ============================================================================
GOOGLE_ADS_REDIRECT_URI=

# ============================================================================
# LOGGING ALERTS (Slack & Telegram)
# ============================================================================
# Slack webhook for critical log alerts
LOG_SLACK_WEBHOOK_URL=
# Telegram chat ID & bot token for log alerts (LOG_TELEGRAM_BOT_TOKEN TELEGRAM_BOT_TOKEN dan alohida)
LOG_TELEGRAM_CHAT_ID=
LOG_TELEGRAM_BOT_TOKEN=

# ============================================================================
# SLACK NOTIFICATIONS
# ============================================================================
SLACK_BOT_USER_OAUTH_TOKEN=
SLACK_BOT_USER_DEFAULT_CHANNEL=

# ============================================================================
# XAVFSIZLIK - Telescope & Session
# ============================================================================
# Production da TELESCOPE_ENABLED=false qiling!
TELESCOPE_ENABLED=true
SESSION_SECURE_COOKIE=false
SESSION_HTTP_ONLY=true

# ============================================================================
# EMAIL SERVICES (Postmark / Resend - agar ishlatilsa)
# ============================================================================
# Postmark: https://postmarkapp.com
POSTMARK_API_KEY=
# Resend: https://resend.com
RESEND_API_KEY=
