# =============================================================================
# BIZNESPILOT - PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# MUHIM: Bu faylni .env.production ga nusxalang va barcha qiymatlarni to'ldiring
# HECH QACHON haqiqiy credentials bilan git ga push qilmang!
# =============================================================================

# -----------------------------------------------------------------------------
# APPLICATION SETTINGS
# -----------------------------------------------------------------------------
APP_NAME=BiznesPilot
APP_ENV=production
APP_KEY=                                    # php artisan key:generate
APP_DEBUG=false                             # KRITIK: Production da false bo'lishi SHART
APP_URL=https://biznespilot.uz              # HTTPS bo'lishi SHART
APP_TIMEZONE=Asia/Tashkent

APP_LOCALE=uz
APP_FALLBACK_LOCALE=en
APP_FAKER_LOCALE=en_US

APP_MAINTENANCE_DRIVER=cache
APP_MAINTENANCE_STORE=redis

# -----------------------------------------------------------------------------
# SECURITY SETTINGS
# -----------------------------------------------------------------------------
BCRYPT_ROUNDS=12                            # 12+ tavsiya etiladi

# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
LOG_CHANNEL=stack
LOG_STACK=daily
LOG_DEPRECATIONS_CHANNEL=daily
LOG_LEVEL=error                             # Production: error yoki warning
LOG_DAILY_DAYS=30                           # 30 kunlik log saqlash

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
DB_CONNECTION=mysql
DB_HOST=127.0.0.1                           # yoki remote DB server IP
DB_PORT=3306
DB_DATABASE=biznespilot_prod
DB_USERNAME=biznespilot_user                # HECH QACHON root ishlatmang!
DB_PASSWORD=                                # Kuchli parol (32+ belgi)
DB_CHARSET=utf8mb4
DB_COLLATION=utf8mb4_unicode_ci

# Database connection pooling
DB_POOL_SIZE=50
DB_PERSISTENT=true
DB_STATEMENT_CACHE=250

# -----------------------------------------------------------------------------
# SESSION CONFIGURATION (XAVFSIZLIK)
# -----------------------------------------------------------------------------
SESSION_DRIVER=redis                        # Production: redis tavsiya etiladi
SESSION_LIFETIME=120
SESSION_ENCRYPT=true                        # KRITIK: true bo'lishi SHART
SESSION_PATH=/
SESSION_DOMAIN=.biznespilot.uz              # Domain bilan
SESSION_SECURE_COOKIE=true                  # KRITIK: HTTPS uchun true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# -----------------------------------------------------------------------------
# CACHE & QUEUE CONFIGURATION
# -----------------------------------------------------------------------------
BROADCAST_CONNECTION=redis
FILESYSTEM_DISK=local
QUEUE_CONNECTION=redis
CACHE_STORE=redis
CACHE_PREFIX=biznespilot_prod

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION
# -----------------------------------------------------------------------------
REDIS_CLIENT=phpredis                       # phpredis tezroq
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=                             # Redis parol (agar mavjud bo'lsa)
REDIS_PORT=6379
REDIS_DB=0
REDIS_CACHE_DB=1

# -----------------------------------------------------------------------------
# MAIL CONFIGURATION
# -----------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com                    # yoki sizning SMTP serveringiz
MAIL_PORT=587
MAIL_USERNAME=                              # SMTP username
MAIL_PASSWORD=                              # SMTP password (App Password)
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@biznespilot.uz
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# AWS S3 (Optional - File Storage)
# -----------------------------------------------------------------------------
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=eu-central-1
AWS_BUCKET=biznespilot-prod
AWS_USE_PATH_STYLE_ENDPOINT=false

# -----------------------------------------------------------------------------
# THIRD-PARTY API KEYS (XAVFSIZ SAQLANG!)
# -----------------------------------------------------------------------------

# Anthropic Claude API (AI features)
ANTHROPIC_API_KEY=                          # sk-ant-... formatida
ANTHROPIC_MODEL=claude-sonnet-4-20250514

# Google APIs
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_ADS_DEVELOPER_TOKEN=

# Yandex APIs
YANDEX_CLIENT_ID=
YANDEX_CLIENT_SECRET=

# Meta/Facebook
META_APP_ID=
META_APP_SECRET=
META_REDIRECT_URI="${APP_URL}/business/meta-ads/callback"

# WhatsApp Business
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_ACCESS_TOKEN=
WHATSAPP_VERIFY_TOKEN=                      # Random string
WHATSAPP_BUSINESS_ACCOUNT_ID=

# Telegram Bot
TELEGRAM_BOT_TOKEN=

# SMS Services
ESKIZ_EMAIL=
ESKIZ_PASSWORD=
PLAYMOBILE_USERNAME=
PLAYMOBILE_PASSWORD=

# -----------------------------------------------------------------------------
# KPI SYNC SYSTEM (Production optimized)
# -----------------------------------------------------------------------------
KPI_SYNC_BATCH_SIZE=100
KPI_SYNC_BATCH_DELAY=5
KPI_SYNC_BUSINESS_DELAY=0
KPI_SYNC_MAX_CONCURRENT_BATCHES=15
KPI_SYNC_DISTRIBUTED=true
KPI_SYNC_PARALLEL_API=true
KPI_SYNC_BATCH_DB_WRITES=true

KPI_SYNC_QUEUE=kpi-sync
KPI_BATCH_QUEUE=kpi-batch-processing
KPI_AGGREGATION_QUEUE=kpi-aggregation
KPI_MONITORING_QUEUE=kpi-monitoring

KPI_SYNC_MAX_TRIES=3
KPI_SYNC_TIMEOUT=900
KPI_SYNC_MAX_EXCEPTIONS=3

KPI_CIRCUIT_BREAKER_ENABLED=true
KPI_CIRCUIT_BREAKER_THRESHOLD=5
KPI_CIRCUIT_BREAKER_TIMEOUT=300
KPI_CIRCUIT_BREAKER_SUCCESS=3

# Rate Limiting
INSTAGRAM_RATE_LIMIT=200
INSTAGRAM_RATE_LIMIT_PER_MIN=60
FACEBOOK_RATE_LIMIT=200
FACEBOOK_RATE_LIMIT_PER_MIN=60
POS_RATE_LIMIT=1000
POS_RATE_LIMIT_PER_MIN=500

# Monitoring
KPI_SYNC_SUCCESS_RATE_WARNING=80
KPI_SYNC_SUCCESS_RATE_CRITICAL=60
KPI_SYNC_AVG_DURATION_WARNING=300
KPI_SYNC_AVG_DURATION_CRITICAL=600
KPI_SYNC_FAILED_WARNING=10
KPI_SYNC_FAILED_CRITICAL=30
KPI_SYNC_CACHE_TTL=30

# Schedule
KPI_SYNC_DAILY_TIME=05:00
KPI_WEEKLY_AGG_DAY=1
KPI_WEEKLY_AGG_TIME=07:00
KPI_MONTHLY_AGG_DAY=1
KPI_MONTHLY_AGG_TIME=08:00

# Notifications
KPI_SYNC_NOTIFICATIONS_ENABLED=true
KPI_SYNC_NOTIFY_EMAIL=true
KPI_SYNC_NOTIFY_TELEGRAM=true
KPI_SYNC_NOTIFY_SLACK=false
KPI_SYNC_ADMIN_EMAILS=admin@biznespilot.uz

# Data Quality
KPI_MIN_QUALITY_SCORE=80
KPI_AUTO_ANOMALY_DETECTION=true
KPI_ANOMALY_SENSITIVITY=7

# Performance
KPI_SYNC_CACHE_ENABLED=true
KPI_SYNC_CACHE_DRIVER=redis
KPI_DB_POOLING_ENABLED=true
KPI_LAZY_LOAD=false
KPI_BATCH_INSERTS=true

# Logging
KPI_SYNC_LOG_LEVEL=warning                  # Production: warning yoki error
KPI_SYNC_LOG_CHANNEL=daily
KPI_SYNC_DETAILED_LOGS=false
KPI_SLOW_QUERY_THRESHOLD=1000

# -----------------------------------------------------------------------------
# VITE (Frontend)
# -----------------------------------------------------------------------------
VITE_APP_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# TELESCOPE (Debugging - Production da o'chiriladi)
# -----------------------------------------------------------------------------
TELESCOPE_ENABLED=false
