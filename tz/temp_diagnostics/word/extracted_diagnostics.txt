BiznesPilot AIDIAGNOSTIKA TIZIMITexnik TopshiriqVersiya: 1.0Sana: 2024-yil Dekabr1. UMUMIY MA'LUMOT1.1 MaqsadAI Diagnostika tizimi ‚Äî biznes egalariga platformadan chiqmasdan, o'z biznesining hozirgi holatini tushunish, muammolarni aniqlash va ularni qanday tuzatishni ko'rsatish uchun mo'ljallangan. Tizim 4 ta marketing kitobidan olingan metodologiyalar asosida ishlaydi.1.2 Asosiy XususiyatlarO'zbek tilida sodda va tushunarli tahlilPul tilida yo'qotishlar kalkulyatoriO'xshash bizneslar tajribasidan tavsiyalarPlatformaning tegishli modullariga direct link90 kunlik shaxsiy yo'l xaritasiPDF export va email yuborish1.3 Trigger MexanizmiFoydalanuvchi "Diagnostikani Boshlash" tugmasini bosganda tizim ishga tushadi. Natijalar database ga saqlanadi va keyingi so'rovlarda cache dan olinadi.2. DATABASE SCHEMA2.1 ai_diagnostics jadvaliCREATE TABLE ai_diagnostics ( id CHAR(36) PRIMARY KEY, business_id CHAR(36) NOT NULL, -- Umumiy holat overall_score TINYINT UNSIGNED DEFAULT 0, status_level ENUM('critical','weak','medium','good','excellent'), status_message TEXT, industry_avg_score TINYINT UNSIGNED, -- Pul yo'qotish tahlili money_loss_analysis JSON, /* { "monthly_loss": 12500000, "yearly_loss": 150000000, "daily_loss": 420000, "breakdown": [ { "problem": "Noto'g'ri odamlarga reklama", "amount": 4200000, "solution_module": "dream-buyer", "solution_title": "Ideal Mijoz" } ] } */ -- O'xshash bizneslar similar_businesses JSON, /* { "total_count": 47, "success_stories": [ { "name": "ABC Academy", "industry": "Ta'lim", "before_score": 32, "after_score": 78, "growth_percent": 340, "duration_months": 4, "actions": ["Dream Buyer", "Telegram Bot", "Kafolat"] } ], "proven_tactics": [ { "tactic": "Bepul sinov darsi", "success_rate": 87, "avg_impact": "+45% leads" } ] } */ -- Ideal mijoz tahlili ideal_customer_analysis JSON, /* { "score": 18, "completeness_percent": 30, "demographics": { "age_range": "25-40", "occupation": "Biznes egasi", "location": "Toshkent" }, "problems": ["Vaqt yetishmaydi", "Qayerdan bilim olishni bilmaydi"], "desires": ["Tez natija", "Amaliy bilim"], "channels": {"telegram": 85, "instagram": 70, "youtube": 45}, "missing_fields": ["frustrations", "fears", "day_in_life"] } */ -- Taklif kuchi (Value Equation) offer_strength JSON, /* { "score": 25, "dream_outcome": 3, "perceived_likelihood": 2, "time_delay": 7, "effort_required": 8, "calculated_value": 0.11, "industry_avg_value": 2.5, "top_value": 8, "recommendations": [ { "element": "dream_outcome", "current": 3, "target": 8, "advice": "Aniqroq natija va'da qiling: '3 oyda B1 daraja'" } ] } */ -- Marketing kanallar channels_analysis JSON, /* { "instagram": { "connected": true, "score": 45, "followers": 2400, "engagement_rate": 1.2, "industry_avg_er": 3.5, "problems": ["Reels yo'q", "Stories kam"], "recommendations": ["Reels boshlang", "Kuniga 3-5 Stories"] }, "telegram": { "connected": false, "score": 0, "recommendation": "O'zbekistonda #1 platforma - ulang!" } } */ -- Sotuv voronkasi funnel_analysis JSON, /* { "overall_conversion": 0.2, "industry_avg": 2.5, "top_conversion": 8, "stages": [ { "name": "Ko'rish", "count": 1000, "percent": 100, "drop_rate": null }, { "name": "Qiziqish", "count": 30, "percent": 3, "drop_rate": 97, "problem": "Reklama matni qiziq emas", "solution": "Sarlavhani o'zgartiring" } ], "biggest_leak": { "stage": "Ko'rish ‚Üí Qiziqish", "loss_percent": 97, "estimated_loss": 3800000 } } */ -- Avtomatlashtirish automation_analysis JSON, /* { "score": 5, "industry_avg": 35, "chatbot_enabled": false, "followup_enabled": false, "lost_leads_percent": 40, "recommendations": ["AI Chatbot", "Follow-up sequences"] } */ -- Xavflar risks JSON, /* { "3_months": { "description": "Raqobatchilar oldinga ketadi", "estimated_loss": 45000000 }, "6_months": {...}, "12_months": {...} } */ -- Yo'l xaritasi action_plan JSON, /* { "total_time_hours": 9, "total_potential_savings": 16000000, "steps": [ { "order": 1, "title": "Ideal Mijozni aniqlang", "module_route": "/dream-buyer", "module_name": "Dream Buyer", "time_minutes": 30, "impact_stars": 5, "why": "Noto'g'ri odamlarga reklama qilsangiz, pul behuda ketadi", "similar_business_result": "Reklama samaradorligi 2-3x oshgan", "timeline": "today", "completed": false, "completed_at": null } ] } */ -- Kutilayotgan natijalar expected_results JSON, /* { "now": {"score": 38, "leads_weekly": 10, "conversion": 2, "revenue_change": 0}, "30_days": {"score": 52, "leads_weekly": 25, "conversion": 5, "revenue_change": 50}, "60_days": {"score": 68, "leads_weekly": 50, "conversion": 9, "revenue_change": 150}, "90_days": {"score": 82, "leads_weekly": 100, "conversion": 15, "revenue_change": 300} } */ -- Platforma tavsiyalari platform_recommendations JSON, /* [ { "problem_id": 1, "problem": "Ideal mijoz aniqlanmagan", "monthly_loss": 4200000, "module": { "name": "Dream Buyer", "route": "/dream-buyer", "description": "9 ta savolga javob berib, ideal mijozingizni aniqlang", "time_minutes": 30, "steps": ["9 ta savolga javob berish", "AI avatar yaratadi"], "ai_help": "AI sizga 'Ideal Mijoz Avatari' yaratib beradi", "video_url": "/videos/dream-buyer-guide" }, "expected_result": "Reklamangiz 2-3 baravar samaraliroq bo'ladi", "requires_upgrade": false } ] */ -- Video qo'llanmalar recommended_videos JSON, /* [ {"title": "Ideal Mijozni 30 daqiqada aniqlash", "duration": "4:32", "views": 2340, "url": "..."}, ] */ -- Meta ai_model VARCHAR(50) DEFAULT 'claude-3-sonnet', tokens_used INT UNSIGNED DEFAULT 0, generation_time_ms INT UNSIGNED, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, expires_at TIMESTAMP, FOREIGN KEY (business_id) REFERENCES businesses(id) ON DELETE CASCADE, INDEX idx_business_created (business_id, created_at DESC));2.2 industry_benchmarks jadvaliSoha bo'yicha benchmark ma'lumotlarni saqlash uchun:CREATE TABLE industry_benchmarks ( id CHAR(36) PRIMARY KEY, industry VARCHAR(100) NOT NULL, sub_industry VARCHAR(100), -- O'rtacha ko'rsatkichlar avg_health_score DECIMAL(5,2), avg_conversion_rate DECIMAL(5,2), avg_engagement_rate DECIMAL(5,2), avg_response_time_minutes INT, avg_repeat_purchase_rate DECIMAL(5,2), -- TOP 10% ko'rsatkichlar top_health_score DECIMAL(5,2), top_conversion_rate DECIMAL(5,2), top_engagement_rate DECIMAL(5,2), top_response_time_minutes INT, top_repeat_purchase_rate DECIMAL(5,2), -- Optimal parametrlar optimal_post_frequency_weekly INT, optimal_stories_daily INT, optimal_caption_length VARCHAR(20), optimal_hashtag_count VARCHAR(20), optimal_posting_times JSON, -- Ishlagan taktikalar proven_tactics JSON, /* [ {"tactic": "Bepul sinov darsi", "success_rate": 87}, {"tactic": "Telegram bot", "success_rate": 82} ] */ businesses_count INT UNSIGNED DEFAULT 0, last_calculated_at TIMESTAMP, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, UNIQUE KEY idx_industry (industry, sub_industry));2.3 business_success_stories jadvaliO'xshash bizneslarning muvaffaqiyat tarixi:CREATE TABLE business_success_stories ( id CHAR(36) PRIMARY KEY, business_id CHAR(36) NOT NULL, industry VARCHAR(100) NOT NULL, sub_industry VARCHAR(100), -- Natijalar initial_score TINYINT UNSIGNED, final_score TINYINT UNSIGNED, growth_percent DECIMAL(5,2), duration_months TINYINT UNSIGNED, -- Qilingan harakatlar actions_taken JSON, /* [ {"action": "Dream Buyer to'ldirdi", "module": "dream-buyer", "impact": "high"}, {"action": "Telegram uladi", "module": "integrations", "impact": "high"} ] */ -- Metrikalar o'zgarishi metrics_before JSON, metrics_after JSON, -- Display uchun display_name VARCHAR(100), is_anonymous BOOLEAN DEFAULT true, is_featured BOOLEAN DEFAULT false, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (business_id) REFERENCES businesses(id) ON DELETE CASCADE, INDEX idx_industry_score (industry, growth_percent DESC));2.4 diagnostic_action_progress jadvaliFoydalanuvchining diagnostikadagi qadamlarni bajarilishini kuzatish:CREATE TABLE diagnostic_action_progress ( id CHAR(36) PRIMARY KEY, diagnostic_id CHAR(36) NOT NULL, business_id CHAR(36) NOT NULL, step_order TINYINT UNSIGNED NOT NULL, step_title VARCHAR(255) NOT NULL, module_route VARCHAR(100), status ENUM('pending', 'in_progress', 'completed', 'skipped') DEFAULT 'pending', started_at TIMESTAMP NULL, completed_at TIMESTAMP NULL, -- Natija result_score_before TINYINT UNSIGNED, result_score_after TINYINT UNSIGNED, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, FOREIGN KEY (diagnostic_id) REFERENCES ai_diagnostics(id) ON DELETE CASCADE, FOREIGN KEY (business_id) REFERENCES businesses(id) ON DELETE CASCADE, UNIQUE KEY idx_diagnostic_step (diagnostic_id, step_order));3. CLAUDE API PROMPTS3.1 System PromptClaude AI ga diagnostika qilish uchun beriladigan system prompt:SYSTEM_PROMPT = """Sen BiznesPilot AI platformasining Biznes Diagnostika mutaxassisisisan. ## SENING VAZIFANG:O'zbekistondagi kichik va o'rta bizneslarning marketing holatini tahlil qilib,ODDIY O'ZBEK TILIDA tushunarli xulosalar berish. ## METODOLOGIYALAR:Sen 4 ta dunyo miqyosidagi marketing kitobining metodologiyalarini qo'llaysan: 1. **$100M Offers (Alex Hormozi)** - Value Equation: (Dream Outcome √ó Likelihood) / (Time √ó Effort) - Grand Slam Offer: Taqqoslab bo'lmaydigan taklif - Guarantee: Xavfni kamaytirish 2. **Sell Like Crazy (Sabri Suby)** - Dream Buyer: 9 ta savol orqali ideal mijozni aniqlash - HVCO: High Value Content Offer (bepul sovg'a) - Magic Lantern: Sotish voronkasi 3. **1-Page Marketing Plan (Allan Dib)** - USP: Unique Selling Proposition - 9-Square Canvas: Marketing rejasi - CLV: Customer Lifetime Value 4. **Marketing 5.0 (Philip Kotler)** - Data-driven qarorlar - Segments of One: Shaxsiylashtirish - Predictive analytics ## TAHLIL QOIDALARI: ### 1. TIL VA USLUB:- FAQAT O'ZBEK tilida yoz- Marketing terminlarini ODDIY tilda tushuntir- Har bir muammo uchun "Nima degani" va "Ta'siri" bo'lsin- Emoji ishlatishni davom ettir (üìä üí∞ ‚ö†Ô∏è ‚úÖ ‚ùå üî¥ üü° üü¢) ### 2. PUL HISOBLARI:- Barcha yo'qotishlarni SO'M da hisoblash- Oylik va yillik yo'qotishlarni ko'rsat- "Har o'tgan kun sizga X so'm turmoqda" formatida urgent qil ### 3. TAQQOSLASH:- Sohadagi o'rtacha bilan taqqosla- TOP 10% bilan taqqosla- O'xshash bizneslar misolini keltir ### 4. TAVSIYALAR:- Har bir muammo uchun aniq MODUL ko'rsat- Vaqtni ko'rsat (masalan: "30 daqiqa")- "Nima uchun" tushuntir- Platforma ichidagi route ko'rsat ### 5. SCORING TIZIMI:Umumiy ball (0-100) quyidagicha hisoblanadi:- Ideal Mijoz to'liqligi: 0-20 ball- Taklif kuchi (Value Equation): 0-20 ball- Kanallar holati: 0-20 ball- Sotuv voronkasi: 0-20 ball- Avtomatlashtirish darajasi: 0-20 ball Status darajalari:- 0-20: üò∞ Xavfli (critical)- 21-40: üòê Zaif (weak)- 41-60: üôÇ O'rta (medium)- 61-80: üòä Yaxshi (good)- 81-100: üöÄ Zo'r (excellent) ## JAVOB FORMATI:FAQAT JSON formatda javob ber. Boshqa hech narsa yozma.JSON strukturasi quyida berilgan user prompt da ko'rsatilgan."""3.2 User Prompt TemplateHar bir biznes uchun dinamik tarzda yaratiladigan user prompt:USER_PROMPT_TEMPLATE = """## BIZNES MA'LUMOTLARI ### Asosiy ma'lumotlar:- Nomi: {business_name}- Soha: {industry}- Yo'nalish: {sub_industry}- Biznes turi: {business_type}- Xodimlar soni: {employee_count}- Joylashuv: {location}- Veb-sayt: {website} ### Biznes maqsadlari:- Orzu qilingan natija: {dream_outcome}- Mijoz orzusi: {customer_dream}- Daromad maqsadi: {revenue_goal} so'm / {time_goal}- Asosiy muammo: {main_challenge} ### Dream Buyer (9 savol):1. Qayerda vaqt o'tkazadi: {where_spends_time}2. Ma'lumot manbasi: {information_sources}3. Eng katta muammolari: {frustrations}4. Nimani orzu qiladi: {dreams}5. Nimadan qo'rqadi: {fears}6. Afzal kanal: {preferred_channel}7. Til va jargon: {language_jargon}8. Kunlik hayoti: {day_in_life}9. Baxtli qiladigan narsalar: {happiness_factors} ### Ulangan kanallar:- Instagram: {instagram_connected} {instagram_stats}- Telegram: {telegram_connected} {telegram_stats}- AmoCRM: {amocrm_connected} ### Soha benchmark ma'lumotlari:{industry_benchmarks} ### O'xshash bizneslar muvaffaqiyat tarixi:{success_stories} --- ## VAZIFA Yuqoridagi ma'lumotlar asosida to'liq diagnostika qil.FAQAT quyidagi JSON strukturasida javob ber: { "overall_score": <0-100>, "status_level": "<critical|weak|medium|good|excellent>", "status_message": "<O'zbek tilida 2-3 gap bilan umumiy xulosa>", "industry_avg_score": <soha o'rtachasi>, "money_loss_analysis": { "monthly_loss": <oylik yo'qotish so'mda>, "yearly_loss": <yillik yo'qotish>, "daily_loss": <kunlik yo'qotish>, "breakdown": [ { "problem": "<muammo nomi o'zbekcha>", "amount": <oylik zarar>, "solution_module": "<module route>", "solution_title": "<module nomi o'zbekcha>" } ] }, "similar_businesses": { "total_count": <sohadagi bizneslar soni>, "success_stories": [ { "name": "<biznes nomi yoki 'O'xshash biznes'>", "industry": "<soha>", "before_score": <boshlang'ich ball>, "after_score": <hozirgi ball>, "growth_percent": <o'sish foizi>, "duration_months": <qancha oyda>, "actions": ["<qilingan harakatlar>"] } ], "proven_tactics": [ { "tactic": "<taktika nomi o'zbekcha>", "success_rate": <muvaffaqiyat foizi>, "avg_impact": "<o'rtacha ta'sir>" } ] }, "ideal_customer_analysis": { "score": <0-100>, "completeness_percent": <to'ldirilganlik foizi>, "demographics": { "age_range": "<yosh oralig'i>", "occupation": "<kasb>", "location": "<joylashuv>" }, "problems": ["<asosiy muammolar>"], "desires": ["<xohishlar>"], "channels": {"telegram": <foiz>, "instagram": <foiz>}, "missing_fields": ["<to'ldirilmagan maydonlar>"], "recommendation": "<tavsiya o'zbekcha>" }, "offer_strength": { "score": <0-100>, "dream_outcome": <1-10>, "perceived_likelihood": <1-10>, "time_delay": <1-10, yuqori = yomon>, "effort_required": <1-10, yuqori = yomon>, "calculated_value": <hisoblangan qiymat>, "industry_avg_value": 2.5, "top_value": 8, "recommendations": [ { "element": "<element nomi>", "current": <hozirgi qiymat>, "target": <maqsad qiymat>, "advice": "<tavsiya o'zbekcha>" } ] }, "channels_analysis": { "instagram": { "connected": <true|false>, "score": <0-100>, "followers": <soni>, "engagement_rate": <foiz>, "industry_avg_er": <soha o'rtachasi>, "problems": ["<muammolar>"], "recommendations": ["<tavsiyalar>"] }, "telegram": { "connected": <true|false>, "score": <0-100>, "recommendation": "<tavsiya>" } }, "funnel_analysis": { "overall_conversion": <umumiy konversiya foizi>, "industry_avg": <soha o'rtachasi>, "top_conversion": <TOP 10% ko'rsatkichi>, "stages": [ { "name": "<bosqich nomi o'zbekcha>", "count": <soni>, "percent": <foizi>, "drop_rate": <yo'qotish foizi>, "problem": "<muammo>", "solution": "<yechim>" } ], "biggest_leak": { "stage": "<qaysi bosqichda>", "loss_percent": <yo'qotish foizi>, "estimated_loss": <taxminiy zarar so'mda> } }, "automation_analysis": { "score": <0-100>, "industry_avg": <soha o'rtachasi>, "chatbot_enabled": <true|false>, "followup_enabled": <true|false>, "lost_leads_percent": <yo'qotilgan leadlar foizi>, "recommendations": ["<tavsiyalar>"] }, "risks": { "3_months": { "description": "<xavf tavsifi o'zbekcha>", "estimated_loss": <taxminiy zarar> }, "6_months": {...}, "12_months": {...} }, "action_plan": { "total_time_hours": <jami vaqt soatda>, "total_potential_savings": <jami tejash>, "steps": [ { "order": <tartib raqami>, "title": "<qadam nomi o'zbekcha>", "module_route": "<platforma route>", "module_name": "<modul nomi>", "time_minutes": <vaqt daqiqada>, "impact_stars": <1-5 ta'sir darajasi>, "why": "<nima uchun kerak o'zbekcha>", "similar_business_result": "<o'xshash biznes natijasi>", "timeline": "<today|this_week|next_week|month_1|month_2_3>", "requires_upgrade": <true|false>, "required_plan": "<STARTER|BASIC|GROWTH|SCALE>" } ] }, "expected_results": { "now": { "score": <hozirgi ball>, "leads_weekly": <haftalik leadlar>, "conversion": <konversiya foizi>, "revenue_change": 0 }, "30_days": {...}, "60_days": {...}, "90_days": {...} }, "platform_recommendations": [ { "problem_id": <tartib>, "problem": "<muammo o'zbekcha>", "monthly_loss": <oylik zarar>, "module": { "name": "<modul nomi>", "route": "<route>", "description": "<tavsif o'zbekcha>", "time_minutes": <vaqt>, "steps": ["<qadamlar>"], "ai_help": "<AI qanday yordam beradi>", "video_url": "<video route>" }, "expected_result": "<kutilayotgan natija o'zbekcha>", "requires_upgrade": <true|false>, "required_plan": "<tarif>" } ], "recommended_videos": [ { "title": "<video nomi o'zbekcha>", "duration": "<davomiyligi>", "views": <ko'rilganlar soni>, "url": "<route>", "related_module": "<tegishli modul>" } ]}"""4. BACKEND SERVICE4.1 DiagnosticsService.phpAsosiy service class strukturasi:<?php namespace App\Services; use App\Models\Business;use App\Models\AiDiagnostic;use App\Models\IndustryBenchmark;use App\Models\BusinessSuccessStory;use Illuminate\Support\Facades\Http;use Illuminate\Support\Facades\Cache;use Illuminate\Support\Str; class DiagnosticsService{ private string $claudeApiKey; private string $claudeModel = 'claude-3-sonnet-20240229'; private int $maxTokens = 4000; public function __construct() { $this->claudeApiKey = config('services.claude.api_key'); } /** * Diagnostikani boshlash */ public function runDiagnostics(Business $business): AiDiagnostic { // 1. Cache tekshirish (24 soat valid) $cacheKey = "diagnostics:{$business->id}"; $cached = Cache::get($cacheKey); if ($cached && !request()->get('force_refresh')) { return AiDiagnostic::find($cached); } // 2. Ma'lumotlarni yig'ish $businessData = $this->collectBusinessData($business); $benchmarks = $this->getIndustryBenchmarks($business->industry); $successStories = $this->getSuccessStories($business->industry); // 3. Prompt yaratish $systemPrompt = $this->getSystemPrompt(); $userPrompt = $this->buildUserPrompt($businessData, $benchmarks, $successStories); // 4. Claude API ga so'rov $startTime = microtime(true); $response = $this->callClaudeApi($systemPrompt, $userPrompt); $generationTime = (int)((microtime(true) - $startTime) * 1000); // 5. Javobni parse qilish $analysisData = $this->parseResponse($response); // 6. Database ga saqlash $diagnostic = $this->saveDiagnostic($business, $analysisData, $response, $generationTime); // 7. Action progress yaratish $this->createActionProgress($diagnostic); // 8. Cache ga saqlash Cache::put($cacheKey, $diagnostic->id, now()->addHours(24)); return $diagnostic; } /** * Biznes ma'lumotlarini yig'ish */ private function collectBusinessData(Business $business): array { return [ // Asosiy ma'lumotlar 'business_name' => $business->name, 'industry' => $business->industry, 'sub_industry' => $business->sub_industry, 'business_type' => $business->business_type, 'employee_count' => $business->employee_count, 'location' => $business->city ?? $business->region, 'website' => $business->website, // Maqsadlar (business_goals jadvalidan) 'dream_outcome' => $business->goals?->dream_outcome, 'customer_dream' => $business->goals?->customer_dream, 'revenue_goal' => $business->goals?->revenue_goal, 'time_goal' => $business->goals?->time_goal, 'main_challenge' => $business->goals?->main_challenge, // Dream Buyer (dream_buyers jadvalidan) 'where_spends_time' => $business->dreamBuyer?->where_spends_time, 'information_sources' => $business->dreamBuyer?->information_sources, 'frustrations' => $business->dreamBuyer?->frustrations, 'dreams' => $business->dreamBuyer?->dreams, 'fears' => $business->dreamBuyer?->fears, 'preferred_channel' => $business->dreamBuyer?->preferred_channel, 'language_jargon' => $business->dreamBuyer?->language_jargon, 'day_in_life' => $business->dreamBuyer?->day_in_life, 'happiness_factors' => $business->dreamBuyer?->happiness_factors, // Integratsiyalar 'instagram_connected' => $business->hasIntegration('instagram'), 'instagram_stats' => $this->getInstagramStats($business), 'telegram_connected' => $business->hasIntegration('telegram'), 'telegram_stats' => $this->getTelegramStats($business), 'amocrm_connected' => $business->hasIntegration('amocrm'), // Subscription 'current_plan' => $business->subscription?->plan ?? 'STARTER', ]; } /** * Industry benchmarks olish */ private function getIndustryBenchmarks(string $industry): array { $benchmark = IndustryBenchmark::where('industry', $industry)->first(); if (!$benchmark) { // Default qiymatlar return [ 'avg_health_score' => 50, 'avg_conversion_rate' => 2.5, 'avg_engagement_rate' => 3.5, 'top_health_score' => 85, 'top_conversion_rate' => 8, 'proven_tactics' => [] ]; } return $benchmark->toArray(); } /** * O'xshash bizneslar muvaffaqiyat tarixi */ private function getSuccessStories(string $industry, int $limit = 5): array { return BusinessSuccessStory::where('industry', $industry) ->where('growth_percent', '>', 50) ->orderBy('growth_percent', 'desc') ->limit($limit) ->get() ->map(fn($story) => [ 'name' => $story->is_anonymous ? "O'xshash biznes" : $story->display_name, 'before_score' => $story->initial_score, 'after_score' => $story->final_score, 'growth_percent' => $story->growth_percent, 'duration_months' => $story->duration_months, 'actions' => $story->actions_taken ]) ->toArray(); } /** * Claude API ga so'rov yuborish */ private function callClaudeApi(string $systemPrompt, string $userPrompt): array { $response = Http::withHeaders([ 'x-api-key' => $this->claudeApiKey, 'anthropic-version' => '2023-06-01', 'content-type' => 'application/json' ])->post('https://api.anthropic.com/v1/messages', [ 'model' => $this->claudeModel, 'max_tokens' => $this->maxTokens, 'system' => $systemPrompt, 'messages' => [ ['role' => 'user', 'content' => $userPrompt] ] ]); if (!$response->successful()) { throw new \Exception('Claude API error: ' . $response->body()); } $data = $response->json(); return [ 'content' => $data['content'][0]['text'] ?? '', 'tokens' => ($data['usage']['input_tokens'] ?? 0) + ($data['usage']['output_tokens'] ?? 0) ]; } /** * Javobni parse qilish */ private function parseResponse(array $response): array { $content = $response['content']; // JSON ni ajratib olish preg_match('/\{.*\}/s', $content, $matches); if (empty($matches)) { throw new \Exception('Could not parse JSON from response'); } $data = json_decode($matches[0], true); if (json_last_error() !== JSON_ERROR_NONE) { throw new \Exception('Invalid JSON: ' . json_last_error_msg()); } return $data; } /** * Diagnostikani saqlash */ private function saveDiagnostic( Business $business, array $data, array $response, int $generationTime ): AiDiagnostic { return AiDiagnostic::create([ 'id' => Str::uuid(), 'business_id' => $business->id, 'overall_score' => $data['overall_score'], 'status_level' => $data['status_level'], 'status_message' => $data['status_message'], 'industry_avg_score' => $data['industry_avg_score'], 'money_loss_analysis' => $data['money_loss_analysis'], 'similar_businesses' => $data['similar_businesses'], 'ideal_customer_analysis' => $data['ideal_customer_analysis'], 'offer_strength' => $data['offer_strength'], 'channels_analysis' => $data['channels_analysis'], 'funnel_analysis' => $data['funnel_analysis'], 'automation_analysis' => $data['automation_analysis'], 'risks' => $data['risks'], 'action_plan' => $data['action_plan'], 'expected_results' => $data['expected_results'], 'platform_recommendations' => $data['platform_recommendations'], 'recommended_videos' => $data['recommended_videos'], 'ai_model' => $this->claudeModel, 'tokens_used' => $response['tokens'], 'generation_time_ms' => $generationTime, 'expires_at' => now()->addDays(7) ]); } /** * Action progress yaratish */ private function createActionProgress(AiDiagnostic $diagnostic): void { $steps = $diagnostic->action_plan['steps'] ?? []; foreach ($steps as $step) { $diagnostic->actionProgress()->create([ 'id' => Str::uuid(), 'business_id' => $diagnostic->business_id, 'step_order' => $step['order'], 'step_title' => $step['title'], 'module_route' => $step['module_route'], 'status' => 'pending' ]); } } /** * Qadamni completed qilish */ public function markStepCompleted(AiDiagnostic $diagnostic, int $stepOrder): void { $progress = $diagnostic->actionProgress() ->where('step_order', $stepOrder) ->first(); if ($progress) { $progress->update([ 'status' => 'completed', 'completed_at' => now() ]); // Agar barcha qadamlar bajarilgan bo'lsa - qayta diagnostika tavsiya qilish $this->checkAllStepsCompleted($diagnostic); } }} 4.2 API EndpointsDiagnosticsController.php:<?php namespace App\Http\Controllers\Api; use App\Http\Controllers\Controller;use App\Services\DiagnosticsService;use App\Http\Resources\DiagnosticResource;use Illuminate\Http\Request; class DiagnosticsController extends Controller{ public function __construct(private DiagnosticsService $diagnosticsService) {} /** * GET /api/v1/businesses/{business}/diagnostics * Mavjud diagnostikani olish */ public function show(Business $business) { $this->authorize('view', $business); $diagnostic = $business->latestDiagnostic; if (!$diagnostic) { return response()->json([ 'data' => null, 'message' => 'Diagnostika topilmadi. Yangi diagnostika boshlang.' ]); } return new DiagnosticResource($diagnostic); } /** * POST /api/v1/businesses/{business}/diagnostics * Yangi diagnostika boshlash */ public function store(Request $request, Business $business) { $this->authorize('update', $business); try { $diagnostic = $this->diagnosticsService->runDiagnostics($business); return new DiagnosticResource($diagnostic); } catch (\Exception $e) { return response()->json([ 'error' => 'Diagnostika yaratishda xatolik', 'message' => $e->getMessage() ], 500); } } /** * POST /api/v1/diagnostics/{diagnostic}/steps/{stepOrder}/complete * Qadamni bajarilgan deb belgilash */ public function completeStep(AiDiagnostic $diagnostic, int $stepOrder) { $this->authorize('update', $diagnostic->business); $this->diagnosticsService->markStepCompleted($diagnostic, $stepOrder); return response()->json([ 'success' => true, 'message' => 'Qadam bajarildi' ]); } /** * GET /api/v1/diagnostics/{diagnostic}/pdf * PDF export */ public function exportPdf(AiDiagnostic $diagnostic) { $this->authorize('view', $diagnostic->business); $pdf = PDF::loadView('diagnostics.pdf', [ 'diagnostic' => $diagnostic ]); return $pdf->download('biznes-diagnostika.pdf'); } /** * POST /api/v1/diagnostics/{diagnostic}/email * Email ga yuborish */ public function sendEmail(Request $request, AiDiagnostic $diagnostic) { $this->authorize('view', $diagnostic->business); $request->validate([ 'email' => 'required|email' ]); // Email yuborish Mail::to($request->email)->send(new DiagnosticReportMail($diagnostic)); return response()->json([ 'success' => true, 'message' => 'Diagnostika emailga yuborildi' ]); }} 4.3 API Routes// routes/api.php Route::middleware(['auth:sanctum'])->prefix('v1')->group(function () { // Diagnostics Route::prefix('businesses/{business}')->group(function () { Route::get('diagnostics', [DiagnosticsController::class, 'show']); Route::post('diagnostics', [DiagnosticsController::class, 'store']); }); Route::prefix('diagnostics/{diagnostic}')->group(function () { Route::post('steps/{stepOrder}/complete', [DiagnosticsController::class, 'completeStep']); Route::get('pdf', [DiagnosticsController::class, 'exportPdf']); Route::post('email', [DiagnosticsController::class, 'sendEmail']); }); // Industry benchmarks (admin only) Route::middleware('admin')->group(function () { Route::apiResource('industry-benchmarks', IndustryBenchmarkController::class); Route::post('industry-benchmarks/recalculate', [IndustryBenchmarkController::class, 'recalculate']); });}); 5. FRONTEND COMPONENTS5.1 Komponentlar Strukturasiresources/js/‚îú‚îÄ‚îÄ pages/‚îÇ ‚îî‚îÄ‚îÄ diagnostics/‚îÇ ‚îú‚îÄ‚îÄ DiagnosticsPage.vue # Asosiy sahifa‚îÇ ‚îî‚îÄ‚îÄ components/‚îÇ ‚îú‚îÄ‚îÄ DiagnosticsStart.vue # Boshlash tugmasi‚îÇ ‚îú‚îÄ‚îÄ DiagnosticsLoading.vue # Loading holati‚îÇ ‚îú‚îÄ‚îÄ DiagnosticsResult.vue # Natijalar wrapper‚îÇ ‚îú‚îÄ‚îÄ OverallScore.vue # Umumiy ball‚îÇ ‚îú‚îÄ‚îÄ MoneyLossCard.vue # Pul yo'qotish‚îÇ ‚îú‚îÄ‚îÄ SimilarBusinesses.vue # O'xshash bizneslar‚îÇ ‚îú‚îÄ‚îÄ IdealCustomer.vue # Ideal mijoz tahlili‚îÇ ‚îú‚îÄ‚îÄ OfferStrength.vue # Taklif kuchi‚îÇ ‚îú‚îÄ‚îÄ ChannelsAnalysis.vue # Kanallar‚îÇ ‚îú‚îÄ‚îÄ FunnelAnalysis.vue # Voronka‚îÇ ‚îú‚îÄ‚îÄ RisksWarning.vue # Xavflar‚îÇ ‚îú‚îÄ‚îÄ ActionPlan.vue # Yo'l xaritasi‚îÇ ‚îú‚îÄ‚îÄ ExpectedResults.vue # Kutilayotgan natijalar‚îÇ ‚îú‚îÄ‚îÄ PlatformFixes.vue # Platforma tavsiyalari‚îÇ ‚îú‚îÄ‚îÄ VideoGuides.vue # Video qo'llanmalar‚îÇ ‚îî‚îÄ‚îÄ HelpSection.vue # Yordam‚îÇ‚îú‚îÄ‚îÄ stores/‚îÇ ‚îî‚îÄ‚îÄ diagnosticsStore.js # Pinia store‚îÇ‚îî‚îÄ‚îÄ composables/ ‚îî‚îÄ‚îÄ useDiagnostics.js # Composable 5.2 diagnosticsStore.js// stores/diagnosticsStore.jsimport { defineStore } from 'pinia'import { ref, computed } from 'vue'import axios from 'axios' export const useDiagnosticsStore = defineStore('diagnostics', () => { // State const diagnostic = ref(null) const loading = ref(false) const error = ref(null) const generating = ref(false) // Getters const hasData = computed(() => !!diagnostic.value) const overallScore = computed(() => diagnostic.value?.overall_score ?? 0) const statusEmoji = computed(() => { const score = overallScore.value if (score <= 20) return 'üò∞' if (score <= 40) return 'üòê' if (score <= 60) return 'üôÇ' if (score <= 80) return 'üòä' return 'üöÄ' }) const completedSteps = computed(() => { if (!diagnostic.value?.action_plan?.steps) return 0 return diagnostic.value.action_plan.steps.filter(s => s.completed).length }) const totalSteps = computed(() => { return diagnostic.value?.action_plan?.steps?.length ?? 0 }) const progress = computed(() => { if (totalSteps.value === 0) return 0 return Math.round((completedSteps.value / totalSteps.value) * 100) }) // Actions async function fetchDiagnostic(businessId) { loading.value = true error.value = null try { const response = await axios.get(`/api/v1/businesses/${businessId}/diagnostics`) diagnostic.value = response.data.data } catch (e) { error.value = e.response?.data?.message ?? 'Xatolik yuz berdi' } finally { loading.value = false } } async function generateDiagnostic(businessId) { generating.value = true error.value = null try { const response = await axios.post(`/api/v1/businesses/${businessId}/diagnostics`) diagnostic.value = response.data.data } catch (e) { error.value = e.response?.data?.message ?? 'Diagnostika yaratishda xatolik' } finally { generating.value = false } } async function completeStep(stepOrder) { if (!diagnostic.value) return try { await axios.post(`/api/v1/diagnostics/${diagnostic.value.id}/steps/${stepOrder}/complete`) // Local update const step = diagnostic.value.action_plan.steps.find(s => s.order === stepOrder) if (step) { step.completed = true step.completed_at = new Date().toISOString() } } catch (e) { console.error('Step complete error:', e) } } async function downloadPdf() { if (!diagnostic.value) return try { const response = await axios.get( `/api/v1/diagnostics/${diagnostic.value.id}/pdf`, { responseType: 'blob' } ) const url = window.URL.createObjectURL(new Blob([response.data])) const link = document.createElement('a') link.href = url link.setAttribute('download', 'biznes-diagnostika.pdf') document.body.appendChild(link) link.click() link.remove() } catch (e) { error.value = 'PDF yuklashda xatolik' } } async function sendEmail(email) { if (!diagnostic.value) return try { await axios.post(`/api/v1/diagnostics/${diagnostic.value.id}/email`, { email }) return true } catch (e) { error.value = 'Email yuborishda xatolik' return false } } function reset() { diagnostic.value = null error.value = null } return { // State diagnostic, loading, error, generating, // Getters hasData, overallScore, statusEmoji, completedSteps, totalSteps, progress, // Actions fetchDiagnostic, generateDiagnostic, completeStep, downloadPdf, sendEmail, reset }}) 5.3 DiagnosticsPage.vue<template> <div class="diagnostics-page"> <!-- Loading State --> <DiagnosticsLoading v-if="store.generating" /> <!-- Start State (no data) --> <DiagnosticsStart v-else-if="!store.hasData" @start="handleStart" :loading="store.loading" /> <!-- Results --> <div v-else class="diagnostics-results"> <!-- Header --> <div class="results-header"> <h1>üè• Biznes Sog'ligi Diagnostikasi</h1> <p class="subtitle">{{ business.name }} | {{ formattedDate }}</p> <div class="header-actions"> <button @click="store.downloadPdf" class="btn-secondary"> üì• PDF Yuklash </button> <button @click="showEmailModal = true" class="btn-secondary"> üìß Emailga </button> <button @click="handleRefresh" class="btn-secondary"> üîÑ Qayta Tahlil </button> </div> </div> <!-- Overall Score --> <OverallScore :score="store.diagnostic.overall_score" :status="store.diagnostic.status_level" :message="store.diagnostic.status_message" :industryAvg="store.diagnostic.industry_avg_score" /> <!-- Money Loss --> <MoneyLossCard :data="store.diagnostic.money_loss_analysis" /> <!-- Similar Businesses --> <SimilarBusinesses :data="store.diagnostic.similar_businesses" /> <!-- Ideal Customer --> <IdealCustomer :data="store.diagnostic.ideal_customer_analysis" /> <!-- Offer Strength --> <OfferStrength :data="store.diagnostic.offer_strength" /> <!-- Channels --> <ChannelsAnalysis :data="store.diagnostic.channels_analysis" /> <!-- Funnel --> <FunnelAnalysis :data="store.diagnostic.funnel_analysis" /> <!-- Risks --> <RisksWarning :data="store.diagnostic.risks" /> <!-- Action Plan --> <ActionPlan :data="store.diagnostic.action_plan" @complete="handleStepComplete" /> <!-- Expected Results --> <ExpectedResults :data="store.diagnostic.expected_results" /> <!-- Platform Fixes --> <PlatformFixes :data="store.diagnostic.platform_recommendations" /> <!-- Video Guides --> <VideoGuides :data="store.diagnostic.recommended_videos" /> <!-- Help Section --> <HelpSection /> <!-- CTA --> <div class="cta-section"> <router-link :to="firstStepRoute" class="btn-primary btn-large" > üöÄ Birinchi Qadamni Boshlash </router-link> </div> </div> <!-- Email Modal --> <EmailModal v-if="showEmailModal" @close="showEmailModal = false" @send="handleSendEmail" /> </div></template> <script setup>import { ref, computed, onMounted } from 'vue'import { useRoute } from 'vue-router'import { useDiagnosticsStore } from '@/stores/diagnosticsStore'import { useBusinessStore } from '@/stores/businessStore'// ... import components const route = useRoute()const store = useDiagnosticsStore()const businessStore = useBusinessStore() const showEmailModal = ref(false) const business = computed(() => businessStore.currentBusiness)const formattedDate = computed(() => { if (!store.diagnostic?.created_at) return '' return new Date(store.diagnostic.created_at).toLocaleDateString('uz-UZ')}) const firstStepRoute = computed(() => { const steps = store.diagnostic?.action_plan?.steps ?? [] const firstIncomplete = steps.find(s => !s.completed) return firstIncomplete?.module_route ?? '/dashboard'}) onMounted(async () => { const businessId = route.params.businessId await store.fetchDiagnostic(businessId)}) async function handleStart() { const businessId = route.params.businessId await store.generateDiagnostic(businessId)} async function handleRefresh() { if (confirm('Qayta tahlil qilishni xohlaysizmi?')) { const businessId = route.params.businessId await store.generateDiagnostic(businessId) }} function handleStepComplete(stepOrder) { store.completeStep(stepOrder)} async function handleSendEmail(email) { const success = await store.sendEmail(email) if (success) { showEmailModal.value = false }}</script> 5.4 OverallScore.vue<template> <div class="overall-score-card"> <h2>1Ô∏è‚É£ Umumiy Holat</h2> <div class="score-display"> <!-- Visual Scale --> <div class="score-scale"> <div class="scale-bar"> <div class="scale-marker" :style="{ left: score + '%' }" > <span class="marker-score">{{ score }}/100</span> </div> </div> <div class="scale-labels"> <span>üò∞ Xavfli</span> <span>üòê Zaif</span> <span>üôÇ O'rta</span> <span>üòä Yaxshi</span> <span>üöÄ Zo'r</span> </div> <div class="scale-numbers"> <span>0-20</span> <span>21-40</span> <span>41-60</span> <span>61-80</span> <span>81-100</span> </div> </div> <!-- Comparison --> <div class="score-comparison"> <div class="comparison-item"> <span class="label">üìä Sohangizdagi o'rtacha:</span> <span class="value">{{ industryAvg }}/100</span> </div> <div class="comparison-item" :class="{ 'negative': score < industryAvg, 'positive': score >= industryAvg }" > <span class="label"> {{ score < industryAvg ? 'üìâ' : 'üìà' }} Siz o'rtachadan: </span> <span class="value"> {{ Math.abs(score - industryAvg) }} ball {{ score < industryAvg ? 'PAST' : 'YUQORI' }} </span> </div> </div> </div> <!-- Status Message --> <div class="status-message" :class="status"> <span class="emoji">{{ statusEmoji }}</span> <p>{{ message }}</p> </div> </div></template> <script setup>import { computed } from 'vue' const props = defineProps({ score: { type: Number, required: true }, status: { type: String, required: true }, message: { type: String, required: true }, industryAvg: { type: Number, required: true }}) const statusEmoji = computed(() => { const emojis = { critical: 'üò∞', weak: 'üòê', medium: 'üôÇ', good: 'üòä', excellent: 'üöÄ' } return emojis[props.status] || 'üòê'})</script> <style scoped>.overall-score-card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 24px;} .score-scale { margin: 24px 0;} .scale-bar { height: 12px; background: linear-gradient(to right, #ef4444, #f97316, #eab308, #22c55e, #3b82f6); border-radius: 6px; position: relative;} .scale-marker { position: absolute; top: -8px; transform: translateX(-50%);} .marker-score { background: #1a365d; color: white; padding: 4px 12px; border-radius: 16px; font-weight: bold; white-space: nowrap;} .scale-labels, .scale-numbers { display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; color: #64748b;} .status-message { display: flex; align-items: flex-start; gap: 12px; padding: 16px; border-radius: 8px; margin-top: 24px;} .status-message.critical { background: #fef2f2; }.status-message.weak { background: #fffbeb; }.status-message.medium { background: #f0fdf4; }.status-message.good { background: #eff6ff; }.status-message.excellent { background: #f0f9ff; } .status-message .emoji { font-size: 32px;} .comparison-item.negative .value { color: #ef4444; }.comparison-item.positive .value { color: #22c55e; }</style> 5.5 PlatformFixes.vue<template> <div class="platform-fixes-card"> <h2>üõ†Ô∏è Platforma Orqali Tuzatish</h2> <p class="subtitle">Har bir muammoni shu yerda hal qiling</p> <div class="fixes-list"> <div v-for="item in data" :key="item.problem_id" class="fix-item" :class="{ 'requires-upgrade': item.requires_upgrade }" > <!-- Problem Header --> <div class="fix-header"> <span class="priority-badge" :class="getPriorityClass(item.problem_id)"> {{ getPriorityLabel(item.problem_id) }} </span> <h3>{{ item.problem }}</h3> <span class="monthly-loss"> üí∏ {{ formatMoney(item.monthly_loss) }} so'm/oy </span> </div> <!-- Module Info --> <div class="module-info"> <div class="module-header"> <span class="module-icon">üìç</span> <span class="module-name">MODUL: "{{ item.module.name }}"</span> </div> <p class="module-description">{{ item.module.description }}</p> <!-- Steps --> <div class="module-steps"> <h4>üìã Nima qilasiz:</h4> <ul> <li v-for="(step, i) in item.module.steps" :key="i">{{ step }}</li> </ul> </div> <!-- Meta --> <div class="module-meta"> <span class="meta-item"> ‚è±Ô∏è {{ item.module.time_minutes }} daqiqa </span> <span class="meta-item"> üìà {{ item.expected_result }} </span> </div> <!-- AI Help --> <div class="ai-help" v-if="item.module.ai_help"> <span class="ai-icon">üí°</span> <span>AI YORDAM: {{ item.module.ai_help }}</span> </div> <!-- Upgrade Notice --> <div class="upgrade-notice" v-if="item.requires_upgrade"> <span>‚ö†Ô∏è Bu funksiya {{ item.required_plan }} tarifdan boshlanadi</span> <router-link to="/settings/subscription" class="upgrade-link"> Tarifni oshirish </router-link> </div> <!-- CTA Button --> <router-link :to="item.module.route" class="module-cta" :class="{ 'disabled': item.requires_upgrade }" > üöÄ {{ item.requires_upgrade ? 'TARIFNI OSHIRING' : 'HOZIROQ BOSHLASH' }} </router-link> <!-- Video Link --> <a v-if="item.module.video_url" :href="item.module.video_url" class="video-link" target="_blank" > üé• Video qo'llanma ko'rish </a> </div> </div> </div> </div></template> <script setup>const props = defineProps({ data: { type: Array, required: true }}) function formatMoney(amount) { return new Intl.NumberFormat('uz-UZ').format(amount)} function getPriorityClass(id) { if (id <= 2) return 'critical' if (id <= 4) return 'important' return 'improvement'} function getPriorityLabel(id) { if (id <= 2) return 'üî¥ KRITIK' if (id <= 4) return 'üü° MUHIM' return 'üü¢ YAXSHILASH'}</script> <style scoped>.platform-fixes-card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 24px;} .fix-item { border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin-bottom: 16px;} .fix-item.requires-upgrade { opacity: 0.8; border-color: #fbbf24;} .fix-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; flex-wrap: wrap;} .priority-badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: bold;} .priority-badge.critical { background: #fef2f2; color: #dc2626; }.priority-badge.important { background: #fffbeb; color: #d97706; }.priority-badge.improvement { background: #f0fdf4; color: #16a34a; } .monthly-loss { margin-left: auto; color: #dc2626; font-weight: 600;} .module-info { background: #f8fafc; border-radius: 8px; padding: 16px;} .module-cta { display: block; text-align: center; background: #3b82f6; color: white; padding: 12px 24px; border-radius: 8px; font-weight: 600; text-decoration: none; margin-top: 16px;} .module-cta:hover { background: #2563eb;} .module-cta.disabled { background: #94a3b8; cursor: not-allowed;} .ai-help { background: #fef3c7; padding: 12px; border-radius: 6px; margin-top: 12px; display: flex; gap: 8px;} .upgrade-notice { background: #fef2f2; padding: 12px; border-radius: 6px; margin-top: 12px; display: flex; justify-content: space-between; align-items: center;} .video-link { display: block; text-align: center; color: #3b82f6; margin-top: 12px;}</style> 6. TOKEN OPTIMALLASHTIRISH6.1 StrategiyaNatijalarni database ga saqlash (24 soat cache)Faqat o'zgargan ma'lumotlar bo'lganda qayta generate qilishBiznes ma'lumotlarini prompt da ixcham formatlashFaqat zarur fieldlarni yuborish (null bo'lganlarni skip)Industry benchmarks ni oldindan hisoblash (real-time emas)6.2 Token Sarfi TaxminiElementInput TokensOutput TokensSystem Prompt~800-User Prompt (biznes data)~1200-JSON Response-~2500JAMI~2000~2500Har bir diagnostika uchun taxminan 4500 token sarflanadi. Claude Sonnet narxlari bilan hisoblasak:Input: $3/1M tokens ‚Üí $0.006Output: $15/1M tokens ‚Üí $0.0375Jami: ~$0.04 per diagnostika7. IMPLEMENTATION QADAMLARI7.1 Backend (3-4 kun)Database migrations yaratishModel va RelationshipsDiagnosticsService yaratishClaude API integrationAPI Controllers va RoutesPDF Export (Laravel DomPDF)Email notification7.2 Frontend (4-5 kun)Pinia storeDiagnosticsPage layoutBarcha child komponentlar (15+ ta)Responsive designLoading va error statesAnimations7.3 Testing va Polish (2 kun)Unit testsIntegration testsManual QAPerformance optimization7.4 Jami: ~10 ish kuni8. APPENDIX8.1 Module Routes MappingMuammoModulRouteIdeal mijoz aniqlanmaganDream Buyer/dream-buyerTaklif zaifOffer Builder/offer-builderLead Magnet yo'qHVCO Builder/offer-builder/hvcoTelegram ulanmaganIntegrations/settings/integrations/telegramInstagram strategiya yo'qMarketing Analytics/analytics/instagram24/7 javob yo'qAI Chatbot/ai-chatbotFollow-up yo'qCampaigns/campaigns/sequencesTakroriy sotish yo'qSales Analytics/sales/repeatRaqobatchilar noma'lumCompetitor Intel/competitorsAmoCRM ulanmaganIntegrations/settings/integrations/amocrm--- HUJJAT OXIRI ---